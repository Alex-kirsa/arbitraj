2024-02-15T16:08:06.409530+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (12208), thread 'MainThread' (13100):
Traceback (most recent call last):

  File "asyncpg\protocol\prepared_stmt.pyx", line 175, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
    codec.encode(self.settings, writer, arg)
  File "asyncpg\protocol\codecs/base.pyx", line 227, in asyncpg.protocol.protocol.Codec.encode
    return self.encoder(self, settings, buf, obj)
  File "asyncpg\protocol\codecs/base.pyx", line 129, in asyncpg.protocol.protocol.Codec.encode_scalar
    self.c_encoder(settings, buf, obj)
  File "asyncpg\pgproto\./codecs/text.pyx", line 29, in asyncpg.pgproto.pgproto.text_encode
    as_pg_string_and_size(settings, obj, &str, &size)
  File "asyncpg\pgproto\./codecs/text.pyx", line 12, in asyncpg.pgproto.pgproto.as_pg_string_and_size
    raise TypeError('expected str, got {}'.format(type(obj).__name__))

TypeError: expected str, got int


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('sub_channel_id', 1960731769)
    │    │             │             └ <function PreparedStatement.fetch at 0x000001FA2DB3FCE0>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001FA2DBCBFB0>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('sub_channel_id', 1960731769)
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001FA2DBCBFB0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001FA2DBCBFB0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000001FA2DAAE570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000001FA2DBE53A0>
  File "asyncpg\protocol\protocol.pyx", line 186, in bind_execute
    args_buf = state._encode_bind_msg(args)
  File "asyncpg\protocol\prepared_stmt.pyx", line 204, in asyncpg.protocol.protocol.PreparedStatementState._encode_bind_msg
    raise exceptions.DataError(
          │          └ <class 'asyncpg.exceptions.DataError'>
          └ <module 'asyncpg.exceptions' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\.venv\\Lib\\site-packages\\asyncpg\\exceptions\\...

asyncpg.exceptions.DataError: invalid input for query argument $2: 1960731769 (expected str, got int)


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001FA2D2F1800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001FA2D9B8850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('sub_channel_id', 1960731769)
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001FA2D7FAF20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001FA2DB65480>
           └ <_AsyncIoGreenlet object at 0x000001FA2B9436C0 (otid=0x000001FA2BCED800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001FA2DB65480>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001FA2D7FAD40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ DataError('invalid input for query argument $2: 1960731769 (expected str, got int)')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ DataError('invalid input for query argument $2: 1960731769 (expected str, got int)')
          └ Error("<class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: 1960731769 (expected str, got int)")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: 1960731769 (expected str, got int)


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 110, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001FA2DA87CE0>
    │       └ <function run at 0x000001FA255BC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001FA2DA64640>
           │      └ <function Runner.run at 0x000001FA2564C9A0>
           └ <asyncio.runners.Runner object at 0x000001FA2D6DE890>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001FA2564A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001FA2D6DE890>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001FA2571A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FA2564C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FA2558DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001FA2D97FC90>
          └ <function add_default_bot_settings at 0x000001FA2D8F2520>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 53, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x000001FA2DBD6010>
          │       └ <function AsyncSession.execute at 0x000001FA2D6E1EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001FA2D97FC90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001FA2BD3CB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001FA2B9436C0 (otid=0x000001FA2BCED800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001FA2D60E700>
           └ <sqlalchemy.orm.session.Session object at 0x000001FA2D97F510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x000001FA2D5D6520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001FA2D21A0C0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x000001FA2D98BF90>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001FA2D21A3E0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001FA2D21A5C0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001FA2D21A660>
           └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001FA2D21A8E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error("<class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: 1960731769 (expected str, got int)")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error("<class 'asyncpg.exceptions.DataError...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError("(sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query ar...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001FA2D2F1800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001FA2D9B8850>
    └ <sqlalchemy.engine.base.Connection object at 0x000001FA2D97FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('sub_channel_id', 1960731769)
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001FA2D7FAF20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001FA2DB65480>
           └ <_AsyncIoGreenlet object at 0x000001FA2B9436C0 (otid=0x000001FA2BCED800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001FA2DB65480>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001FA2D7FAD40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ DataError('invalid input for query argument $2: 1960731769 (expected str, got int)')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001FA2DB5E9E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ DataError('invalid input for query argument $2: 1960731769 (expected str, got int)')
          └ Error("<class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: 1960731769 (expected str, got int)")

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.DataError'>: invalid input for query argument $2: 1960731769 (expected str, got int)
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('sub_channel_id', 1960731769)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-15T16:08:40.349642+0200 INFO Bot started!
2024-02-15T16:08:45.519341+0200 INFO 127.0.0.1 [15/Feb/2024:16:08:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:08:49.560568+0200 INFO Update id=925008616 is not handled. Duration 4046 ms by bot id=5646878393
2024-02-15T16:08:49.600569+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError('Error 22 connecting to localhost:6379. 22.')>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 243, in connect
    await self.retry.call_with_retry(
          │    │     └ <function Retry.call_with_retry at 0x0000024C3D0602C0>
          │    └ <redis.asyncio.retry.Retry object at 0x0000024C3F80D940>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
                 └ <function AbstractConnection.connect.<locals>.<lambda> at 0x0000024C3FC8BEC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 650, in _connect
    reader, writer = await asyncio.open_connection(
                           │       └ <function open_connection at 0x0000024C3716CCC0>
                           └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                         │    └ <function BaseEventLoop.create_connection at 0x0000024C3716B380>
                         └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1078, in create_connection
    raise exceptions[0]
          └ [ConnectionRefusedError(22, 'The remote computer refused the network connection', None, 1225, None), ConnectionRefusedError(2...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1058, in create_connection
    sock = await self._connect_sock(
                 │    └ <function BaseEventLoop._connect_sock at 0x0000024C3716B2E0>
                 └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 964, in _connect_sock
    await self.sock_connect(sock, address)
          │    │            │     └ ('::1', 6379, 0, 0)
          │    │            └ <socket.socket [closed] fd=-1, family=23, type=1, proto=0>
          │    └ <function BaseProactorEventLoop.sock_connect at 0x0000024C371D20C0>
          └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 722, in sock_connect
    return await self._proactor.connect(sock, address)
                 │    │         │       │     └ ('::1', 6379, 0, 0)
                 │    │         │       └ <socket.socket [closed] fd=-1, family=23, type=1, proto=0>
                 │    │         └ <function IocpProactor.connect at 0x0000024C3724AF20>
                 │    └ <IocpProactor overlapped#=5 result#=0>
                 └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x0000024C3FC80FF0>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.connect.<locals>.finish_connect at 0x0000024C3FC8BCE0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 624, in finish_connect
    ov.getresult()
    │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
    └ <_overlapped.Overlapped object at 0x0000024C3FC80FF0>

ConnectionRefusedError: [WinError 1225] The remote computer refused the network connection


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000024C3F7F9E90>
                   │    │          │                   │           └ {'update_id': 925008616, 'message': {'message_id': 61451, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000024C3F76E750>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000024C3CFF1B20>
                   │    └ <Dispatcher '0x24c3f601c50'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000024C3F7F9E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008616, message=Message(message_id=61451, date=datetime.datetime(2024, 2, 15, 14, 8, 43, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000024C3F76E750>
                 │    └ <function Dispatcher.feed_update at 0x0000024C3CFF1A80>
                 └ <Dispatcher '0x24c3f601c50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000024C3CFF0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000024C3F562D10>
                     └ <Dispatcher '0x24c3f601c50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x24c3f601c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008616, message=Message(message_id=61451, date=datetime.datetime(2024, 2, 15, 14, 8, 43, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000024C3F79CB10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x24c3f601c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008616, message=Message(message_id=61451, date=datetime.datetime(2024, 2, 15, 14, 8, 43, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000024C3F79C710>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x0000024C3F6C5750>
               │    │                └ <function RedisEventIsolation.lock at 0x0000024C3D194FE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000024C3D881D10>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000024C3F79C710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x0000024C3FE2D030>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x0000024C3F5443D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000024C3D881D10>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x0000024C3D14CFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000024C3D881D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x0000024C3D088CC0>
             └ <redis.asyncio.lock.Lock object at 0x0000024C3F80F150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'bb5d2186cc0b11eea64be89c25466699'
             │    └ <function Lock.do_acquire at 0x0000024C3D088D60>
             └ <redis.asyncio.lock.Lock object at 0x0000024C3F80F150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'bb5d2186cc0b11eea64be89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x0000024C3F80F150>
             │    │     └ <function BasicKeyCommands.set at 0x0000024C3D121F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
             └ <redis.asyncio.lock.Lock object at 0x0000024C3F80F150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x0000024C3D088180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=0>
          │    └ <function ConnectionPool.ensure_connection at 0x0000024C3D088360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x0000024C3D082480>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 251, in connect
    raise ConnectionError(self._error_message(e))
          │               │    └ <function Connection._error_message at 0x0000024C3D0831A0>
          │               └ Connection<host=localhost,port=6379,db=0>
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379. 22.
2024-02-15T16:08:52.035752+0200 INFO Bot stopped!
2024-02-15T16:08:58.507089+0200 INFO Bot started!
2024-02-15T16:08:59.350766+0200 INFO 127.0.0.1 [15/Feb/2024:16:08:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:08:59.357312+0200 INFO Update id=925008617 is not handled. Duration 15 ms by bot id=5646878393
2024-02-15T16:08:59.362314+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownState('Unknown state group StartBooking')>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 146, in _state
    for real_state in self.state_groups[group].__all_states__:
                      │    │            └ 'StartBooking'
                      │    └ {'FirstStartWindow': <class 'bot.dialogs.start_menu.states.FirstStartWindow'>, 'MainMenu': <class 'bot.dialogs.main_menu.stat...
                      └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001C0E30A9490>

KeyError: 'StartBooking'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C0E2B1A890>
                   │    │          │                   │           └ {'update_id': 925008617, 'message': {'message_id': 61452, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C0E0833910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C0E0321B20>
                   │    └ <Dispatcher '0x1c0e2ab1690'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C0E2B1A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C0E0833910>
                 │    └ <function Dispatcher.feed_update at 0x000001C0E0321A80>
                 └ <Dispatcher '0x1c0e2ab1690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C0E0320400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C0E28A6750>
                     └ <Dispatcher '0x1c0e2ab1690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C0E28A51D0>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C0E2ACD2D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C0E30A8F00>
          │    │   │      │    └ UnknownState('Unknown state group StartBooking')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001C0E315D120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C0E30ECB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001C0E2ACD790>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x000001C0E2FBB9C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C0E2ADC750>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C0E2ACD8D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008617, message=Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001C0E2FBBF60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1c0e2ab1690'>>, Update(update_id=925008617, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001C0E0321080>
                 └ <Dispatcher '0x1c0e2ab1690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C0E3160180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C0E0320400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C0E2AB2790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C0E0321120>
                 └ <Dispatcher '0x1c0e2ab1690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C0E0321080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C0E31600E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C0E0320400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C0E2ACD990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x1c0e2ab1690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=61452, date=datetime.datetime(2024, 2, 15, 14, 8, 56, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x000001C0E07BA020>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000001C0E2B2AC90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x000001C0E07B9EE0>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000001C0E2B2AC90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x000001C0E05A14E0>
                    │     │            └ Stack(_id='', intents=['agsoP3', 'WgTJj1', 'o5Pow8', 'rKWTL'], last_message_id=61365, last_reply_keyboard=False, last_media_i...
                    │     └ <function StorageProxy.load_context at 0x000001C0E07B94E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001C0E30A9490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'rKWTL', '_stack_id': '', 'state': 'StartBooking:ask_before_booking', 'start_data': {'city_id': 1, 'adult_peop...
    │               │    └ <function StorageProxy._state at 0x000001C0E07B9B20>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001C0E30A9490>
    └ {'_intent_id': 'rKWTL', '_stack_id': '', 'state': 'StartBooking:ask_before_booking', 'start_data': {'city_id': 1, 'adult_peop...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 150, in _state
    raise UnknownState(f"Unknown state group {group}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state group StartBooking
2024-02-15T16:09:05.775931+0200 INFO Bot stopped!
2024-02-15T16:09:08.933728+0200 INFO Bot started!
2024-02-15T16:09:09.839379+0200 INFO 127.0.0.1 [15/Feb/2024:16:09:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:09:10.230927+0200 ERROR Cannot render window for state <State 'FirstStartWindow:sub_on_channel'>
2024-02-15T16:09:10.232927+0200 INFO Update id=925008618 is not handled. Duration 390 ms by bot id=5646878393
2024-02-15T16:09:10.240928+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('channel_title')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002174DD07B50>
                   │    │          │                   │           └ {'update_id': 925008618, 'message': {'message_id': 61453, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002174DBD31D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002174B7A1B20>
                   │    └ <Dispatcher '0x2174df365d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002174DD07B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002174DBD31D0>
                 │    └ <function Dispatcher.feed_update at 0x000002174B7A1A80>
                 └ <Dispatcher '0x2174df365d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002174B7A0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002174DE8ADD0>
                     └ <Dispatcher '0x2174df365d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002174DF4D190>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002174DF4CE50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002174E7A4340>
          │    │   │      │    └ KeyError('channel_title')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002174E5DD120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002174DF85710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002174DF4D550>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x000002174E43B9C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002174DF5C4D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002174DD12ED0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008618, message=Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x000002174E43BF60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2174df365d0'>>, Update(update_id=925008618, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000002174B7A1080>
                 └ <Dispatcher '0x2174df365d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002174E5E0180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002174B7A0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002174DF36750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002174B7A1120>
                 └ <Dispatcher '0x2174df365d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000002174B7A1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002174E5E00E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002174B7A0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002174DF4D6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002174DFAAE90>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002174E5E02C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002174B7A1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000002174B7A1080>
                     └ <Router '0x2174dcf4610'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002174E43BEC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002174B7A0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002174DBD0310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002174B7A1120>
                 └ <Router '0x2174dcf4610'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x000002174B7A0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002174DBD0310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002174DCF6490>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002174DD12ED0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002174DFAAC90>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<function context_saver_middleware at 0x000002174BC39120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000002174DD2A850>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9, 7, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ <function CallableObject.call at 0x000002174E5E0540>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000002174DDBA3E0>, Message(message_id=61453, date=datetime.datetime(2024, 2, 15, 14, 9...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x000002174BC7CEA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x000002174BC7D080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000002174BC7D440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                        │    └ <function ManagerImpl.dialog at 0x000002174BC7C7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                        │      │      └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                        │      └ <function Window.render at 0x000002174BC94040>
                        └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000002174BC7FD80>
                       └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000002174BA6B1A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002174DD29890>
                     └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000002174BBF7BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002174DD29890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000002174BA6B1A0>
                  └ <aiogram_dialog.widgets.kbd.button.Url object at 0x000002174DC6FD10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                 │    └ <function Url._render_keyboard at 0x000002174BBD6B60>
                 └ <aiogram_dialog.widgets.kbd.button.Url object at 0x000002174DC6FD10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 74, in _render_keyboard
    text=await self.text.render_text(data, manager),
               │    │    │           │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
               │    │    │           └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
               │    │    └ <function Text.render_text at 0x000002174BA8C7C0>
               │    └ <aiogram_dialog.widgets.text.format.Format object at 0x000002174DC6FE10>
               └ <aiogram_dialog.widgets.kbd.button.Url object at 0x000002174DC6FD10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\text\base.py", line 26, in render_text
    return await self._render_text(data, manager)
                 │    │            │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002174DBD37D0>
                 │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
                 │    └ <function Format._render_text at 0x000002174BA8DC60>
                 └ <aiogram_dialog.widgets.text.format.Format object at 0x000002174DC6FE10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\text\format.py", line 41, in _render_text
    return self.text.format_map(data)
           │    │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2174df365d0'>, 'session_pool': async_session...
           │    │    └ <method 'format_map' of 'str' objects>
           │    └ '{channel_title}'
           └ <aiogram_dialog.widgets.text.format.Format object at 0x000002174DC6FE10>

KeyError: 'channel_title'
2024-02-15T16:10:22.160671+0200 INFO Bot stopped!
2024-02-15T16:10:25.122567+0200 INFO Bot started!
2024-02-15T16:10:27.774002+0200 INFO 127.0.0.1 [15/Feb/2024:16:10:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:10:28.112307+0200 ERROR Cannot get window data for state <State 'FirstStartWindow:sub_on_channel'>
2024-02-15T16:10:28.114311+0200 INFO Update id=925008619 is not handled. Duration 343 ms by bot id=5646878393
2024-02-15T16:10:28.120879+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000290F4E2AE10>
                   │    │          │                   │           └ {'update_id': 925008619, 'message': {'message_id': 61455, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000290F2621B20>
                   │    └ <Dispatcher '0x290f4ba7e50'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000290F4E2AE10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
                 │    └ <function Dispatcher.feed_update at 0x00000290F2621A80>
                 └ <Dispatcher '0x290f4ba7e50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000290F2620400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000290F4BA5B90>
                     └ <Dispatcher '0x290f4ba7e50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000290F4BA4FD0>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000290F4DCD190>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000290F4E2CC40>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000290F5461120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000290F4BBC790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000290F4BA4F50>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x00000290F52BF920>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000290F4DDC7D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000290F4BBC0D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008619, message=Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x00000290F52BFEC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x290f4ba7e50'>>, Update(update_id=925008619, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000290F2621080>
                 └ <Dispatcher '0x290f4ba7e50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000290F54640E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000290F2620400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000290F4B67D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000290F2621120>
                 └ <Dispatcher '0x290f4ba7e50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000290F2621080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000290F5464040>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000290F2620400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000290F4DCD9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000290F4E2B2D0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000290F5464220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000290F2621120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000290F2621080>
                     └ <Router '0x290f4c2f850'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000290F52BFE20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000290F2620400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000290F4C2F890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000290F2621120>
                 └ <Router '0x290f4c2f850'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x00000290F2620540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000290F4C2F890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000290F4B66DD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000290F4BBC0D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000290F4E2B150>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x00000290F2AB9120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x00000290F4C56450>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 10, 25, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function CallableObject.call at 0x00000290F54644A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x00000290F4C3E340>, Message(message_id=61455, date=datetime.datetime(2024, 2, 15, 14, 1...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000290F2AFCEA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000290F2AFD080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000290F2AFD440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
                        │    └ <function ManagerImpl.dialog at 0x00000290F2AFC7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
                        │      │      └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                        │      └ <function Window.render at 0x00000290F2B14040>
                        └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
                         │    │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                         │    └ <function Window.load_data at 0x00000290F2AFFE20>
                         └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000290F2AD7330>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000290F4DCD010>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000290F4C2F490>
    │    │            └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x290f4ba7e50'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_sub_channel_url at 0x00000290F4B68FE0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000290F4C2F490>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\start_menu\getters.py", line 13, in get_sub_channel_url
    channel_info = await bot.get_chat(int(sub_channel_id.value))
                         │   │            │              └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000290F4A64A40>
                         │   │            └ <bot.db.models.models.BotSettings object at 0x00000290F4E2FD50>
                         │   └ <function Bot.get_chat at 0x00000290F25DE8E0>
                         └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1567, in get_chat
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ GetChat(chat_id=1960731769)
                 └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ GetChat(chat_id=1960731769)
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000290F4D97190>
                 └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ GetChat(chat_id=1960731769)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000290F4B78A50>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000290EC790540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000290F25BB600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000290F4D97190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ GetChat(chat_id=1960731769)
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T16:10:56.357079+0200 INFO Bot stopped!
2024-02-15T16:10:59.123567+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (14592), thread 'MainThread' (3164):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 110, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000156AAB17EC0>
    │       └ <function run at 0x00000156A25AC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000156AAAF1C40>
           │      └ <function Runner.run at 0x00000156A263C9A0>
           └ <asyncio.runners.Runner object at 0x00000156AA362FD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000156A263A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000156AA362FD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000156A271A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000156A263C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000156A257DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000156AAA07E50>
          └ <function add_default_bot_settings at 0x00000156AA9825C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 52, in add_default_bot_settings
    ).on_conflict_do_update()

  File "<string>", line 2, in on_conflict_do_update
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 283, in _generative
    x = fn(self, *args, **kw)
        │  │      │       └ {'constraint': None, 'index_elements': None, 'index_where': None, 'set_': None, 'where': None}
        │  │      └ ()
        │  └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000156AA8F3B90>
        └ <function Insert.on_conflict_do_update at 0x00000156AA8E1760>
  File "<string>", line 2, in on_conflict_do_update
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 316, in check
    return fn(self, *args, **kw)
           │  │      │       └ {'constraint': None, 'index_elements': None, 'index_where': None, 'set_': None, 'where': None}
           │  │      └ ()
           │  └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000156AA8F3B90>
           └ <function Insert.on_conflict_do_update at 0x00000156AA8E1580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\dml.py", line 168, in on_conflict_do_update
    self._post_values_clause = OnConflictDoUpdate(
    │    │                     └ <class 'sqlalchemy.dialects.postgresql.dml.OnConflictDoUpdate'>
    │    └ None
    └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000156AA8F3B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\dml.py", line 290, in __init__
    raise ValueError(

ValueError: Either constraint or index_elements, but not both, must be specified unless DO NOTHING
2024-02-15T16:11:21.002469+0200 INFO Bot started!
2024-02-15T16:12:45.477884+0200 INFO 127.0.0.1 [15/Feb/2024:16:12:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:12:45.722804+0200 INFO Update id=925008620 is not handled. Duration 250 ms by bot id=5646878393
2024-02-15T16:12:45.728801+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button URL 'sub_channel_url' is invalid: Wrong HTTP URL')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E784143E90>
                   │    │          │                   │           └ {'update_id': 925008620, 'message': {'message_id': 61456, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001E781D11B20>
                   │    └ <Dispatcher '0x1e784286f10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E784143E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
                 │    └ <function Dispatcher.feed_update at 0x000001E781D11A80>
                 └ <Dispatcher '0x1e784286f10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E781D10400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E7844BC650>
                     └ <Dispatcher '0x1e784286f10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001E784274C90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001E7844BCD10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001E784B81E80>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button URL 'sub_channel_url' is invalid: Wrong HTTP U...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001E78449B100>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001E7843E5750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001E7844BD150>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001E7849AB920>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E7844CC250>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E7844BD390>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008620, message=Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001E7849ABD80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1e784286f10'>>, Update(update_id=925008620, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001E781D11080>
                 └ <Dispatcher '0x1e784286f10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E7849ABB00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E781D10400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E78432CBD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E781D11120>
                 └ <Dispatcher '0x1e784286f10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001E781D11080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E784B50040>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E781D10400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E7844BD410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001E78451AC50>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001E784B500E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E781D11120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001E781D11080>
                     └ <Router '0x1e78432dbd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E7849ABCE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E781D10400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E78432DB50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E781D11120>
                 └ <Router '0x1e78432dbd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001E781D10540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E78432DB50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E7842843D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E7844BD390>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001E78451A9D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001E7821A9120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001E7842A0090>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e784286f10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 12, 42, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function CallableObject.call at 0x000001E784B50360>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001E784326340>, Message(message_id=61456, date=datetime.datetime(2024, 2, 15, 14, 1...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x000001E7821ECEA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E784A98910>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x000001E7821ED080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E784A98910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001E7821ED440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E784A98910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E784A98910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username=None, first_name='Solarmove', last_name=None, is_foru...
          │    │            └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
          │    └ <function MessageManager.send_message at 0x000001E7821EF060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001E782221850>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username=None, first_name='Solarmove', last_name=None, is_foru...
                 │    │         └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
                 │    └ <function MessageManager.send_text at 0x000001E7821EF100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001E782221850>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x000001E781CD3D80>
                 └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=387375605, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
                 └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=387375605, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001E784274A50>
                 └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=387375605, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001E7843AE610>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001E7FBE60540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001E781CAB600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001E784274A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button URL 'sub_channel_url' is invalid: Wrong HTTP URL"
          │                         └ SendMessage(chat_id=387375605, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button URL 'sub_channel_url' is invalid: Wrong HTTP URL
2024-02-15T16:13:13.836619+0200 INFO Bot stopped!
2024-02-15T16:13:16.873804+0200 INFO Bot started!
2024-02-15T16:13:17.661732+0200 INFO 127.0.0.1 [15/Feb/2024:16:13:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:13:17.981967+0200 INFO Update id=925008621 is handled. Duration 327 ms by bot id=5646878393
2024-02-15T16:13:40.945662+0200 INFO Bot stopped!
2024-02-15T16:13:43.769980+0200 INFO Bot started!
2024-02-15T16:13:45.275522+0200 INFO 127.0.0.1 [15/Feb/2024:16:13:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:13:45.521611+0200 INFO Update id=925008622 is handled. Duration 250 ms by bot id=5646878393
2024-02-15T16:13:50.678844+0200 INFO 127.0.0.1 [15/Feb/2024:16:13:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:13:50.885546+0200 ERROR Cannot render window for state <State 'MainMenu:select_action'>
2024-02-15T16:13:50.886546+0200 INFO Update id=925008623 is not handled. Duration 218 ms by bot id=5646878393
2024-02-15T16:13:50.892543+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-19' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ValueError("expected '}' before end of string")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001BB9A1C4610>
                   │    │          │                   │           └ {'update_id': 925008623, 'callback_query': {'id': '1663765556376046033', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001BB9A090C10>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001BB97AF1B20>
                   │    └ <Dispatcher '0x1bb9a063a50'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001BB9A1C4610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001BB9A090C10>
                 │    └ <function Dispatcher.feed_update at 0x000001BB97AF1A80>
                 └ <Dispatcher '0x1bb9a063a50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BB97AF0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BB9A045B90>
                     └ <Dispatcher '0x1bb9a063a50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001BB9A29C690>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001BB9A29C2D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001BB9AB98D80>
          │    │   │      │    └ ValueError("expected '}' before end of string")
          │    │   │      └ <class 'ValueError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001BB9A92D120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001BB9A6D1050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001BB9A29CAD0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001BB9A78BD80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001BB9A29FAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001BB9A29CD10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008623, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001BB9A78BEC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1bb9a063a50'>>, Update(update_id=925008623, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001BB97AF1080>
                 └ <Dispatcher '0x1bb9a063a50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BB9A2ECEA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BB97AF0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BB9A28A4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BB97AF1120>
                 └ <Dispatcher '0x1bb9a063a50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001BB97AF1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BB9A930040>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BB97AF0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BB9A29DBD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001BB9A2FA790>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001BB9A9300E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BB97AF1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001BB97AF1080>
                     └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BB9A78BE20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BB97AF0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BB9A2ACC10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BB97AF1120>
                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001BB97AF0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BB9A2ACC10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001BB9A29FB10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001BB9A29CD10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001BB9A07B1D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001BB97F89120>, <function CallableObject.call at 0x000001BB9A930...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001BB9A930860>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'FirstStartWindow'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
          │      │                │                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │      │                └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000001BB97FCFF60>
          └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
          │    │        │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │    │        │                └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000001BB97DBB4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001BB9A056990>
          └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                 │    │                       │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                 │    │                       └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001BB97F47CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001BB9A056990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
             │ │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
             │ │                └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001BB97DBB4C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001BB9A054D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001BB97DDC180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001BB9A054D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001BB9A054D50>
          │    │        │             └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001BB97DB9440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001BB9A061310>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001BB9A054D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001BB9A054D50>
          │    │        └ CallbackQuery(id='1663765556376046033', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function continue_to_menu at 0x000001BB9A03CAE0>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001BB9A061310>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\start_menu\selected.py", line 21, in continue_to_menu
    return await manager.start(states.MainMenu.select_action)
                 │       │     │      │        └ <State 'MainMenu:select_action'>
                 │       │     │      └ <class 'bot.dialogs.main_menu.states.MainMenu'>
                 │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
                 │       └ <function ManagerImpl.start at 0x000001BB97FCCEA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001BB97FCD080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001BB97FCD440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                        │    └ <function ManagerImpl.dialog at 0x000001BB97FCC7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                        │      │      └ <Dialog(<StatesGroup 'MainMenu'>)>
                        │      └ <function Window.render at 0x000001BB97FE4040>
                        └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000001BB97FCFD80>
                       └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001BB97DBB1A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001BB99F28890>
                     └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000001BB97F47BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001BB99F28890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001BB97DBB1A0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000001BB9A090110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000001BB97F57C40>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000001BB9A090110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 85, in _render_keyboard
    [
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 86, in <listcomp>
    await self._render_button(pos, item, item, data, manager)
          │    │              │    │     │     │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
          │    │              │    │     │     └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': async_session...
          │    │              │    │     └ ('announcement', 'Объявления')
          │    │              │    └ ('announcement', 'Объявления')
          │    │              └ 0
          │    └ <function Select._render_button at 0x000001BB97F57D80>
          └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000001BB9A090110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 108, in _render_button
    text=await self.text.render_text(data, manager),
               │    │    │           │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
               │    │    │           └ {'data': {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': asyn...
               │    │    └ <function Text.render_text at 0x000001BB97DDC7C0>
               │    └ <aiogram_dialog.widgets.text.format.Format object at 0x000001BB9A033950>
               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000001BB9A090110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\text\base.py", line 26, in render_text
    return await self._render_text(data, manager)
                 │    │            │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001BB9A878F10>
                 │    │            └ {'data': {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': asyn...
                 │    └ <function Format._render_text at 0x000001BB97DDDC60>
                 └ <aiogram_dialog.widgets.text.format.Format object at 0x000001BB9A033950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\text\format.py", line 41, in _render_text
    return self.text.format_map(data)
           │    │    │          └ {'data': {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1bb9a063a50'>, 'session_pool': asyn...
           │    │    └ <method 'format_map' of 'str' objects>
           │    └ '{item[1]'
           └ <aiogram_dialog.widgets.text.format.Format object at 0x000001BB9A033950>

ValueError: expected '}' before end of string
2024-02-15T16:15:55.052184+0200 INFO Bot stopped!
2024-02-15T16:15:58.421167+0200 INFO Bot started!
2024-02-15T16:15:59.621044+0200 INFO 127.0.0.1 [15/Feb/2024:16:15:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:15:59.859632+0200 INFO Update id=925008624 is handled. Duration 233 ms by bot id=5646878393
2024-02-15T16:16:23.566259+0200 INFO Bot stopped!
2024-02-15T16:16:26.578879+0200 INFO Bot started!
2024-02-15T16:16:27.407992+0200 INFO 127.0.0.1 [15/Feb/2024:16:16:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:16:27.693179+0200 INFO Update id=925008625 is handled. Duration 280 ms by bot id=5646878393
2024-02-15T16:16:46.705563+0200 INFO 127.0.0.1 [15/Feb/2024:16:16:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:16:47.051910+0200 INFO Update id=925008626 is handled. Duration 343 ms by bot id=5646878393
2024-02-15T16:17:05.855801+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:06.623380+0200 INFO Update id=925008627 is handled. Duration 766 ms by bot id=5646878393
2024-02-15T16:17:15.392678+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:15.654317+0200 INFO Update id=925008628 is handled. Duration 266 ms by bot id=5646878393
2024-02-15T16:17:25.656647+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:25.906268+0200 INFO Update id=925008629 is handled. Duration 250 ms by bot id=5646878393
2024-02-15T16:17:30.339277+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:30.342208+0200 ERROR Cannot get window data for state <State 'AnnouncementPost:show_announcement_webapp'>
2024-02-15T16:17:30.344207+0200 INFO Update id=925008630 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:17:30.348208+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-48' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'value'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
                   │    │          │                   │           └ {'update_id': 925008630, 'callback_query': {'id': '1663765555606054211', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000011ECB9E1B20>
                   │    └ <Dispatcher '0x11ece172e10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                 │    └ <function Dispatcher.feed_update at 0x0000011ECB9E1A80>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECDF35B90>
                     └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000011ECDF56C90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000011ECE1919D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000011ECEAE3340>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'value'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000011ECE823A60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000011ECDF474D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000011ECE191DD0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000011ECE153740>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECE1A0E50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008630, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000011ECE67FE20>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x11ece172e10'>>, Update(update_id=925008630, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000011ECB9E1080>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE67FF60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE173910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE67FEC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE192F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000011ECE1EF850>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE824860>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE8247C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1C2950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000011ECB9E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1C2950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECE1A0E90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000011ECBEF2490>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000011ECBE79120>, <function CallableObject.call at 0x0000011ECE824...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555606054211', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000011ECE8249A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000011ECBEBD440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
                        │    └ <function ManagerImpl.dialog at 0x0000011ECBEBC7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
                        │      │      └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                        │      └ <function Window.render at 0x0000011ECBED4040>
                        └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
                         │    │         └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                         │    └ <function Window.load_data at 0x0000011ECBEBFE20>
                         └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000011ECBE97330>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEAEE6D0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000011ECE1C1C10>
    │    │            └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'announcement_type': 'vacancy'}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x11ece172e10'>,...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_form_data at 0x0000011ECDF2A520>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000011ECE1C1C10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\announcement_menu\getters.py", line 24, in get_form_data
    'form_url': form_url.value,
                └ None

AttributeError: 'NoneType' object has no attribute 'value'
2024-02-15T16:17:49.845021+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:50.103878+0200 INFO Update id=925008631 is handled. Duration 250 ms by bot id=5646878393
2024-02-15T16:17:51.290201+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:51.434488+0200 INFO Update id=925008632 is handled. Duration 155 ms by bot id=5646878393
2024-02-15T16:17:51.985923+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:51.989475+0200 ERROR Cannot get window data for state <State 'AnnouncementPost:show_announcement_webapp'>
2024-02-15T16:17:51.990474+0200 INFO Update id=925008633 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:17:51.992480+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-65' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'value'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
                   │    │          │                   │           └ {'update_id': 925008633, 'callback_query': {'id': '1663765556006309538', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000011ECB9E1B20>
                   │    └ <Dispatcher '0x11ece172e10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                 │    └ <function Dispatcher.feed_update at 0x0000011ECB9E1A80>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECDF35B90>
                     └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000011ECDF56C90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000011ECE1919D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000011ECE76E040>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'value'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000011ECE821120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000011ECEAE23D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000011ECE191DD0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000011ECE8244A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECE1A0E50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008633, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000011ECE855440>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x11ece172e10'>>, Update(update_id=925008633, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000011ECB9E1080>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE1E1080>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE173910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECEB2C860>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE192F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000011ECE1EF850>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECEB2C9A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE168540>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1C2950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000011ECB9E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1C2950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECE1A0E90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000011ECBEF2490>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000011ECBE79120>, <function CallableObject.call at 0x0000011ECEB2C...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556006309538', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000011ECEB2CCC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000011ECBEBD440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
                        │    └ <function ManagerImpl.dialog at 0x0000011ECBEBC7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
                        │      │      └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                        │      └ <function Window.render at 0x0000011ECBED4040>
                        └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
                         │    │         └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                         │    └ <function Window.load_data at 0x0000011ECBEBFE20>
                         └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000011ECBE97330>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB77B10>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000011ECE1C1C10>
    │    │            └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'announcement_type': 'real_estate'}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x11ece172e1...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_form_data at 0x0000011ECDF2A520>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000011ECE1C1C10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\announcement_menu\getters.py", line 24, in get_form_data
    'form_url': form_url.value,
                └ None

AttributeError: 'NoneType' object has no attribute 'value'
2024-02-15T16:17:52.755523+0200 INFO 127.0.0.1 [15/Feb/2024:16:17:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:17:53.023209+0200 INFO Update id=925008634 is handled. Duration 264 ms by bot id=5646878393
2024-02-15T16:19:54.627021+0200 INFO 127.0.0.1 [15/Feb/2024:16:19:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:19:54.847314+0200 INFO Update id=925008635 is handled. Duration 218 ms by bot id=5646878393
2024-02-15T16:19:59.971861+0200 INFO 127.0.0.1 [15/Feb/2024:16:19:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:20:00.270022+0200 INFO Update id=925008636 is not handled. Duration 296 ms by bot id=5646878393
2024-02-15T16:20:00.274024+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-84' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("object int can't be used in 'await' expression")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
                   │    │          │                   │           └ {'update_id': 925008636, 'message': {'message_id': 61467, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000011ECB9E1B20>
                   │    └ <Dispatcher '0x11ece172e10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000011ECE1CA490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000011ECBDAA610>
                 │    └ <function Dispatcher.feed_update at 0x0000011ECB9E1A80>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECDF35B90>
                     └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000011ECDF56C90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000011ECE1919D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000011ECEAE2F40>
          │    │   │      │    └ TypeError("object int can't be used in 'await' expression")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000011ECE823E20>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000011ECDF54310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000011ECE191DD0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x0000011ECE67FE20>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECE1A0E50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008636, message=Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x0000011ECE67FF60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x11ece172e10'>>, Update(update_id=925008636, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000011ECB9E1080>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE1E1080>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE172E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dispatcher '0x11ece172e10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE1E0EA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1920D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000011ECE1EF850>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE857CE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000011ECB9E1080>
                     └ <Dialog(<StatesGroup 'CreatePost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011ECE857BA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011ECB9E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1CA7D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011ECB9E1120>
                 └ <Dialog(<StatesGroup 'CreatePost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000011ECB9E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011ECE1CA7D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011ECDE18FD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011ECE191F90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000011ECBEF2490>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x0000011ECBE79120>, <function CallableObject.call at 0x0000011ECE857...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x11ece172e10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ <function CallableObject.call at 0x0000011ECE857740>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._message_handler of <Dialog(<StatesGroup 'CreatePost'>)>>, Message(message_id=61467, d...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    await window.process_message(message, self, dialog_manager)
          │      │               │        │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB64F10>
          │      │               │        └ <Dialog(<StatesGroup 'CreatePost'>)>
          │      │               └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │      └ <function Window.process_message at 0x0000011ECBEBFEC0>
          └ <Window(<State 'CreatePost:enter_ask_for_publish'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 93, in process_message
    await self.on_message.process_message(message, dialog, manager)
          │    │          │               │        │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB64F10>
          │    │          │               │        └ <Dialog(<StatesGroup 'CreatePost'>)>
          │    │          │               └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    │          └ <function TextInput.process_message at 0x0000011ECBCAACA0>
          │    └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000011ECE1C9B50>
          └ <Window(<State 'CreatePost:enter_ask_for_publish'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\input\text.py", line 88, in process_message
    await self.on_success.process_event(
          │    │          └ <function SimpleEventProcessor.process_event at 0x0000011ECBCA9440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000011ECE1C9BD0>
          └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000011ECE1C9B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('пишеш питання',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011ECEB64F10>
          │    │        │      └ <aiogram_dialog.widgets.input.text.ManagedTextInput object at 0x0000011ECE07B710>
          │    │        └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function on_enter_ask_for_publish at 0x0000011ECDF2A8E0>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000011ECE1C9BD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\announcement_menu\selected.py", line 23, in on_enter_ask_for_publish
    post_id = await repo.post_repo.add_post(message.chat.id, message_text)
                    │    │         │        │       │    │   └ 'пишеш питання'
                    │    │         │        │       │    └ 387375605
                    │    │         │        │       └ Chat(id=387375605, type='private', title=None, username=None, first_name='Solarmove', last_name=None, is_forum=None, photo=No...
                    │    │         │        └ Message(message_id=61467, date=datetime.datetime(2024, 2, 15, 14, 19, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                    │    │         └ <function PostRequestsRepo.add_post at 0x0000011ECDC97E20>
                    │    └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x0000011ECEB668D0>
                    └ <bot.db.Repo object at 0x0000011ECEB66AD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\post_requests.py", line 29, in add_post
    await query.id
          │     └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000011ECDE26700>
          └ <bot.db.models.models.PostMessages object at 0x0000011ECEB67510>

TypeError: object int can't be used in 'await' expression
2024-02-15T16:20:40.579719+0200 INFO Bot stopped!
2024-02-15T16:20:43.957138+0200 INFO Bot started!
2024-02-15T16:20:44.766032+0200 INFO 127.0.0.1 [15/Feb/2024:16:20:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:20:45.118563+0200 INFO Update id=925008637 is handled. Duration 343 ms by bot id=5646878393
2024-02-15T16:20:57.104541+0200 INFO 127.0.0.1 [15/Feb/2024:16:20:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:20:57.296030+0200 INFO Update id=925008638 is handled. Duration 187 ms by bot id=5646878393
2024-02-15T16:21:34.981462+0200 INFO 127.0.0.1 [15/Feb/2024:16:21:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:21:34.988238+0200 ERROR Cannot get window data for state <State 'UserAccount:show_account_info'>
2024-02-15T16:21:34.989240+0200 INFO Update id=925008639 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:21:34.994241+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-26' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("object of type 'NoneType' has no len()")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E70CF5A890>
                   │    │          │                   │           └ {'update_id': 925008639, 'callback_query': {'id': '1663765556278140791', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001E70CD72090>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001E70A761B20>
                   │    └ <Dispatcher '0x1e70cce9410'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E70CF5A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001E70CD72090>
                 │    └ <function Dispatcher.feed_update at 0x000001E70A761A80>
                 └ <Dispatcher '0x1e70cce9410'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E70A760400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E70CCB5AD0>
                     └ <Dispatcher '0x1e70cce9410'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001E70CCB6890>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001E70CF0CE10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001E70D77CD80>
          │    │   │      │    └ TypeError("object of type 'NoneType' has no len()")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001E70CEEB1F0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001E70D343610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001E70CCD2850>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001E70D5A0040>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E70CF1C350>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E70CF0D450>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008639, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001E70D5A04A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1e70cce9410'>>, Update(update_id=925008639, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001E70A761080>
                 └ <Dispatcher '0x1e70cce9410'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E70CEAF740>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E70A760400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E70CEF6DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E70A761120>
                 └ <Dispatcher '0x1e70cce9410'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E70A761080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E70D3FFBA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E70A760400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E70CF0E410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001E70CF6AF10>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001E70D3FFC40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E70A761120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E70A761080>
                     └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E70D3FFE20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E70A760400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E70CF21050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E70A761120>
                 └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001E70A760540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E70CF21050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E70CCB4F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E70CF0D450>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001E70CF6ACD0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001E70ABF9120>, <function CallableObject.call at 0x000001E70D3FF...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001E70D3FFEC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'MainMenu'>)>>, CallbackQuery(id='1663765556...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
          │      │                │                 └ <Dialog(<StatesGroup 'MainMenu'>)>
          │      │                └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000001E70AC3FF60>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
          │    │        │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
          │    │        │                └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000001E70AA2B4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001E70CCA6990>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001E70ABB7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001E70CCA6990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001E70AA2B4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001E70AA4C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
          │    │        │             └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001E70AA29440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001E70CCA6C10>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
          │    │        └ CallbackQuery(id='1663765556278140791', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001E70CCA6C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
          │       │     │    └ <State 'UserAccount:show_account_info'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001E70CB93910>
          │       └ <function ManagerImpl.start at 0x000001E70AC3CEA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'UserAccount:show_account_info'>
          │    └ <function ManagerImpl._start_normal at 0x000001E70AC3D080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001E70AC3D440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
                        │    └ <function ManagerImpl.dialog at 0x000001E70AC3C7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
                        │      │      └ <Dialog(<StatesGroup 'UserAccount'>)>
                        │      └ <function Window.render at 0x000001E70AC54040>
                        └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
                         │    │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                         │    └ <function Window.load_data at 0x000001E70AC3FE20>
                         └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001E70AC17380>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E70D684310>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001E70CCEB250>
    │    │            └ <Window(<State 'UserAccount:show_account_info'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1e70cce9410'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_user_account_info at 0x000001E70CCA9440>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001E70CCEB250>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 23, in get_user_account_info
    'posts': len(user_post)
                 └ None

TypeError: object of type 'NoneType' has no len()
2024-02-15T16:21:54.874291+0200 INFO Bot stopped!
2024-02-15T16:21:58.062142+0200 INFO Bot started!
2024-02-15T16:22:02.506865+0200 INFO 127.0.0.1 [15/Feb/2024:16:22:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:22:02.659857+0200 INFO Update id=925008640 is handled. Duration 156 ms by bot id=5646878393
2024-02-15T16:22:07.080879+0200 INFO 127.0.0.1 [15/Feb/2024:16:22:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:22:07.197863+0200 INFO Update id=925008641 is handled. Duration 125 ms by bot id=5646878393
2024-02-15T16:22:32.201421+0200 INFO 127.0.0.1 [15/Feb/2024:16:22:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:22:32.509303+0200 INFO Update id=925008642 is handled. Duration 296 ms by bot id=5646878393
2024-02-15T16:22:38.952007+0200 INFO 127.0.0.1 [15/Feb/2024:16:22:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:22:38.954254+0200 INFO Update id=925008643 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:22:38.960253+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-31' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredDialogError("No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amount'>`)")>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 58, in find_dialog
    return self._dialogs[state.group]
           │    │        │     └ <property object at 0x0000019DC149CB80>
           │    │        └ <State 'TopUpBalance:enter_amount'>
           │    └ {<class 'bot.dialogs.start_menu.states.FirstStartWindow'>: <Dialog(<StatesGroup 'FirstStartWindow'>)>, <class 'bot.dialogs.ma...
           └ <aiogram_dialog.setup.DialogRegistry object at 0x0000019DC552B210>

KeyError: <class 'bot.dialogs.main_menu.states.TopUpBalance'>


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019DC552B950>
                   │    │          │                   │           └ {'update_id': 925008643, 'callback_query': {'id': '1663765558005975944', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000019DC5410150>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000019DC2D21B20>
                   │    └ <Dispatcher '0x19dc54b28d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019DC552B950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000019DC5410150>
                 │    └ <function Dispatcher.feed_update at 0x0000019DC2D21A80>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC5295B90>
                     └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019DC54CD4D0>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019DC54CD0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019DC5C78780>
          │    │   │      │    └ UnregisteredDialogError("No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amo...
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019DC5B5BD30>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019DC5913450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019DC54CD9D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000019DC59BBF60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019DC54DCAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019DC54CDC10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008643, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000019DC59BBCE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19dc54b28d0'>>, Update(update_id=925008643, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000019DC2D21080>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC59BBB00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54B3310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019DC2D21080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B602C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54CEAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000019DC552B410>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B60040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019DC2D21080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B60360>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54E96D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000019DC2D20540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54E96D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019DC5294C50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019DC54CDC10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000019DC5262B50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000019DC31B9120>, <function CallableObject.call at 0x0000019DC551C...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000019DC551CE00>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000019DC31FFF60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC5159410>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000019DC3177CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC5159410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC52765D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000019DC3177CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC52765D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000019DC300C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
          │    │        │             └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000019DC2FE9440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000019DC5286E50>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
          │    │        └ CallbackQuery(id='1663765558005975944', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000019DC5286E50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
          │       │     │    └ <State 'TopUpBalance:enter_amount'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5286650>
          │       └ <function ManagerImpl.start at 0x0000019DC31FCEA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'TopUpBalance:enter_amount'>
          │    └ <function ManagerImpl._start_normal at 0x0000019DC31FD080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 255, in _start_normal
    new_dialog = self._registry.find_dialog(state)
                 │    │         │           └ <State 'TopUpBalance:enter_amount'>
                 │    │         └ <function DialogRegistry.find_dialog at 0x0000019DC32149A0>
                 │    └ <aiogram_dialog.setup.DialogRegistry object at 0x0000019DC552B210>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5A9F190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 60, in find_dialog
    raise UnregisteredDialogError(
          └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>

aiogram_dialog.api.exceptions.UnregisteredDialogError: No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amount'>`)
2024-02-15T16:22:44.092590+0200 INFO 127.0.0.1 [15/Feb/2024:16:22:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:22:44.097090+0200 ERROR Cannot get window data for state <State 'UserPostRequests:show_user_requests'>
2024-02-15T16:22:44.097090+0200 INFO Update id=925008644 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:22:44.100090+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-35' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'NoneType' object is not iterable")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019DC552B950>
                   │    │          │                   │           └ {'update_id': 925008644, 'callback_query': {'id': '1663765559034293158', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000019DC5410150>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000019DC2D21B20>
                   │    └ <Dispatcher '0x19dc54b28d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019DC552B950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000019DC5410150>
                 │    └ <function Dispatcher.feed_update at 0x0000019DC2D21A80>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC5295B90>
                     └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019DC54CD4D0>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019DC54CD0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019DC5CEA540>
          │    │   │      │    └ TypeError("'NoneType' object is not iterable")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019DC54AB1F0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019DC5CE92D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019DC54CD9D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000019DC5B9A160>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019DC54DCAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019DC54CDC10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008644, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000019DC5B9A7A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19dc54b28d0'>>, Update(update_id=925008644, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000019DC2D21080>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B9A5C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54B3310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Dispatcher '0x19dc54b28d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019DC2D21080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B99E40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54CEAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000019DC552B410>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC5B9A020>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019DC2D21080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019DC546F6A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019DC2D20400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54E96D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019DC2D21120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000019DC2D20540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019DC54E96D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019DC5294C50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019DC54CDC10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000019DC5262B50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000019DC31B9120>, <function CallableObject.call at 0x0000019DC5B99...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000019DC5B99940>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000019DC31FFF60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC5159410>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000019DC3177CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC5159410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC52765D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000019DC3177CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000019DC52765D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000019DC2FEB4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000019DC300C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
          │    │        │             └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000019DC2FE9440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000019DC5274610>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
          │    │        └ CallbackQuery(id='1663765559034293158', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000019DC5274610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
          │       │     │    └ <State 'UserPostRequests:show_user_requests'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000019DC5287910>
          │       └ <function ManagerImpl.start at 0x0000019DC31FCEA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'UserPostRequests:show_user_requests'>
          │    └ <function ManagerImpl._start_normal at 0x0000019DC31FD080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x0000019DC31FD440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
                        │    └ <function ManagerImpl.dialog at 0x0000019DC31FC7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
                        │      │      └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                        │      └ <function Window.render at 0x0000019DC3214040>
                        └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
                         │    │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                         │    └ <function Window.load_data at 0x0000019DC31FFE20>
                         └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000019DC31D7330>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000019DC5CE6C90>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000019DC53325D0>
    │    │            └ <Window(<State 'UserPostRequests:show_user_requests'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x19dc54b28d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_user_post_requests at 0x0000019DC52694E0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000019DC53325D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 31, in get_user_post_requests
    for post in user_posts:
                └ None

TypeError: 'NoneType' object is not iterable
2024-02-15T16:23:19.758529+0200 INFO Bot stopped!
2024-02-15T16:23:22.832866+0200 INFO Bot started!
2024-02-15T16:23:23.336508+0200 INFO 127.0.0.1 [15/Feb/2024:16:23:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:23:23.538569+0200 INFO Update id=925008645 is handled. Duration 203 ms by bot id=5646878393
2024-02-15T16:23:24.733374+0200 INFO 127.0.0.1 [15/Feb/2024:16:23:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:23:24.872133+0200 INFO Update id=925008646 is handled. Duration 141 ms by bot id=5646878393
2024-02-15T16:23:26.727323+0200 INFO 127.0.0.1 [15/Feb/2024:16:23:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:23:26.873816+0200 INFO Update id=925008647 is handled. Duration 156 ms by bot id=5646878393
2024-02-15T16:24:28.016071+0200 INFO 127.0.0.1 [15/Feb/2024:16:24:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:24:28.338696+0200 INFO Update id=925008648 is handled. Duration 313 ms by bot id=5646878393
2024-02-15T16:24:47.977555+0200 INFO 127.0.0.1 [15/Feb/2024:16:24:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:24:48.300603+0200 INFO Update id=925008649 is handled. Duration 328 ms by bot id=5646878393
2024-02-15T16:25:00.409386+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:00.656225+0200 INFO Update id=925008650 is handled. Duration 250 ms by bot id=5646878393
2024-02-15T16:25:04.399825+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:04.582254+0200 INFO Update id=925008651 is handled. Duration 188 ms by bot id=5646878393
2024-02-15T16:25:05.334684+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:05.493365+0200 INFO Update id=925008652 is handled. Duration 155 ms by bot id=5646878393
2024-02-15T16:25:08.719931+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:08.722971+0200 ERROR Cannot get window data for state <State 'AnnouncementPost:show_announcement_webapp'>
2024-02-15T16:25:08.723970+0200 INFO Update id=925008653 is not handled. Duration 0 ms by bot id=5646878393
2024-02-15T16:25:08.727973+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-65' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'value'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001F08D5A5350>
                   │    │          │                   │           └ {'update_id': 925008653, 'callback_query': {'id': '1523158653091678909', 'from': {'id': 354638009, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001F08D5A4E90>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001F08B041B20>
                   │    └ <Dispatcher '0x1f08d5c9750'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001F08D5A5350>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001F08D5A4E90>
                 │    └ <function Dispatcher.feed_update at 0x000001F08B041A80>
                 └ <Dispatcher '0x1f08d5c9750'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F08B040400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F08D5B5AD0>
                     └ <Dispatcher '0x1f08d5c9750'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001F08D5B4C50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001F08D7ECF10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001F08DD68D80>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'value'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001F08DE7A110>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001F08D855010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001F08D7ED350>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001F08DCDBEC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001F08D595090>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001F08D7ED610>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008653, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001F08DCDBBA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1f08d5c9750'>>, Update(update_id=925008653, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001F08B041080>
                 └ <Dispatcher '0x1f08d5c9750'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F08DF7F100>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F08B040400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F08D7D6E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F08B041120>
                 └ <Dispatcher '0x1f08d5c9750'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001F08B041080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F08DF7DEE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F08B040400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F08D7EE490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001F08D84AF50>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001F08DF7EAC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F08B041120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001F08B041080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F08DCDBF60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F08B040400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F08D822090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F08B041120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                     │        └ <function TelegramEventObserver.trigger at 0x000001F08B040540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F08D822090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001F08D5E1590>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001F08D7ED610>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001F08D84AD90>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                 └ functools.partial(<function context_saver_middleware at 0x000001F08B4D9120>, <function CallableObject.call at 0x000001F08DE81...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1f08d5c9750'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1523158653091678909', from_user=User(id=354638009, is_bot=False, first_name='Jonny.', last_name=None, usern...
                   └ <function CallableObject.call at 0x000001F08DE81BC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='15...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x000001F08B51D440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
                        │    └ <function ManagerImpl.dialog at 0x000001F08B51C7C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
                        │      │      └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                        │      └ <function Window.render at 0x000001F08B534040>
                        └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
                         │    │         └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
                         │    └ <function Window.load_data at 0x000001F08B51FE20>
                         └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001F08B4F7380>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F08E148710>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001F08D821310>
    │    │            └ <Window(<State 'AnnouncementPost:show_announcement_webapp'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'announcement_type': 'vehicle'}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1f08d5c9750'>,...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_form_data at 0x000001F08D58A520>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001F08D821310>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\announcement_menu\getters.py", line 24, in get_form_data
    'form_url': form_url.value,
                └ None

AttributeError: 'NoneType' object has no attribute 'value'
2024-02-15T16:25:12.385375+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:12.609054+0200 INFO Update id=925008654 is handled. Duration 218 ms by bot id=5646878393
2024-02-15T16:25:13.754786+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:13.931702+0200 INFO Update id=925008655 is handled. Duration 171 ms by bot id=5646878393
2024-02-15T16:25:16.502541+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:16.692569+0200 INFO Update id=925008656 is handled. Duration 186 ms by bot id=5646878393
2024-02-15T16:25:18.954212+0200 INFO 127.0.0.1 [15/Feb/2024:16:25:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:25:19.039145+0200 INFO Update id=925008657 is not handled. Duration 78 ms by bot id=5646878393
2024-02-15T16:25:19.039661+0200 INFO Bot stopped!
2024-02-15T16:25:59.608279+0200 INFO Bot started!
2024-02-15T16:26:02.276323+0200 INFO 127.0.0.1 [15/Feb/2024:16:26:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T16:26:02.427700+0200 INFO Update id=546664915 is not handled. Duration 139 ms by bot id=6797813960
2024-02-15T16:26:02.432701+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001BFEF0DA590>
                   │    │          │                   │           └ {'update_id': 546664915, 'message': {'message_id': 1057, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove'...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001BFEC8D1B20>
                   │    └ <Dispatcher '0x1bfeee59790'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001BFEF0DA590>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
                 │    └ <function Dispatcher.feed_update at 0x000001BFEC8D1A80>
                 └ <Dispatcher '0x1bfeee59790'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BFEC8D0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BFEF07D090>
                     └ <Dispatcher '0x1bfeee59790'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001BFEEFA7C10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001BFEEE356D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001BFEF69AB80>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001BFEF709210>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001BFEEE6CB50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001BFEF07DB50>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x000001BFEF567920>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001BFEEEE2250>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001BFEEE6C8D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664915, message=Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001BFEF567EC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1bfeee59790'>>, Update(update_id=546664915, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001BFEC8D1080>
                 └ <Dispatcher '0x1bfeee59790'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BFEF7100E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BFEC8D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BFEEE59590>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BFEC8D1120>
                 └ <Dispatcher '0x1bfeee59790'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001BFEC8D1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BFEF710040>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BFEC8D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BFEF07DD50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001BFEF0DB510>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001BFEF710220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BFEC8D1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001BFEC8D1080>
                     └ <Router '0x1bfeee41c50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001BFEF567E20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001BFEC8D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BFEEEE3310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001BFEC8D1120>
                 └ <Router '0x1bfeee41c50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │        └ <function TelegramEventObserver.trigger at 0x000001BFEC8D0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001BFEEEE3310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001BFEEE5B610>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001BFEEE6C8D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001BFEF0DB350>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<function context_saver_middleware at 0x000001BFECD69120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001BFEEF05FD0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1bfeee59790'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ <function CallableObject.call at 0x000001BFEF7104A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001BFEEEEE340>, Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 22, in start
    user_sub_status = await bot.get_chat_member(int(channel_id_for_sub.value), message.from_user.id)
                            │   │                   │                  │       │       │         └ 387375605
                            │   │                   │                  │       │       └ User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, username=None, language_code='uk', is_premium=None, ...
                            │   │                   │                  │       └ Message(message_id=1057, date=datetime.datetime(2024, 2, 15, 14, 25, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                            │   │                   │                  └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001BFEED14A40>
                            │   │                   └ <bot.db.models.models.BotSettings object at 0x000001BFEF0DCC50>
                            │   └ <function Bot.get_chat_member at 0x000001BFEC88EA20>
                            └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1626, in get_chat_member
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ GetChatMember(chat_id=-1001960731769, user_id=387375605)
                 └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ GetChatMember(chat_id=-1001960731769, user_id=387375605)
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001BFEEEE2450>
                 └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ GetChatMember(chat_id=-1001960731769, user_id=387375605)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001BFEEE6D9D0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001BFE6A20540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001BFEC86B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001BFEEEE2450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ GetChatMember(chat_id=-1001960731769, user_id=387375605)
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T16:49:16.978673+0200 INFO Bot stopped!
2024-02-15T16:52:33.568603+0200 INFO Bot started!
2024-02-15T17:16:05.247677+0200 INFO Bot stopped!
2024-02-15T17:48:19.886774+0200 INFO Bot started!
2024-02-15T17:49:33.027759+0200 INFO Bot stopped!
2024-02-15T17:49:35.995761+0200 INFO Bot started!
2024-02-15T17:49:51.763063+0200 INFO Bot stopped!
2024-02-15T17:50:11.164050+0200 INFO Bot started!
2024-02-15T17:51:35.285374+0200 INFO Bot stopped!
2024-02-15T17:51:56.984411+0200 INFO Bot started!
2024-02-15T18:33:46.868636+0200 INFO 127.0.0.1 [15/Feb/2024:18:33:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T18:33:47.130815+0200 ERROR Cannot get window data for state <State 'FirstStartWindow:sub_on_channel'>
2024-02-15T18:33:47.145816+0200 INFO Update id=546664916 is not handled. Duration 281 ms by bot id=6797813960
2024-02-15T18:33:47.150816+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001FF638AB510>
                   │    │          │                   │           └ {'update_id': 546664916, 'message': {'message_id': 1058, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove'...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001FF60E61B20>
                   │    └ <Dispatcher '0x1ff63649650'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001FF638AB510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
                 │    └ <function Dispatcher.feed_update at 0x000001FF60E61A80>
                 └ <Dispatcher '0x1ff63649650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001FF60E60400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001FF6386A250>
                     └ <Dispatcher '0x1ff63649650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001FF63795E10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001FF6360A6D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001FF63DD0A40>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001FF63884E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001FF638A2190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001FF6362F7D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x000001FF63F004A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001FF634E0050>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001FF6360B110>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664916, message=Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001FF63F00680>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1ff63649650'>>, Update(update_id=546664916, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001FF60E61080>
                 └ <Dispatcher '0x1ff63649650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001FF63F009A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001FF60E60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001FF6385FAD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001FF60E61120>
                 └ <Dispatcher '0x1ff63649650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001FF60E61080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001FF63F00A40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001FF60E60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001FF634CFF10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001FF638CC890>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001FF63F00AE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001FF60E61120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001FF60E61080>
                     └ <Router '0x1ff6362e650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001FF63F00CC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001FF60E60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001FF636E4D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001FF60E61120>
                 └ <Router '0x1ff6362e650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │        └ <function TelegramEventObserver.trigger at 0x000001FF60E60540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001FF636E4D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001FF63649E10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001FF6360B110>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001FF63609A10>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<function context_saver_middleware at 0x000001FF612FD120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001FF636E7A90>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ <function CallableObject.call at 0x000001FF63F00C20>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001FF636E9760>, Message(message_id=1058, date=datetime.datetime(2024, 2, 15, 16, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x000001FF61340EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x000001FF61341080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001FF61341440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
                        │    └ <function ManagerImpl.dialog at 0x000001FF613407C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
                        │      │      └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                        │      └ <function Window.render at 0x000001FF61354040>
                        └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
                         │    │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                         │    └ <function Window.load_data at 0x000001FF61343E20>
                         └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001FF6131BA10>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001FF634E0F50>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001FF636E49D0>
    │    │            └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1ff63649650'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_sub_channel_url at 0x000001FF6365C540>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001FF636E49D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\start_menu\getters.py", line 13, in get_sub_channel_url
    channel_info = await bot.get_chat(int(sub_channel_id.value))
                         │   │            │              └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001FF634BBF60>
                         │   │            └ <bot.db.models.models.BotSettings object at 0x000001FF63DC7750>
                         │   └ <function Bot.get_chat at 0x000001FF60E228E0>
                         └ <aiogram.client.bot.Bot object at 0x000001FF63834190>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1567, in get_chat
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ GetChat(chat_id=-1001960731769)
                 └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ GetChat(chat_id=-1001960731769)
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001FF6372B1D0>
                 └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ GetChat(chat_id=-1001960731769)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001FF63834190>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001FF5B010540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001FF60DFB600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001FF6372B1D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ GetChat(chat_id=-1001960731769)
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T18:36:01.266906+0200 INFO Bot stopped!
2024-02-15T18:38:16.311141+0200 INFO Bot started!
2024-02-15T18:38:20.307814+0200 INFO 127.0.0.1 [15/Feb/2024:18:38:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T18:38:20.741596+0200 INFO Update id=925008658 is handled. Duration 421 ms by bot id=5646878393
2024-02-15T18:38:22.783759+0200 INFO 127.0.0.1 [15/Feb/2024:18:38:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T18:38:23.308170+0200 INFO Update id=925008659 is handled. Duration 530 ms by bot id=5646878393
2024-02-15T18:50:50.620837+0200 INFO Bot stopped!
2024-02-15T18:59:35.062357+0200 INFO Bot started!
2024-02-15T18:59:37.568266+0200 INFO Bot stopped!
2024-02-15T19:35:24.284721+0200 INFO Bot started!
2024-02-15T19:45:30.203937+0200 INFO Bot stopped!
2024-02-15T19:45:33.411957+0200 INFO Bot started!
2024-02-15T19:52:41.211106+0200 INFO Bot stopped!
2024-02-15T19:52:55.395064+0200 INFO Bot started!
2024-02-15T20:33:29.124749+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:29.172497+0200 INFO Update id=546664917 is not handled. Duration 46 ms by bot id=5646878393
2024-02-15T20:33:33.533899+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:34.035134+0200 INFO Update id=546664918 is not handled. Duration 500 ms by bot id=5646878393
2024-02-15T20:33:34.040242+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-16' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664918, 'message': {'message_id': 1059, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000183243879C0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001832401A2F0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000018324046890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x0000018323BD2020>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664918, message=Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001832428CB80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664918, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018323BD18A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001832428CA40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001832428CF40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001832428D120>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33, 33, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x000001832428CE00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1059, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183240443D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183240443D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183240443D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183240443D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:39.107291+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:39.518823+0200 INFO Update id=546664919 is not handled. Duration 406 ms by bot id=5646878393
2024-02-15T20:33:39.520822+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-23' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664919, 'message': {'message_id': 1060, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000018324343F80>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000018324018220>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001832435EA10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x0000018323FDDD00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664919, message=Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x0000018324498EA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664919, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498CC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498FE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498F40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499080>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33, 39, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x0000018324498C20>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1060, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324352810>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324352810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324352810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324352810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:40.065204+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:40.363392+0200 INFO Update id=546664920 is not handled. Duration 296 ms by bot id=5646878393
2024-02-15T20:33:40.365390+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-29' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664920, 'message': {'message_id': 1061, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001832442F3C0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000183244C4C70>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001832442F010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x00000183244999E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664920, message=Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x0000018323BD1D00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664920, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499440>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499300>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000183244994E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x0000018324499260>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1061, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832442C690>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832442C690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832442C690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832442C690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:52.313057+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:52.717145+0200 INFO Update id=546664921 is not handled. Duration 406 ms by bot id=5646878393
2024-02-15T20:33:52.719148+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-35' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664921, 'message': {'message_id': 1062, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001832435F580>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000018324312D40>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000018324334ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x00000183244996C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664921, message=Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x00000183244993A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664921, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499B20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499760>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499A80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000183244991C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x0000018324499800>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1062, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183243E2510>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183243E2510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183243E2510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183243E2510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:53.174402+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:53.410587+0200 INFO Update id=546664922 is not handled. Duration 233 ms by bot id=5646878393
2024-02-15T20:33:53.412587+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-41' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664922, 'message': {'message_id': 1063, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000018324044F40>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000018324018220>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000018324438390>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x00000183243300E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664922, message=Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x0000018323FDDD00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664922, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001832428CC20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499620>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498C20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498CC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x0000018324499940>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1063, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832443A690>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832443A690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832443A690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001832443A690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:54.626545+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:54.793056+0200 INFO Update id=546664923 is not handled. Duration 171 ms by bot id=5646878393
2024-02-15T20:33:54.795055+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-47' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664923, 'message': {'message_id': 1064, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000018324423AC0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000018324312C50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001832442E390>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x0000018323BD2AC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664923, message=Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x0000018323BD1D00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664923, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001832449A020>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324498FE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499BC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499A80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x0000018324499EE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1064, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324337D10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324337D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324337D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018324337D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:33:59.856359+0200 INFO 127.0.0.1 [15/Feb/2024:20:33:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:33:59.971937+0200 INFO Update id=546664924 is not handled. Duration 109 ms by bot id=5646878393
2024-02-15T20:33:59.973937+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-53' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
                   │    │          │                   │           └ {'update_id': 546664924, 'message': {'message_id': 1065, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000018321201B20>
                   │    └ <Dispatcher '0x183239c5c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018323FF2D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function Dispatcher.feed_update at 0x0000018321201A80>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C28F10>
                     └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018323B5AA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000183239E0490>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000183243FAEC0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000018324313E20>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000183243ECED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018323C29A90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x00000183244991C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018323C34A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664924, message=Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x00000183244994E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x183239c5c10'>>, Update(update_id=546664924, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000018321201080>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499120>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C16DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Dispatcher '0x183239c5c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000183244999E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323C29C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018323FF3350>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001832449A3E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000018321201080>
                     └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000018324499E40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000018321200400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000018321201120>
                 └ <Router '0x18323a8bb10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000018321200540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018323A05750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000183239F3A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000183239C5E10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018323FF30D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001832169D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x0000018323AB68D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x183239c5c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x000001832449A480>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x0000018323AA5260>, Message(message_id=1065, date=datetime.datetime(2024, 2, 15, 18, 33...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000183216E0EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183244D0A10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000183216E1080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183244D0A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000183216E1440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183244D0A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000183244D0A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
          │    └ <function MessageManager.send_message at 0x00000183216E3060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <function MessageManager.send_text at 0x00000183216E3100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000183239F0C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000183211C3D80>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
                 └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000183239E1950>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001831B350540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001832119B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x0000018323C165D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=6133947978, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-15T20:51:16.495468+0200 INFO 127.0.0.1 [15/Feb/2024:20:51:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:51:16.934943+0200 INFO Update id=925008660 is handled. Duration 436 ms by bot id=5646878393
2024-02-15T20:51:19.287527+0200 INFO 127.0.0.1 [15/Feb/2024:20:51:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T20:51:19.636857+0200 INFO Update id=925008661 is handled. Duration 359 ms by bot id=5646878393
2024-02-15T23:03:20.585919+0200 INFO Bot stopped!
2024-02-15T23:41:46.941489+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (15664), thread 'MainThread' (9160):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 113, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000028FA0E69440>
    │       └ <function run at 0x0000028F9869C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000028FA0E74640>
           │      └ <function Runner.run at 0x0000028F9872C9A0>
           └ <asyncio.runners.Runner object at 0x0000028F96A3FE90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000028F9872A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000028F96A3FE90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000028F9880A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028F9872C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028F9866DB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 106, in main
    await site.start()
          │    └ <function TCPSite.start at 0x0000028F9E80F4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x0000028FA15966E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x0000028F9872B920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x0000028FA15966E0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8080): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-15T23:41:56.008583+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (9420), thread 'MainThread' (17624):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 113, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001B068ED9440>
    │       └ <function run at 0x000001B06070C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001B068EE4640>
           │      └ <function Runner.run at 0x000001B06079C9A0>
           └ <asyncio.runners.Runner object at 0x000001B05EAEFF10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001B06079A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001B05EAEFF10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001B06087A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B06079C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B0606DDB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 106, in main
    await site.start()
          │    └ <function TCPSite.start at 0x000001B06687F4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x000001B068FE2AA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x000001B06079B920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x000001B068FE2AA0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8080): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-15T23:42:14.675971+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (20096), thread 'MainThread' (8388):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 113, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000028C37499440>
    │       └ <function run at 0x0000028C2ECCC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000028C374A8540>
           │      └ <function Runner.run at 0x0000028C2ED5C9A0>
           └ <asyncio.runners.Runner object at 0x0000028C370ABFD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000028C2ED5A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000028C370ABFD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000028C2EE3A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000028C2ED5C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000028C2EC9DB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 106, in main
    await site.start()
          │    └ <function TCPSite.start at 0x0000028C34E3F4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x0000028C37BC25C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x0000028C2ED5B920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x0000028C37BC25C0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8080): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-15T23:42:55.759833+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (16272), thread 'MainThread' (20060):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 113, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001F9CADA5440>
    │       └ <function run at 0x000001F9C25DC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001F9CADB4540>
           │      └ <function Runner.run at 0x000001F9C266C9A0>
           └ <asyncio.runners.Runner object at 0x000001F9C09CFF10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001F9C266A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001F9C09CFF10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001F9C274A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F9C266C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F9C25ADB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 106, in main
    await site.start()
          │    └ <function TCPSite.start at 0x000001F9C874F4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x000001F9CB4D2440>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x000001F9C266B920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x000001F9CB4D2440>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8080): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-15T23:43:16.424941+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (16976), thread 'MainThread' (13004):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 112, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000245BF279440>
    │       └ <function run at 0x00000245B6AAC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000245BF288540>
           │      └ <function Runner.run at 0x00000245B6B3C9A0>
           └ <asyncio.runners.Runner object at 0x00000245B4EACE10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000245B6B3A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000245B4EACE10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000245B6C1A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000245B6B3C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000245B6A7DB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8080))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 105, in main
    await site.start()
          │    └ <function TCPSite.start at 0x00000245BCC1F4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x00000245BF094640>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x00000245B6B3B920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x00000245BF094640>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8080): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-15T23:45:08.213739+0200 INFO Bot started!
2024-02-15T23:47:33.313446+0200 INFO 127.0.0.1 [15/Feb/2024:23:47:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T23:47:33.795977+0200 INFO Update id=925008662 is handled. Duration 485 ms by bot id=5646878393
2024-02-15T23:47:35.046059+0200 INFO 127.0.0.1 [15/Feb/2024:23:47:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T23:47:35.159241+0200 INFO Update id=925008663 is handled. Duration 108 ms by bot id=5646878393
2024-02-15T23:47:35.718154+0200 INFO 127.0.0.1 [15/Feb/2024:23:47:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T23:47:35.838273+0200 INFO Update id=925008664 is handled. Duration 125 ms by bot id=5646878393
2024-02-15T23:52:30.292029+0200 INFO 127.0.0.1 [15/Feb/2024:23:52:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T23:52:30.511911+0200 INFO Update id=925008665 is handled. Duration 217 ms by bot id=5646878393
2024-02-15T23:52:31.501829+0200 INFO 127.0.0.1 [15/Feb/2024:23:52:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-15T23:52:31.872057+0200 INFO Update id=925008666 is handled. Duration 375 ms by bot id=5646878393
2024-02-16T13:54:02.098844+0200 INFO 127.0.0.1 [16/Feb/2024:13:54:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T13:54:02.938622+0200 INFO Update id=925008667 is handled. Duration 827 ms by bot id=5646878393
2024-02-16T14:59:07.652062+0200 INFO Bot stopped!
2024-02-16T15:22:24.795667+0200 INFO Bot started!
2024-02-16T15:28:22.600305+0200 INFO Bot stopped!
2024-02-16T15:28:28.837619+0200 INFO Bot started!
2024-02-16T15:49:03.320547+0200 INFO Bot stopped!
2024-02-16T15:49:12.932200+0200 INFO Bot started!
2024-02-16T15:50:53.178433+0200 INFO Bot stopped!
2024-02-16T15:50:58.630755+0200 INFO Bot started!
2024-02-16T15:51:24.050739+0200 INFO Bot stopped!
2024-02-16T15:51:29.543328+0200 INFO Bot started!
2024-02-16T15:54:42.622051+0200 INFO 127.0.0.1 [16/Feb/2024:15:54:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:55:12.225246+0200 INFO 127.0.0.1 [16/Feb/2024:15:55:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:55:12.884417+0200 INFO 127.0.0.1 [16/Feb/2024:15:55:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:55:15.872891+0200 INFO Update id=925008669 is not handled. Duration 3656 ms by bot id=5646878393
2024-02-16T15:55:15.872891+0200 INFO Update id=925008668 is not handled. Duration 33250 ms by bot id=5646878393
2024-02-16T15:55:15.873891+0200 INFO Update id=925008670 is not handled. Duration 2985 ms by bot id=5646878393
2024-02-16T15:55:15.875890+0200 INFO Bot stopped!
2024-02-16T15:55:21.307761+0200 INFO Bot started!
2024-02-16T15:55:22.134300+0200 INFO 127.0.0.1 [16/Feb/2024:15:55:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:55:32.047783+0200 INFO Update id=925008671 is not handled. Duration 9907 ms by bot id=5646878393
2024-02-16T15:55:32.048783+0200 INFO Bot stopped!
2024-02-16T15:55:37.343600+0200 INFO Bot started!
2024-02-16T15:55:38.574444+0200 INFO 127.0.0.1 [16/Feb/2024:15:55:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:56:30.874997+0200 INFO Update id=925008672 is not handled. Duration 52296 ms by bot id=5646878393
2024-02-16T15:56:30.876998+0200 INFO Bot stopped!
2024-02-16T15:56:36.844644+0200 INFO Bot started!
2024-02-16T15:56:37.746468+0200 INFO 127.0.0.1 [16/Feb/2024:15:56:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:56:38.890349+0200 INFO 127.0.0.1 [16/Feb/2024:15:56:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:56:44.418887+0200 INFO Update id=925008673 is not handled. Duration 6672 ms by bot id=5646878393
2024-02-16T15:56:44.419886+0200 INFO Update id=925008674 is not handled. Duration 5532 ms by bot id=5646878393
2024-02-16T15:56:44.420887+0200 INFO Bot stopped!
2024-02-16T15:56:49.943455+0200 INFO Bot started!
2024-02-16T15:56:52.410490+0200 INFO 127.0.0.1 [16/Feb/2024:15:56:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:56:57.610416+0200 INFO 127.0.0.1 [16/Feb/2024:15:56:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:57:02.069731+0200 INFO 127.0.0.1 [16/Feb/2024:15:57:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:57:29.837211+0200 INFO 127.0.0.1 [16/Feb/2024:15:57:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:57:32.094269+0200 INFO Update id=925008677 is not handled. Duration 30031 ms by bot id=5646878393
2024-02-16T15:57:32.170417+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-16' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x000002C1D5D5AEB0>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000002C1D33734C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000002C1D6364AA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000002C1D6364AA0>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000002C1D6364AA0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000002C1CD50F9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x000002C1D5D5AEB0>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x000002C1D62A7380>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002C1D59B7CD0>
                   │    │          │                   │           └ {'update_id': 925008677, 'message': {'message_id': 61490, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002C1D59B7010>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002C1D3341B20>
                   │    └ <Dispatcher '0x2c1d5b1a110'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002C1D59B7CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008677, message=Message(message_id=61490, date=datetime.datetime(2024, 2, 16, 13, 56, 59, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002C1D59B7010>
                 │    └ <function Dispatcher.feed_update at 0x000002C1D3341A80>
                 └ <Dispatcher '0x2c1d5b1a110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002C1D3340400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002C1D5D531D0>
                     └ <Dispatcher '0x2c1d5b1a110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2c1d5b1a110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008677, message=Message(message_id=61490, date=datetime.datetime(2024, 2, 16, 13, 56, 59, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002C1D5D53610>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2c1d5b1a110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008677, message=Message(message_id=61490, date=datetime.datetime(2024, 2, 16, 13, 56, 59, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002C1D5D535D0>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x000002C1D634DD90>
               │    │                └ <function RedisEventIsolation.lock at 0x000002C1D34ECFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000002C1D59B79D0>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002C1D5D535D0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x000002C1D63F5030>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000002C1D634D9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000002C1D59B79D0>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000002C1D349CFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000002C1D59B79D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000002C1D33D8CC0>
             └ <redis.asyncio.lock.Lock object at 0x000002C1D634DDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'427cc2f8ccd311eea792e89c25466699'
             │    └ <function Lock.do_acquire at 0x000002C1D33D8D60>
             └ <redis.asyncio.lock.Lock object at 0x000002C1D634DDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'427cc2f8ccd311eea792e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x000002C1D634DDD0>
             │    │     └ <function BasicKeyCommands.set at 0x000002C1D3471F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
             └ <redis.asyncio.lock.Lock object at 0x000002C1D634DDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000002C1D33D8180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=0>
          │    └ <function ConnectionPool.ensure_connection at 0x000002C1D33D8360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000002C1D33D6480>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000002C1D33D6700>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000002C1D33D6CA0>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-16T15:57:47.626125+0200 INFO Update id=925008675 is not handled. Duration 55218 ms by bot id=5646878393
2024-02-16T15:57:47.627125+0200 INFO Update id=925008676 is not handled. Duration 50015 ms by bot id=5646878393
2024-02-16T15:57:47.627125+0200 INFO Update id=925008678 is not handled. Duration 17781 ms by bot id=5646878393
2024-02-16T15:57:47.629125+0200 INFO Bot stopped!
2024-02-16T15:57:53.397938+0200 INFO Bot started!
2024-02-16T15:57:54.309149+0200 INFO 127.0.0.1 [16/Feb/2024:15:57:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:58:24.318061+0200 INFO Update id=925008679 is not handled. Duration 30000 ms by bot id=5646878393
2024-02-16T15:58:24.325062+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x0000016471012BB0>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000001646E6374C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x00000164714D71B0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x00000164714D71B0>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x00000164714D71B0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000001646877F9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x0000016471012BB0>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x00000164714445E0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000016470E8F9D0>
                   │    │          │                   │           └ {'update_id': 925008679, 'message': {'message_id': 61492, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000016470DBF390>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001646E601B20>
                   │    └ <Dispatcher '0x164710159d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000016470E8F9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008679, message=Message(message_id=61492, date=datetime.datetime(2024, 2, 16, 13, 57, 52, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000016470DBF390>
                 │    └ <function Dispatcher.feed_update at 0x000001646E601A80>
                 └ <Dispatcher '0x164710159d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001646E600400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000016471017A10>
                     └ <Dispatcher '0x164710159d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x164710159d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008679, message=Message(message_id=61492, date=datetime.datetime(2024, 2, 16, 13, 57, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016471017DD0>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x164710159d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008679, message=Message(message_id=61492, date=datetime.datetime(2024, 2, 16, 13, 57, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000016471017D90>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x0000016470C77B50>
               │    │                └ <function RedisEventIsolation.lock at 0x000001646E7ACFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000016471015A10>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000016471017D90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x00000164716B4A90>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000001646B24E2D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000016471015A10>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000001646E75CFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x0000016471015A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000001646E698CC0>
             └ <redis.asyncio.lock.Lock object at 0x0000016470C764D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'61a06d48ccd311ee8c22e89c25466699'
             │    └ <function Lock.do_acquire at 0x000001646E698D60>
             └ <redis.asyncio.lock.Lock object at 0x0000016470C764D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'61a06d48ccd311ee8c22e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x0000016470C764D0>
             │    │     └ <function BasicKeyCommands.set at 0x000001646E731F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
             └ <redis.asyncio.lock.Lock object at 0x0000016470C764D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000001646E698180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=0>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=0>
          │    └ <function ConnectionPool.ensure_connection at 0x000001646E698360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000001646E696480>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000001646E696700>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000001646E696CA0>
          └ Connection<host=localhost,port=6379,db=0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-16T15:59:02.256475+0200 INFO 127.0.0.1 [16/Feb/2024:15:59:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:59:02.627543+0200 INFO Update id=925008680 is handled. Duration 375 ms by bot id=5646878393
2024-02-16T15:59:04.100389+0200 INFO 127.0.0.1 [16/Feb/2024:15:59:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:59:04.519223+0200 INFO Update id=925008681 is handled. Duration 421 ms by bot id=5646878393
2024-02-16T15:59:05.359796+0200 INFO 127.0.0.1 [16/Feb/2024:15:59:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:59:05.762468+0200 INFO Update id=925008682 is handled. Duration 405 ms by bot id=5646878393
2024-02-16T15:59:08.658365+0200 INFO 127.0.0.1 [16/Feb/2024:15:59:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T15:59:08.967815+0200 INFO Update id=925008683 is handled. Duration 312 ms by bot id=5646878393
2024-02-16T16:03:23.192553+0200 INFO Bot stopped!
2024-02-16T16:03:26.459760+0200 INFO Bot started!
2024-02-16T16:06:17.170328+0200 INFO 127.0.0.1 [16/Feb/2024:16:06:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T16:06:17.431467+0200 INFO Update id=925008684 is handled. Duration 264 ms by bot id=5646878393
2024-02-16T16:06:18.048452+0200 INFO 127.0.0.1 [16/Feb/2024:16:06:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T16:06:18.323668+0200 INFO Update id=925008685 is handled. Duration 281 ms by bot id=5646878393
2024-02-16T16:07:09.866973+0200 INFO Bot stopped!
2024-02-16T16:07:12.817719+0200 INFO Bot started!
2024-02-16T20:57:52.551716+0200 INFO Bot stopped!
2024-02-16T21:06:14.703777+0200 INFO Bot started!
2024-02-16T21:35:36.217768+0200 INFO Bot stopped!
2024-02-16T21:36:08.028174+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (3392), thread 'MainThread' (18680):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000172A7B12520>
    │       └ <function run at 0x000001729F58C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000172A7AE6740>
           │      └ <function Runner.run at 0x000001729F61C9A0>
           └ <asyncio.runners.Runner object at 0x00000172A5E20CD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001729F61A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000172A5E20CD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001729F6FA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001729F61C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001729F55DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000172A7BA1D50>
          └ <function add_default_bot_settings at 0x00000172A797F1A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 53, in add_default_bot_settings
    query = insert(BotSettings).values(
            └ <function insert at 0x00000172A616A200>

NameError: name 'BotSettings' is not defined
2024-02-16T21:36:55.708486+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (23392), thread 'MainThread' (14980):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('ad_price', '100')
    │    │             │             └ <function PreparedStatement.fetch at 0x00000119E25054E0>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000119E253CD60>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('ad_price', '100')
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000119E253CD60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000119E253CD60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x00000119E2432570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x00000119E2554AE0>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.NotNullViolationError: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, ad_price, 100, null).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000119E1C55800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000119E241DAD0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000119E2162F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000119E247EE60>
           └ <_AsyncIoGreenlet object at 0x00000119E233E840 (otid=0x00000119E0651740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000119E247EE60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000119E2162D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, ad_price, 100, null).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000119E240D120>
    │       └ <function run at 0x00000119D9E7C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000119E23DEC40>
           │      └ <function Runner.run at 0x00000119D9F0C9A0>
           └ <asyncio.runners.Runner object at 0x00000119E1C4CC90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000119D9F0A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000119E1C4CC90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000119D9FEA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000119D9F0C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000119D9E4DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000119E061F810>
          └ <function add_default_bot_settings at 0x00000119E2290040>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 57, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000119E233E810>
          │       └ <function AsyncSession.execute at 0x00000119E2049EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000119E061F810>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000119E069CB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000119E233E840 (otid=0x00000119E0651740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000119E1F6E700>
           └ <sqlalchemy.orm.session.Session object at 0x00000119E2324C10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x00000119E1F36520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000119E0BB20C0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x00000119E21C2210>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000119E0BB23E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000119E0BB25C0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000119E0BB2660>
           └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000119E0BB28E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError'>, IntegrityError('<class \'asyncpg.e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>:...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000119E1C55800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000119E241DAD0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000119E2561450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000119E2162F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000119E247EE60>
           └ <_AsyncIoGreenlet object at 0x00000119E233E840 (otid=0x00000119E0651740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000119E247EE60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000119E2162D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000119E24C7FA0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...

sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, ad_price, 100, null).
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('ad_price', '100')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-02-16T21:37:17.213248+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (21844), thread 'MainThread' (14484):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('ad_price', '100')
    │    │             │             └ <function PreparedStatement.fetch at 0x000001CC6311D120>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001CC6317CC70>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('ad_price', '100')
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001CC6317CC70>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001CC6317CC70>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000001CC6306E570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000001CC63199E40>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.NotNullViolationError: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (2, ad_price, 100, null).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001CC62895800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001CC62F83550>
    └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001CC62DA2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001CC630BEF80>
           └ <_AsyncIoGreenlet object at 0x000001CC62F4B900 (otid=0x000001CC61291740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001CC630BEF80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001CC62DA2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (2, ad_price, 100, null).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC63036F20>
    │       └ <function run at 0x000001CC5AABC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC6301EB40>
           │      └ <function Runner.run at 0x000001CC5AB4C9A0>
           └ <asyncio.runners.Runner object at 0x000001CC6288CC50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC5AB4A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC6288CC50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC5AC2A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC5AB4C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC5AA8DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001CC630EC390>
          └ <function add_default_bot_settings at 0x000001CC62EAFC40>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 57, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x000001CC62E01590>
          │       └ <function AsyncSession.execute at 0x000001CC62C89EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000001CC630EC390>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000001CC612DCB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001CC62F4B900 (otid=0x000001CC61291740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001CC62BAE700>
           └ <sqlalchemy.orm.session.Session object at 0x000001CC62F98450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x000001CC62B76520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001CC617F20C0>
             └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x000001CC62F56110>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001CC617F23E0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001CC617F25C0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001CC617F2660>
           └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001CC617F28E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError'>, IntegrityError('<class \'asyncpg.e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>:...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001CC62895800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001CC62F83550>
    └ <sqlalchemy.engine.base.Connection object at 0x000001CC63182B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001CC62DA2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001CC630BEF80>
           └ <_AsyncIoGreenlet object at 0x000001CC62F4B900 (otid=0x000001CC61291740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001CC630BEF80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001CC62DA2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001CC631A8100>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "user_id" відношення "bot_setti...

sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "user_id" відношення "bot_settings" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (2, ad_price, 100, null).
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('ad_price', '100')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2024-02-16T21:38:31.608354+0200 INFO Bot started!
2024-02-16T21:39:06.053631+0200 INFO Bot stopped!
2024-02-16T21:40:30.078250+0200 INFO Bot started!
2024-02-16T21:54:37.502849+0200 INFO Bot stopped!
2024-02-16T21:54:40.170467+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (2632), thread 'MainThread' (20064):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 522, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x00000190F3ED3BA0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x00000190F4298310>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x00000190F4298310>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x00000190F4271B20>
                 └ <asyncpg.connection.Connection object at 0x00000190F4298310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x00000190F4271800>
                 └ <asyncpg.connection.Connection object at 0x00000190F4298310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x00000190F4298310>
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
    return await waiter

asyncpg.exceptions.DatatypeMismatchError: стовпець "key" має тип botsettingsenum, а вираз character varying
HINT:  Потрібно буде переписати або привести вираз.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000190F39C5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000190F41798D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000190F3ED2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000190F41E6F80>
           └ <_AsyncIoGreenlet object at 0x00000190F40B8D80 (otid=0x00000190F23C1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000190F41E6F80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000190F3ED2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ DatatypeMismatchError('стовпець "key" має тип botsettingsenum, а вираз character varying')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ DatatypeMismatchError('стовпець "key" має тип botsettingsenum, а вираз character varying')
          └ ProgrammingError('<class \'asyncpg.exceptions.DatatypeMismatchError\'>: стовпець "key" має тип botsettingsenum, а вираз chara...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.DatatypeMismatchError'>: стовпець "key" має тип botsettingsenum, а вираз character varying
HINT:  Потрібно буде переписати або привести вираз.


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000190F416F7E0>
    │       └ <function run at 0x00000190EBBEC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000190F4146B40>
           │      └ <function Runner.run at 0x00000190EBC7C9A0>
           └ <asyncio.runners.Runner object at 0x00000190E9FD0090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000190EBC7A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000190E9FD0090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000190EBD5A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000190EBC7C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000190EBBBDB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 45, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000190F3F45450>
          └ <function add_default_bot_settings at 0x00000190F3FEDC60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 57, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000190F4092910>
          │       └ <function AsyncSession.execute at 0x00000190F3DB9EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000190F3F45450>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000190F2480B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000190F40B8D80 (otid=0x00000190F23C1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000190F3CDE700>
           └ <sqlalchemy.orm.session.Session object at 0x00000190F406BB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x00000190F3CAA520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000190F29220C0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x00000190EE74C790>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000190F29223E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000190F29225C0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000190F2922660>
           └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000190F29228E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError('<class \'asyncpg.exceptions.DatatypeMismatchError\'>: стовпець "key" має тип botsettingsenum, а вираз chara...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError('<class \'async...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.DatatypeMismatchError...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000190F39C5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000190F41798D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000190F4131CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('ad_price', '100')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000190F3ED2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000190F41E6F80>
           └ <_AsyncIoGreenlet object at 0x00000190F40B8D80 (otid=0x00000190F23C1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000190F41E6F80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000190F3ED2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ DatatypeMismatchError('стовпець "key" має тип botsettingsenum, а вираз character varying')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000190F424B040>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ DatatypeMismatchError('стовпець "key" має тип botsettingsenum, а вираз character varying')
          └ ProgrammingError('<class \'asyncpg.exceptions.DatatypeMismatchError\'>: стовпець "key" має тип botsettingsenum, а вираз chara...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.DatatypeMismatchError'>: стовпець "key" має тип botsettingsenum, а вираз character varying
HINT:  Потрібно буде переписати або привести вираз.
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::VARCHAR, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('ad_price', '100')]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-16T21:57:45.855562+0200 INFO Bot started!
2024-02-16T22:01:52.438517+0200 INFO Bot stopped!
2024-02-16T22:02:05.020186+0200 INFO Bot started!
2024-02-16T22:03:39.157488+0200 INFO Bot stopped!
2024-02-16T22:03:44.260383+0200 INFO Bot started!
2024-02-16T22:06:30.151672+0200 INFO Bot stopped!
2024-02-16T22:06:33.052606+0200 INFO Bot started!
2024-02-16T22:06:33.065514+0200 INFO 127.0.0.1 [16/Feb/2024:22:06:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:06:33.116197+0200 INFO 127.0.0.1 [16/Feb/2024:22:06:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:06:33.432505+0200 INFO Update id=925008686 is handled. Duration 358 ms by bot id=5646878393
2024-02-16T22:06:33.435501+0200 INFO Update id=925008687 is handled. Duration 312 ms by bot id=5646878393
2024-02-16T22:06:36.629039+0200 INFO 127.0.0.1 [16/Feb/2024:22:06:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:06:37.080174+0200 INFO Update id=925008688 is handled. Duration 452 ms by bot id=5646878393
2024-02-16T22:17:45.065964+0200 INFO Bot stopped!
2024-02-16T22:17:56.488388+0200 INFO Bot started!
2024-02-16T22:18:02.697754+0200 INFO 127.0.0.1 [16/Feb/2024:22:18:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:18:02.960418+0200 INFO Update id=925008689 is handled. Duration 264 ms by bot id=5646878393
2024-02-16T22:18:40.304429+0200 INFO 127.0.0.1 [16/Feb/2024:22:18:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:18:40.703009+0200 INFO Update id=925008690 is handled. Duration 405 ms by bot id=5646878393
2024-02-16T22:33:49.401593+0200 INFO 127.0.0.1 [16/Feb/2024:22:33:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:33:49.404264+0200 INFO Update id=925008691 is not handled. Duration 0 ms by bot id=5646878393
2024-02-16T22:33:49.412261+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-29' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: Aq1xN4')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E3F9AA5410>
                   │    │          │                   │           └ {'update_id': 925008691, 'callback_query': {'id': '2618484232291817425', 'from': {'id': 609663369, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001E3F980AAD0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001E3F73D1B20>
                   │    └ <Dispatcher '0x1e3f9960050'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E3F9AA5410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001E3F980AAD0>
                 │    └ <function Dispatcher.feed_update at 0x000001E3F73D1A80>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F98169D0>
                     └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001E3F9BCFA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001E3F9BCFA10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001E3FA4BC3C0>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: Aq1xN4')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001E3FA265030>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001E3FA4C7890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001E3F9BCFF90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001E3F9B96CA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E3F9BD3050>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E3F9BD01D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008691, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001E3FA248860>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1e3f9960050'>>, Update(update_id=925008691, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='2618484232291817425', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001E3F73D1080>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='2618484232291817425', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E3F9B75580>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F9BCE610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E3F73D1120>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='2618484232291817425', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E3F73D1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='2618484232291817425', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E3FA2498A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F9BD10D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000001E3F786DF80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000001E3F9990CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'Aq1xN4'
                    │     └ <function StorageProxy.load_context at 0x000001E3F786D4E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001E3FA4C7F90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: Aq1xN4
2024-02-16T22:33:51.251227+0200 INFO 127.0.0.1 [16/Feb/2024:22:33:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:33:51.253770+0200 INFO Update id=925008692 is not handled. Duration 0 ms by bot id=5646878393
2024-02-16T22:33:51.254771+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-32' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: Aq1xN4')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E3F9AA5410>
                   │    │          │                   │           └ {'update_id': 925008692, 'callback_query': {'id': '2618484233900982361', 'from': {'id': 609663369, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001E3F980AAD0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001E3F73D1B20>
                   │    └ <Dispatcher '0x1e3f9960050'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001E3F9AA5410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001E3F980AAD0>
                 │    └ <function Dispatcher.feed_update at 0x000001E3F73D1A80>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F98169D0>
                     └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001E3F9BCFA50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001E3F9BCFA10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001E3FA470100>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: Aq1xN4')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001E3FA2E4E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001E3FA470190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001E3F9BCFF90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001E3FA2FE7A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E3F9BD3050>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E3F9BD01D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008692, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001E3FA249260>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1e3f9960050'>>, Update(update_id=925008692, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='2618484233900982361', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001E3F73D1080>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='2618484233900982361', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E3FA2FE8E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F9BCE610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E3F73D1120>
                 └ <Dispatcher '0x1e3f9960050'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='2618484233900982361', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E3F73D1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e3f9960050'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='2618484233900982361', from_user=User(id=609663369, is_bot=False, first_name='Роман', last_name=None, userna...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E3FA2FEFC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E3F73D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E3F9BD10D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000001E3F786DF80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000001E3F9990CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'Aq1xN4'
                    │     └ <function StorageProxy.load_context at 0x000001E3F786D4E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001E3FA441310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: Aq1xN4
2024-02-16T22:34:04.382917+0200 INFO Bot stopped!
2024-02-16T22:36:16.121818+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (10784), thread 'MainThread' (5516):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ()
    │    │             │             └ <function PreparedStatement.fetch at 0x000001D613FAA480>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001D614024450>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ()
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001D614024450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001D614024450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000001D613ED6570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000001D613FFA980>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidForeignKeyError: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001D6136F5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001D613EC3350>
    └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001D613C02F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001D613F2F0A0>
           └ <_AsyncIoGreenlet object at 0x000001D613FE21C0 (otid=0x000001D6120F1740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001D613F2F0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001D613C02D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001D613EB6700>
    │       └ <function run at 0x000001D60B97C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001D613E86B40>
           │      └ <function Runner.run at 0x000001D60BA0C9A0>
           └ <asyncio.runners.Runner object at 0x000001D6136ECC50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001D60BA0A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001D6136ECC50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001D60BADA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D60BA0C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D60B94DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001D614029740>
          │    │   │      │    └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
          │    │   │      └ <class 'sqlalchemy.exc.ProgrammingError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object AsyncEngine.begin at 0x000001D613EEF970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001D613C92AD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 1068, in begin
    yield conn
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001D613FBE4D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 41, in main
    await conn.run_sync(metadata.create_all)
          │    │        │        └ <function MetaData.create_all at 0x000001D6125A5760>
          │    │        └ MetaData()
          │    └ <function AsyncConnection.run_sync at 0x000001D613711E40>
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001D613FBE4D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 891, in run_sync
    return await greenlet_spawn(fn, self._proxied, *arg, **kw)
                 │              │   │    │          │      └ {}
                 │              │   │    │          └ ()
                 │              │   │    └ <sqlalchemy.util.langhelpers._non_memoized_property object at 0x000001D613718550>
                 │              │   └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001D613FBE4D0>
                 │              └ <bound method MetaData.create_all of MetaData()>
                 └ <function greenlet_spawn at 0x000001D61213CB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001D613FE21C0 (otid=0x000001D6120F1740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5832, in create_all
    bind._run_ddl_visitor(
    │    └ <function Connection._run_ddl_visitor at 0x000001D612652A20>
    └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2448, in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
    │               │    │        │       │                       └ MetaData()
    │               │    │        │       └ {'checkfirst': True, 'tables': None}
    │               │    │        └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
    │               │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001D613EC3350>
    │               └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
    └ <class 'sqlalchemy.sql.ddl.SchemaGenerator'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {}
           │    └ MetaData()
           └ <bound method SchemaGenerator.visit_metadata of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001D613FE9860>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 919, in visit_metadata
    self.traverse_single(
    │    └ <function ExternalTraversal.traverse_single at 0x000001D61227ECA0>
    └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001D613FE9860>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {'create_ok': True, 'include_foreign_key_constraints': {ForeignKeyConstraint(<sqlalchemy.sql.base.ReadOnlyColumnCollection ob...
           │    └ Table('vehicle_tag', MetaData(), Column('id', BIGINT(), table=<vehicle_tag>, primary_key=True, nullable=False), Column('vehic...
           └ <bound method SchemaGenerator.visit_table of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001D613FE9860>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 957, in visit_table
    )._invoke_with(self.connection)
                   │    └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
                   └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001D613FE9860>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 315, in _invoke_with
    return bind.execute(self)
           │    │       └ <sqlalchemy.sql.ddl.CreateTable object at 0x000001D613DF5AD0>
           │    └ <function Connection.execute at 0x000001D6126520C0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ExecutableDDLElement._execute_on_connection of <sqlalchemy.sql.ddl.CreateTable object at 0x000001D613DF5AD0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 181, in _execute_on_connection
    return connection._execute_ddl(
           │          └ <function Connection._execute_ddl at 0x000001D6126522A0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1528, in _execute_ddl
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001D6126525C0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001D612652660>
           └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001D6126528E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError('<class \'async...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001D6136F5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001D613EC3350>
    └ <sqlalchemy.engine.base.Connection object at 0x000001D613DD8090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001D613C02F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001D613F2F0A0>
           └ <_AsyncIoGreenlet object at 0x000001D613FE21C0 (otid=0x000001D6120F1740) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001D613F2F0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001D613C02D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001D613FEE140>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам
[SQL: 
CREATE TABLE vehicle_tag (
	id BIGSERIAL NOT NULL, 
	vehicle_id BIGINT NOT NULL, 
	tag VARCHAR(50) NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(vehicle_id) REFERENCES vehicles_posts (id), 
	FOREIGN KEY(tag) REFERENCES tags (tag)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-16T22:36:28.380689+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (23296), thread 'MainThread' (24320):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ()
    │    │             │             └ <function PreparedStatement.fetch at 0x0000015E552AA480>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000015E55328310>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ()
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000015E55328310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000015E55328310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x0000015E551D6570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x0000015E552FA980>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidForeignKeyError: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015E549F5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000015E551CC890>
    └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000015E54F02F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000015E5522F0A0>
           └ <_AsyncIoGreenlet object at 0x0000015E552E2800 (otid=0x0000015E533F1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000015E5522F0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000015E54F02D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000015E551BA700>
    │       └ <function run at 0x0000015E4CC9C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000015E5518AB40>
           │      └ <function Runner.run at 0x0000015E4CD2C9A0>
           └ <asyncio.runners.Runner object at 0x0000015E54F75850>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000015E4CD2A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000015E54F75850>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000015E4CDFA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000015E4CD2C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000015E4CC6DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000015E553254C0>
          │    │   │      │    └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
          │    │   │      └ <class 'sqlalchemy.exc.ProgrammingError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object AsyncEngine.begin at 0x0000015E551EF970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000015E552BF5D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 1068, in begin
    yield conn
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x0000015E552C27F0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 41, in main
    await conn.run_sync(metadata.create_all)
          │    │        │        └ <function MetaData.create_all at 0x0000015E538A5760>
          │    │        └ MetaData()
          │    └ <function AsyncConnection.run_sync at 0x0000015E54A11E40>
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x0000015E552C27F0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 891, in run_sync
    return await greenlet_spawn(fn, self._proxied, *arg, **kw)
                 │              │   │    │          │      └ {}
                 │              │   │    │          └ ()
                 │              │   │    └ <sqlalchemy.util.langhelpers._non_memoized_property object at 0x0000015E54A14B10>
                 │              │   └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x0000015E552C27F0>
                 │              └ <bound method MetaData.create_all of MetaData()>
                 └ <function greenlet_spawn at 0x0000015E5343CB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000015E552E2800 (otid=0x0000015E533F1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5832, in create_all
    bind._run_ddl_visitor(
    │    └ <function Connection._run_ddl_visitor at 0x0000015E53952A20>
    └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2448, in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
    │               │    │        │       │                       └ MetaData()
    │               │    │        │       └ {'checkfirst': True, 'tables': None}
    │               │    │        └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
    │               │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000015E551CC890>
    │               └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
    └ <class 'sqlalchemy.sql.ddl.SchemaGenerator'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {}
           │    └ MetaData()
           └ <bound method SchemaGenerator.visit_metadata of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x0000015E552E5B80>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 919, in visit_metadata
    self.traverse_single(
    │    └ <function ExternalTraversal.traverse_single at 0x0000015E5357ECA0>
    └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x0000015E552E5B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {'create_ok': True, 'include_foreign_key_constraints': {ForeignKeyConstraint(<sqlalchemy.sql.base.ReadOnlyColumnCollection ob...
           │    └ Table('vehicle_tag', MetaData(), Column('id', BIGINT(), table=<vehicle_tag>, primary_key=True, nullable=False), Column('vehic...
           └ <bound method SchemaGenerator.visit_table of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x0000015E552E5B80>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 957, in visit_table
    )._invoke_with(self.connection)
                   │    └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
                   └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x0000015E552E5B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 315, in _invoke_with
    return bind.execute(self)
           │    │       └ <sqlalchemy.sql.ddl.CreateTable object at 0x0000015E550F2D90>
           │    └ <function Connection.execute at 0x0000015E539520C0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ExecutableDDLElement._execute_on_connection of <sqlalchemy.sql.ddl.CreateTable object at 0x0000015E550F2D90>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 181, in _execute_on_connection
    return connection._execute_ddl(
           │          └ <function Connection._execute_ddl at 0x0000015E539522A0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1528, in _execute_ddl
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000015E539525C0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000015E53952660>
           └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000015E539528E0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError('<class \'async...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000015E549F5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000015E551CC890>
    └ <sqlalchemy.engine.base.Connection object at 0x0000015E552BF9D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000015E54F02F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000015E5522F0A0>
           └ <_AsyncIoGreenlet object at 0x0000015E552E2800 (otid=0x0000015E533F1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000015E5522F0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000015E54F02D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000015E552EDFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам
[SQL: 
CREATE TABLE vehicle_tag (
	id BIGSERIAL NOT NULL, 
	vehicle_id BIGINT NOT NULL, 
	tag VARCHAR(50) NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(vehicle_id) REFERENCES vehicles_posts (id), 
	FOREIGN KEY(tag) REFERENCES tags (tag)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-16T22:37:50.503506+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (8340), thread 'MainThread' (13000):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ()
    │    │             │             └ <function PreparedStatement.fetch at 0x000001C998C6A520>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001C998CCFF60>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ()
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001C998CCFF60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000001C998CCFF60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000001C998B96570>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000001C998CB28E0>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidForeignKeyError: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C9983B5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001C998B8C550>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001C9988C2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001C998BEF0A0>
           └ <_AsyncIoGreenlet object at 0x000001C998C9B1C0 (otid=0x000001C996DB1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001C998BEF0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001C9988C2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001C998B7A7A0>
    │       └ <function run at 0x000001C99061C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001C998B4AC40>
           │      └ <function Runner.run at 0x000001C9906AC9A0>
           └ <asyncio.runners.Runner object at 0x000001C9983A92D0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001C9906AA480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001C9983A92D0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001C99077A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001C9906AC220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001C9905EDB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C998CE2640>
          │    │   │      │    └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
          │    │   │      └ <class 'sqlalchemy.exc.ProgrammingError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object AsyncEngine.begin at 0x000001C998BB3970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C998AADD50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 1068, in begin
    yield conn
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001C998C82660>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 41, in main
    await conn.run_sync(metadata.create_all)
          │    │        │        └ <function MetaData.create_all at 0x000001C997265760>
          │    │        └ MetaData()
          │    └ <function AsyncConnection.run_sync at 0x000001C9983D1E40>
          └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001C998C82660>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 891, in run_sync
    return await greenlet_spawn(fn, self._proxied, *arg, **kw)
                 │              │   │    │          │      └ {}
                 │              │   │    │          └ ()
                 │              │   │    └ <sqlalchemy.util.langhelpers._non_memoized_property object at 0x000001C9983D4C50>
                 │              │   └ <sqlalchemy.ext.asyncio.engine.AsyncConnection object at 0x000001C998C82660>
                 │              └ <bound method MetaData.create_all of MetaData()>
                 └ <function greenlet_spawn at 0x000001C996DFCB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000001C998C9B1C0 (otid=0x000001C996DB1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\schema.py", line 5832, in create_all
    bind._run_ddl_visitor(
    │    └ <function Connection._run_ddl_visitor at 0x000001C997312A20>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2448, in _run_ddl_visitor
    visitorcallable(self.dialect, self, **kwargs).traverse_single(element)
    │               │    │        │       │                       └ MetaData()
    │               │    │        │       └ {'checkfirst': True, 'tables': None}
    │               │    │        └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
    │               │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001C998B8C550>
    │               └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
    └ <class 'sqlalchemy.sql.ddl.SchemaGenerator'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {}
           │    └ MetaData()
           └ <bound method SchemaGenerator.visit_metadata of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001C998CADBD0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 919, in visit_metadata
    self.traverse_single(
    │    └ <function ExternalTraversal.traverse_single at 0x000001C996F3ECA0>
    └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001C998CADBD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 671, in traverse_single
    return meth(obj, **kw)
           │    │      └ {'create_ok': True, 'include_foreign_key_constraints': {ForeignKeyConstraint(<sqlalchemy.sql.base.ReadOnlyColumnCollection ob...
           │    └ Table('vehicle_tag', MetaData(), Column('id', BIGINT(), table=<vehicle_tag>, primary_key=True, nullable=False), Column('vehic...
           └ <bound method SchemaGenerator.visit_table of <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001C998CADBD0>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 957, in visit_table
    )._invoke_with(self.connection)
                   │    └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
                   └ <sqlalchemy.sql.ddl.SchemaGenerator object at 0x000001C998CADBD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 315, in _invoke_with
    return bind.execute(self)
           │    │       └ <sqlalchemy.sql.ddl.CreateTable object at 0x000001C998A7AF50>
           │    └ <function Connection.execute at 0x000001C9973120C0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ExecutableDDLElement._execute_on_connection of <sqlalchemy.sql.ddl.CreateTable object at 0x000001C998A7AF50>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\ddl.py", line 181, in _execute_on_connection
    return connection._execute_ddl(
           │          └ <function Connection._execute_ddl at 0x000001C9973122A0>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1528, in _execute_ddl
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001C9973125C0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001C997312660>
           └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001C9973128E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError('<class \'async...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.InvalidForeignKeyErro...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001C9983B5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000001C998B8C550>
    └ <sqlalchemy.engine.base.Connection object at 0x000001C998BC3410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ '\nCREATE TABLE vehicle_tag (\n\tid BIGSERIAL NOT NULL, \n\tvehicle_id BIGINT NOT NULL, \n\ttag VARCHAR(50) NOT NULL, \n\tPRI...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000001C9988C2F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001C998BEF0A0>
           └ <_AsyncIoGreenlet object at 0x000001C998C9B1C0 (otid=0x000001C996DB1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000001C998BEF0A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000001C9988C2D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000001C998CA61A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidForeignKeyError('у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам')
          └ ProgrammingError('<class \'asyncpg.exceptions.InvalidForeignKeyError\'>: у цільовій зовнішній таблиці "tags" немає обмеження ...

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.InvalidForeignKeyError'>: у цільовій зовнішній таблиці "tags" немає обмеження унікальності, відповідного даним ключам
[SQL: 
CREATE TABLE vehicle_tag (
	id BIGSERIAL NOT NULL, 
	vehicle_id BIGINT NOT NULL, 
	tag VARCHAR(50) NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(vehicle_id) REFERENCES vehicles_posts (id), 
	FOREIGN KEY(tag) REFERENCES tags (tag)
)

]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-16T22:38:13.335930+0200 INFO Bot started!
2024-02-16T22:38:40.460068+0200 INFO Bot stopped!
2024-02-16T22:39:06.502980+0200 INFO Bot started!
2024-02-16T22:40:47.350812+0200 INFO Bot stopped!
2024-02-16T22:40:58.672320+0200 INFO Bot started!
2024-02-16T22:43:01.521654+0200 INFO Bot stopped!
2024-02-16T22:43:37.519498+0200 INFO Bot started!
2024-02-16T22:59:58.610333+0200 INFO 127.0.0.1 [16/Feb/2024:22:59:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T22:59:58.973288+0200 INFO Update id=925008693 is handled. Duration 358 ms by bot id=5646878393
2024-02-16T23:00:00.088883+0200 INFO 127.0.0.1 [16/Feb/2024:23:00:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:00:00.257294+0200 INFO Update id=925008694 is handled. Duration 172 ms by bot id=5646878393
2024-02-16T23:00:01.528367+0200 INFO 127.0.0.1 [16/Feb/2024:23:00:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:00:01.818686+0200 INFO Update id=925008695 is handled. Duration 297 ms by bot id=5646878393
2024-02-16T23:00:02.539443+0200 INFO 127.0.0.1 [16/Feb/2024:23:00:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:00:02.836554+0200 INFO Update id=925008696 is handled. Duration 296 ms by bot id=5646878393
2024-02-16T23:00:03.291554+0200 INFO 127.0.0.1 [16/Feb/2024:23:00:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:00:03.503199+0200 INFO Update id=925008697 is handled. Duration 219 ms by bot id=5646878393
2024-02-16T23:00:03.826659+0200 INFO 127.0.0.1 [16/Feb/2024:23:00:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:00:03.943712+0200 INFO Update id=925008698 is handled. Duration 125 ms by bot id=5646878393
2024-02-16T23:19:54.297373+0200 INFO 127.0.0.1 [16/Feb/2024:23:19:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:19:54.602621+0200 INFO Update id=925008699 is handled. Duration 296 ms by bot id=5646878393
2024-02-16T23:20:01.319337+0200 INFO 127.0.0.1 [16/Feb/2024:23:20:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:20:01.915084+0200 INFO Update id=925008700 is handled. Duration 592 ms by bot id=5646878393
2024-02-16T23:25:03.668022+0200 INFO 127.0.0.1 [16/Feb/2024:23:25:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-16T23:25:04.096169+0200 INFO Update id=925008701 is handled. Duration 437 ms by bot id=5646878393
2024-02-16T23:28:12.721270+0200 INFO Bot stopped!
2024-02-17T00:25:47.487587+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (16056), thread 'MainThread' (24308):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 109, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001F1D1F06C00>
    │       └ <function run at 0x000001F1C996C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001F1D1EDAC40>
           │      └ <function Runner.run at 0x000001F1C99FC9A0>
           └ <asyncio.runners.Runner object at 0x000001F1D1739710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001F1C99FA480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001F1D1739710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001F1C9ADA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F1C99FC220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F1C993DB20>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8000))]]>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<_GatheringFu....1', 8000))]]>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<_GatheringFu....1', 8000))]]>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<_GatheringFu....1', 8000))]]>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 102, in main
    await site.start()
          │    └ <function TCPSite.start at 0x000001F1CFADF4C0>
          └ <aiohttp.web_runner.TCPSite object at 0x000001F1D262D8A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiohttp\web_runner.py", line 119, in start
    self._server = await loop.create_server(
    │    │               │    └ <function BaseEventLoop.create_server at 0x000001F1C99FB920>
    │    │               └ <ProactorEventLoop running=True closed=False debug=False>
    │    └ <member '_server' of 'BaseSite' objects>
    └ <aiohttp.web_runner.TCPSite object at 0x000001F1D262D8A0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1511, in create_server
    raise OSError(err.errno, 'error while attempting '

OSError: [Errno 10048] error while attempting to bind on address ('127.0.0.1', 8000): only one usage of each socket address (protocol/network address/port) is normally permitted
2024-02-17T00:26:03.811467+0200 INFO Bot started!
2024-02-17T00:26:38.407494+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:38.412498+0200 INFO Update id=925008702 is not handled. Duration 0 ms by bot id=5646878393
2024-02-17T00:26:38.415498+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: HPi0y')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
                   │    │          │                   │           └ {'update_id': 925008702, 'callback_query': {'id': '3833139317794381036', 'from': {'id': 892472294, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002B45FE91B20>
                   │    └ <Dispatcher '0x2b46257bcd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                 │    └ <function Dispatcher.feed_update at 0x000002B45FE91A80>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462680E90>
                     └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002B462681250>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002B462681210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002B4626E7080>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: HPi0y')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002B46266AB60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002B46039B790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002B4624605D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002B462B737E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002B46268C6D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002B46241E0D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008702, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002B462B739C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2b46257bcd0'>>, Update(update_id=925008702, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='3833139317794381036', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002B45FE91080>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139317794381036', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462B73C40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B46266F610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002B45FE91120>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='3833139317794381036', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002B45FE91080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139317794381036', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462B73BA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462682710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000002B46032DF80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000002B4626DAB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'HPi0y'
                    │     └ <function StorageProxy.load_context at 0x000002B46032D4E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002B4626E4850>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: HPi0y
2024-02-17T00:26:38.466092+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:38.467665+0200 INFO Update id=925008703 is not handled. Duration 0 ms by bot id=5646878393
2024-02-17T00:26:38.469655+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-15' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: HPi0y')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
                   │    │          │                   │           └ {'update_id': 925008703, 'callback_query': {'id': '3833139317629377270', 'from': {'id': 892472294, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002B45FE91B20>
                   │    └ <Dispatcher '0x2b46257bcd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                 │    └ <function Dispatcher.feed_update at 0x000002B45FE91A80>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462680E90>
                     └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002B462681250>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002B462681210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002B462C251C0>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: HPi0y')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002B46266A7A0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002B462C32650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002B4624605D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002B462D20040>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002B46268C6D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002B46241E0D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008703, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002B462D20E00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2b46257bcd0'>>, Update(update_id=925008703, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='3833139317629377270', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002B45FE91080>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139317629377270', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462639760>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B46266F610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002B45FE91120>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='3833139317629377270', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002B45FE91080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139317629377270', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462D20F40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462682710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000002B46032DF80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000002B4626DAB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'HPi0y'
                    │     └ <function StorageProxy.load_context at 0x000002B46032D4E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002B462C26C50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: HPi0y
2024-02-17T00:26:38.526092+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:38.527588+0200 INFO Update id=925008704 is not handled. Duration 0 ms by bot id=5646878393
2024-02-17T00:26:38.529575+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-20' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: HPi0y')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
                   │    │          │                   │           └ {'update_id': 925008704, 'callback_query': {'id': '3833139318756396651', 'from': {'id': 892472294, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002B45FE91B20>
                   │    └ <Dispatcher '0x2b46257bcd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002B462446890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002B4601F2C10>
                 │    └ <function Dispatcher.feed_update at 0x000002B45FE91A80>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462680E90>
                     └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002B462681250>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002B462681210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002B462B7F5C0>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: HPi0y')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002B462D06200>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002B462C13710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002B4624605D0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002B462D21080>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002B46268C6D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002B46241E0D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008704, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002B462D21120>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2b46257bcd0'>>, Update(update_id=925008704, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='3833139318756396651', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002B45FE91080>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139318756396651', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462D20FE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B46266F610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002B45FE91120>
                 └ <Dispatcher '0x2b46257bcd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='3833139318756396651', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002B45FE91080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2b46257bcd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='3833139318756396651', from_user=User(id=892472294, is_bot=False, first_name='Богдан', last_name=None, usern...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002B462D21440>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002B45FE90400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002B462682710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000002B46032DF80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000002B4626DAB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'HPi0y'
                    │     └ <function StorageProxy.load_context at 0x000002B46032D4E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002B462B9D0D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: HPi0y
2024-02-17T00:26:41.612933+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:41.923975+0200 INFO Update id=925008706 is handled. Duration 312 ms by bot id=5646878393
2024-02-17T00:26:43.244546+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:43.412659+0200 INFO Update id=925008707 is handled. Duration 171 ms by bot id=5646878393
2024-02-17T00:26:49.020459+0200 INFO 127.0.0.1 [17/Feb/2024:00:26:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:26:49.193881+0200 INFO Update id=925008705 is handled. Duration 172 ms by bot id=5646878393
2024-02-17T00:49:59.780932+0200 INFO 127.0.0.1 [17/Feb/2024:00:49:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:00.015278+0200 INFO Update id=925008708 is handled. Duration 219 ms by bot id=5646878393
2024-02-17T00:50:00.684975+0200 INFO 127.0.0.1 [17/Feb/2024:00:50:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:00.815910+0200 INFO Update id=925008709 is handled. Duration 141 ms by bot id=5646878393
2024-02-17T00:50:09.783106+0200 INFO 127.0.0.1 [17/Feb/2024:00:50:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:09.974978+0200 INFO Update id=925008710 is handled. Duration 187 ms by bot id=5646878393
2024-02-17T00:50:10.545749+0200 INFO 127.0.0.1 [17/Feb/2024:00:50:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:10.680562+0200 INFO Update id=925008711 is handled. Duration 141 ms by bot id=5646878393
2024-02-17T00:50:14.655224+0200 INFO 127.0.0.1 [17/Feb/2024:00:50:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:14.872886+0200 INFO Update id=925008712 is handled. Duration 219 ms by bot id=5646878393
2024-02-17T00:50:15.404653+0200 INFO 127.0.0.1 [17/Feb/2024:00:50:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:50:15.553616+0200 INFO Update id=925008713 is handled. Duration 156 ms by bot id=5646878393
2024-02-17T00:51:02.955406+0200 INFO 127.0.0.1 [17/Feb/2024:00:51:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:51:03.256753+0200 INFO Update id=925008714 is handled. Duration 297 ms by bot id=5646878393
2024-02-17T00:51:03.728886+0200 INFO 127.0.0.1 [17/Feb/2024:00:51:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T00:51:03.844629+0200 INFO Update id=925008715 is handled. Duration 125 ms by bot id=5646878393
2024-02-17T01:10:44.793114+0200 INFO Bot stopped!
2024-02-17T12:00:16.965614+0200 INFO Bot started!
2024-02-17T12:14:50.873654+0200 INFO 127.0.0.1 [17/Feb/2024:12:14:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T12:14:50.882495+0200 INFO Update id=925008716 is not handled. Duration 15 ms by bot id=5646878393
2024-02-17T13:27:10.263884+0200 INFO Bot stopped!
2024-02-17T20:52:14.891402+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (5648), thread 'MainThread' (16264):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │    │             │             └ <function PreparedStatement.fetch at 0x0000016FB7F32B60>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000016FB7FA4090>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000016FB7FA4090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000016FB7FA4090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x0000016FB7E92410>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x0000016FB7F8F740>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000016FB76B5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000016FB7E85E10>
    └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000016FB7BC6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000016FB7F2A680>
           └ <_AsyncIoGreenlet object at 0x0000016FB7F97E00 (otid=0x0000016FB60B17A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000016FB7F2A680>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000016FB7BC6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 114, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000016FB7E52AC0>
    │       └ <function run at 0x0000016FAF90C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016FB7E69740>
           │      └ <function Runner.run at 0x0000016FAF99C9A0>
           └ <asyncio.runners.Runner object at 0x0000016FB76A7990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016FAF99A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016FB76A7990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016FAFA6A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016FAF99C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016FAF8DDB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 46, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000016FB7D8EBD0>
          └ <function add_default_bot_settings at 0x0000016FB7D01300>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 58, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x0000016FB7E3BED0>
          │       └ <function AsyncSession.execute at 0x0000016FB7AA9EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000016FB7D8EBD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x0000016FB60FCB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000016FB7F97E00 (otid=0x0000016FB60B17A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000016FB79CE700>
           └ <sqlalchemy.orm.session.Session object at 0x0000016FB7DACF90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x0000016FB799A520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000016FB75E20C0>
             └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x0000016FB7D9F750>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000016FB75E23E0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000016FB75E25C0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000016FB75E2660>
           └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000016FB75E28E0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error('<class \'asyncpg.exceptions.InvalidT...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000016FB76B5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000016FB7E85E10>
    └ <sqlalchemy.engine.base.Connection object at 0x0000016FB7F96790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000016FB7BC6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000016FB7F2A680>
           └ <_AsyncIoGreenlet object at 0x0000016FB7F97E00 (otid=0x0000016FB60B17A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000016FB7F2A680>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000016FB7BC6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000016FB7F43580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-17T20:57:13.014633+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (14648), thread 'MainThread' (12900):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │    │             │             └ <function PreparedStatement.fetch at 0x00000169F92A2B60>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000169F9348090>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000169F9348090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000169F9348090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x00000169F91FA410>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x00000169F93420C0>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000169F8A35800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000169F91E98D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000169F8F46F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000169F929A440>
           └ <_AsyncIoGreenlet object at 0x00000169F8FAA700 (otid=0x00000169F74317D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000169F929A440>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000169F8F46D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 114, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000169F91BE8E0>
    │       └ <function run at 0x00000169F0C9C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000169F91D1740>
           │      └ <function Runner.run at 0x00000169F0D2C9A0>
           └ <asyncio.runners.Runner object at 0x00000169F8A29510>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000169F0D2A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000169F8A29510>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000169F0DFA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000169F0D2C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000169F0C6DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 46, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000169F91B3BD0>
          └ <function add_default_bot_settings at 0x00000169F907D3A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 58, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000169F91B2850>
          │       └ <function AsyncSession.execute at 0x00000169F8E29EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000169F91B3BD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000169F74F0B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000169F8FAA700 (otid=0x00000169F74317D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000169F8D4E700>
           └ <sqlalchemy.orm.session.Session object at 0x00000169F92629D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x00000169F8D1A520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000169F79920C0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x00000169F913DB90>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000169F79923E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000169F79925C0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000169F7992660>
           └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000169F79928E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error('<class \'asyncpg.exceptions.InvalidT...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000169F8A35800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000169F91E98D0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000169F90FEDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000169F8F46F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000169F929A440>
           └ <_AsyncIoGreenlet object at 0x00000169F8FAA700 (otid=0x00000169F74317D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000169F929A440>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000169F8F46D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000169F93445E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "webapp_url_purchase"
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('webapp_url_purchase', 'https://webapp-forms.netlify.app/payment-confirmation-form')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-17T20:58:07.039055+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (12840), thread 'MainThread' (3860):
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('WEBAPP_URL_PURCHASE', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │    │             │             └ <function PreparedStatement.fetch at 0x00000231E0902B60>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000231E0984180>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('WEBAPP_URL_PURCHASE', 'https://webapp-forms.netlify.app/payment-confirmation-form')
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000231E0984180>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x00000231E0984180>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x00000231E085A410>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x00000231E096A020>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
    return await waiter

asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231E0095800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000231E077F690>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('WEBAPP_URL_PURCHASE', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000231E05A6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000231E08FA680>
           └ <_AsyncIoGreenlet object at 0x00000231E095EC80 (otid=0x00000231DEA917A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000231E08FA680>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000231E05A6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 114, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000231E081E8E0>
    │       └ <function run at 0x00000231D82BC5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000231E0831840>
           │      └ <function Runner.run at 0x00000231D834C9A0>
           └ <asyncio.runners.Runner object at 0x00000231E0789C10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000231D834A480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000231E0789C10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000231D842A3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000231D834C220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000231D828DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 46, in main
    await add_default_bot_settings(session)
          │                        └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000231E095E5D0>
          └ <function add_default_bot_settings at 0x00000231E06E1300>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 58, in add_default_bot_settings
    await session.execute(query)
          │       │       └ <sqlalchemy.dialects.postgresql.dml.Insert object at 0x00000231E0975E10>
          │       └ <function AsyncSession.execute at 0x00000231E0489EE0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x00000231E095E5D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x00000231DEB50B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x00000231E095EC80 (otid=0x00000231DEA917A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x00000231E03AE700>
           └ <sqlalchemy.orm.session.Session object at 0x00000231E095E610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMInsert.orm_execute_statement at 0x00000231E037A520>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMInsert'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x00000231DEFF20C0>
             └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedInsert object at 0x00000231DAE1E810>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x00000231DEFF23E0>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x00000231DEFF25C0>
          └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x00000231DEFF2660>
           └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x00000231DEFF28E0>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error('<class \'asyncpg.exceptions.InvalidT...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x00000231E0095800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x00000231E077F690>
    └ <sqlalchemy.engine.base.Connection object at 0x00000231E0619510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('WEBAPP_URL_PURCHASE', 'https://webapp-forms.netlify.app/payment-confirmation-form')
    │      │       └ 'INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_setting...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x00000231E05A6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000231E08FA680>
           └ <_AsyncIoGreenlet object at 0x00000231E095EC80 (otid=0x00000231DEA917A0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x00000231E08FA680>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x00000231E05A6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x00000231E0913580>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "WEBAPP_URL_PURCHASE"
[SQL: INSERT INTO bot_settings (key, value) VALUES ($1::botsettingsenum, $2::VARCHAR) ON CONFLICT DO NOTHING RETURNING bot_settings.id]
[parameters: ('WEBAPP_URL_PURCHASE', 'https://webapp-forms.netlify.app/payment-confirmation-form')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-17T20:58:34.803200+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (19132), thread 'MainThread' (19020):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 114, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001930B4028E0>
    │       └ <function run at 0x0000019302F4C5E0>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001930B415840>
           │      └ <function Runner.run at 0x0000019302FDC9A0>
           └ <asyncio.runners.Runner object at 0x000001930B35C510>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\loguru\_log...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019302FDA480>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001930B35C510>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000193030AA3E0>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000019302FDC220>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000019302F1DB20>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\__main__.py", line 105, in main
    runner, host=config.WEBHOOK_HOST, port=config.WEBHOOK_PORT
    │            │                         └ Config(bot_token='5646878393:AAF0AunjKNzksrz5tc-QJljwY1tslNsIwTs', bot_fsm_storage='redis', bot_username='test_touch_bot', we...
    │            └ Config(bot_token='5646878393:AAF0AunjKNzksrz5tc-QJljwY1tslNsIwTs', bot_fsm_storage='redis', bot_username='test_touch_bot', we...
    └ <aiohttp.web_runner.AppRunner object at 0x000001930B215AE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\pydantic\main.py", line 761, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')

AttributeError: 'Config' object has no attribute 'WEBHOOK_HOST'
2024-02-17T20:59:28.809422+0200 INFO Bot started!
2024-02-17T20:59:52.197730+0200 INFO Bot stopped!
2024-02-17T20:59:55.078769+0200 INFO Bot started!
2024-02-17T20:59:56.525815+0200 INFO ::1 [17/Feb/2024:20:59:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T20:59:56.584649+0200 INFO ::1 [17/Feb/2024:20:59:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T20:59:56.859603+0200 INFO Update id=925008747 is handled. Duration 280 ms by bot id=5646878393
2024-02-17T20:59:56.963734+0200 INFO Update id=925008746 is handled. Duration 422 ms by bot id=5646878393
2024-02-17T21:00:01.651185+0200 INFO ::1 [17/Feb/2024:21:00:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T21:00:01.970338+0200 INFO Update id=925008748 is handled. Duration 312 ms by bot id=5646878393
2024-02-17T21:00:03.264914+0200 INFO ::1 [17/Feb/2024:21:00:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T21:00:03.473155+0200 INFO Update id=925008749 is handled. Duration 203 ms by bot id=5646878393
2024-02-17T21:00:07.076149+0200 INFO ::1 [17/Feb/2024:21:00:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-17T21:00:07.399090+0200 INFO Update id=925008750 is handled. Duration 311 ms by bot id=5646878393
2024-02-18T01:36:31.790662+0200 INFO Bot started!
2024-02-18T01:37:33.876140+0200 INFO ::1 [18/Feb/2024:01:37:33 +0200] "GET /add_post/vacancy HTTP/1.1" 405 204 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
2024-02-18T01:37:34.178222+0200 INFO ::1 [18/Feb/2024:01:37:34 +0200] "GET /favicon.ico HTTP/1.1" 404 173 "https://6ec3-31-42-178-73.ngrok-free.app/add_post/vacancy" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
2024-02-18T01:37:53.493896+0200 INFO ::1 [18/Feb/2024:01:37:53 +0200] "GET /add_post/real_estate HTTP/1.1" 405 204 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
2024-02-18T01:38:04.700085+0200 INFO ::1 [18/Feb/2024:01:38:04 +0200] "GET /admin HTTP/1.1" 404 173 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36"
2024-02-18T01:47:40.556987+0200 INFO Bot stopped!
2024-02-18T01:47:44.078298+0200 INFO Bot started!
2024-02-18T01:47:44.099349+0200 INFO ::1 [18/Feb/2024:01:47:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:44.165738+0200 INFO ::1 [18/Feb/2024:01:47:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:44.223359+0200 INFO ::1 [18/Feb/2024:01:47:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:44.304228+0200 INFO ::1 [18/Feb/2024:01:47:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:44.360918+0200 INFO ::1 [18/Feb/2024:01:47:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:44.494369+0200 INFO Update id=925008753 is handled. Duration 265 ms by bot id=5646878393
2024-02-18T01:47:44.588491+0200 INFO Update id=925008755 is handled. Duration 218 ms by bot id=5646878393
2024-02-18T01:47:44.698037+0200 INFO Update id=925008751 is handled. Duration 593 ms by bot id=5646878393
2024-02-18T01:47:44.809167+0200 INFO Update id=925008754 is handled. Duration 515 ms by bot id=5646878393
2024-02-18T01:47:44.904254+0200 INFO Update id=925008752 is handled. Duration 750 ms by bot id=5646878393
2024-02-18T01:47:47.372922+0200 INFO ::1 [18/Feb/2024:01:47:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:47.562509+0200 INFO Update id=925008756 is handled. Duration 186 ms by bot id=5646878393
2024-02-18T01:47:50.867002+0200 INFO ::1 [18/Feb/2024:01:47:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:50.977909+0200 INFO Update id=925008757 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T01:47:52.280059+0200 INFO ::1 [18/Feb/2024:01:47:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:52.461022+0200 INFO Update id=925008758 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T01:47:52.960456+0200 INFO ::1 [18/Feb/2024:01:47:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:53.069602+0200 INFO Update id=925008759 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T01:47:56.992339+0200 INFO ::1 [18/Feb/2024:01:47:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:47:57.311338+0200 INFO Update id=925008760 is handled. Duration 327 ms by bot id=5646878393
2024-02-18T01:49:15.625599+0200 INFO Bot stopped!
2024-02-18T01:49:18.465885+0200 INFO Bot started!
2024-02-18T01:54:12.810290+0200 INFO Bot stopped!
2024-02-18T01:54:15.895860+0200 INFO Bot started!
2024-02-18T01:54:32.531779+0200 INFO ::1 [18/Feb/2024:01:54:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:54:32.837472+0200 INFO Update id=925008761 is handled. Duration 296 ms by bot id=5646878393
2024-02-18T01:54:33.567374+0200 INFO ::1 [18/Feb/2024:01:54:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:54:33.690523+0200 INFO Update id=925008762 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T01:54:34.921077+0200 INFO ::1 [18/Feb/2024:01:54:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:54:34.924291+0200 ERROR Cannot get window data for state <State 'UserPostRequests:show_user_requests'>
2024-02-18T01:54:34.926290+0200 INFO Update id=925008763 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T01:54:34.940290+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-27' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyNotFoundError(<AdPostStatus.REJECTED: 3>)>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002BF7FE86810>
                   │    │          │                   │           └ {'update_id': 925008763, 'callback_query': {'id': '1663765555192450773', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002BF7FE85F50>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002BF7D901B20>
                   │    └ <Dispatcher '0x2bf0013df90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002BF7FE86810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002BF7FE85F50>
                 │    └ <function Dispatcher.feed_update at 0x000002BF7D901A80>
                 └ <Dispatcher '0x2bf0013df90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002BF7D900400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002BF0013FE10>
                     └ <Dispatcher '0x2bf0013df90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002BF00099D90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002BF001444D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002BF00126C80>
          │    │   │      │    └ KeyNotFoundError(<AdPostStatus.REJECTED: 3>)
          │    │   │      └ <class 'aiogram_i18n.exceptions.KeyNotFoundError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002BF007D8220>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002BF001A2F90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002BF00144910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002BF00110E00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002BF00147810>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002BF7FEB0190>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008763, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002BF00686480>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2bf0013df90'>>, Update(update_id=925008763, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002BF7D901080>
                 └ <Dispatcher '0x2bf0013df90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002BF00113B00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002BF7D900400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002BF0013E710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002BF7D901120>
                 └ <Dispatcher '0x2bf0013df90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002BF7D901080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002BF006867A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002BF7D900400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002BF00145910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002BF001A1FD0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002BF00686D40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002BF7D901120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002BF7D901080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002BF006865C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002BF7D900400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002BF00168250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002BF7D901120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002BF7D900540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002BF00168250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002BF7FEC25D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002BF7FEB0190>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002BF00195650>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002BF7DDA1120>, <function CallableObject.call at 0x000002BF00686...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002BF00686C00>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000002BF7DDE7F60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000002BF7DBD34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002BF7A54D110>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002BF7DD57CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002BF7A54D110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002BF7DBD34C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002BF7FEC1C50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002BF7DD57CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002BF7FEC1C50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002BF7DBD34C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000002BF7DBEC180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
          │    │        │             └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000002BF7DBD1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002BF7FEC2610>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
          │    │        └ CallbackQuery(id='1663765555192450773', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002BF7FEC2610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
          │       │     │    └ <State 'UserPostRequests:show_user_requests'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002BF7FEC0F10>
          │       └ <function ManagerImpl.start at 0x000002BF7DDE4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'UserPostRequests:show_user_requests'>
          │    └ <function ManagerImpl._start_normal at 0x000002BF7DDE5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000002BF7DDE5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
                        │    └ <function ManagerImpl.dialog at 0x000002BF7DDE47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
                        │      │      └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                        │      └ <function Window.render at 0x000002BF7DDF8040>
                        └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
                         │    │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                         │    └ <function Window.load_data at 0x000002BF7DDE7E20>
                         └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000002BF7DDD84F0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002BF0009B150>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002BF7FF4CCD0>
    │    │            └ <Window(<State 'UserPostRequests:show_user_requests'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2bf0013df90'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_user_post_requests at 0x000002BF7FE82D40>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002BF7FF4CCD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 33, in get_user_post_requests
    user_posts_list.append((post.id, f"#{post.id}-{i18n.get(post.status)}"))
    │               │       │    └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000002BF7FDF4C20>
    │               │       └ <bot.db.models.models.SchedulePosts object at 0x000002BF0056EF50>
    │               └ <method 'append' of 'list' objects>
    └ []

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_i18n\context.py", line 39, in get
    return self.core.get(key, self.locale, **kwargs)
           │    │    │   │    │    │         └ {}
           │    │    │   │    │    └ 'uk'
           │    │    │   │    └ <aiogram_i18n.context.I18nContext object at 0x000002BF00A44A90>
           │    │    │   └ <AdPostStatus.REJECTED: 3>
           │    │    └ <function FluentRuntimeCore.get at 0x000002BF7DE251C0>
           │    └ <aiogram_i18n.cores.fluent_runtime_core.FluentRuntimeCore object at 0x000002BF7FEB3D50>
           └ <aiogram_i18n.context.I18nContext object at 0x000002BF00A44A90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_i18n\cores\fluent_runtime_core.py", line 49, in get
    raise KeyNotFoundError(message_id) from None
          │                └ <AdPostStatus.REJECTED: 3>
          └ <class 'aiogram_i18n.exceptions.KeyNotFoundError'>

aiogram_i18n.exceptions.KeyNotFoundError: Key '3' not found.
2024-02-18T01:55:18.739476+0200 INFO Bot stopped!
2024-02-18T01:55:21.722640+0200 INFO Bot started!
2024-02-18T01:55:23.906666+0200 INFO ::1 [18/Feb/2024:01:55:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:55:24.092731+0200 INFO Update id=925008764 is handled. Duration 186 ms by bot id=5646878393
2024-02-18T01:55:32.385655+0200 INFO Bot stopped!
2024-02-18T01:55:35.486462+0200 INFO Bot started!
2024-02-18T01:55:42.195433+0200 INFO Bot stopped!
2024-02-18T01:55:50.865849+0200 INFO Bot started!
2024-02-18T01:55:53.599406+0200 INFO ::1 [18/Feb/2024:01:55:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:55:53.832962+0200 INFO Update id=925008765 is handled. Duration 234 ms by bot id=5646878393
2024-02-18T01:55:54.593222+0200 INFO ::1 [18/Feb/2024:01:55:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:55:54.721407+0200 INFO Update id=925008766 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T01:55:55.521247+0200 INFO ::1 [18/Feb/2024:01:55:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:55:55.645093+0200 INFO Update id=925008767 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T01:55:57.327304+0200 INFO ::1 [18/Feb/2024:01:55:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T01:55:57.450354+0200 INFO Update id=925008768 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:29:03.271662+0200 INFO Bot stopped!
2024-02-18T02:33:14.757416+0200 INFO Bot started!
2024-02-18T02:33:41.328267+0200 INFO Bot stopped!
2024-02-18T02:33:44.397220+0200 INFO Bot started!
2024-02-18T02:33:51.212319+0200 INFO ::1 [18/Feb/2024:02:33:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:33:51.333789+0200 ERROR Cannot get window data for state <State 'UserAccount:show_account_info'>
2024-02-18T02:33:51.334790+0200 INFO Update id=925008769 is not handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:33:51.344788+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 522, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x0000021D9C8E7BA0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x0000021D9CC9C220>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x0000021D9CC9C220>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x0000021D9CC43CE0>
                 └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x0000021D9CC439C0>
                 └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare

asyncpg.exceptions.UndefinedColumnError: стовпець schedule_posts.published_datetime не існує


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000021D9C3D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000021D9CB7F950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (387375605,)
    │      │       └ 'SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.t...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000021D9C8E6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC828C0>
           └ <_AsyncIoGreenlet object at 0x0000021D9D0EB0C0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC828C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000021D9C8E6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021D9CD25D90>
                   │    │          │                   │           └ {'update_id': 925008769, 'callback_query': {'id': '1663765555115066514', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000021D9CAA6490>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000021D9A511B20>
                   │    └ <Dispatcher '0x21d9ccc1fd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021D9CD25D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000021D9CAA6490>
                 │    └ <function Dispatcher.feed_update at 0x0000021D9A511A80>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCC3FD0>
                     └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000021D9CB64450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000021D9CCCC350>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000021D9D4529C0>
          │    │   │      │    └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
          │    │   │      └ <class 'sqlalchemy.exc.ProgrammingError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000021D9CCBFB50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000021D9D27AF90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000021D9CCCCB50>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000021D9D216DE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021D9CCCFA50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021D9CABD4D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008769, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000021D9D216FC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x21d9ccc1fd0'>>, Update(update_id=925008769, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000021D9A511080>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D2172E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CBFF7D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021D9A511080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D2171A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCCDB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000021D9CD26250>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D217380>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021D9A511080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D217600>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCF4450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000021D9A510540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCF4450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021D9CB47D10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021D9CABD4D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000021D9CD26010>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000021D9A9B1120>, <function CallableObject.call at 0x0000021D9D217...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000021D9D2174C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000021D9A9F7F60>
          └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000021D9A7E34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000021D9CA9B3D0>
          └ <Window(<State 'UserPostRequests:show_user_requests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000021D9A967CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000021D9CA9B3D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000021D9A7E34C0>
             └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000021D9A7FC180>
                 └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
          │    │        │             └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000021D9A7E1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000021D9CB47990>
          └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
          │    │        └ CallbackQuery(id='1663765555115066514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Cancel._on_click of <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000021D9CB47990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 135, in _on_click
    await manager.done(self.result)
          │       │    │    └ None
          │       │    └ <aiogram_dialog.widgets.kbd.state.Cancel object at 0x0000021D9CB47890>
          │       └ <function ManagerImpl.done at 0x0000021D9A9F4CC0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 172, in done
    await self.show(show_mode)
          │    │    └ None
          │    └ <function ManagerImpl.show at 0x0000021D9A9F5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
                        │    └ <function ManagerImpl.dialog at 0x0000021D9A9F47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
                        │      │      └ <Dialog(<StatesGroup 'UserAccount'>)>
                        │      └ <function Window.render at 0x0000021D9AA08040>
                        └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
                         │    │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                         │    └ <function Window.load_data at 0x0000021D9A9F7E20>
                         └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000021D9A9E8450>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9CD49090>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021D9CAA4C90>
    │    │            └ <Window(<State 'UserAccount:show_account_info'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_user_account_info at 0x0000021D9CA92FC0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021D9CAA4C90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 19, in get_user_account_info
    user_post = await repo.post_repo.get_all_user_post(event_from_user.id)
                      │    │         │                 │               └ 387375605
                      │    │         │                 └ User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, username='s0larm0v3', language_code='uk', is_premium...
                      │    │         └ <function PostRequestsRepo.get_all_user_post at 0x0000021D9C8168E0>
                      │    └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x0000021D9D1BB090>
                      └ <bot.db.Repo object at 0x0000021D9D1BB3D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\post_requests.py", line 20, in get_all_user_post
    result = await self.session.execute(query)
                   │    │       │       └ <sqlalchemy.sql.selectable.Select object at 0x0000021D9D0E9450>
                   │    │       └ <function AsyncSession.execute at 0x0000021D9C7C9EE0>
                   │    └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D9D1BA850>
                   └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x0000021D9D1BB090>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x0000021D9AE90B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000021D9D0EB0C0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000021D9C6EE700>
           └ <sqlalchemy.orm.session.Session object at 0x0000021D9D1BBB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x0000021D9C58C220>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000021D9C3020C0>
             └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x0000021D9D0E9450>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000021D9C3023E0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000021D9C3025C0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000021D9C302660>
           └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000021D9C3028E0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000021D9C3D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000021D9CB7F950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D2298D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (387375605,)
    │      │       └ 'SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.t...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000021D9C8E6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC828C0>
           └ <_AsyncIoGreenlet object at 0x0000021D9D0EB0C0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC828C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000021D9C8E6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D8460>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує
[SQL: SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.text_for_publish, schedule_posts.published_datetime, schedule_posts.status 
FROM schedule_posts 
WHERE schedule_posts.user_id = $1::BIGINT]
[parameters: (387375605,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-18T02:33:53.041233+0200 INFO ::1 [18/Feb/2024:02:33:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:33:53.248738+0200 INFO Update id=925008770 is handled. Duration 219 ms by bot id=5646878393
2024-02-18T02:33:54.082517+0200 INFO ::1 [18/Feb/2024:02:33:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:33:54.087089+0200 ERROR Cannot get window data for state <State 'UserAccount:show_account_info'>
2024-02-18T02:33:54.088091+0200 INFO Update id=925008771 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T02:33:54.091092+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 522, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x0000021D9C8E7BA0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x0000021D9CC9C220>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 773, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x0000021D9CC9C220>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x0000021D9CC43CE0>
                 └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x0000021D9CC439C0>
                 └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x0000021D9CC9C220>
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare

asyncpg.exceptions.UndefinedColumnError: стовпець schedule_posts.published_datetime не існує


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000021D9C3D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000021D9CB7F950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (387375605,)
    │      │       └ 'SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.t...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000021D9C8E6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC83760>
           └ <_AsyncIoGreenlet object at 0x0000021D9D6CDCC0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC83760>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000021D9C8E6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021D9CD25D90>
                   │    │          │                   │           └ {'update_id': 925008771, 'callback_query': {'id': '1663765555804466369', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000021D9CAA6490>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000021D9A511B20>
                   │    └ <Dispatcher '0x21d9ccc1fd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021D9CD25D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000021D9CAA6490>
                 │    └ <function Dispatcher.feed_update at 0x0000021D9A511A80>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCC3FD0>
                     └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000021D9CB64450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000021D9CCCC350>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000021D9D4522C0>
          │    │   │      │    └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
          │    │   │      └ <class 'sqlalchemy.exc.ProgrammingError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000021D9CCBFB50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000021D9D6852D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000021D9CCCCB50>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000021D9D217740>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021D9CCCFA50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021D9CABD4D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008771, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000021D9D2179C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x21d9ccc1fd0'>>, Update(update_id=925008771, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000021D9A511080>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9CC93060>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CBFF7D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Dispatcher '0x21d9ccc1fd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021D9A511080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D44E160>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCCDB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000021D9CD26250>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D44E340>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021D9A511080>
                     └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021D9D44E020>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021D9A510400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCE85D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021D9A511120>
                 └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000021D9A510540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021D9CCE85D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021D9CB47D10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021D9CABD4D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000021D9CD26010>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000021D9A9B1120>, <function CallableObject.call at 0x0000021D9D44E...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000021D9D44E3E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'MainMenu'>)>>, CallbackQuery(id='1663765555...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
          │      │                │                 └ <Dialog(<StatesGroup 'MainMenu'>)>
          │      │                └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000021D9A9F7F60>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
          │    │        │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
          │    │        │                └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000021D9A7E34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000021D9CAAC7D0>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000021D9A967CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000021D9CAAC7D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000021D9A7E34C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000021D9A7FC180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
          │    │        │             └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000021D9A7E1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000021D9CAAEB50>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
          │    │        └ CallbackQuery(id='1663765555804466369', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000021D9CAAEB50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
          │       │     │    └ <State 'UserAccount:show_account_info'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x0000021D9CAF0050>
          │       └ <function ManagerImpl.start at 0x0000021D9A9F4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'UserAccount:show_account_info'>
          │    └ <function ManagerImpl._start_normal at 0x0000021D9A9F5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x0000021D9A9F5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
                        │    └ <function ManagerImpl.dialog at 0x0000021D9A9F47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
                        │      │      └ <Dialog(<StatesGroup 'UserAccount'>)>
                        │      └ <function Window.render at 0x0000021D9AA08040>
                        └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
                         │    │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                         │    └ <function Window.load_data at 0x0000021D9A9F7E20>
                         └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000021D9A9E8450>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021D9D68BA90>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021D9CAA4C90>
    │    │            └ <Window(<State 'UserAccount:show_account_info'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x21d9ccc1fd0'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_user_account_info at 0x0000021D9CA92FC0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021D9CAA4C90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 19, in get_user_account_info
    user_post = await repo.post_repo.get_all_user_post(event_from_user.id)
                      │    │         │                 │               └ 387375605
                      │    │         │                 └ User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, username='s0larm0v3', language_code='uk', is_premium...
                      │    │         └ <function PostRequestsRepo.get_all_user_post at 0x0000021D9C8168E0>
                      │    └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x0000021D9D68B5D0>
                      └ <bot.db.Repo object at 0x0000021D9D68B750>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\post_requests.py", line 20, in get_all_user_post
    result = await self.session.execute(query)
                   │    │       │       └ <sqlalchemy.sql.selectable.Select object at 0x0000021D9D6CC990>
                   │    │       └ <function AsyncSession.execute at 0x0000021D9C7C9EE0>
                   │    └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000021D9D68B590>
                   └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x0000021D9D68B5D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x0000021D9AE90B80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000021D9D6CDCC0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000021D9C6EE700>
           └ <sqlalchemy.orm.session.Session object at 0x0000021D9D68B050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x0000021D9C58C220>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000021D9C3020C0>
             └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x0000021D9D6CC990>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000021D9C3023E0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000021D9C3025C0>
          └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000021D9C302660>
           └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000021D9C3028E0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000021D9C3D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000021D9CB7F950>
    └ <sqlalchemy.engine.base.Connection object at 0x0000021D9D6CD810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ (387375605,)
    │      │       └ 'SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.t...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000021D9C8E6F20>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC83760>
           └ <_AsyncIoGreenlet object at 0x0000021D9D6CDCC0 (otid=0x0000021D9ADD17D0) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000021D9CC83760>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000021D9C8E6D40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000021D9D3D96C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('стовпець schedule_posts.published_datetime не існує')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець schedule_posts.published_datetime не існує
[SQL: SELECT schedule_posts.id, schedule_posts.user_id, schedule_posts.announcement_type, schedule_posts.post_id, schedule_posts.text_for_publish, schedule_posts.published_datetime, schedule_posts.status 
FROM schedule_posts 
WHERE schedule_posts.user_id = $1::BIGINT]
[parameters: (387375605,)]
(Background on this error at: https://sqlalche.me/e/20/f405)
2024-02-18T02:34:02.739409+0200 INFO Bot stopped!
2024-02-18T02:34:13.507536+0200 INFO Bot started!
2024-02-18T02:34:24.460931+0200 INFO Bot stopped!
2024-02-18T02:34:30.458513+0200 INFO Bot started!
2024-02-18T02:34:32.618220+0200 INFO ::1 [18/Feb/2024:02:34:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:32.879124+0200 INFO Update id=925008772 is handled. Duration 265 ms by bot id=5646878393
2024-02-18T02:34:34.191500+0200 INFO ::1 [18/Feb/2024:02:34:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:34.370067+0200 INFO Update id=925008773 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T02:34:39.535653+0200 INFO ::1 [18/Feb/2024:02:34:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:39.671079+0200 INFO Update id=925008774 is handled. Duration 139 ms by bot id=5646878393
2024-02-18T02:34:44.952074+0200 INFO ::1 [18/Feb/2024:02:34:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:45.071514+0200 INFO Update id=925008775 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:34:45.697421+0200 INFO ::1 [18/Feb/2024:02:34:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:45.813033+0200 INFO Update id=925008776 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:34:46.941692+0200 INFO ::1 [18/Feb/2024:02:34:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:34:47.283732+0200 INFO Update id=925008777 is handled. Duration 343 ms by bot id=5646878393
2024-02-18T02:35:27.653246+0200 INFO ::1 [18/Feb/2024:02:35:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:35:27.872462+0200 INFO Update id=925008778 is handled. Duration 219 ms by bot id=5646878393
2024-02-18T02:35:29.585480+0200 INFO ::1 [18/Feb/2024:02:35:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:35:29.696172+0200 INFO Update id=925008779 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:35:31.832387+0200 INFO ::1 [18/Feb/2024:02:35:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:35:32.117715+0200 INFO Update id=925008780 is handled. Duration 280 ms by bot id=5646878393
2024-02-18T02:39:20.306843+0200 INFO ::1 [18/Feb/2024:02:39:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:39:20.542067+0200 INFO Update id=925008781 is handled. Duration 235 ms by bot id=5646878393
2024-02-18T02:39:22.401009+0200 INFO ::1 [18/Feb/2024:02:39:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:39:22.520738+0200 INFO Update id=925008782 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:39:23.345326+0200 INFO ::1 [18/Feb/2024:02:39:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:39:23.349817+0200 ERROR Cannot get window data for state <State 'UserPostRequests:show_post_details'>
2024-02-18T02:39:23.350816+0200 INFO Update id=925008783 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T02:39:23.353818+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-89' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'SchedulePosts' object has no attribute 'post_type'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000026688FA8E50>
                   │    │          │                   │           └ {'update_id': 925008783, 'callback_query': {'id': '1663765558000776098', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000026688F2F7D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000266867B1B20>
                   │    └ <Dispatcher '0x26688f47650'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000026688FA8E50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000026688F2F7D0>
                 │    └ <function Dispatcher.feed_update at 0x00000266867B1A80>
                 └ <Dispatcher '0x26688f47650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000266867B0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000026688D5DC90>
                     └ <Dispatcher '0x26688f47650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000026688F6CC10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000026688F6C8D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000266899B48C0>
          │    │   │      │    └ AttributeError("'SchedulePosts' object has no attribute 'post_type'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000026688F5FB50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000026688D3B6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000026688D4F110>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000026688F32020>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000026688F6FF90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000026688D7BA10>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008783, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000266896E3CE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x26688f47650'>>, Update(update_id=925008783, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000266867B1080>
                 └ <Dispatcher '0x26688f47650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000266896E1BC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000266867B0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000026688F62D10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000266867B1120>
                 └ <Dispatcher '0x26688f47650'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000266867B1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000026688F31620>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000266867B0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000026688F6E050>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000026688FC6590>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000266894B39C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000266867B1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000266867B1080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000266896E3B00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000266867B0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000026688F94810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000266867B1120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x00000266867B0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000026688F94810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000026688D44F90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000026688D7BA10>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000026688FC6310>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000026686C4D120>, <function CallableObject.call at 0x00000266894B3...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x26688f47650'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558000776098', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x00000266894B3A60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000026686C95440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
                        │    └ <function ManagerImpl.dialog at 0x0000026686C947C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
                        │      │      └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                        │      └ <function Window.render at 0x0000026686CA8040>
                        └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
                         │    │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                         │    └ <function Window.load_data at 0x0000026686C97E20>
                         └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000026686C88270>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000026689988990>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000026688E04150>
    │    │            └ <Window(<State 'UserPostRequests:show_post_details'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'schedule_post_id': 2}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x26688f47650'>, 'session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_post_request_data at 0x0000026688D2F100>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000026688E04150>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 42, in get_post_request_data
    web_app_url = await repo.bot_settings_repo.get_bot_setting(webapp_urls_mapping.get(schedule_post_model.post_type))
                        │    │                 │               │                   │   └ <bot.db.models.models.SchedulePosts object at 0x0000026689993BD0>
                        │    │                 │               │                   └ <method 'get' of 'dict' objects>
                        │    │                 │               └ {<PostTypesEnum.ANNOUNCEMENT_VACANCY: 'announcement_vacancy'>: <BotSettingsEnum.WEBAPP_URL_VACANCY: 'webapp_url_vacancy'>, <P...
                        │    │                 └ <function BotSettingsRepo.get_bot_setting at 0x0000026688C9FB00>
                        │    └ <bot.db.requests.bot_settings.BotSettingsRepo object at 0x000002668994F3D0>
                        └ <bot.db.Repo object at 0x0000026689992710>

AttributeError: 'SchedulePosts' object has no attribute 'post_type'
2024-02-18T02:40:00.257176+0200 INFO Bot stopped!
2024-02-18T02:40:03.188721+0200 INFO Bot started!
2024-02-18T02:40:03.975844+0200 INFO ::1 [18/Feb/2024:02:40:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:40:04.008614+0200 ERROR Cannot get window data for state <State 'UserPostRequests:show_post_details'>
2024-02-18T02:40:04.010613+0200 INFO Update id=925008784 is not handled. Duration 31 ms by bot id=5646878393
2024-02-18T02:40:04.014615+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError(<PostTypesEnum.POST: 'post'>)>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021116D3E210>
                   │    │          │                   │           └ {'update_id': 925008784, 'callback_query': {'id': '1663765555055216571', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000211148E3F50>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002111451DB20>
                   │    └ <Dispatcher '0x21116aa9b50'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000021116D3E210>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000211148E3F50>
                 │    └ <function Dispatcher.feed_update at 0x000002111451DA80>
                 └ <Dispatcher '0x21116aa9b50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002111451C400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021116CD3E90>
                     └ <Dispatcher '0x21116aa9b50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000021116CD0B10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000021116CE45D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000021117459580>
          │    │   │      │    └ KeyError(<PostTypesEnum.POST: 'post'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000021116CCFB50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000021116AA8C90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000021116CE4A10>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002111722ADE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021116CE77D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021116ACD9D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008784, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002111722AFC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x21116aa9b50'>>, Update(update_id=925008784, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002111451D080>
                 └ <Dispatcher '0x21116aa9b50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002111722B2E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002111451C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021116CD2690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002111451D120>
                 └ <Dispatcher '0x21116aa9b50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002111451D080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002111722B1A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002111451C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021116CE5A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000021116D3E650>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002111722B380>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002111451D120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002111451D080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002111722B600>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002111451C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021116D08450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002111451D120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002111451C540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021116D08450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021116CE7910>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021116ACD9D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000021116D3E490>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000211149BD120>, <function CallableObject.call at 0x000002111722B...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x21116aa9b50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555055216571', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002111722B4C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000021114A05440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
                        │    └ <function ManagerImpl.dialog at 0x0000021114A047C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
                        │      │      └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                        │      └ <function Window.render at 0x0000021114A18040>
                        └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
                         │    │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                         │    └ <function Window.load_data at 0x0000021114A07E20>
                         └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000211149F8040>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021116D55610>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021116B7C710>
    │    │            └ <Window(<State 'UserPostRequests:show_post_details'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'schedule_post_id': 1}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x21116aa9b50'>, 'session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_post_request_data at 0x0000021116AA31A0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021116B7C710>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 46, in get_post_request_data
    'post_status': ad_post_status_mapping[schedule_post_model.announcement_type],
                   │                      │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000021116A0CCC0>
                   │                      └ <bot.db.models.models.SchedulePosts object at 0x0000021116AB51D0>
                   └ {<PostStatus.ACTIVE: 1>: 'Ожидает публикации', <PostStatus.PUBLISHED: 0>: 'Опубликовано', <PostStatus.WAIT_ACCEPT: 2>: 'Ожида...

KeyError: <PostTypesEnum.POST: 'post'>
2024-02-18T02:40:16.200005+0200 INFO Bot stopped!
2024-02-18T02:40:19.134799+0200 INFO Bot started!
2024-02-18T02:40:20.318528+0200 INFO ::1 [18/Feb/2024:02:40:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:40:20.477333+0200 INFO Update id=925008785 is handled. Duration 155 ms by bot id=5646878393
2024-02-18T02:42:18.473664+0200 INFO Bot stopped!
2024-02-18T02:42:21.389139+0200 INFO Bot started!
2024-02-18T02:42:58.274974+0200 INFO ::1 [18/Feb/2024:02:42:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:42:58.531235+0200 INFO Update id=925008786 is handled. Duration 265 ms by bot id=5646878393
2024-02-18T02:42:59.607066+0200 INFO ::1 [18/Feb/2024:02:42:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:42:59.721279+0200 INFO Update id=925008787 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:43:09.564647+0200 INFO ::1 [18/Feb/2024:02:43:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:43:09.680369+0200 INFO Update id=925008788 is handled. Duration 108 ms by bot id=5646878393
2024-02-18T02:50:26.492662+0200 INFO Bot stopped!
2024-02-18T02:50:29.544382+0200 INFO Bot started!
2024-02-18T02:50:50.989258+0200 INFO ::1 [18/Feb/2024:02:50:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:50:51.320753+0200 INFO Update id=925008789 is handled. Duration 328 ms by bot id=5646878393
2024-02-18T02:50:52.029812+0200 INFO ::1 [18/Feb/2024:02:50:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:50:52.162739+0200 INFO Update id=925008790 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:50:53.534348+0200 INFO ::1 [18/Feb/2024:02:50:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:50:53.650204+0200 INFO Update id=925008791 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:50:54.686418+0200 INFO ::1 [18/Feb/2024:02:50:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:50:54.811640+0200 INFO Update id=925008792 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:50:56.429794+0200 INFO ::1 [18/Feb/2024:02:50:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:50:56.433275+0200 INFO Update id=925008793 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T02:50:56.439276+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-39' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredDialogError("No dialog found for `<StatesGroup 'ShowPost'>` (looking by state `<State 'ShowPost:show_post_text'>`)")>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 58, in find_dialog
    return self._dialogs[state.group]
           │    │        │     └ <property object at 0x0000023B988C1A80>
           │    │        └ <State 'ShowPost:show_post_text'>
           │    └ {<class 'bot.dialogs.start_menu.states.FirstStartWindow'>: <Dialog(<StatesGroup 'FirstStartWindow'>)>, <class 'bot.dialogs.ma...
           └ <aiogram_dialog.setup.DialogRegistry object at 0x0000023B9B1071D0>

KeyError: <class 'bot.dialogs.main_menu.states.ShowPost'>


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000023B9916D3D0>
                   │    │          │                   │           └ {'update_id': 925008793, 'callback_query': {'id': '1663765557607145831', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000023B9AF39B10>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000023B988DDB20>
                   │    └ <Dispatcher '0x23b9ae69690'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000023B9916D3D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000023B9AF39B10>
                 │    └ <function Dispatcher.feed_update at 0x0000023B988DDA80>
                 └ <Dispatcher '0x23b9ae69690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023B988DC400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023B9AE762D0>
                     └ <Dispatcher '0x23b9ae69690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000023B9B0A9790>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000023B9B0A96D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000023B9B9F40C0>
          │    │   │      │    └ UnregisteredDialogError("No dialog found for `<StatesGroup 'ShowPost'>` (looking by state `<State 'ShowPost:show_post_text'>`)")
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000023B9B0A3F10>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000023B9AE74C50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000023B9B0A9E90>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000023B9B5F3880>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000023B9B0B0F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000023B9B0AA0D0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008793, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000023B9B5F3B00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x23b9ae69690'>>, Update(update_id=925008793, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000023B988DD080>
                 └ <Dispatcher '0x23b9ae69690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023B9B5F3560>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023B988DC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023B9B097B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023B988DD120>
                 └ <Dispatcher '0x23b9ae69690'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000023B988DD080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023B9B5F3BA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023B988DC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023B9B0AAF90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000023B9B1073D0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000023B9B5F34C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023B988DD120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000023B988DD080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023B9B5F3C40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023B988DC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023B9B0CD890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023B988DD120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000023B988DC540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023B9B0CD890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000023B9B0B0F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000023B9B0AA0D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000023B9AE7EA10>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000023B98D7D120>, <function CallableObject.call at 0x0000023B9B06F...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x23b9ae69690'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000023B9B06F420>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000023B98DC7F60>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000023B98BAF4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000023B9AF17F50>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000023B98D37CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000023B9AF17F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000023B98BAF4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000023B9AE8BE90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000023B98D37CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000023B9AE8BE90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000023B98BAF4C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000023B9AF17D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000023B98BCC180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000023B9AF17D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000023B9AF17D50>
          │    │        │             └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000023B98BAD440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000023B9AF17DD0>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000023B9AF17D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000023B9AF17D50>
          │    │        └ CallbackQuery(id='1663765557607145831', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_show_post at 0x0000023B9AE5F920>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000023B9AF17DD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 50, in on_show_post
    await manager.start(states.ShowPost.show_post_text, data={'post_text': schedule_post_model.text_for_publish})
          │       │     │      │        │                                  │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000023B9ADCCFE0>
          │       │     │      │        │                                  └ <bot.db.models.models.SchedulePosts object at 0x0000023B9B83B510>
          │       │     │      │        └ <State 'ShowPost:show_post_text'>
          │       │     │      └ <class 'bot.dialogs.main_menu.states.ShowPost'>
          │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
          │       └ <function ManagerImpl.start at 0x0000023B98DC4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ {'post_text': 'test'}
          │    │             └ <State 'ShowPost:show_post_text'>
          │    └ <function ManagerImpl._start_normal at 0x0000023B98DC5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 255, in _start_normal
    new_dialog = self._registry.find_dialog(state)
                 │    │         │           └ <State 'ShowPost:show_post_text'>
                 │    │         └ <function DialogRegistry.find_dialog at 0x0000023B98DD89A0>
                 │    └ <aiogram_dialog.setup.DialogRegistry object at 0x0000023B9B1071D0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023B9B9CE210>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 60, in find_dialog
    raise UnregisteredDialogError(
          └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>

aiogram_dialog.api.exceptions.UnregisteredDialogError: No dialog found for `<StatesGroup 'ShowPost'>` (looking by state `<State 'ShowPost:show_post_text'>`)
2024-02-18T02:51:05.339406+0200 INFO Bot stopped!
2024-02-18T02:51:08.268891+0200 INFO Bot started!
2024-02-18T02:51:09.893109+0200 INFO ::1 [18/Feb/2024:02:51:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:10.125956+0200 INFO Update id=925008794 is handled. Duration 235 ms by bot id=5646878393
2024-02-18T02:51:11.906956+0200 INFO ::1 [18/Feb/2024:02:51:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:12.027384+0200 INFO Update id=925008795 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:51:12.791597+0200 INFO ::1 [18/Feb/2024:02:51:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:12.793716+0200 INFO Update id=925008796 is not handled. Duration 14 ms by bot id=5646878393
2024-02-18T02:51:12.797716+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-26' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredDialogError("No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amount'>`)")>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 58, in find_dialog
    return self._dialogs[state.group]
           │    │        │     └ <property object at 0x000001D020D41AD0>
           │    │        └ <State 'TopUpBalance:enter_amount'>
           │    └ {<class 'bot.dialogs.start_menu.states.FirstStartWindow'>: <Dialog(<StatesGroup 'FirstStartWindow'>)>, <class 'bot.dialogs.ma...
           └ <aiogram_dialog.setup.DialogRegistry object at 0x000001D0235831D0>

KeyError: <class 'bot.dialogs.main_menu.states.TopUpBalance'>


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D023583ED0>
                   │    │          │                   │           └ {'update_id': 925008796, 'callback_query': {'id': '1663765555864444361', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001D02319AF90>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001D020D61B20>
                   │    └ <Dispatcher '0x1d023513510'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D023583ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001D02319AF90>
                 │    └ <function Dispatcher.feed_update at 0x000001D020D61A80>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D0235214D0>
                     └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001D023521A50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001D023521790>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001D023CA2B80>
          │    │   │      │    └ UnregisteredDialogError("No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amo...
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001D023517B50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001D023CD9610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001D023521ED0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001D023A53EC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D023528F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D023522090>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008796, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001D023BD0400>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1d023513510'>>, Update(update_id=925008796, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001D020D61080>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D0234EF420>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023513CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001D020D61080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023BD02C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023522F90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001D023583410>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023BD0A40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001D020D61080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023BD05E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023541890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001D020D60540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023541890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D023528F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D023522090>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001D023583210>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001D021201120>, <function CallableObject.call at 0x000001D023BD0...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001D023BD09A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000001D021247F60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000001D02102F4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330C790>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001D0211B7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330C790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001D02102F4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02332B790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001D0211B7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02332B790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001D02102F4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001D02104C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
          │    │        │             └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001D02102D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D02332B890>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
          │    │        └ CallbackQuery(id='1663765555864444361', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D02332B890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
          │       │     │    └ <State 'TopUpBalance:enter_amount'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000001D02332B010>
          │       └ <function ManagerImpl.start at 0x000001D021244EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'TopUpBalance:enter_amount'>
          │    └ <function ManagerImpl._start_normal at 0x000001D021245080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 255, in _start_normal
    new_dialog = self._registry.find_dialog(state)
                 │    │         │           └ <State 'TopUpBalance:enter_amount'>
                 │    │         └ <function DialogRegistry.find_dialog at 0x000001D0212589A0>
                 │    └ <aiogram_dialog.setup.DialogRegistry object at 0x000001D0235831D0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023A293D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 60, in find_dialog
    raise UnregisteredDialogError(
          └ <class 'aiogram_dialog.api.exceptions.UnregisteredDialogError'>

aiogram_dialog.api.exceptions.UnregisteredDialogError: No dialog found for `<StatesGroup 'TopUpBalance'>` (looking by state `<State 'TopUpBalance:enter_amount'>`)
2024-02-18T02:51:18.060011+0200 INFO ::1 [18/Feb/2024:02:51:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:18.217372+0200 INFO Update id=925008797 is handled. Duration 155 ms by bot id=5646878393
2024-02-18T02:51:18.924057+0200 INFO ::1 [18/Feb/2024:02:51:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:19.026748+0200 INFO Update id=925008798 is handled. Duration 94 ms by bot id=5646878393
2024-02-18T02:51:19.623578+0200 INFO ::1 [18/Feb/2024:02:51:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:19.726607+0200 INFO Update id=925008799 is handled. Duration 93 ms by bot id=5646878393
2024-02-18T02:51:20.449983+0200 INFO ::1 [18/Feb/2024:02:51:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:20.555662+0200 INFO Update id=925008800 is handled. Duration 92 ms by bot id=5646878393
2024-02-18T02:51:21.016213+0200 INFO ::1 [18/Feb/2024:02:51:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:51:21.020214+0200 ERROR Cannot render window for state <State 'ShowPost:show_post_text'>
2024-02-18T02:51:21.021264+0200 INFO Update id=925008801 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T02:51:21.024905+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-55' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'>' not supported between instances of 'NoneType' and 'int'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D023583ED0>
                   │    │          │                   │           └ {'update_id': 925008801, 'callback_query': {'id': '1663765556224064438', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001D02319AF90>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001D020D61B20>
                   │    └ <Dispatcher '0x1d023513510'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D023583ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001D02319AF90>
                 │    └ <function Dispatcher.feed_update at 0x000001D020D61A80>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D0235214D0>
                     └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001D023521A50>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001D023521790>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001D023F10EC0>
          │    │   │      │    └ TypeError("'>' not supported between instances of 'NoneType' and 'int'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001D023CA5C60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001D023EDBF50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001D023521ED0>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001D023A53F60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D023528F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D023522090>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008801, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001D023BD0220>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1d023513510'>>, Update(update_id=925008801, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001D020D61080>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023BD0AE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023513CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Dispatcher '0x1d023513510'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001D020D61080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023CC9300>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D023522F90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001D023583410>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023CCADE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001D020D61080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D023CC9580>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D020D60400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D0235457D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D020D61120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001D020D60540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D0235457D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D023528F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D023522090>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001D023583210>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001D021201120>, <function CallableObject.call at 0x000001D023CC9...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1d023513510'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001D023CC9440>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000001D021247F60>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000001D02102F4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330C750>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001D0211B7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330C750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001D02102F4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D0233BC510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001D0211B7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D0233BC510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001D02102F4C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001D0233BC410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001D02104C180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001D0233BC410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001D0233BC410>
          │    │        │             └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001D02102D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D0233BC490>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001D0233BC410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001D0233BC410>
          │    │        └ CallbackQuery(id='1663765556224064438', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_show_post at 0x000001D0232DFC40>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D0233BC490>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 50, in on_show_post
    await manager.start(states.ShowPost.show_post_text, data={'post_text': schedule_post_model.text_for_publish})
          │       │     │      │        │                                  │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D02324CFE0>
          │       │     │      │        │                                  └ <bot.db.models.models.SchedulePosts object at 0x000001D023ECBC90>
          │       │     │      │        └ <State 'ShowPost:show_post_text'>
          │       │     │      └ <class 'bot.dialogs.main_menu.states.ShowPost'>
          │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
          │       └ <function ManagerImpl.start at 0x000001D021244EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ {'post_text': 'test23423452'}
          │    │             └ <State 'ShowPost:show_post_text'>
          │    └ <function ManagerImpl._start_normal at 0x000001D021245080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001D021245440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                        │    └ <function ManagerImpl.dialog at 0x000001D0212447C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                        │      │      └ <Dialog(<StatesGroup 'ShowPost'>)>
                        │      └ <function Window.render at 0x000001D021258040>
                        └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                       │    │          └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                       │    └ <function Window.render_kbd at 0x000001D021247D80>
                       └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                     │    │        │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001D02102F1A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D023329790>
                     └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x000001D0211B7BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D023329790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                  │ └ <function Keyboard.render_keyboard at 0x000001D02102F1A0>
                  └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330CFD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x000001D0211B7BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001D02330CFD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d023513510'>, 'ses...
                  │ └ <function NumberedPager.render_keyboard at 0x000001D0211CECA0>
                  └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x000001D02330E750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\pager.py", line 261, in render_keyboard
    return await super().render_keyboard(pager_data, manager)
                                         │           └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
                                         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 29, in render_keyboard
    if not self.is_(data, manager):
           │    │   │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
           │    │   └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
           │    └ <function Whenable.is_ at 0x000001D02102E340>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x000001D02330E750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 68, in is_
    return self.condition(data, self, manager)
           │    │         │     │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D023ECDB10>
           │    │         │     └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x000001D02330E750>
           │    │         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
           │    └ <function new_when_magic.<locals>.when_magic at 0x000001D0233AB1A0>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x000001D02330E750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 46, in when_magic
    return f.resolve(data)
           │ │       └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
           │ └ <function MagicFilter.resolve at 0x000001D01B025120>
           └ <magic_filter.magic.MagicFilter object at 0x000001D02338A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 97, in resolve
    return self._resolve(value=value)
           │    │              └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
           │    └ <function MagicFilter._resolve at 0x000001D01B024FE0>
           └ <magic_filter.magic.MagicFilter object at 0x000001D02338A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 81, in _resolve
    value = operation.resolve(value=value, initial_value=initial_value)
            │         │             │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
            │         │             └ None
            │         └ <function ComparatorOperation.resolve at 0x000001D01B013C40>
            └ <magic_filter.operations.comparator.ComparatorOperation object at 0x000001D0231A85F0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\operations\comparator.py", line 18, in resolve
    return self.comparator(value, resolve_if_needed(self.right, initial_value=initial_value))
           │    │          │      │                 │    │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x1d02351351...
           │    │          │      │                 │    └ <member 'right' of 'ComparatorOperation' objects>
           │    │          │      │                 └ <magic_filter.operations.comparator.ComparatorOperation object at 0x000001D0231A85F0>
           │    │          │      └ <function resolve_if_needed at 0x000001D01B0136A0>
           │    │          └ None
           │    └ <member 'comparator' of 'ComparatorOperation' objects>
           └ <magic_filter.operations.comparator.ComparatorOperation object at 0x000001D0231A85F0>

TypeError: '>' not supported between instances of 'NoneType' and 'int'
2024-02-18T02:51:58.307810+0200 INFO Bot stopped!
2024-02-18T02:52:01.217044+0200 INFO Bot started!
2024-02-18T02:52:01.998096+0200 INFO ::1 [18/Feb/2024:02:52:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:02.030572+0200 ERROR Cannot render window for state <State 'ShowPost:show_post_text'>
2024-02-18T02:52:02.032571+0200 INFO Update id=925008802 is not handled. Duration 30 ms by bot id=5646878393
2024-02-18T02:52:02.037572+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'>' not supported between instances of 'NoneType' and 'int'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
                   │    │          │                   │           └ {'update_id': 925008802, 'callback_query': {'id': '1663765558398696171', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000022B914E1B20>
                   │    └ <Dispatcher '0x22b93925110'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                 │    └ <function Dispatcher.feed_update at 0x0000022B914E1A80>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA4ED0>
                     └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000022B93A69A90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000022B93CA5210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000022B9441BE00>
          │    │   │      │    └ TypeError("'>' not supported between instances of 'NoneType' and 'int'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000022B93C97B50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000022B93D07810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000022B93AA5190>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000022B941D7C40>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93A6A550>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008802, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000022B941D7D80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x22b93925110'>>, Update(update_id=925008802, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000022B914E1080>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B943582C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93C93690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B94358180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA6B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000022B93D06FD0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B94358360>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B943585E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000022B914E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93AA43D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000022B93D06DD0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000022B91981120>, <function CallableObject.call at 0x0000022B94358...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000022B943584A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000022B919C7F60>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000022B917B34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000022B917CC180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        │             └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000022B917B1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        └ CallbackQuery(id='1663765558398696171', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_show_post at 0x0000022B93A63C40>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 50, in on_show_post
    await manager.start(states.ShowPost.show_post_text, data={'post_text': schedule_post_model.text_for_publish})
          │       │     │      │        │                                  │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000022B939CCFE0>
          │       │     │      │        │                                  └ <bot.db.models.models.SchedulePosts object at 0x0000022B942D57D0>
          │       │     │      │        └ <State 'ShowPost:show_post_text'>
          │       │     │      └ <class 'bot.dialogs.main_menu.states.ShowPost'>
          │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
          │       └ <function ManagerImpl.start at 0x0000022B919C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ {'post_text': 'test23423452'}
          │    │             └ <State 'ShowPost:show_post_text'>
          │    └ <function ManagerImpl._start_normal at 0x0000022B919C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x0000022B919C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                        │    └ <function ManagerImpl.dialog at 0x0000022B919C47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                        │      │      └ <Dialog(<StatesGroup 'ShowPost'>)>
                        │      └ <function Window.render at 0x0000022B919D8040>
                        └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                       │    │          └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                       │    └ <function Window.render_kbd at 0x0000022B919C7D80>
                       └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                     │    │        │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                     │    │        └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
                     └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                  │ └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                  └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                  │ └ <function NumberedPager.render_keyboard at 0x0000022B9194ECA0>
                  └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\pager.py", line 261, in render_keyboard
    return await super().render_keyboard(pager_data, manager)
                                         │           └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
                                         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 29, in render_keyboard
    if not self.is_(data, manager):
           │    │   │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
           │    │   └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function Whenable.is_ at 0x0000022B917B2340>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 68, in is_
    return self.condition(data, self, manager)
           │    │         │     │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B93D1F010>
           │    │         │     └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
           │    │         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function new_when_magic.<locals>.when_magic at 0x0000022B93B2B1A0>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 46, in when_magic
    return f.resolve(data)
           │ │       └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │ └ <function MagicFilter.resolve at 0x0000022B8B765120>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 97, in resolve
    return self._resolve(value=value)
           │    │              └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function MagicFilter._resolve at 0x0000022B8B764FE0>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 81, in _resolve
    value = operation.resolve(value=value, initial_value=initial_value)
            │         │             │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
            │         │             └ None
            │         └ <function ComparatorOperation.resolve at 0x0000022B8B753C40>
            └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\operations\comparator.py", line 18, in resolve
    return self.comparator(value, resolve_if_needed(self.right, initial_value=initial_value))
           │    │          │      │                 │    │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    │          │      │                 │    └ <member 'right' of 'ComparatorOperation' objects>
           │    │          │      │                 └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
           │    │          │      └ <function resolve_if_needed at 0x0000022B8B7536A0>
           │    │          └ None
           │    └ <member 'comparator' of 'ComparatorOperation' objects>
           └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>

TypeError: '>' not supported between instances of 'NoneType' and 'int'
2024-02-18T02:52:05.182715+0200 INFO ::1 [18/Feb/2024:02:52:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:05.303506+0200 INFO Update id=925008803 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:52:06.161174+0200 INFO ::1 [18/Feb/2024:02:52:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:06.273769+0200 INFO Update id=925008804 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:52:07.417990+0200 INFO ::1 [18/Feb/2024:02:52:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:07.421627+0200 ERROR Cannot render window for state <State 'ShowPost:show_post_text'>
2024-02-18T02:52:07.422628+0200 INFO Update id=925008805 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T02:52:07.424628+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-29' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'>' not supported between instances of 'NoneType' and 'int'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
                   │    │          │                   │           └ {'update_id': 925008805, 'callback_query': {'id': '1663765555977013022', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000022B914E1B20>
                   │    └ <Dispatcher '0x22b93925110'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                 │    └ <function Dispatcher.feed_update at 0x0000022B914E1A80>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA4ED0>
                     └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000022B93A69A90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000022B93CA5210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000022B94533080>
          │    │   │      │    └ TypeError("'>' not supported between instances of 'NoneType' and 'int'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000022B94429120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000022B9459CE90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000022B93AA5190>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000022B93D089A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93A6A550>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008805, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000022B93C6F420>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x22b93925110'>>, Update(update_id=925008805, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000022B914E1080>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B94412020>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93C93690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B944120C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA6B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000022B93D06FD0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B94413880>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B94411F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000022B914E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93AA43D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000022B93D06DD0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000022B91981120>, <function CallableObject.call at 0x0000022B94412...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000022B94412200>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000022B919C7F60>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000022B917B34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000022B917CC180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        │             └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000022B917B1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        └ CallbackQuery(id='1663765555977013022', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_show_post at 0x0000022B93A63C40>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 50, in on_show_post
    await manager.start(states.ShowPost.show_post_text, data={'post_text': schedule_post_model.text_for_publish})
          │       │     │      │        │                                  │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000022B939CCFE0>
          │       │     │      │        │                                  └ <bot.db.models.models.SchedulePosts object at 0x0000022B94566350>
          │       │     │      │        └ <State 'ShowPost:show_post_text'>
          │       │     │      └ <class 'bot.dialogs.main_menu.states.ShowPost'>
          │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
          │       └ <function ManagerImpl.start at 0x0000022B919C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ {'post_text': 'test'}
          │    │             └ <State 'ShowPost:show_post_text'>
          │    └ <function ManagerImpl._start_normal at 0x0000022B919C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x0000022B919C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                        │    └ <function ManagerImpl.dialog at 0x0000022B919C47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                        │      │      └ <Dialog(<StatesGroup 'ShowPost'>)>
                        │      └ <function Window.render at 0x0000022B919D8040>
                        └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                       │    │          └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                       │    └ <function Window.render_kbd at 0x0000022B919C7D80>
                       └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                     │    │        │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                     │    │        └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
                     └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                  │ └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                  └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'session_poo...
                  │ └ <function NumberedPager.render_keyboard at 0x0000022B9194ECA0>
                  └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\pager.py", line 261, in render_keyboard
    return await super().render_keyboard(pager_data, manager)
                                         │           └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
                                         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 29, in render_keyboard
    if not self.is_(data, manager):
           │    │   │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
           │    │   └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
           │    └ <function Whenable.is_ at 0x0000022B917B2340>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 68, in is_
    return self.condition(data, self, manager)
           │    │         │     │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B9448D010>
           │    │         │     └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
           │    │         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
           │    └ <function new_when_magic.<locals>.when_magic at 0x0000022B93B2B1A0>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 46, in when_magic
    return f.resolve(data)
           │ │       └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
           │ └ <function MagicFilter.resolve at 0x0000022B8B765120>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 97, in resolve
    return self._resolve(value=value)
           │    │              └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
           │    └ <function MagicFilter._resolve at 0x0000022B8B764FE0>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 81, in _resolve
    value = operation.resolve(value=value, initial_value=initial_value)
            │         │             │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
            │         │             └ None
            │         └ <function ComparatorOperation.resolve at 0x0000022B8B753C40>
            └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\operations\comparator.py", line 18, in resolve
    return self.comparator(value, resolve_if_needed(self.right, initial_value=initial_value))
           │    │          │      │                 │    │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'se...
           │    │          │      │                 │    └ <member 'right' of 'ComparatorOperation' objects>
           │    │          │      │                 └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
           │    │          │      └ <function resolve_if_needed at 0x0000022B8B7536A0>
           │    │          └ None
           │    └ <member 'comparator' of 'ComparatorOperation' objects>
           └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>

TypeError: '>' not supported between instances of 'NoneType' and 'int'
2024-02-18T02:52:10.087984+0200 INFO ::1 [18/Feb/2024:02:52:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:10.197802+0200 INFO Update id=925008806 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:52:11.709529+0200 INFO ::1 [18/Feb/2024:02:52:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:11.809850+0200 INFO Update id=925008807 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:52:13.633998+0200 INFO ::1 [18/Feb/2024:02:52:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:13.639610+0200 ERROR Cannot render window for state <State 'ShowPost:show_post_text'>
2024-02-18T02:52:13.640610+0200 INFO Update id=925008808 is not handled. Duration 14 ms by bot id=5646878393
2024-02-18T02:52:13.642611+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-45' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'>' not supported between instances of 'NoneType' and 'int'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
                   │    │          │                   │           └ {'update_id': 925008808, 'callback_query': {'id': '1663765557836136230', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000022B914E1B20>
                   │    └ <Dispatcher '0x22b93925110'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000022B93C91950>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000022B93BE4390>
                 │    └ <function Dispatcher.feed_update at 0x0000022B914E1A80>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA4ED0>
                     └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000022B93A69A90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000022B93CA5210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000022B945D3240>
          │    │   │      │    └ TypeError("'>' not supported between instances of 'NoneType' and 'int'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000022B94428E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000022B945D1D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000022B93AA5190>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000022B94358220>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93A6A550>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008808, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000022B943589A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x22b93925110'>>, Update(update_id=925008808, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000022B914E1080>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B945B5940>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93C93690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dispatcher '0x22b93925110'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B945B5440>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CA6B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000022B93D06FD0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B945B5760>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022B914E1080>
                     └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000022B945B51C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022B914E0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022B914E1120>
                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000022B914E0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000022B93CC93D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000022B93AA43D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000022B93CA5C90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000022B93D06DD0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000022B91981120>, <function CallableObject.call at 0x0000022B945B5...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x22b93925110'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000022B945B53A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserPostRequests'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
          │      │                │                 └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │      │                └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000022B919C7F60>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
          │    │        │                └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000022B917B34C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
          └ <Window(<State 'UserPostRequests:show_post_details'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93B1BFD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
                 │    │                       └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000022B91937CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939C1D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
             │ │                │         └ <Dialog(<StatesGroup 'UserPostRequests'>)>
             │ │                └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000022B917B34C0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000022B917CC180>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        │             └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000022B917B1440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000022B93B1BDD0>
          │    │        └ CallbackQuery(id='1663765557836136230', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_show_post at 0x0000022B93A63C40>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000022B93B1BE50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 50, in on_show_post
    await manager.start(states.ShowPost.show_post_text, data={'post_text': schedule_post_model.text_for_publish})
          │       │     │      │        │                                  │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000022B939CCFE0>
          │       │     │      │        │                                  └ <bot.db.models.models.SchedulePosts object at 0x0000022B945D33D0>
          │       │     │      │        └ <State 'ShowPost:show_post_text'>
          │       │     │      └ <class 'bot.dialogs.main_menu.states.ShowPost'>
          │       │     └ <module 'bot.dialogs.main_menu.states' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\bot\\dialogs\\main_menu\\states.py'>
          │       └ <function ManagerImpl.start at 0x0000022B919C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ {'post_text': 'test23423452'}
          │    │             └ <State 'ShowPost:show_post_text'>
          │    └ <function ManagerImpl._start_normal at 0x0000022B919C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x0000022B919C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                        │    └ <function ManagerImpl.dialog at 0x0000022B919C47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                        │      │      └ <Dialog(<StatesGroup 'ShowPost'>)>
                        │      └ <function Window.render at 0x0000022B919D8040>
                        └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                       │    │          └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                       │    └ <function Window.render_kbd at 0x0000022B919C7D80>
                       └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                     │    │        │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                     │    │        └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
                     └ <Window(<State 'ShowPost:show_post_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B93A7D010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                  │ └ <function Keyboard.render_keyboard at 0x0000022B917B31A0>
                  └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                 │    │                └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                 │    └ <function Group._render_keyboard at 0x0000022B91937BA0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000022B939251D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                  │ │               └ {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b93925110'>, 'ses...
                  │ └ <function NumberedPager.render_keyboard at 0x0000022B9194ECA0>
                  └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\pager.py", line 261, in render_keyboard
    return await super().render_keyboard(pager_data, manager)
                                         │           └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
                                         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 29, in render_keyboard
    if not self.is_(data, manager):
           │    │   │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
           │    │   └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function Whenable.is_ at 0x0000022B917B2340>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 68, in is_
    return self.condition(data, self, manager)
           │    │         │     │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000022B945D2D50>
           │    │         │     └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
           │    │         └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function new_when_magic.<locals>.when_magic at 0x0000022B93B2B1A0>
           └ <aiogram_dialog.widgets.kbd.pager.NumberedPager object at 0x0000022B919E7B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\common\when.py", line 46, in when_magic
    return f.resolve(data)
           │ │       └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │ └ <function MagicFilter.resolve at 0x0000022B8B765120>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 97, in resolve
    return self._resolve(value=value)
           │    │              └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    └ <function MagicFilter._resolve at 0x0000022B8B764FE0>
           └ <magic_filter.magic.MagicFilter object at 0x0000022B93B0A890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\magic.py", line 81, in _resolve
    value = operation.resolve(value=value, initial_value=initial_value)
            │         │             │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
            │         │             └ None
            │         └ <function ComparatorOperation.resolve at 0x0000022B8B753C40>
            └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\magic_filter\operations\comparator.py", line 18, in resolve
    return self.comparator(value, resolve_if_needed(self.right, initial_value=initial_value))
           │    │          │      │                 │    │                    └ {'data': {'dialog_data': {}, 'start_data': {'post_text': 'test23423452'}, 'middleware_data': {'dp': <Dispatcher '0x22b9392511...
           │    │          │      │                 │    └ <member 'right' of 'ComparatorOperation' objects>
           │    │          │      │                 └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>
           │    │          │      └ <function resolve_if_needed at 0x0000022B8B7536A0>
           │    │          └ None
           │    └ <member 'comparator' of 'ComparatorOperation' objects>
           └ <magic_filter.operations.comparator.ComparatorOperation object at 0x0000022B93B39FE0>

TypeError: '>' not supported between instances of 'NoneType' and 'int'
2024-02-18T02:52:48.733019+0200 INFO Bot stopped!
2024-02-18T02:52:51.616668+0200 INFO Bot started!
2024-02-18T02:52:53.116760+0200 INFO ::1 [18/Feb/2024:02:52:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:53.281110+0200 INFO Update id=925008809 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T02:52:53.823214+0200 INFO ::1 [18/Feb/2024:02:52:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:53.969708+0200 INFO Update id=925008810 is handled. Duration 155 ms by bot id=5646878393
2024-02-18T02:52:54.529104+0200 INFO ::1 [18/Feb/2024:02:52:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:54.752938+0200 INFO Update id=925008811 is handled. Duration 219 ms by bot id=5646878393
2024-02-18T02:52:59.156756+0200 INFO ::1 [18/Feb/2024:02:52:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:52:59.273253+0200 INFO Update id=925008812 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:53:00.671695+0200 INFO ::1 [18/Feb/2024:02:53:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:00.787171+0200 INFO Update id=925008813 is handled. Duration 110 ms by bot id=5646878393
2024-02-18T02:53:08.439122+0200 INFO Bot stopped!
2024-02-18T02:53:11.333868+0200 INFO Bot started!
2024-02-18T02:53:13.967770+0200 INFO ::1 [18/Feb/2024:02:53:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:14.137317+0200 INFO Update id=925008814 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T02:53:15.812075+0200 INFO ::1 [18/Feb/2024:02:53:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:16.023115+0200 INFO Update id=925008815 is handled. Duration 202 ms by bot id=5646878393
2024-02-18T02:53:16.704507+0200 INFO ::1 [18/Feb/2024:02:53:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:16.827199+0200 INFO Update id=925008816 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T02:53:17.524944+0200 INFO ::1 [18/Feb/2024:02:53:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:17.660115+0200 INFO Update id=925008817 is handled. Duration 140 ms by bot id=5646878393
2024-02-18T02:53:18.240950+0200 INFO ::1 [18/Feb/2024:02:53:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:18.426378+0200 INFO Update id=925008818 is handled. Duration 186 ms by bot id=5646878393
2024-02-18T02:53:21.605999+0200 INFO ::1 [18/Feb/2024:02:53:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:21.802692+0200 INFO Update id=925008819 is handled. Duration 186 ms by bot id=5646878393
2024-02-18T02:53:22.681003+0200 INFO ::1 [18/Feb/2024:02:53:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:22.791911+0200 INFO Update id=925008820 is handled. Duration 110 ms by bot id=5646878393
2024-02-18T02:53:23.189688+0200 INFO ::1 [18/Feb/2024:02:53:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:23.302517+0200 INFO Update id=925008821 is handled. Duration 108 ms by bot id=5646878393
2024-02-18T02:53:23.904723+0200 INFO ::1 [18/Feb/2024:02:53:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:24.021684+0200 INFO Update id=925008822 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:53:25.230854+0200 INFO ::1 [18/Feb/2024:02:53:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:25.342104+0200 INFO Update id=925008823 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T02:53:29.072203+0200 INFO ::1 [18/Feb/2024:02:53:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T02:53:29.205630+0200 INFO Update id=925008824 is handled. Duration 140 ms by bot id=5646878393
2024-02-18T03:11:35.223738+0200 INFO Bot stopped!
2024-02-18T03:11:38.296419+0200 INFO Bot started!
2024-02-18T03:12:31.084938+0200 INFO Bot stopped!
2024-02-18T03:12:33.991842+0200 INFO Bot started!
2024-02-18T12:50:22.489873+0200 INFO ::1 [18/Feb/2024:12:50:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:52:35.622207+0200 INFO ::1 [18/Feb/2024:12:52:35 +0200] "GET / HTTP/1.1" 404 173 "-" "TelegramBot (like TwitterBot)"
2024-02-18T12:53:31.046514+0200 INFO Update id=925008825 is not handled. Duration 188546 ms by bot id=5646878393
2024-02-18T12:53:31.049515+0200 INFO Bot stopped!
2024-02-18T12:53:36.865217+0200 INFO Bot started!
2024-02-18T12:53:36.973274+0200 INFO ::1 [18/Feb/2024:12:53:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:37.824799+0200 INFO ::1 [18/Feb/2024:12:53:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:39.488750+0200 INFO ::1 [18/Feb/2024:12:53:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:43.074086+0200 INFO ::1 [18/Feb/2024:12:53:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:43.925685+0200 INFO Update id=925008827 is not handled. Duration 6093 ms by bot id=5646878393
2024-02-18T12:53:43.926685+0200 INFO Update id=925008829 is not handled. Duration 843 ms by bot id=5646878393
2024-02-18T12:53:43.926685+0200 INFO Update id=925008828 is not handled. Duration 4437 ms by bot id=5646878393
2024-02-18T12:53:43.927686+0200 INFO Update id=925008826 is not handled. Duration 6953 ms by bot id=5646878393
2024-02-18T12:53:43.928686+0200 INFO Bot stopped!
2024-02-18T12:53:49.419058+0200 INFO Bot started!
2024-02-18T12:53:49.961171+0200 INFO ::1 [18/Feb/2024:12:53:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:50.666109+0200 INFO ::1 [18/Feb/2024:12:53:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:50.859807+0200 INFO ::1 [18/Feb/2024:12:53:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:53:51.033300+0200 INFO ::1 [18/Feb/2024:12:53:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T12:54:19.978713+0200 INFO Update id=925008830 is not handled. Duration 30014 ms by bot id=5646878393
2024-02-18T12:54:20.169113+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x000001C16DE7E130>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000001C16B2974C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16DF357C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16DF357C0>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16DF357C0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000001C1654AF9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x000001C16DE7E130>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001C16E0D1080>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
                   │    │          │                   │           └ {'update_id': 925008830, 'message': {'message_id': 61582, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C16B261B20>
                   │    └ <Dispatcher '0x1c16d7e7c90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008830, message=Message(message_id=61582, date=datetime.datetime(2024, 2, 18, 10, 53, 45, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C16B261A80>
                 └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C16B260400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C16DA21D50>
                     └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008830, message=Message(message_id=61582, date=datetime.datetime(2024, 2, 18, 10, 53, 45, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C16DA22150>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008830, message=Message(message_id=61582, date=datetime.datetime(2024, 2, 18, 10, 53, 45, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x000001C16D8A9310>
               │    │                └ <function RedisEventIsolation.lock at 0x000001C16B40CFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x000001C16DA1BB50>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000001C16D939910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000001C16B3BCFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000001C16B2F8CC0>
             └ <redis.asyncio.lock.Lock object at 0x000001C16D808750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'ff81ae27ce4b11ee8337e89c25466699'
             │    └ <function Lock.do_acquire at 0x000001C16B2F8D60>
             └ <redis.asyncio.lock.Lock object at 0x000001C16D808750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'ff81ae27ce4b11ee8337e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x000001C16D808750>
             │    │     └ <function BasicKeyCommands.set at 0x000001C16B391F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
             └ <redis.asyncio.lock.Lock object at 0x000001C16D808750>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000001C16B2F8180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=2>
          │    └ <function ConnectionPool.ensure_connection at 0x000001C16B2F8360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000001C16B2F6480>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000001C16B2F6700>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000001C16B2F6CA0>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-18T12:54:20.578009+0200 INFO ::1 [18/Feb/2024:12:54:20 +0200] "GET / HTTP/1.1" 404 173 "-" "TelegramBot (like TwitterBot)"
2024-02-18T12:54:20.671869+0200 INFO Update id=925008831 is not handled. Duration 30014 ms by bot id=5646878393
2024-02-18T12:54:20.675858+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-15' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x000001C16DE7E2B0>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000001C16B2974C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D50E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D50E0>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D50E0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000001C1654AF9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x000001C16DE7E2B0>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001C16E0D0F40>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
                   │    │          │                   │           └ {'update_id': 925008831, 'message': {'message_id': 61583, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C16B261B20>
                   │    └ <Dispatcher '0x1c16d7e7c90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008831, message=Message(message_id=61583, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C16B261A80>
                 └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C16B260400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C16DA21D50>
                     └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008831, message=Message(message_id=61583, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C16DA22150>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008831, message=Message(message_id=61583, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x000001C16DF1EB90>
               │    │                └ <function RedisEventIsolation.lock at 0x000001C16B40CFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x000001C16DA1BA60>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000001C16DF1EC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000001C16B3BCFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000001C16B2F8CC0>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1EDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'ffed3df4ce4b11eebbb1e89c25466699'
             │    └ <function Lock.do_acquire at 0x000001C16B2F8D60>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1EDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'ffed3df4ce4b11eebbb1e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x000001C16DF1EDD0>
             │    │     └ <function BasicKeyCommands.set at 0x000001C16B391F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1EDD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000001C16B2F8180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=2>
          │    └ <function ConnectionPool.ensure_connection at 0x000001C16B2F8360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000001C16B2F6480>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000001C16B2F6700>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000001C16B2F6CA0>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-18T12:54:20.876227+0200 INFO Update id=925008832 is not handled. Duration 30016 ms by bot id=5646878393
2024-02-18T12:54:20.879227+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-17' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x000001C16DE7E430>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000001C16B2974C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5810>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5810>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000001C1654AF9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x000001C16DE7E430>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001C16E0D14E0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
                   │    │          │                   │           └ {'update_id': 925008832, 'message': {'message_id': 61584, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C16B261B20>
                   │    └ <Dispatcher '0x1c16d7e7c90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008832, message=Message(message_id=61584, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C16B261A80>
                 └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C16B260400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C16DA21D50>
                     └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008832, message=Message(message_id=61584, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C16DA22150>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008832, message=Message(message_id=61584, date=datetime.datetime(2024, 2, 18, 10, 53, 46, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x000001C16DF1C950>
               │    │                └ <function RedisEventIsolation.lock at 0x000001C16B40CFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x000001C16E0E4040>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000001C16DF1CA50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000001C16B3BCFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000001C16B2F8CC0>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1CC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'000aba62ce4c11eeb375e89c25466699'
             │    └ <function Lock.do_acquire at 0x000001C16B2F8D60>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1CC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'000aba62ce4c11eeb375e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x000001C16DF1CC50>
             │    │     └ <function BasicKeyCommands.set at 0x000001C16B391F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF1CC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000001C16B2F8180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=2>
          │    └ <function ConnectionPool.ensure_connection at 0x000001C16B2F8360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000001C16B2F6480>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000001C16B2F6700>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000001C16B2F6CA0>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-18T12:54:21.049079+0200 INFO Update id=925008833 is not handled. Duration 30014 ms by bot id=5646878393
2024-02-18T12:54:21.052079+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-19' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ConnectionError("Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)")>
Traceback (most recent call last):

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 485, in finish_recv
    return ov.getresult()
           │  └ <method 'getresult' of '_overlapped.Overlapped' objects>
           └ <_overlapped.Overlapped object at 0x000001C16DE7E5B0>

OSError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 510, in read_response
    response = await self._parser.read_response(
                     │    └ <member '_parser' of 'AbstractConnection' objects>
                     └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 203, in read_response
    await self.read_from_socket()
          │    └ <function _AsyncHiredisParser.read_from_socket at 0x000001C16B2974C0>
          └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5FE0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\_parsers\hiredis.py", line 184, in read_from_socket
    buffer = await self._stream.read(self._read_size)
                   │    │            │    └ <member '_read_size' of 'AsyncBaseParser' objects>
                   │    │            └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5FE0>
                   │    └ <member '_stream' of 'AsyncBaseParser' objects>
                   └ <redis._parsers.hiredis._AsyncHiredisParser object at 0x000001C16E0D5FE0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 689, in read
    await self._wait_for_data('read')
          │    └ <function StreamReader._wait_for_data at 0x000001C1654AF9C0>
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\streams.py", line 522, in _wait_for_data
    await self._waiter
          │    └ None
          └ <StreamReader exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64, None) transpo...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\proactor_events.py", line 282, in _loop_reading
    length = fut.result()
             │   └ <method 'result' of '_asyncio.Future' objects>
             └ <_OverlappedFuture finished exception=ConnectionResetError(22, 'The specified network name is no longer available', None, 64,...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 837, in _poll
    value = callback(transferred, key, ov)
            │        │            │    └ <_overlapped.Overlapped object at 0x000001C16DE7E5B0>
            │        │            └ 0
            │        └ 0
            └ <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001C16E0D11C0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 489, in finish_recv
    raise ConnectionResetError(*exc.args)

ConnectionResetError: [WinError 64] The specified network name is no longer available


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
                   │    │          │                   │           └ {'update_id': 925008833, 'message': {'message_id': 61585, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C16B261B20>
                   │    └ <Dispatcher '0x1c16d7e7c90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C167F0ED50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008833, message=Message(message_id=61585, date=datetime.datetime(2024, 2, 18, 10, 53, 47, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C16D8344D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C16B261A80>
                 └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C16B260400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C16DA21D50>
                     └ <Dispatcher '0x1c16d7e7c90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008833, message=Message(message_id=61585, date=datetime.datetime(2024, 2, 18, 10, 53, 47, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C16DA22150>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c16d7e7c90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008833, message=Message(message_id=61585, date=datetime.datetime(2024, 2, 18, 10, 53, 47, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>, functools.partial(<bot.middlewa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 39, in __call__
    async with self.events_isolation.lock(key=context.key):
               │    │                │        │       └ StorageKey(bot_id=5646878393, chat_id=387375605, user_id=387375605, thread_id=None, destiny='default')
               │    │                │        └ <aiogram.fsm.context.FSMContext object at 0x000001C16DF0EBD0>
               │    │                └ <function RedisEventIsolation.lock at 0x000001C16B40CFE0>
               │    └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               └ <aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C16DA22090>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 204, in __aenter__
    return await anext(self.gen)
                       │    └ <async_generator object RedisEventIsolation.lock at 0x000001C16E0E4F40>
                       └ <contextlib._AsyncGeneratorContextManager object at 0x000001C16DF0EB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 230, in lock
    async with self.redis.lock(name=redis_key, **self.lock_kwargs, lock_class=Lock):
               │    │     │         │            │    │                       └ <class 'redis.asyncio.lock.Lock'>
               │    │     │         │            │    └ {'timeout': 60}
               │    │     │         │            └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
               │    │     │         └ 'fsm:5646878393:387375605:387375605:default:lock'
               │    │     └ <function Redis.lock at 0x000001C16B3BCFE0>
               │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
               └ <aiogram.fsm.storage.redis.RedisEventIsolation object at 0x000001C16DA13D50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 160, in __aenter__
    if await self.acquire():
             │    └ <function Lock.acquire at 0x000001C16B2F8CC0>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF0EE10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 206, in acquire
    if await self.do_acquire(token):
             │    │          └ b'002532d1ce4c11ee9e71e89c25466699'
             │    └ <function Lock.do_acquire at 0x000001C16B2F8D60>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF0EE10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\lock.py", line 222, in do_acquire
    if await self.redis.set(self.name, token, nx=True, px=timeout):
             │    │     │   │    │     │                  └ 60000
             │    │     │   │    │     └ b'002532d1ce4c11ee9e71e89c25466699'
             │    │     │   │    └ 'fsm:5646878393:387375605:387375605:default:lock'
             │    │     │   └ <redis.asyncio.lock.Lock object at 0x000001C16DF0EE10>
             │    │     └ <function BasicKeyCommands.set at 0x000001C16B391F80>
             │    └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
             └ <redis.asyncio.lock.Lock object at 0x000001C16DF0EE10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\client.py", line 601, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
           │    │                   │    │              │               └ {}
           │    │                   │    │              └ 'SET'
           │    │                   │    └ <function ConnectionPool.get_connection at 0x000001C16B2F8180>
           │    │                   └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
           │    └ None
           └ Redis<ConnectionPool<Connection<host=localhost,port=6379,db=2>>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1040, in get_connection
    await self.ensure_connection(connection)
          │    │                 └ Connection<host=localhost,port=6379,db=2>
          │    └ <function ConnectionPool.ensure_connection at 0x000001C16B2F8360>
          └ ConnectionPool<Connection<host=localhost,port=6379,db=2>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1062, in ensure_connection
    await connection.connect()
          │          └ <function AbstractConnection.connect at 0x000001C16B2F6480>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 258, in connect
    await self.on_connect()
          │    └ <function AbstractConnection.on_connect at 0x000001C16B2F6700>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 370, in on_connect
    await self.read_response()
          │    └ <function AbstractConnection.read_response at 0x000001C16B2F6CA0>
          └ Connection<host=localhost,port=6379,db=2>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\redis\asyncio\connection.py", line 524, in read_response
    raise ConnectionError(f"Error while reading from {host_error} : {e.args}")
          └ <class 'redis.exceptions.ConnectionError'>

redis.exceptions.ConnectionError: Error while reading from localhost:6379 : (22, 'The specified network name is no longer available', None, 64, None)
2024-02-18T13:21:00.050229+0200 INFO Bot stopped!
2024-02-18T13:21:05.978435+0200 INFO Bot started!
2024-02-18T13:21:55.062744+0200 INFO Bot stopped!
2024-02-18T13:21:58.955446+0200 INFO Bot started!
2024-02-18T13:22:42.678163+0200 INFO Bot stopped!
2024-02-18T13:22:48.343490+0200 INFO Bot started!
2024-02-18T13:22:48.363760+0200 INFO ::1 [18/Feb/2024:13:22:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:22:48.414046+0200 INFO ::1 [18/Feb/2024:13:22:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:22:48.462555+0200 INFO ::1 [18/Feb/2024:13:22:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:22:48.511188+0200 INFO ::1 [18/Feb/2024:13:22:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:22:53.230298+0200 INFO ::1 [18/Feb/2024:13:22:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:22:57.109784+0200 INFO Update id=925008834 is not handled. Duration 8734 ms by bot id=5646878393
2024-02-18T13:22:57.120788+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'SendMessage' in chat 387375605. Retry in 444 seconds.
Original description: Too Many Requests: retry after 444
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
                   │    │          │                   │           └ {'update_id': 925008834, 'message': {'message_id': 61586, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C777CE1B20>
                   │    └ <Dispatcher '0x1c77a269c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C777CE1A80>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AA650>
                     └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C77A26A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C77A2BC450>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C77A47F800>
          │    │   │      │    └ TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'SendMessage' in chat 387375605. Retry in 444 sec...
          │    │   │      └ <class 'aiogram.exceptions.TelegramRetryAfter'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001C77AB6C040>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C77A33B6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001C77A4AB110>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001C77AA6E160>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A4B9F90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008834, message=Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001C77AA6E480>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1c77a269c10'>>, Update(update_id=925008834, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001C777CE1080>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6E7A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4A8690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6E840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AB250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001C77A527750>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6E8E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6EA20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001C777CE0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A47DAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001C77A527510>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001C77817D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001C77A34AA10>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 21, 12, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function CallableObject.call at 0x000001C77AA6EAC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001C77A350AE0>, Message(message_id=61586, date=datetime.datetime(2024, 2, 18, 11, 2...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 24, in start
    await dialog_manager.start(MainMenu.select_action, mode=StartMode.RESET_STACK)
          │              │     │        │                   │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
          │              │     │        │                   └ <enum 'StartMode'>
          │              │     │        └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.main_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000001C7781C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77A292B90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001C7781C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77A292B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001C7781C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77A292B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77A292B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │            └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
          │    └ <function MessageManager.send_message at 0x000001C7781C7060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function MessageManager.send_text at 0x000001C7781C7100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x000001C777CA3D80>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=387375605, text='Приветствуем в боте "Корея" Выберите интересующий вас пункт.', message_thread_id=None, p...
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=387375605, text='Приветствуем в боте "Корея" Выберите интересующий вас пункт.', message_thread_id=None, p...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=387375605, text='Приветствуем в боте "Корея" Выберите интересующий вас пункт.', message_thread_id=None, p...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001C771E40540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001C777C7B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 110, in check_response
    raise TelegramRetryAfter(
          └ <class 'aiogram.exceptions.TelegramRetryAfter'>

aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SendMessage' in chat 387375605. Retry in 444 seconds.
Original description: Too Many Requests: retry after 444
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)
2024-02-18T13:22:57.682786+0200 INFO Update id=925008836 is not handled. Duration 9218 ms by bot id=5646878393
2024-02-18T13:22:57.684788+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-18' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry in 556 seconds.
Original description: Too Many Requests: retry after 556
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
                   │    │          │                   │           └ {'update_id': 925008836, 'message': {'message_id': 61588, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C777CE1B20>
                   │    └ <Dispatcher '0x1c77a269c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C777CE1A80>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AA650>
                     └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C77A26A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C77A2BC450>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C77AE3D740>
          │    │   │      │    └ TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry...
          │    │   │      └ <class 'aiogram.exceptions.TelegramRetryAfter'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001C77AC406D0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C77AC47410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001C77A4AB110>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001C77AC48180>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A4B9F90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008836, message=Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001C77AA6EE80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1c77a269c10'>>, Update(update_id=925008836, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001C777CE1080>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77A50A8E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4A8690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6EDE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AB250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001C77A527750>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AC48540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AC49580>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001C777CE0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A47DAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001C77A527510>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001C77817D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001C77A34AA10>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 21, 54, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function CallableObject.call at 0x000001C77AC49D00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001C77A350AE0>, Message(message_id=61588, date=datetime.datetime(2024, 2, 18, 11, 2...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 24, in start
    await dialog_manager.start(MainMenu.select_action, mode=StartMode.RESET_STACK)
          │              │     │        │                   │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
          │              │     │        │                   └ <enum 'StartMode'>
          │              │     │        └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.main_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000001C7781C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AE34B10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001C7781C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AE34B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001C7781C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AE34B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AE34B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 167, in show_message
    await self._remove_kbd(bot, old_message, new_message)
          │    │           │    │            └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │           │    └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │           └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
          │    └ <function MessageManager._remove_kbd at 0x000001C7781C6AC0>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 212, in _remove_kbd
    return await self.remove_inline_kbd(bot, old_message)
                 │    │                 │    └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function MessageManager.remove_inline_kbd at 0x000001C7781C6B60>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 221, in remove_inline_kbd
    return await bot.edit_message_reply_markup(
                 │   └ <function Bot.edit_message_reply_markup at 0x000001C777CA2660>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1446, in edit_message_reply_markup
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001C771E40540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001C777C7B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 110, in check_response
    raise TelegramRetryAfter(
          └ <class 'aiogram.exceptions.TelegramRetryAfter'>

aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry in 556 seconds.
Original description: Too Many Requests: retry after 556
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)
2024-02-18T13:22:57.770041+0200 INFO Update id=925008838 is handled. Duration 4531 ms by bot id=5646878393
2024-02-18T13:22:57.992616+0200 INFO Update id=925008835 is not handled. Duration 9577 ms by bot id=5646878393
2024-02-18T13:22:57.994620+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-16' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry in 417 seconds.
Original description: Too Many Requests: retry after 417
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
                   │    │          │                   │           └ {'update_id': 925008835, 'message': {'message_id': 61587, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C777CE1B20>
                   │    └ <Dispatcher '0x1c77a269c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C77A526890>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function Dispatcher.feed_update at 0x000001C777CE1A80>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AA650>
                     └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C77A26A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C77A2BC450>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C77A90D980>
          │    │   │      │    └ TelegramRetryAfter('Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry...
          │    │   │      └ <class 'aiogram.exceptions.TelegramRetryAfter'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001C77AC408B0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C77AC45810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001C77A4AB110>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001C77AA6E700>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A4B9F90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008835, message=Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001C77AA6EDE0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1c77a269c10'>>, Update(update_id=925008835, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001C777CE1080>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AA6EE80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4A8690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Dispatcher '0x1c77a269c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77A473A60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A4AB250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001C77A527750>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AC49440>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C777CE1080>
                     └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C77AC48180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C777CE0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C777CE1120>
                 └ <Router '0x1c77a33be90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001C777CE0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C77A33BED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C77A47DAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C77A2A5BD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001C77A527510>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001C77817D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001C77A34AA10>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c77a269c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 21, 44, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function CallableObject.call at 0x000001C77AC48540>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001C77A350AE0>, Message(message_id=61587, date=datetime.datetime(2024, 2, 18, 11, 2...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 24, in start
    await dialog_manager.start(MainMenu.select_action, mode=StartMode.RESET_STACK)
          │              │     │        │                   │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
          │              │     │        │                   └ <enum 'StartMode'>
          │              │     │        └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.main_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000001C7781C4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AEC6090>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001C7781C5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AEC6090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001C7781C5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AEC6090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C77AEC6090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 167, in show_message
    await self._remove_kbd(bot, old_message, new_message)
          │    │           │    │            └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │           │    └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │           └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
          │    └ <function MessageManager._remove_kbd at 0x000001C7781C6AC0>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 212, in _remove_kbd
    return await self.remove_inline_kbd(bot, old_message)
                 │    │                 │    └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <function MessageManager.remove_inline_kbd at 0x000001C7781C6B60>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001C77A5273D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 221, in remove_inline_kbd
    return await bot.edit_message_reply_markup(
                 │   └ <function Bot.edit_message_reply_markup at 0x000001C777CA2660>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1446, in edit_message_reply_markup
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
                 └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageReplyMarkup(chat_id=387375605, message_id=61577, inline_message_id=None, reply_markup=None)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001C77A4024D0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001C771E40540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001C777C7B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C77A2A4BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 110, in check_response
    raise TelegramRetryAfter(
          └ <class 'aiogram.exceptions.TelegramRetryAfter'>

aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'EditMessageReplyMarkup' in chat 387375605. Retry in 417 seconds.
Original description: Too Many Requests: retry after 417
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)
2024-02-18T13:22:58.084617+0200 INFO Update id=925008837 is handled. Duration 9578 ms by bot id=5646878393
2024-02-18T13:52:21.394298+0200 INFO ::1 [18/Feb/2024:13:52:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:52:21.828194+0200 INFO Update id=925008839 is handled. Duration 436 ms by bot id=5646878393
2024-02-18T13:55:32.745756+0200 INFO ::1 [18/Feb/2024:13:55:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:33.045755+0200 INFO Update id=925008840 is handled. Duration 297 ms by bot id=5646878393
2024-02-18T13:55:33.823224+0200 INFO ::1 [18/Feb/2024:13:55:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:34.167028+0200 INFO Update id=925008841 is handled. Duration 344 ms by bot id=5646878393
2024-02-18T13:55:34.799164+0200 INFO ::1 [18/Feb/2024:13:55:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:35.331251+0200 INFO Update id=925008842 is handled. Duration 530 ms by bot id=5646878393
2024-02-18T13:55:38.898585+0200 INFO ::1 [18/Feb/2024:13:55:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:39.127337+0200 INFO Update id=925008843 is handled. Duration 218 ms by bot id=5646878393
2024-02-18T13:55:39.939962+0200 INFO ::1 [18/Feb/2024:13:55:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:40.082801+0200 INFO Update id=925008844 is handled. Duration 140 ms by bot id=5646878393
2024-02-18T13:55:41.647658+0200 INFO ::1 [18/Feb/2024:13:55:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:41.784192+0200 INFO Update id=925008845 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T13:55:42.684651+0200 INFO ::1 [18/Feb/2024:13:55:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:42.876190+0200 INFO Update id=925008846 is handled. Duration 187 ms by bot id=5646878393
2024-02-18T13:55:44.660517+0200 INFO ::1 [18/Feb/2024:13:55:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:55:44.798984+0200 INFO Update id=925008847 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T13:56:35.442706+0200 INFO Bot stopped!
2024-02-18T13:56:39.360349+0200 INFO Bot started!
2024-02-18T13:56:54.594382+0200 INFO ::1 [18/Feb/2024:13:56:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:56:54.853023+0200 INFO Update id=925008848 is handled. Duration 264 ms by bot id=5646878393
2024-02-18T13:56:57.447826+0200 INFO ::1 [18/Feb/2024:13:56:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:56:57.584248+0200 INFO Update id=925008849 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T13:56:58.008640+0200 INFO ::1 [18/Feb/2024:13:56:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:56:58.151583+0200 INFO Update id=925008850 is handled. Duration 139 ms by bot id=5646878393
2024-02-18T13:56:58.957193+0200 INFO ::1 [18/Feb/2024:13:56:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:56:59.092423+0200 INFO Update id=925008851 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T13:57:15.123343+0200 INFO ::1 [18/Feb/2024:13:57:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:15.133560+0200 INFO Update id=925008852 is not handled. Duration 16 ms by bot id=5646878393
2024-02-18T13:57:15.155561+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-38' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'str' object has no attribute 'html_text'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001F22AA17290>
                   │    │          │                   │           └ {'update_id': 925008852, 'message': {'message_id': 61593, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001F22A77F010>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001F2281D1B20>
                   │    └ <Dispatcher '0x1f22a7668d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001F22AA17290>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001F22A77F010>
                 │    └ <function Dispatcher.feed_update at 0x000001F2281D1A80>
                 └ <Dispatcher '0x1f22a7668d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F2281D0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F22A99EFD0>
                     └ <Dispatcher '0x1f22a7668d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001F22A75A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001F22A609E50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001F22B1BD940>
          │    │   │      │    └ AttributeError("'str' object has no attribute 'html_text'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001F22B060040>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001F22B15B5D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001F22A758990>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001F22AF5EFC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001F22A9AEAD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001F22A796050>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008852, message=Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001F22AF5E700>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1f22a7668d0'>>, Update(update_id=925008852, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001F2281D1080>
                 └ <Dispatcher '0x1f22a7668d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F22AF5E7A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F2281D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F22A8F2A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F2281D1120>
                 └ <Dispatcher '0x1f22a7668d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001F2281D1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F22AF5E2A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F2281D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F22A99FB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001F22AA1C090>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001F22AF5EE80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F2281D1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001F2281D1080>
                     └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001F22AF5E340>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001F2281D0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F22A9EA250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001F2281D1120>
                 └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001F2281D0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001F22A9EA250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001F22A618E10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001F22A796050>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001F22A77CB90>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001F228671120>, <function CallableObject.call at 0x000001F22AF5E...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1f22a7668d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ <function CallableObject.call at 0x000001F22AF5EB60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._message_handler of <Dialog(<StatesGroup 'UpdatePostText'>)>>, Message(message_id=6159...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    await window.process_message(message, self, dialog_manager)
          │      │               │        │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F22AA1FE10>
          │      │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │      │               └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │      └ <function Window.process_message at 0x000001F2286B7EC0>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 93, in process_message
    await self.on_message.process_message(message, dialog, manager)
          │    │          │               │        │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F22AA1FE10>
          │    │          │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │    │          │               └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    │          └ <function TextInput.process_message at 0x000001F22849ECA0>
          │    └ <aiogram_dialog.widgets.input.text.TextInput object at 0x000001F22A81AA10>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\input\text.py", line 88, in process_message
    await self.on_success.process_event(
          │    │          └ <function SimpleEventProcessor.process_event at 0x000001F22849D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001F22A759590>
          └ <aiogram_dialog.widgets.input.text.TextInput object at 0x000001F22A81AA10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('test',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001F22AA1FE10>
          │    │        │      └ <aiogram_dialog.widgets.input.text.ManagedTextInput object at 0x000001F22ADB7390>
          │    │        └ Message(message_id=61593, date=datetime.datetime(2024, 2, 18, 11, 57, 14, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function on_enter_new_post_text at 0x000001F22A817100>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001F22A759590>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 68, in on_enter_new_post_text
    PostTypesEnum.AD: await repo.post_repo.update_ad_text(raw_post_id, message_text.html_text),
    │             │         │    │         │              │            └ 'test'
    │             │         │    │         │              └ 1
    │             │         │    │         └ <function PostRequestsRepo.update_ad_text at 0x000001F22A6C7380>
    │             │         │    └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x000001F22AA1ED90>
    │             │         └ <bot.db.Repo object at 0x000001F22AA1D5D0>
    │             └ <PostTypesEnum.AD: 'ad'>
    └ <enum 'PostTypesEnum'>

AttributeError: 'str' object has no attribute 'html_text'
2024-02-18T13:57:25.980508+0200 INFO Bot stopped!
2024-02-18T13:57:29.353114+0200 INFO Bot started!
2024-02-18T13:57:44.424305+0200 INFO ::1 [18/Feb/2024:13:57:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:44.818318+0200 INFO Update id=925008853 is handled. Duration 405 ms by bot id=5646878393
2024-02-18T13:57:45.570384+0200 INFO ::1 [18/Feb/2024:13:57:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:45.716965+0200 INFO Update id=925008854 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T13:57:47.094683+0200 INFO ::1 [18/Feb/2024:13:57:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:47.368912+0200 INFO Update id=925008855 is handled. Duration 280 ms by bot id=5646878393
2024-02-18T13:57:47.979092+0200 INFO ::1 [18/Feb/2024:13:57:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:48.332419+0200 INFO Update id=925008856 is handled. Duration 343 ms by bot id=5646878393
2024-02-18T13:57:52.504788+0200 INFO ::1 [18/Feb/2024:13:57:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:52.893004+0200 INFO Update id=925008857 is handled. Duration 375 ms by bot id=5646878393
2024-02-18T13:57:53.893646+0200 INFO ::1 [18/Feb/2024:13:57:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:57:54.409574+0200 INFO Update id=925008858 is not handled. Duration 514 ms by bot id=5646878393
2024-02-18T13:57:54.413577+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-45' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("object PostMessages can't be used in 'await' expression")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018666D132D0>
                   │    │          │                   │           └ {'update_id': 925008858, 'message': {'message_id': 61596, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000018666A5A790>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000186644CDB20>
                   │    └ <Dispatcher '0x18666a97a90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000018666D132D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000018666A5A790>
                 │    └ <function Dispatcher.feed_update at 0x00000186644CDA80>
                 └ <Dispatcher '0x18666a97a90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000186644CC400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018666C9B010>
                     └ <Dispatcher '0x18666a97a90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000018666A81D10>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000018666C9B590>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001866763DB80>
          │    │   │      │    └ TypeError("object PostMessages can't be used in 'await' expression")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001866735C7C0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000018667495D90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000018666A95210>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x0000018666C63A60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018666A70E10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000018666C9BCD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008858, message=Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001866725E700>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x18666a97a90'>>, Update(update_id=925008858, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000186644CD080>
                 └ <Dispatcher '0x18666a97a90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001866725E480>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000186644CC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018666C98450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000186644CD120>
                 └ <Dispatcher '0x18666a97a90'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000186644CD080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001866725E3E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000186644CC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018666C9BD10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000018666D18190>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001866725EFC0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000186644CD120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000186644CD080>
                     └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001866725E200>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000186644CC400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018666CE62D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000186644CD120>
                 └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x00000186644CC540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000018666CE62D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000018666BE2610>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000018666C9BCD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000018666BE1F50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x0000018664971120>, <function CallableObject.call at 0x000001866725E...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x18666a97a90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ <function CallableObject.call at 0x000001866725EA20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._message_handler of <Dialog(<StatesGroup 'UpdatePostText'>)>>, Message(message_id=6159...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    await window.process_message(message, self, dialog_manager)
          │      │               │        │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018667560D50>
          │      │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │      │               └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │      └ <function Window.process_message at 0x00000186649B7EC0>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 93, in process_message
    await self.on_message.process_message(message, dialog, manager)
          │    │          │               │        │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018667560D50>
          │    │          │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │    │          │               └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    │          └ <function TextInput.process_message at 0x000001866479ECA0>
          │    └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000018666B1AB50>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\input\text.py", line 88, in process_message
    await self.on_success.process_event(
          │    │          └ <function SimpleEventProcessor.process_event at 0x000001866479D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000018666A94090>
          └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000018666B1AB50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('test',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000018667560D50>
          │    │        │      └ <aiogram_dialog.widgets.input.text.ManagedTextInput object at 0x00000186675629D0>
          │    │        └ Message(message_id=61596, date=datetime.datetime(2024, 2, 18, 11, 57, 53, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function on_enter_new_post_text at 0x0000018666B17100>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000018666A94090>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 71, in on_enter_new_post_text
    raw_post_model = await raw_post_model_mapping[schedule_post_mdoel.announcement_type]
                           │                      │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x00000186669C4C20>
                           │                      └ <bot.db.models.models.SchedulePosts object at 0x00000186674388D0>
                           └ {<PostTypesEnum.AD: 'ad'>: None, <PostTypesEnum.POST: 'post'>: <bot.db.models.models.PostMessages object at 0x0000018667636D50>}

TypeError: object PostMessages can't be used in 'await' expression
2024-02-18T13:58:09.565997+0200 INFO Bot stopped!
2024-02-18T13:58:13.010111+0200 INFO Bot started!
2024-02-18T13:58:28.797610+0200 INFO ::1 [18/Feb/2024:13:58:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:29.352972+0200 INFO Update id=925008859 is handled. Duration 561 ms by bot id=5646878393
2024-02-18T13:58:30.229139+0200 INFO ::1 [18/Feb/2024:13:58:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:30.554242+0200 INFO Update id=925008860 is handled. Duration 328 ms by bot id=5646878393
2024-02-18T13:58:31.508235+0200 INFO ::1 [18/Feb/2024:13:58:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:31.631403+0200 INFO Update id=925008861 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T13:58:32.489717+0200 INFO ::1 [18/Feb/2024:13:58:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:32.606676+0200 INFO Update id=925008862 is handled. Duration 109 ms by bot id=5646878393
2024-02-18T13:58:33.906438+0200 INFO ::1 [18/Feb/2024:13:58:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:34.013891+0200 INFO Update id=925008863 is handled. Duration 110 ms by bot id=5646878393
2024-02-18T13:58:35.173009+0200 INFO ::1 [18/Feb/2024:13:58:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T13:58:35.186270+0200 INFO Update id=925008864 is not handled. Duration 14 ms by bot id=5646878393
2024-02-18T13:58:35.190274+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-45' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("object NoneType can't be used in 'await' expression")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000025A65F92F50>
                   │    │          │                   │           └ {'update_id': 925008864, 'message': {'message_id': 61599, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000025A65CE4750>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000025A63751B20>
                   │    └ <Dispatcher '0x25a65cef450'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000025A65F92F50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000025A65CE4750>
                 │    └ <function Dispatcher.feed_update at 0x0000025A63751A80>
                 └ <Dispatcher '0x25a65cef450'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000025A63750400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000025A65E72A50>
                     └ <Dispatcher '0x25a65cef450'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000025A65CFE190>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000025A65F1ABD0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000025A668A9D40>
          │    │   │      │    └ TypeError("object NoneType can't be used in 'await' expression")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000025A665DC5E0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000025A666CFE90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000025A65F1B410>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x0000025A65EE3A60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000025A65F26490>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000025A65D98F50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008864, message=Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x0000025A664DDF80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x25a65cef450'>>, Update(update_id=925008864, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000025A63751080>
                 └ <Dispatcher '0x25a65cef450'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000025A664DE340>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000025A63750400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000025A65F18550>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000025A63751120>
                 └ <Dispatcher '0x25a65cef450'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000025A63751080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000025A664DE5C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000025A63750400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000025A65F1B550>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000025A65F93B10>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000025A664DE840>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000025A63751120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000025A63751080>
                     └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000025A664DE660>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000025A63750400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000025A65F65E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000025A63751120>
                 └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x0000025A63750540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000025A65F65E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000025A65D19850>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000025A65D98F50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000025A65F938D0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 └ functools.partial(<function context_saver_middleware at 0x0000025A63BF1120>, <function CallableObject.call at 0x0000025A664DE...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x25a65cef450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                   └ <function CallableObject.call at 0x0000025A664DE8E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._message_handler of <Dialog(<StatesGroup 'UpdatePostText'>)>>, Message(message_id=6159...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    await window.process_message(message, self, dialog_manager)
          │      │               │        │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000025A66887C10>
          │      │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │      │               └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │      └ <function Window.process_message at 0x0000025A63C37EC0>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 93, in process_message
    await self.on_message.process_message(message, dialog, manager)
          │    │          │               │        │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000025A66887C10>
          │    │          │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │    │          │               └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    │          └ <function TextInput.process_message at 0x0000025A63A1ECA0>
          │    └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000025A65CFFB90>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\input\text.py", line 88, in process_message
    await self.on_success.process_event(
          │    │          └ <function SimpleEventProcessor.process_event at 0x0000025A63A1D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000025A65D9AB90>
          └ <aiogram_dialog.widgets.input.text.TextInput object at 0x0000025A65CFFB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('23dsfsd',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000025A66887C10>
          │    │        │      └ <aiogram_dialog.widgets.input.text.ManagedTextInput object at 0x0000025A66722550>
          │    │        └ Message(message_id=61599, date=datetime.datetime(2024, 2, 18, 11, 58, 34, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function on_enter_new_post_text at 0x0000025A65D97100>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000025A65D9AB90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 72, in on_enter_new_post_text
    await update_raw_post_mapping[schedule_post_mdoel.announcement_type]
          │                       │                   └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x0000025A65C44C20>
          │                       └ <bot.db.models.models.SchedulePosts object at 0x0000025A65F9CC50>
          └ {<PostTypesEnum.AD: 'ad'>: None, <PostTypesEnum.POST: 'post'>: None}

TypeError: object NoneType can't be used in 'await' expression
2024-02-18T14:00:32.535589+0200 INFO Bot stopped!
2024-02-18T14:00:35.775451+0200 INFO Bot started!
2024-02-18T14:00:36.831553+0200 INFO ::1 [18/Feb/2024:14:00:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:37.086809+0200 INFO Update id=925008865 is handled. Duration 266 ms by bot id=5646878393
2024-02-18T14:00:37.862577+0200 INFO ::1 [18/Feb/2024:14:00:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:38.013292+0200 INFO Update id=925008866 is handled. Duration 156 ms by bot id=5646878393
2024-02-18T14:00:38.896162+0200 INFO ::1 [18/Feb/2024:14:00:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:39.029316+0200 INFO Update id=925008867 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T14:00:39.431695+0200 INFO ::1 [18/Feb/2024:14:00:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:39.576430+0200 INFO Update id=925008868 is handled. Duration 140 ms by bot id=5646878393
2024-02-18T14:00:40.386079+0200 INFO ::1 [18/Feb/2024:14:00:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:40.518164+0200 INFO Update id=925008869 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T14:00:41.326685+0200 INFO ::1 [18/Feb/2024:14:00:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:00:41.340161+0200 INFO Update id=925008870 is not handled. Duration 16 ms by bot id=5646878393
2024-02-18T14:00:41.354161+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-44' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ArgumentError('SQL expression element or literal value expected, got <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>.')>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 811, in _literal_coercion
    return expr._bind_param(operator, element, type_=bindparam_type)
           │    │           │         │              └ None
           │    │           │         └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │    │           └ <built-in function eq>
           │    └ <function NamedColumn._bind_param at 0x000001D4B8417380>
           └ Column('id', BIGINT(), table=<schedule_posts>, primary_key=True, nullable=False)
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 4569, in _bind_param
    return BindParameter(
           └ <class 'sqlalchemy.sql.elements.BindParameter'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 2131, in __init__
    self.type = _compared_to_type.coerce_compared_value(
    │    │      │                 └ <function TypeEngine.coerce_compared_value at 0x000001D4B83FD260>
    │    │      └ BIGINT()
    │    └ NullType()
    └ BindParameter('%(2013173964176 id)s', <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>, type_=NullType())
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\type_api.py", line 1058, in coerce_compared_value
    _coerced_type = _resolve_value_to_type(value)
                    │                      └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
                    └ <function _resolve_value_to_type at 0x000001D4B84F7C40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\sqltypes.py", line 3832, in _resolve_value_to_type
    raise exc.ArgumentError(
          │   └ <class 'sqlalchemy.exc.ArgumentError'>
          └ <module 'sqlalchemy.exc' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\.venv\\Lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.ArgumentError: Object <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890> is not legal as a SQL literal value


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D4B9D6D450>
                   │    │          │                   │           └ {'update_id': 925008870, 'message': {'message_id': 61602, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001D4B9EDDDD0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001D4B77C1B20>
                   │    └ <Dispatcher '0x1d4b9f5f0d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001D4B9D6D450>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001D4B9EDDDD0>
                 │    └ <function Dispatcher.feed_update at 0x000001D4B77C1A80>
                 └ <Dispatcher '0x1d4b9f5f0d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D4B77C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D4B9F8A610>
                     └ <Dispatcher '0x1d4b9f5f0d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001D4B9D4A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001D4B9BFAA50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001D4BA926640>
          │    │   │      │    └ ArgumentError('SQL expression element or literal value expected, got <bot.db.models.models.SchedulePosts object at 0x000001D4...
          │    │   │      └ <class 'sqlalchemy.exc.ArgumentError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001D4BA64C8B0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001D4BA764650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001D4B9D54C50>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x000001D4BA54E980>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D4B9F9A290>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D4B9F8B390>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008870, message=Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001D4BA54E340>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1d4b9f5f0d0'>>, Update(update_id=925008870, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001D4B77C1080>
                 └ <Dispatcher '0x1d4b9f5f0d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D4BA54E480>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D4B77C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D4B9E0FA90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D4B77C1120>
                 └ <Dispatcher '0x1d4b9f5f0d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001D4B77C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D4BA54EDE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D4B77C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D4B9F8B4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001D4BA003A10>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001D4BA54EE80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D4B77C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001D4B77C1080>
                     └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001D4BA54E160>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001D4B77C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D4B9FD5B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001D4B77C1120>
                 └ <Dialog(<StatesGroup 'UpdatePostText'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │        └ <function TelegramEventObserver.trigger at 0x000001D4B77C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001D4B9FD5B10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001D4B9D4A450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001D4B9F8B390>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001D4BA003810>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 └ functools.partial(<function context_saver_middleware at 0x000001D4B7C61120>, <function CallableObject.call at 0x000001D4B9F51...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1d4b9f5f0d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                   └ <function CallableObject.call at 0x000001D4B9F51F80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._message_handler of <Dialog(<StatesGroup 'UpdatePostText'>)>>, Message(message_id=6160...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    await window.process_message(message, self, dialog_manager)
          │      │               │        │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D4BA902A90>
          │      │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │      │               └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │      └ <function Window.process_message at 0x000001D4B7CA7EC0>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 93, in process_message
    await self.on_message.process_message(message, dialog, manager)
          │    │          │               │        │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D4BA902A90>
          │    │          │               │        └ <Dialog(<StatesGroup 'UpdatePostText'>)>
          │    │          │               └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    │          └ <function TextInput.process_message at 0x000001D4B7A8ECA0>
          │    └ <aiogram_dialog.widgets.input.text.TextInput object at 0x000001D4B9C08DD0>
          └ <Window(<State 'UpdatePostText:enter_text'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\input\text.py", line 88, in process_message
    await self.on_success.process_event(
          │    │          └ <function SimpleEventProcessor.process_event at 0x000001D4B7A8D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D4B9E0EE10>
          └ <aiogram_dialog.widgets.input.text.TextInput object at 0x000001D4B9C08DD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('tetest',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001D4BA902A90>
          │    │        │      └ <aiogram_dialog.widgets.input.text.ManagedTextInput object at 0x000001D4B9D6EC50>
          │    │        └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function on_enter_new_post_text at 0x000001D4B9E0B100>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001D4B9E0EE10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\selected.py", line 73, in on_enter_new_post_text
    await repo.post_repo.update_schedule_post_text(schedule_post_mdoel, message.html_text)
          │    │         │                         │                    │       └ <property object at 0x000001D4B3D7BCE0>
          │    │         │                         │                    └ Message(message_id=61602, date=datetime.datetime(2024, 2, 18, 12, 0, 41, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    │         │                         └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
          │    │         └ <function PostRequestsRepo.update_schedule_post_text at 0x000001D4B9CBB240>
          │    └ <bot.db.requests.post_requests.PostRequestsRepo object at 0x000001D4BA903990>
          └ <bot.db.Repo object at 0x000001D4BA3A76D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\post_requests.py", line 98, in update_schedule_post_text
    query = update(SchedulePosts).where(SchedulePosts.id == post_id).values(text_for_publish=text_for_publish)
            │      │                    │             │     │                                └ 'tetest'
            │      │                    │             │     └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
            │      │                    │             └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D4B9CB8D60>
            │      │                    └ <class 'bot.db.models.models.SchedulePosts'>
            │      └ <class 'bot.db.models.models.SchedulePosts'>
            └ <function update at 0x000001D4B85831A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 590, in __eq__
    return self.operate(eq, other)
           │    │       │   └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │    │       └ <built-in function eq>
           │    └ <function QueryableAttribute.operate at 0x000001D4B97ACE00>
           └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D4B9CB8D60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 453, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           │  │    │            │        └ {}
           │  │    │            └ (<bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>,)
           │  │    └ <member 'comparator' of 'QueryableAttribute' objects>
           │  └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001D4B9CB8D60>
           └ <built-in function eq>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 590, in __eq__
    return self.operate(eq, other)
           │    │       │   └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │    │       └ <built-in function eq>
           │    └ <function ColumnProperty.Comparator.operate at 0x000001D4B98C2FC0>
           └ <sqlalchemy.orm.properties.ColumnProperty.Comparator object at 0x000001D4B9C5B3D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\properties.py", line 479, in operate
    return op(self.__clause_element__(), *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           │  │    │                      │        └ {}
           │  │    │                      └ (<bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>,)
           │  │    └ <member '__clause_element__' of 'Comparator' objects>
           │  └ <sqlalchemy.orm.properties.ColumnProperty.Comparator object at 0x000001D4B9C5B3D0>
           └ <built-in function eq>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 378, in __eq__
    return self.__element.__class__.__eq__(self, other)
           │                               │     └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │                               └ Column('id', BIGINT(), table=<schedule_posts>, primary_key=True, nullable=False)
           └ Column('id', BIGINT(), table=<schedule_posts>, primary_key=True, nullable=False)
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 590, in __eq__
    return self.operate(eq, other)
           │    │       │   └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │    │       └ <built-in function eq>
           │    └ <function ColumnElement.operate at 0x000001D4B8405E40>
           └ Column('id', BIGINT(), table=<schedule_posts>, primary_key=True, nullable=False)
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 1619, in operate
    return op(self.comparator, *other, **kwargs)  # type: ignore[no-any-return]  # noqa: E501
           │  │    │            │        └ {}
           │  │    │            └ (<bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>,)
           │  │    └ <sqlalchemy.sql.sqltypes.HasExpressionLookup.Comparator object at 0x000001D4BA6C3BB0>
           │  └ Column('id', BIGINT(), table=<schedule_posts>, primary_key=True, nullable=False)
           └ <built-in function eq>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\operators.py", line 590, in __eq__
    return self.operate(eq, other)
           │    │       │   └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
           │    │       └ <built-in function eq>
           │    └ <function TypeEngine.Comparator.operate at 0x000001D4B836F9C0>
           └ <sqlalchemy.sql.sqltypes.HasExpressionLookup.Comparator object at 0x000001D4BA6C3BB0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\type_api.py", line 197, in operate
    return op_fn(self.expr, op, *other, **addtl_kw)
           │     │    │     │    │        └ immutabledict({'negate_op': <built-in function ne>})
           │     │    │     │    └ (<bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>,)
           │     │    │     └ <built-in function eq>
           │     │    └ <member 'expr' of 'Comparator' objects>
           │     └ <sqlalchemy.sql.sqltypes.HasExpressionLookup.Comparator object at 0x000001D4BA6C3BB0>
           └ <function _boolean_compare at 0x000001D4B85B44A0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\default_comparator.py", line 121, in _boolean_compare
    obj = coercions.expect(
          │         └ <function expect at 0x000001D4B82DE660>
          └ <module 'sqlalchemy.sql.coercions' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\.venv\\Lib\\site-packages\\sqlalchemy\\sql...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 413, in expect
    resolved = impl._literal_coercion(
               │    └ <function BinaryElementImpl._literal_coercion at 0x000001D4B82DF740>
               └ <sqlalchemy.sql.coercions.BinaryElementImpl object at 0x000001D4B832A300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 813, in _literal_coercion
    self._raise_for_expected(element, err=err)
    │    │                   └ <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>
    │    └ <function ExpressionElementImpl._raise_for_expected at 0x000001D4B82DF600>
    └ <sqlalchemy.sql.coercions.BinaryElementImpl object at 0x000001D4B832A300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 799, in _raise_for_expected
    return super()._raise_for_expected(
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\coercions.py", line 535, in _raise_for_expected
    raise exc.ArgumentError(msg, code=code) from err
          │   │             │         │          └ ArgumentError('Object <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890> is not legal as a SQL literal value')
          │   │             │         └ None
          │   │             └ 'SQL expression element or literal value expected, got <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>.'
          │   └ <class 'sqlalchemy.exc.ArgumentError'>
          └ <module 'sqlalchemy.exc' from 'E:\\PythonProjects\\KoreanBot\\KoreanBot\\.venv\\Lib\\site-packages\\sqlalchemy\\exc.py'>

sqlalchemy.exc.ArgumentError: SQL expression element or literal value expected, got <bot.db.models.models.SchedulePosts object at 0x000001D4BA497890>.
2024-02-18T14:02:10.559901+0200 INFO Bot stopped!
2024-02-18T14:02:13.570111+0200 INFO Bot started!
2024-02-18T14:02:16.512774+0200 INFO ::1 [18/Feb/2024:14:02:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:17.260153+0200 INFO Update id=925008871 is handled. Duration 750 ms by bot id=5646878393
2024-02-18T14:02:21.083221+0200 INFO ::1 [18/Feb/2024:14:02:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:21.240256+0200 INFO Update id=925008872 is handled. Duration 155 ms by bot id=5646878393
2024-02-18T14:02:22.388415+0200 INFO ::1 [18/Feb/2024:14:02:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:22.546320+0200 INFO Update id=925008873 is handled. Duration 156 ms by bot id=5646878393
2024-02-18T14:02:23.232911+0200 INFO ::1 [18/Feb/2024:14:02:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:23.393755+0200 INFO Update id=925008874 is handled. Duration 156 ms by bot id=5646878393
2024-02-18T14:02:24.019631+0200 INFO ::1 [18/Feb/2024:14:02:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:24.146805+0200 INFO Update id=925008875 is handled. Duration 139 ms by bot id=5646878393
2024-02-18T14:02:24.945560+0200 INFO ::1 [18/Feb/2024:14:02:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:25.088013+0200 INFO Update id=925008876 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T14:02:27.186812+0200 INFO ::1 [18/Feb/2024:14:02:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:27.524647+0200 INFO Update id=925008877 is handled. Duration 343 ms by bot id=5646878393
2024-02-18T14:02:32.946512+0200 INFO ::1 [18/Feb/2024:14:02:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:33.085230+0200 INFO Update id=925008878 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T14:02:34.180730+0200 INFO ::1 [18/Feb/2024:14:02:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:34.394590+0200 INFO Update id=925008879 is handled. Duration 203 ms by bot id=5646878393
2024-02-18T14:02:35.939559+0200 INFO ::1 [18/Feb/2024:14:02:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:36.106606+0200 INFO Update id=925008880 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T14:02:36.909123+0200 INFO ::1 [18/Feb/2024:14:02:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:37.101108+0200 INFO Update id=925008881 is handled. Duration 203 ms by bot id=5646878393
2024-02-18T14:02:38.052919+0200 INFO ::1 [18/Feb/2024:14:02:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:02:38.238117+0200 INFO Update id=925008882 is handled. Duration 171 ms by bot id=5646878393
2024-02-18T14:18:04.579791+0200 INFO ::1 [18/Feb/2024:14:18:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:18:04.953080+0200 ERROR Cannot get window data for state <State 'TopUpBalance:enter_amount'>
2024-02-18T14:18:04.954081+0200 INFO Update id=925008883 is not handled. Duration 375 ms by bot id=5646878393
2024-02-18T14:18:04.971083+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-89' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"')>
Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 546, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('CARD_NUMBER',)
    │    │             │             └ <function PreparedStatement.fetch at 0x000002587CE56160>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002587D658DB0>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('CARD_NUMBER',)
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002587D658DB0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x000002587D658DB0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x000002587CDB2410>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x000002587D75F6A0>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute

asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002587C5D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002587CC9B390>
    └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('CARD_NUMBER',)
    │      │       └ 'SELECT bot_settings.id, bot_settings.key, bot_settings.value \nFROM bot_settings \nWHERE bot_settings.key = $1::botsettingse...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002587CAEF060>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002587CE97520>
           └ <_AsyncIoGreenlet object at 0x000002587D88A880 (otid=0x000002587AFD1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002587CE97520>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002587CAEEE80>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002587CB4AD90>
                   │    │          │                   │           └ {'update_id': 925008883, 'callback_query': {'id': '1663765558829715403', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000002587CC8B5D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000002587A711B20>
                   │    └ <Dispatcher '0x2587cd58cd0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000002587CB4AD90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000002587CC8B5D0>
                 │    └ <function Dispatcher.feed_update at 0x000002587A711A80>
                 └ <Dispatcher '0x2587cd58cd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002587A710400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002587CEDA910>
                     └ <Dispatcher '0x2587cd58cd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002587CC9A490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002587CEDAFD0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002587D858B40>
          │    │   │      │    └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
          │    │   │      └ <class 'sqlalchemy.exc.DBAPIError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002587CED16C0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002587CF5A510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002587CEDB450>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002587D673D80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002587CEEA4D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002587CEDB550>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008883, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002587D49DDA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2587cd58cd0'>>, Update(update_id=925008883, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002587A711080>
                 └ <Dispatcher '0x2587cd58cd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002587D49EA20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002587A710400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002587CED9110>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002587A711120>
                 └ <Dispatcher '0x2587cd58cd0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002587A711080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002587D49E980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002587A710400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002587CEE85D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002587CF53E90>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002587D49E480>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002587A711120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002587A711080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002587D75EDE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002587A710400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002587CEFEF90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002587A711120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002587A710540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002587CEFEF90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002587CCACB10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002587CEDB550>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002587CF53C50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002587ABB1120>, <function CallableObject.call at 0x000002587D75E...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002587D75E3E0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000002587ABF7F60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000002587A9DF4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002587CCAF6D0>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002587AB67CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002587CCAF6D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002587A9DF4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002587CCD7310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002587AB67CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002587CCD7310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002587A9DF4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000002587A9FC180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
          │    │        │             └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000002587A9DD440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002587CCD7250>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
          │    │        └ CallbackQuery(id='1663765558829715403', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002587CCD7250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
          │       │     │    └ <State 'TopUpBalance:enter_amount'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002587CCD7010>
          │       └ <function ManagerImpl.start at 0x000002587ABF4EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'TopUpBalance:enter_amount'>
          │    └ <function ManagerImpl._start_normal at 0x000002587ABF5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000002587ABF5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
                        │    └ <function ManagerImpl.dialog at 0x000002587ABF47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
                        │      │      └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                        │      └ <function Window.render at 0x000002587AC08040>
                        └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
                         │    │         └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                         │    └ <function Window.load_data at 0x000002587ABF7E20>
                         └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000002587ABE8270>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002587D86E4D0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002587CD5B010>
    │    │            └ <Window(<State 'TopUpBalance:enter_amount'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2587cd58cd0'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_topup_amount at 0x000002587CC8F380>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002587CD5B010>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 79, in get_topup_amount
    card_number = await repo.bot_settings_repo.get_bot_setting(BotSettingsEnum.CARD_NUMBER)
                        │    │                 │               │               └ <BotSettingsEnum.CARD_NUMBER: 'card_number'>
                        │    │                 │               └ <enum 'BotSettingsEnum'>
                        │    │                 └ <function BotSettingsRepo.get_bot_setting at 0x000002587CC07C40>
                        │    └ <bot.db.requests.bot_settings.BotSettingsRepo object at 0x000002587D86CDD0>
                        └ <bot.db.Repo object at 0x000002587D86E910>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\db\requests\bot_settings.py", line 20, in get_bot_setting
    result = await self.session.execute(query)
                   │    │       │       └ <sqlalchemy.sql.selectable.Select object at 0x000002587D85AA90>
                   │    │       └ <function AsyncSession.execute at 0x000002587C9C9EE0>
                   │    └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x000002587D86C490>
                   └ <bot.db.requests.bot_settings.BotSettingsRepo object at 0x000002587D86CDD0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 455, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x000002587B01CB80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 200, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x000002587D88A880 (otid=0x000002587AFD1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000002587C8EE700>
           └ <sqlalchemy.orm.session.Session object at 0x000002587D86C810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x000002587C78C220>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000002587C5020C0>
             └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000002587D85AA90>>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000002587C5023E0>
           └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000002587C5025C0>
          └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000002587C502660>
           └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000002587C5028E0>
    └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error('<class \'asyncpg.exceptions.InvalidT...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000002587C5D5800>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x000002587CC9B390>
    └ <sqlalchemy.engine.base.Connection object at 0x000002587D85A790>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('CARD_NUMBER',)
    │      │       └ 'SELECT bot_settings.id, bot_settings.key, bot_settings.value \nFROM bot_settings \nWHERE bot_settings.key = $1::botsettingse...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x000002587CAEF060>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 130, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002587CE97520>
           └ <_AsyncIoGreenlet object at 0x000002587D88A880 (otid=0x000002587AFD1800) dead>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 195, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x000002587CE97520>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x000002587CAEEE80>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 509, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x000002587D601300>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку botsettingsen...

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку botsettingsenum: "CARD_NUMBER"
[SQL: SELECT bot_settings.id, bot_settings.key, bot_settings.value 
FROM bot_settings 
WHERE bot_settings.key = $1::botsettingsenum]
[parameters: ('CARD_NUMBER',)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-18T14:18:15.644746+0200 INFO Bot stopped!
2024-02-18T14:18:35.828290+0200 INFO Bot started!
2024-02-18T14:18:43.510252+0200 INFO ::1 [18/Feb/2024:14:18:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:18:43.794337+0200 INFO Update id=925008884 is handled. Duration 281 ms by bot id=5646878393
2024-02-18T14:18:44.842411+0200 INFO ::1 [18/Feb/2024:14:18:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:18:45.031514+0200 INFO Update id=925008885 is handled. Duration 186 ms by bot id=5646878393
2024-02-18T14:18:46.345667+0200 INFO ::1 [18/Feb/2024:14:18:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:18:46.468763+0200 INFO Update id=925008886 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T14:18:47.607571+0200 INFO ::1 [18/Feb/2024:14:18:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:18:47.611693+0200 ERROR Cannot get window data for state <State 'TopUpBalance:enter_amount'>
2024-02-18T14:18:47.612691+0200 INFO Update id=925008887 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T14:18:47.616694+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-33' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'value'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000288F6417510>
                   │    │          │                   │           └ {'update_id': 925008887, 'callback_query': {'id': '1663765556339306703', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000288F65EF950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000288F3E4DB20>
                   │    └ <Dispatcher '0x288f6417710'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000288F6417510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000288F65EF950>
                 │    └ <function Dispatcher.feed_update at 0x00000288F3E4DA80>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F63FD510>
                     └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000288F6428D90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000288F6645310>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000288F6F995C0>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'value'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000288F6CED3F0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000288F6A99610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000288F6645A10>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000288F6D04180>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000288F6298C10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000288F6645AD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008887, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000288F66B07C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x288f6417710'>>, Update(update_id=925008887, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000288F3E4D080>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6D042C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F63EF710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000288F3E4D080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6D049A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F66469D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000288F66B6150>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6D04720>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000288F3E4D080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6D04EA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F6669310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x00000288F3E4C540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F6669310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000288F6415E90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000288F6645AD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000288F66B5ED0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000288F42F1120>, <function CallableObject.call at 0x00000288F6D04...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x00000288F6D04E00>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x00000288F4337F60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x00000288F411F4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F629A510>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x00000288F42A7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F629A510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x00000288F411F4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F6416ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x00000288F42A7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F6416ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x00000288F411F4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x00000288F413C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │    │        │             └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x00000288F411D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000288F6415250>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │    │        └ CallbackQuery(id='1663765556339306703', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000288F6415250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       │     │    └ <State 'TopUpBalance:enter_amount'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       └ <function ManagerImpl.start at 0x00000288F4334EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'TopUpBalance:enter_amount'>
          │    └ <function ManagerImpl._start_normal at 0x00000288F4335080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000288F4335440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
                        │    └ <function ManagerImpl.dialog at 0x00000288F43347C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
                        │      │      └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                        │      └ <function Window.render at 0x00000288F4348040>
                        └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
                         │    │         └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                         │    └ <function Window.load_data at 0x00000288F4337E20>
                         └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000288F43282C0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F6B41A10>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000288F649EF10>
    │    │            └ <Window(<State 'TopUpBalance:enter_amount'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_topup_amount at 0x00000288F63D3380>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000288F649EF10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 83, in get_topup_amount
    "card_number": card_number.value
                   └ None

AttributeError: 'NoneType' object has no attribute 'value'
2024-02-18T14:19:32.138356+0200 INFO ::1 [18/Feb/2024:14:19:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:19:32.142529+0200 ERROR Cannot get window data for state <State 'TopUpBalance:enter_amount'>
2024-02-18T14:19:32.143530+0200 INFO Update id=925008888 is not handled. Duration 0 ms by bot id=5646878393
2024-02-18T14:19:32.145532+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-37' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'value'")>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000288F6417510>
                   │    │          │                   │           └ {'update_id': 925008888, 'callback_query': {'id': '1663765557907271186', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000288F65EF950>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000288F3E4DB20>
                   │    └ <Dispatcher '0x288f6417710'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000288F6417510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000288F65EF950>
                 │    └ <function Dispatcher.feed_update at 0x00000288F3E4DA80>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F63FD510>
                     └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000288F6428D90>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000288F6645310>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000288F6B42680>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'value'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000288F6CED210>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000288F6F98990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000288F6645A10>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000288F65E2020>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000288F6298C10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000288F6645AD0>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008888, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000288F3C81A80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x288f6417710'>>, Update(update_id=925008888, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000288F3E4D080>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6DC23E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F63EF710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Dispatcher '0x288f6417710'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000288F3E4D080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6B5BBA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F66469D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000288F66B6150>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6F19260>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000288F3E4D080>
                     └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000288F6F19300>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000288F3E4C400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F6669310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000288F3E4D120>
                 └ <Dialog(<StatesGroup 'UserAccount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x00000288F3E4C540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000288F6669310>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000288F6415E90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000288F6645AD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000288F66B5ED0>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000288F42F1120>, <function CallableObject.call at 0x00000288F6F19...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x00000288F6F191C0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'UserAccount'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
          │      │                │                 └ <Dialog(<StatesGroup 'UserAccount'>)>
          │      │                └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x00000288F4337F60>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
          │    │        │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
          │    │        │                └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x00000288F411F4C0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F629A510>
          └ <Window(<State 'UserAccount:show_account_info'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x00000288F42A7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F629A510>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x00000288F411F4C0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F6416ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
                 │    │                       │         └ <Dialog(<StatesGroup 'UserAccount'>)>
                 │    │                       └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x00000288F42A7CE0>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000288F6416ED0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
             │ │                │         └ <Dialog(<StatesGroup 'UserAccount'>)>
             │ │                └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x00000288F411F4C0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x00000288F413C180>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │    │        │             └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x00000288F411D440>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000288F6415250>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │    │        └ CallbackQuery(id='1663765557907271186', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000288F6415250>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       │     │    └ <State 'TopUpBalance:enter_amount'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000288F63E45D0>
          │       └ <function ManagerImpl.start at 0x00000288F4334EA0>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'TopUpBalance:enter_amount'>
          │    └ <function ManagerImpl._start_normal at 0x00000288F4335080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000288F4335440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
                        │    └ <function ManagerImpl.dialog at 0x00000288F43347C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
                        │      │      └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                        │      └ <function Window.render at 0x00000288F4348040>
                        └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
                         │    │         └ <Dialog(<StatesGroup 'TopUpBalance'>)>
                         │    └ <function Window.load_data at 0x00000288F4337E20>
                         └ <Window(<State 'TopUpBalance:enter_amount'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000288F43282C0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000288F7001410>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000288F649EF10>
    │    │            └ <Window(<State 'TopUpBalance:enter_amount'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x288f6417710'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_topup_amount at 0x00000288F63D3380>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000288F649EF10>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\main_menu\getters.py", line 83, in get_topup_amount
    "card_number": card_number.value
                   └ None

AttributeError: 'NoneType' object has no attribute 'value'
2024-02-18T14:19:34.568055+0200 INFO Bot stopped!
2024-02-18T14:19:37.920362+0200 INFO Bot started!
2024-02-18T14:19:38.092362+0200 INFO ::1 [18/Feb/2024:14:19:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:19:38.348749+0200 INFO Update id=925008889 is handled. Duration 264 ms by bot id=5646878393
2024-02-18T14:19:40.700243+0200 INFO ::1 [18/Feb/2024:14:19:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:19:40.834319+0200 INFO Update id=925008890 is handled. Duration 141 ms by bot id=5646878393
2024-02-18T14:19:42.112399+0200 INFO ::1 [18/Feb/2024:14:19:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:19:42.233910+0200 INFO Update id=925008891 is handled. Duration 125 ms by bot id=5646878393
2024-02-18T14:21:19.739741+0200 INFO Bot stopped!
2024-02-18T14:21:22.824159+0200 INFO Bot started!
2024-02-18T14:21:22.826871+0200 INFO ::1 [18/Feb/2024:14:21:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:21:22.968884+0200 ERROR Cannot get window data for state <State 'FirstStartWindow:sub_on_channel'>
2024-02-18T14:21:22.970885+0200 INFO Update id=546664925 is not handled. Duration 141 ms by bot id=6797813960
2024-02-18T14:21:22.978454+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-13' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C5C0C2F810>
                   │    │          │                   │           └ {'update_id': 546664925, 'message': {'message_id': 1066, 'from': {'id': 6133947978, 'is_bot': False, 'first_name': 'Easy Life...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001C5BE3F1B20>
                   │    └ <Dispatcher '0x1c5bb03f4d0'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001C5C0C2F810>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
                 │    └ <function Dispatcher.feed_update at 0x000001C5BE3F1A80>
                 └ <Dispatcher '0x1c5bb03f4d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C5BE3F0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C5C0BBAAD0>
                     └ <Dispatcher '0x1c5bb03f4d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001C5C0982490>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001C5C0BBB150>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001C5C1355480>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001C5C127C040>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001C5C0974990>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001C5C0BBB590>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x000001C5C117E0C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C5C0BC6650>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C5C098FE90>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664925, message=Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x000001C5C117E3E0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1c5bb03f4d0'>>, Update(update_id=546664925, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001C5BE3F1080>
                 └ <Dispatcher '0x1c5bb03f4d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C5C117E700>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C5BE3F0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C5C0BB8210>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C5BE3F1120>
                 └ <Dispatcher '0x1c5bb03f4d0'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C5BE3F1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C5C117E7A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C5BE3F0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C5C0BBB710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001C5C0C2FCD0>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001C5C117E840>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C5BE3F1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001C5BE3F1080>
                     └ <Router '0x1c5c0829d50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001C5C117EA20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001C5BE3F0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C5C0A54610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001C5BE3F1120>
                 └ <Router '0x1c5c0829d50'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x000001C5BE3F0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001C5C0A54610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001C5C099F790>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001C5C098FE90>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001C5C0B00810>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ functools.partial(<function context_saver_middleware at 0x000001C5BE88D120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001C5C0A57450>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17, 59, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='...
                 └ <function CallableObject.call at 0x000001C5C117E980>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001C5C0A5CAE0>, Message(message_id=1066, date=datetime.datetime(2024, 2, 18, 12, 17...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x000001C5BE8D4EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x000001C5BE8D5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001C5BE8D5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
                        │    └ <function ManagerImpl.dialog at 0x000001C5BE8D47C0>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
                        │      │      └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                        │      └ <function Window.render at 0x000001C5BE8E8040>
                        └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
                         │    │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                         │    └ <function Window.load_data at 0x000001C5BE8D7E20>
                         └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001C5BE8C8220>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001C5C120A190>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001C5C0A54210>
    │    │            └ <Window(<State 'FirstStartWindow:sub_on_channel'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1c5bb03f4d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_sub_channel_url at 0x000001C5C096EF20>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001C5C0A54210>

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\dialogs\start_menu\getters.py", line 13, in get_sub_channel_url
    channel_info = await bot.get_chat(int(sub_channel_id.value))
                         │   │            │              └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001C5C083DA80>
                         │   │            └ <bot.db.models.models.BotSettings object at 0x000001C5C1355450>
                         │   └ <function Bot.get_chat at 0x000001C5BE3B28E0>
                         └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1567, in get_chat
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ GetChat(chat_id=-1001960731769)
                 └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ GetChat(chat_id=-1001960731769)
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C5C098EB10>
                 └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ GetChat(chat_id=-1001960731769)
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001C5C0B12B90>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001C5B8540540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001C5BE38B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001C5C098EB10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ GetChat(chat_id=-1001960731769)
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-18T14:21:55.886834+0200 INFO ::1 [18/Feb/2024:14:21:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:21:55.888834+0200 INFO Update id=546664926 is not handled. Duration 0 ms by bot id=6797813960
2024-02-18T14:22:02.198910+0200 INFO Bot stopped!
2024-02-18T14:22:05.101949+0200 INFO Bot started!
2024-02-18T14:22:13.611895+0200 INFO ::1 [18/Feb/2024:14:22:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:22:13.886351+0200 INFO Update id=546664927 is handled. Duration 281 ms by bot id=6797813960
2024-02-18T14:22:30.708860+0200 INFO ::1 [18/Feb/2024:14:22:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:22:30.936493+0200 INFO Update id=546664928 is handled. Duration 218 ms by bot id=6797813960
2024-02-18T14:22:33.622320+0200 INFO ::1 [18/Feb/2024:14:22:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:22:34.024157+0200 INFO Update id=546664929 is handled. Duration 406 ms by bot id=6797813960
2024-02-18T14:22:48.542170+0200 INFO ::1 [18/Feb/2024:14:22:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:22:48.746810+0200 INFO Update id=546664930 is handled. Duration 202 ms by bot id=6797813960
2024-02-18T14:22:59.440260+0200 INFO ::1 [18/Feb/2024:14:22:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:22:59.626262+0200 INFO Update id=546664931 is handled. Duration 187 ms by bot id=6797813960
2024-02-18T14:23:36.712911+0200 INFO ::1 [18/Feb/2024:14:23:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:23:37.233252+0200 INFO Update id=546664932 is handled. Duration 514 ms by bot id=6797813960
2024-02-18T14:26:18.688396+0200 INFO ::1 [18/Feb/2024:14:26:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:18.977255+0200 INFO Update id=546664933 is handled. Duration 296 ms by bot id=6797813960
2024-02-18T14:26:19.859206+0200 INFO ::1 [18/Feb/2024:14:26:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:19.979329+0200 INFO Update id=546664934 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:26:20.885103+0200 INFO ::1 [18/Feb/2024:14:26:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:21.183375+0200 INFO Update id=546664935 is handled. Duration 296 ms by bot id=6797813960
2024-02-18T14:26:22.133275+0200 INFO ::1 [18/Feb/2024:14:26:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:22.308958+0200 INFO Update id=546664936 is handled. Duration 171 ms by bot id=6797813960
2024-02-18T14:26:39.732582+0200 INFO ::1 [18/Feb/2024:14:26:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:40.006211+0200 INFO Update id=546664937 is handled. Duration 281 ms by bot id=6797813960
2024-02-18T14:26:41.824060+0200 INFO ::1 [18/Feb/2024:14:26:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:41.870681+0200 INFO Update id=546664938 is not handled. Duration 46 ms by bot id=6797813960
2024-02-18T14:26:41.876677+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-89' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/real-estate-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664938, 'callback_query': {'id': '7898361889094478133', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAA8A2C0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA0817B0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FAA62090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA0EE840>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FA652160>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664938, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652E80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652FC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FA652...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361889094478133', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FA652660>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAA77B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAA77B50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/real-estate-submission-form' is invalid:...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/real-estate-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:26:46.154953+0200 INFO ::1 [18/Feb/2024:14:26:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:46.201827+0200 INFO Update id=546664939 is not handled. Duration 46 ms by bot id=6797813960
2024-02-18T14:26:46.203828+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-94' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664939, 'callback_query': {'id': '7898361889570376959', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAB65680>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA083F10>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FAB5CE50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA652200>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664939, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FAAD7D80>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664939, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7CE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7E20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7F60>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAB782C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FAB78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361889570376959', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FAB78360>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAB63410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAB63410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Uns...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:26:46.766541+0200 INFO ::1 [18/Feb/2024:14:26:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:46.961013+0200 INFO Update id=546664940 is handled. Duration 203 ms by bot id=6797813960
2024-02-18T14:26:47.972083+0200 INFO ::1 [18/Feb/2024:14:26:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:48.102094+0200 INFO Update id=546664941 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:26:48.667570+0200 INFO ::1 [18/Feb/2024:14:26:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:48.713585+0200 INFO Update id=546664942 is not handled. Duration 46 ms by bot id=6797813960
2024-02-18T14:26:48.715586+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-111' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/real-estate-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664942, 'callback_query': {'id': '7898361887685494618', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAB5A080>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA823A60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FAB58B90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FAAD7A60>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FAAD7E20>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664942, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7D80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA053A60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA052A20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FA652...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887685494618', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FA652F20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAB6B610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAB6B610>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/real-estate-submission-form' is invalid:...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на недвижимость:', chat_id=6133947978, message_id=1070, inline_me...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/real-estate-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:26:49.555456+0200 INFO ::1 [18/Feb/2024:14:26:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:49.606052+0200 INFO Update id=546664943 is not handled. Duration 46 ms by bot id=6797813960
2024-02-18T14:26:49.608574+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-116' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664943, 'callback_query': {'id': '7898361891308362115', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FA91EC80>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA823D30>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FA91C410>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FAAD7C40>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664943, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FA652660>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664943, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652200>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652E80>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7A60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FAAD7...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361891308362115', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FAAD7E20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAA72690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAA72690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Uns...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1070, inline_messa...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:26:54.121457+0200 INFO ::1 [18/Feb/2024:14:26:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:54.312069+0200 INFO Update id=546664944 is handled. Duration 187 ms by bot id=6797813960
2024-02-18T14:26:55.814484+0200 INFO ::1 [18/Feb/2024:14:26:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:56.132827+0200 INFO Update id=546664945 is handled. Duration 328 ms by bot id=6797813960
2024-02-18T14:26:57.722162+0200 INFO ::1 [18/Feb/2024:14:26:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:57.907048+0200 INFO Update id=546664946 is handled. Duration 186 ms by bot id=6797813960
2024-02-18T14:26:58.537370+0200 INFO ::1 [18/Feb/2024:14:26:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:26:58.992242+0200 INFO Update id=546664947 is handled. Duration 452 ms by bot id=6797813960
2024-02-18T14:27:00.426820+0200 INFO ::1 [18/Feb/2024:14:27:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:00.615906+0200 INFO Update id=546664948 is handled. Duration 187 ms by bot id=6797813960
2024-02-18T14:27:01.573259+0200 INFO ::1 [18/Feb/2024:14:27:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:02.238826+0200 INFO Update id=546664949 is handled. Duration 656 ms by bot id=6797813960
2024-02-18T14:27:07.535071+0200 INFO ::1 [18/Feb/2024:14:27:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:07.744915+0200 INFO Update id=546664950 is handled. Duration 218 ms by bot id=6797813960
2024-02-18T14:27:08.717449+0200 INFO ::1 [18/Feb/2024:14:27:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:08.768586+0200 INFO Update id=546664951 is not handled. Duration 46 ms by bot id=6797813960
2024-02-18T14:27:08.769587+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-165' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664951, 'callback_query': {'id': '7898361887522451775', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FA92A300>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA083F10>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FA108E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA82A980>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664951, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FA053B00>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664951, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA8294E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7E20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FAAD7C40>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA051F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FAAD7...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887522451775', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FAAD7B00>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA935650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA935650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1073, inline_messa...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1073, inline_messa...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1073, inline_messa...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Uns...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1073, inline_messa...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:27:13.760334+0200 INFO ::1 [18/Feb/2024:14:27:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:13.987636+0200 INFO Update id=546664952 is handled. Duration 218 ms by bot id=6797813960
2024-02-18T14:27:14.887561+0200 INFO ::1 [18/Feb/2024:14:27:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:15.056446+0200 INFO Update id=546664953 is handled. Duration 171 ms by bot id=6797813960
2024-02-18T14:27:15.712628+0200 INFO ::1 [18/Feb/2024:14:27:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:16.012560+0200 INFO Update id=546664954 is handled. Duration 296 ms by bot id=6797813960
2024-02-18T14:27:16.838828+0200 INFO ::1 [18/Feb/2024:14:27:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:17.077324+0200 INFO Update id=546664955 is handled. Duration 233 ms by bot id=6797813960
2024-02-18T14:27:41.052348+0200 INFO ::1 [18/Feb/2024:14:27:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:41.310186+0200 INFO Update id=546664956 is handled. Duration 250 ms by bot id=6797813960
2024-02-18T14:27:43.123577+0200 INFO ::1 [18/Feb/2024:14:27:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:43.413326+0200 INFO Update id=546664957 is handled. Duration 297 ms by bot id=6797813960
2024-02-18T14:27:46.303485+0200 INFO ::1 [18/Feb/2024:14:27:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:46.561229+0200 INFO Update id=546664958 is handled. Duration 250 ms by bot id=6797813960
2024-02-18T14:27:47.378180+0200 INFO ::1 [18/Feb/2024:14:27:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:47.804647+0200 INFO Update id=546664959 is handled. Duration 437 ms by bot id=6797813960
2024-02-18T14:27:49.324852+0200 INFO ::1 [18/Feb/2024:14:27:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:49.674074+0200 INFO Update id=546664960 is handled. Duration 344 ms by bot id=6797813960
2024-02-18T14:27:51.398728+0200 INFO ::1 [18/Feb/2024:14:27:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:51.515531+0200 INFO Update id=546664961 is handled. Duration 110 ms by bot id=6797813960
2024-02-18T14:27:52.635076+0200 INFO ::1 [18/Feb/2024:14:27:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:52.893270+0200 INFO Update id=546664962 is handled. Duration 250 ms by bot id=6797813960
2024-02-18T14:27:55.075552+0200 INFO ::1 [18/Feb/2024:14:27:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:27:55.642886+0200 INFO Update id=546664963 is handled. Duration 563 ms by bot id=6797813960
2024-02-18T14:28:06.571635+0200 INFO ::1 [18/Feb/2024:14:28:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:06.711588+0200 INFO Update id=546664964 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T14:28:09.239251+0200 INFO ::1 [18/Feb/2024:14:28:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:09.409901+0200 INFO Update id=546664965 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:12.403585+0200 INFO ::1 [18/Feb/2024:14:28:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:12.537845+0200 INFO Update id=546664966 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T14:28:13.325326+0200 INFO ::1 [18/Feb/2024:14:28:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:13.488319+0200 INFO Update id=546664967 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:14.810176+0200 INFO ::1 [18/Feb/2024:14:28:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:14.983407+0200 INFO Update id=546664968 is handled. Duration 171 ms by bot id=6797813960
2024-02-18T14:28:16.101700+0200 INFO ::1 [18/Feb/2024:14:28:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:16.220267+0200 INFO Update id=546664969 is handled. Duration 110 ms by bot id=6797813960
2024-02-18T14:28:19.240324+0200 INFO ::1 [18/Feb/2024:14:28:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:19.409617+0200 INFO Update id=546664970 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:20.921777+0200 INFO ::1 [18/Feb/2024:14:28:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:21.543586+0200 INFO Update id=546664971 is handled. Duration 625 ms by bot id=6797813960
2024-02-18T14:28:27.695037+0200 INFO ::1 [18/Feb/2024:14:28:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:28.000040+0200 INFO Update id=546664972 is handled. Duration 296 ms by bot id=6797813960
2024-02-18T14:28:28.474418+0200 INFO ::1 [18/Feb/2024:14:28:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:28.732019+0200 INFO Update id=546664973 is handled. Duration 250 ms by bot id=6797813960
2024-02-18T14:28:30.441240+0200 INFO ::1 [18/Feb/2024:14:28:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:30.668067+0200 INFO Update id=546664974 is handled. Duration 235 ms by bot id=6797813960
2024-02-18T14:28:31.882838+0200 INFO ::1 [18/Feb/2024:14:28:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:32.022598+0200 INFO Update id=546664975 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:28:33.452573+0200 INFO ::1 [18/Feb/2024:14:28:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:33.577285+0200 INFO Update id=546664976 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:28:35.039756+0200 INFO ::1 [18/Feb/2024:14:28:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:35.160174+0200 INFO Update id=546664977 is handled. Duration 108 ms by bot id=6797813960
2024-02-18T14:28:35.563684+0200 INFO ::1 [18/Feb/2024:14:28:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:35.722420+0200 INFO Update id=546664978 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:38.200596+0200 INFO ::1 [18/Feb/2024:14:28:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:38.643722+0200 INFO Update id=546664979 is handled. Duration 438 ms by bot id=6797813960
2024-02-18T14:28:38.995231+0200 INFO ::1 [18/Feb/2024:14:28:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:39.161886+0200 INFO Update id=546664980 is not handled. Duration 172 ms by bot id=6797813960
2024-02-18T14:28:39.163885+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-341' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 546664980, 'callback_query': {'id': '7898361887822648400', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAB6FF40>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app...
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA74C6D0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FA885F90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA807C40>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=546664980, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FAB7B880>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=546664980, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA051F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652F20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652160>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA651F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dialog(<StatesGroup 'AnnouncementPost'>)>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA0DF910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5DFD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, <function CallableObject.call at 0x00000262FA652...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887822648400', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x00000262FA652200>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'AnnouncementPost'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAC13090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FAC13090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.edit_message_safe at 0x00000262F7DA6D40>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_message at 0x00000262F7DA6DE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.edit_text at 0x00000262F7DA6F20>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x00000262F7882700>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 1490, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1079, inline_messa...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1079, inline_messa...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1079, inline_messa...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ "Bad Request: inline keyboard button Web App URL '\thttps://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Uns...
          │                         └ EditMessageText(text='Заполните форму для подачи объявления на транспорт:', chat_id=6133947978, message_id=1079, inline_messa...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: inline keyboard button Web App URL '	https://webapp-forms.netlify.app/vehicle-submission-form' is invalid: Unsupported URL protocol
2024-02-18T14:28:39.950464+0200 INFO ::1 [18/Feb/2024:14:28:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:40.065957+0200 INFO Update id=546664981 is handled. Duration 109 ms by bot id=6797813960
2024-02-18T14:28:40.961988+0200 INFO ::1 [18/Feb/2024:14:28:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:41.104878+0200 INFO Update id=546664982 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:28:41.907992+0200 INFO ::1 [18/Feb/2024:14:28:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:42.033345+0200 INFO Update id=546664983 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:28:42.823133+0200 INFO ::1 [18/Feb/2024:14:28:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:42.985230+0200 INFO Update id=546664984 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:45.259392+0200 INFO ::1 [18/Feb/2024:14:28:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:45.381443+0200 INFO Update id=546664985 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:28:46.792468+0200 INFO ::1 [18/Feb/2024:14:28:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:46.916511+0200 INFO Update id=546664986 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:28:47.668559+0200 INFO ::1 [18/Feb/2024:14:28:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:47.815928+0200 INFO Update id=546664987 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:28:48.322126+0200 INFO ::1 [18/Feb/2024:14:28:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:48.476703+0200 INFO Update id=546664988 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:28:51.283944+0200 INFO ::1 [18/Feb/2024:14:28:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:51.409918+0200 INFO Update id=546664989 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:28:52.362374+0200 INFO ::1 [18/Feb/2024:14:28:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:28:52.524825+0200 INFO Update id=546664990 is handled. Duration 171 ms by bot id=6797813960
2024-02-18T14:29:32.930424+0200 INFO ::1 [18/Feb/2024:14:29:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:29:33.223239+0200 INFO Update id=546664991 is handled. Duration 281 ms by bot id=6797813960
2024-02-18T14:29:38.527571+0200 INFO ::1 [18/Feb/2024:14:29:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:29:38.854911+0200 INFO Update id=546664992 is handled. Duration 328 ms by bot id=6797813960
2024-02-18T14:29:40.320365+0200 INFO ::1 [18/Feb/2024:14:29:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:29:40.559981+0200 INFO Update id=546664993 is handled. Duration 234 ms by bot id=6797813960
2024-02-18T14:29:41.523265+0200 INFO ::1 [18/Feb/2024:14:29:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:29:41.658375+0200 INFO Update id=546664994 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:29:42.302419+0200 INFO ::1 [18/Feb/2024:14:29:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:29:42.508288+0200 INFO Update id=546664995 is handled. Duration 203 ms by bot id=6797813960
2024-02-18T14:30:20.967845+0200 INFO ::1 [18/Feb/2024:14:30:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:30:21.201090+0200 INFO Update id=546664996 is handled. Duration 233 ms by bot id=6797813960
2024-02-18T14:30:21.971019+0200 INFO ::1 [18/Feb/2024:14:30:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:30:22.101187+0200 INFO Update id=546664997 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:30:52.296702+0200 INFO ::1 [18/Feb/2024:14:30:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:30:52.691078+0200 INFO Update id=546664998 is handled. Duration 389 ms by bot id=6797813960
2024-02-18T14:30:58.380214+0200 INFO ::1 [18/Feb/2024:14:30:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:30:58.508989+0200 INFO Update id=546664999 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:31:52.884549+0200 INFO ::1 [18/Feb/2024:14:31:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:31:53.174101+0200 INFO Update id=546665000 is handled. Duration 281 ms by bot id=6797813960
2024-02-18T14:31:53.769781+0200 INFO ::1 [18/Feb/2024:14:31:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:31:53.891880+0200 INFO Update id=546665001 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:31:54.783726+0200 INFO ::1 [18/Feb/2024:14:31:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:31:54.920885+0200 INFO Update id=546665002 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T14:31:55.569675+0200 INFO ::1 [18/Feb/2024:14:31:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:31:55.701593+0200 INFO Update id=546665003 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:51:29.239594+0200 INFO ::1 [18/Feb/2024:14:51:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:29.241990+0200 INFO Update id=925008892 is not handled. Duration 0 ms by bot id=6797813960
2024-02-18T14:51:29.243990+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-492' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: grR4l6')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 925008892, 'callback_query': {'id': '1663765557705935103', 'from': {'id': 387375605, 'is_bot': False, 'first_na...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FA996600>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: grR4l6')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA0818A0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FAA00CD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FAAD7BA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008892, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FAB7B880>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=925008892, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557705935103', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557705935103', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557705935103', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557705935103', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x00000262F7D61F80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000262FA103E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'grR4l6'
                    │     └ <function StorageProxy.load_context at 0x00000262F7D614E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000262FA86BE90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: grR4l6
2024-02-18T14:51:37.250259+0200 INFO ::1 [18/Feb/2024:14:51:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:37.538068+0200 INFO Update id=546665004 is handled. Duration 297 ms by bot id=6797813960
2024-02-18T14:51:38.847588+0200 INFO ::1 [18/Feb/2024:14:51:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:38.974310+0200 INFO Update id=546665005 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:51:39.612473+0200 INFO ::1 [18/Feb/2024:14:51:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:39.768609+0200 INFO Update id=546665006 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T14:51:41.014826+0200 INFO ::1 [18/Feb/2024:14:51:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:41.285317+0200 INFO Update id=546665007 is handled. Duration 264 ms by bot id=6797813960
2024-02-18T14:51:41.965219+0200 INFO ::1 [18/Feb/2024:14:51:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:42.172292+0200 INFO Update id=546665008 is handled. Duration 203 ms by bot id=6797813960
2024-02-18T14:51:42.634918+0200 INFO ::1 [18/Feb/2024:14:51:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:42.775171+0200 INFO Update id=546665009 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T14:51:43.408451+0200 INFO ::1 [18/Feb/2024:14:51:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:43.624620+0200 INFO Update id=546665010 is handled. Duration 218 ms by bot id=6797813960
2024-02-18T14:51:44.065058+0200 INFO ::1 [18/Feb/2024:14:51:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:44.198919+0200 INFO Update id=546665011 is handled. Duration 140 ms by bot id=6797813960
2024-02-18T14:51:44.756614+0200 INFO ::1 [18/Feb/2024:14:51:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:45.141274+0200 INFO Update id=546665012 is handled. Duration 375 ms by bot id=6797813960
2024-02-18T14:51:45.655986+0200 INFO ::1 [18/Feb/2024:14:51:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:45.849123+0200 INFO Update id=546665013 is handled. Duration 203 ms by bot id=6797813960
2024-02-18T14:51:51.625883+0200 INFO ::1 [18/Feb/2024:14:51:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:51.752925+0200 INFO Update id=546665014 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:51:52.345568+0200 INFO ::1 [18/Feb/2024:14:51:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:52.459945+0200 INFO Update id=546665015 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T14:51:53.006317+0200 INFO ::1 [18/Feb/2024:14:51:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:53.129460+0200 INFO Update id=546665016 is handled. Duration 108 ms by bot id=6797813960
2024-02-18T14:51:53.654901+0200 INFO ::1 [18/Feb/2024:14:51:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T14:51:53.879128+0200 INFO Update id=546665017 is handled. Duration 218 ms by bot id=6797813960
2024-02-18T15:00:15.808427+0200 INFO ::1 [18/Feb/2024:15:00:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:16.071946+0200 INFO Update id=546665018 is handled. Duration 265 ms by bot id=6797813960
2024-02-18T15:00:16.761452+0200 INFO ::1 [18/Feb/2024:15:00:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:16.898627+0200 INFO Update id=546665019 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T15:00:17.620088+0200 INFO ::1 [18/Feb/2024:15:00:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:17.830903+0200 INFO Update id=546665020 is handled. Duration 203 ms by bot id=6797813960
2024-02-18T15:00:20.865909+0200 INFO ::1 [18/Feb/2024:15:00:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:21.049030+0200 INFO Update id=546665021 is handled. Duration 172 ms by bot id=6797813960
2024-02-18T15:00:31.011748+0200 INFO ::1 [18/Feb/2024:15:00:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:31.168528+0200 INFO Update id=546665022 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T15:00:32.818105+0200 INFO ::1 [18/Feb/2024:15:00:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T15:00:32.963105+0200 INFO Update id=546665023 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T17:15:18.542256+0200 INFO ::1 [18/Feb/2024:17:15:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T17:15:18.896734+0200 INFO Update id=925008893 is not handled. Duration 358 ms by bot id=6797813960
2024-02-18T17:15:18.900734+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-625' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: chat not found')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 925008893, 'message': {'message_id': 61615, 'from': {'id': 354638009, 'is_bot': False, 'first_name': 'Jonny.', ...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAC7F5C0>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: chat not found')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA0817B0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FA86A490>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x00000262FAAD7BA0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008893, message=Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x00000262FAAD79C0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=925008893, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA651F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA088090>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA08BB90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000262FA108110>, <function Rou...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652F20>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '0x262f9f21610'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9F21650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Router '0x262f9f21610'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                     │        └ <function TelegramEventObserver.trigger at 0x00000262F78C0540>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9F21650>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9E5C350>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, functools.partial(<aiogram...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000262FA103E50>, functools.parti...

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ functools.partial(<function context_saver_middleware at 0x00000262F7D61120>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x00000262F9F340D0>, <function CallableObject.ca...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 15, 17, tzinfo=TzInfo(UTC)), chat=Chat(id=354638009, type='...
                 └ <function CallableObject.call at 0x00000262FA652020>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x00000262F9F2CAE0>, Message(message_id=61615, date=datetime.datetime(2024, 2, 18, 15, 1...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\handlers\start.py", line 20, in start
    return await dialog_manager.start(FirstStartWindow.sub_on_channel, mode=StartMode.RESET_STACK)
                 │              │     │                │                    │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │                │                    └ <enum 'StartMode'>
                 │              │     │                └ <State 'FirstStartWindow:sub_on_channel'>
                 │              │     └ <class 'bot.dialogs.start_menu.states.FirstStartWindow'>
                 │              └ <function ManagerImpl.start at 0x00000262F7DA4EA0>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA8A06D0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 210, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'FirstStartWindow:sub_on_channel'>
          │    └ <function ManagerImpl._start_normal at 0x00000262F7DA5080>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA8A06D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x00000262F7DA5440>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA8A06D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000262FA8A06D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 170, in show_message
    await self.send_message(bot, new_message),
          │    │            │    └ NewMessage(chat=Chat(id=354638009, type='private', title=None, username='JonnyOz', first_name='Jonny.', last_name=None, is_fo...
          │    │            └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
          │    └ <function MessageManager.send_message at 0x00000262F7DA7060>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 349, in send_message
    return await self.send_text(bot, new_message)
                 │    │         │    └ NewMessage(chat=Chat(id=354638009, type='private', title=None, username='JonnyOz', first_name='Jonny.', last_name=None, is_fo...
                 │    │         └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function MessageManager.send_text at 0x00000262F7DA7100>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x00000262FA103BD0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 353, in send_text
    return await bot.send_message(
                 │   └ <function Bot.send_message at 0x00000262F7883D80>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 2766, in send_message
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SendMessage(chat_id=354638009, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\bot.py", line 441, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SendMessage(chat_id=354638009, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
                 │    │       └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
                 └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 257, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SendMessage(chat_id=354638009, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x00000262F1A10540>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 179, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x00000262F785B600>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x00000262F9FCDC50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: chat not found'
          │                         └ SendMessage(chat_id=354638009, text='Чтобы выставить объявление или рекламу, вам нужно быть подписанным на канал.', message_t...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: chat not found
2024-02-18T20:16:11.452225+0200 INFO ::1 [18/Feb/2024:20:16:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:16:11.455221+0200 INFO Update id=925008894 is not handled. Duration 0 ms by bot id=6797813960
2024-02-18T20:16:11.457224+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-634' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: Aq1xN4')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 925008894, 'callback_query': {'id': '7898361887449765377', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FACAF740>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: Aq1xN4')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA74C8B0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FACAEF10>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA8293A0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008894, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FAB7B880>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=925008894, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887449765377', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887449765377', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA82A2A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887449765377', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887449765377', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA829580>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x00000262F7D61F80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000262FA103E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'Aq1xN4'
                    │     └ <function StorageProxy.load_context at 0x00000262F7D614E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000262FACAF1D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: Aq1xN4
2024-02-18T20:16:11.980137+0200 INFO ::1 [18/Feb/2024:20:16:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:16:11.982369+0200 INFO Update id=925008895 is not handled. Duration 0 ms by bot id=6797813960
2024-02-18T20:16:11.984380+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-637' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: Aq1xN4')>
Traceback (most recent call last):

> File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
                   │    │          │                   │           └ {'update_id': 925008895, 'callback_query': {'id': '7898361887168095383', 'from': {'id': 6133947978, 'is_bot': False, 'first_n...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000262F78C1B20>
                   │    └ <Dispatcher '0x262f9e46c10'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000262FA1032D0>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000262F450F910>
                 │    └ <function Dispatcher.feed_update at 0x00000262F78C1A80>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262F9E6F250>
                     └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000262FA08B450>, functools...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000262FA08B0D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000262FAC97E00>
          │    │   │      │    └ UnknownIntent('Context not found for intent id: Aq1xN4')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000262FA820E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000262FAC97710>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000262FA08B910>, <function TelegramEventObse...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000262FA652FC0>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000262F9CFAB50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000262FA08BB50>, <function CallableObject.c...

  File "E:\PythonProjects\KoreanBot\KoreanBot\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008895, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000262FA652840>

  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x262f9e46c10'>>, Update(update_id=925008895, messa...
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887168095383', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000262F78C1080>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887168095383', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA089690>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000262F78C1120>
                 └ <Dispatcher '0x262f9e46c10'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887168095383', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000262F78C1080>
                     └ <Router '__main__'>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x262f9e46c10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887168095383', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000262FA652020>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000262F78C0400>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000262FA098A50>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x00000262F7D61F80>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000262FA103E90>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'Aq1xN4'
                    │     └ <function StorageProxy.load_context at 0x00000262F7D614E0>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000262FAC97350>
  File "E:\PythonProjects\KoreanBot\KoreanBot\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
          └ <class 'aiogram_dialog.api.exceptions.UnknownIntent'>

aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: Aq1xN4
2024-02-18T20:42:36.254188+0200 INFO ::1 [18/Feb/2024:20:42:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:42:36.923190+0200 INFO Update id=546665024 is handled. Duration 671 ms by bot id=6797813960
2024-02-18T20:42:39.760470+0200 INFO ::1 [18/Feb/2024:20:42:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:42:39.966074+0200 INFO Update id=546665025 is handled. Duration 202 ms by bot id=6797813960
2024-02-18T20:49:16.522309+0200 INFO ::1 [18/Feb/2024:20:49:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:17.042686+0200 INFO Update id=546665026 is handled. Duration 514 ms by bot id=6797813960
2024-02-18T20:49:17.916241+0200 INFO ::1 [18/Feb/2024:20:49:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:18.035538+0200 INFO Update id=546665027 is handled. Duration 110 ms by bot id=6797813960
2024-02-18T20:49:24.370281+0200 INFO ::1 [18/Feb/2024:20:49:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:24.514076+0200 INFO Update id=546665028 is handled. Duration 139 ms by bot id=6797813960
2024-02-18T20:49:26.439329+0200 INFO ::1 [18/Feb/2024:20:49:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:26.721844+0200 INFO Update id=546665029 is handled. Duration 280 ms by bot id=6797813960
2024-02-18T20:49:28.011736+0200 INFO ::1 [18/Feb/2024:20:49:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:28.506413+0200 INFO Update id=546665030 is handled. Duration 500 ms by bot id=6797813960
2024-02-18T20:49:29.108980+0200 INFO ::1 [18/Feb/2024:20:49:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:29.248415+0200 INFO Update id=546665031 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T20:49:29.865261+0200 INFO ::1 [18/Feb/2024:20:49:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:30.027081+0200 INFO Update id=546665032 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T20:49:32.339037+0200 INFO ::1 [18/Feb/2024:20:49:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:32.478698+0200 INFO Update id=546665033 is handled. Duration 141 ms by bot id=6797813960
2024-02-18T20:49:33.306001+0200 INFO ::1 [18/Feb/2024:20:49:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:33.429407+0200 INFO Update id=546665034 is handled. Duration 125 ms by bot id=6797813960
2024-02-18T20:49:34.731482+0200 INFO ::1 [18/Feb/2024:20:49:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:34.847186+0200 INFO Update id=546665035 is handled. Duration 108 ms by bot id=6797813960
2024-02-18T20:49:38.617650+0200 INFO ::1 [18/Feb/2024:20:49:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:38.731735+0200 INFO Update id=546665036 is handled. Duration 108 ms by bot id=6797813960
2024-02-18T20:49:40.038741+0200 INFO ::1 [18/Feb/2024:20:49:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-18T20:49:40.194465+0200 INFO Update id=546665037 is handled. Duration 156 ms by bot id=6797813960
2024-02-18T23:43:08.998958+0200 INFO Bot stopped!
2024-02-19T18:18:02.594257+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (12932), thread 'MainThread' (14968):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 112, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001A156FB8040>
    │       └ <function run at 0x000001A14EB7C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001A157089540>
           │      └ <function Runner.run at 0x000001A14EC0C900>
           └ <asyncio.runners.Runner object at 0x000001A156FE4F90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1262...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001A14EC0A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001A156FE4F90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001A14ECD6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A14EC0C180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A14EB4DA80>
    └ <Handle <TaskStepMethWrapper object at 0x000001A1570967D0>()>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000001A1570967D0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000001A1570967D0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000001A1570967D0>()>

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 39, in main
    engine = create_async_engine(str(config.postgredsn), future=True, echo=False)
             │                       │      └ MultiHostUrl('postgresql+asyncpg://postgres:root@localhost:5432/arbitrix_bot_db')
             │                       └ Config(bot_token='5646878393:AAF0AunjKNzksrz5tc-QJljwY1tslNsIwTs', bot_fsm_storage='redis', bot_username='test_touch_bot', we...
             └ <function create_async_engine at 0x000001A156983380>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 117, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  │              │      └ {'future': True, 'echo': False, '_is_async': True}
                  │              └ 'postgresql+asyncpg://postgres:root@localhost:5432/arbitrix_bot_db'
                  └ <function create_engine at 0x000001A15690EDE0>
  File "<string>", line 2, in create_engine
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           │   │       └ {'future': True, 'echo': False, '_is_async': True}
           │   └ ('postgresql+asyncpg://postgres:root@localhost:5432/arbitrix_bot_db',)
           └ <function create_engine at 0x000001A15690EAC0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 599, in create_engine
    dbapi = dbapi_meth(**dbapi_args)
            │            └ {}
            └ <bound method PGDialect_asyncpg.import_dbapi of <class 'sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg'>>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 1075, in import_dbapi
    return AsyncAdapt_asyncpg_dbapi(__import__("asyncpg"))
           └ <class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi'>

ModuleNotFoundError: No module named 'asyncpg'
2024-02-19T18:18:13.734713+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (12556), thread 'MainThread' (13652):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 112, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001F66DC6AFC0>
    │       └ <function run at 0x000001F665A3C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001F66DF29540>
           │      └ <function Runner.run at 0x000001F665ACC900>
           └ <asyncio.runners.Runner object at 0x000001F6639E5550>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1262...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001F665ACA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001F6639E5550>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001F665B96340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001F665ACC180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001F665A0DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 74, in main
    dialogs_includer(router)
    │                └ <Router '__main__'>
    └ <function dialogs_includer at 0x000001F66DC782C0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\__init__.py", line 6, in dialogs_includer
    router.include_routers(*start_menu.start_dialogs(), *web_master_menu.web_master_menu_dialogs())
    │      │                │          │                 │               └ <function web_master_menu_dialogs at 0x000001F66DDCB880>
    │      │                │          │                 └ <module 'bot.dialogs.web_master_menu' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\web_master_menu\\__init__.py'>
    │      │                │          └ <function start_dialogs at 0x000001F66DC6AF20>
    │      │                └ <module 'bot.dialogs.start_menu' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\start_menu\\__init__.py'>
    │      └ <function Router.include_routers at 0x000001F66B90E160>
    └ <Router '__main__'>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\__init__.py", line 17, in web_master_menu_dialogs
    windows.select_offer(),
    │       └ <function select_offer at 0x000001F66DE6BE20>
    └ <module 'bot.dialogs.web_master_menu.windows' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\web_master_menu\\windows.py'>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\windows.py", line 63, in select_offer
    SwitchTo(I18NFormat('I_back'), id='back-to-select_category', state=states.SelectOffer.select_category, when=F['personal_offers']),
    │        │                                                         │      │           │                     └ <magic_filter.magic.MagicFilter object at 0x000001F665BABA30>
    │        │                                                         │      │           └ <State 'SelectOffer:select_category'>
    │        │                                                         │      └ <class 'bot.dialogs.web_master_menu.states.SelectOffer'>
    │        │                                                         └ <module 'bot.dialogs.web_master_menu.states' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\web_master_menu\\states.py'>
    │        └ <class 'bot.utils.i18n_utils.i18n_format.I18NFormat'>
    └ <class 'aiogram_dialog.widgets.kbd.state.SwitchTo'>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 45, in __init__
    super().__init__(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 26, in __init__
    super().__init__(id=id, when=when)
                        │        └ <magic_filter.magic.MagicFilter object at 0x000001F66E3EB550>
                        └ 'back-to-select_category'
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 15, in __init__
    Actionable.__init__(self, id=id)
    │          │        │        └ 'back-to-select_category'
    │          │        └ <aiogram_dialog.widgets.kbd.state.SwitchTo object at 0x000001F66E440490>
    │          └ <function Actionable.__init__ at 0x000001F66BC31300>
    └ <class 'aiogram_dialog.widgets.common.action.Actionable'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\common\action.py", line 14, in __init__
    raise InvalidWidgetIdError(f"Invalid widget id: {id}")
          └ <class 'aiogram_dialog.api.exceptions.InvalidWidgetIdError'>

aiogram_dialog.api.exceptions.InvalidWidgetIdError: Invalid widget id: back-to-select_category
2024-02-19T18:18:57.947249+0200 INFO Bot started!
2024-02-19T18:18:57.959472+0200 INFO ::1 [19/Feb/2024:18:18:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:18:58.271274+0200 INFO Update id=925008896 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:19:53.633269+0200 INFO Bot stopped!
2024-02-19T18:19:56.726214+0200 INFO Bot started!
2024-02-19T18:20:01.429407+0200 INFO ::1 [19/Feb/2024:18:20:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:20:01.434042+0200 INFO Update id=925008898 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:20:01.525117+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")>
Traceback (most recent call last):

> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000015967895D10>
                   │    │          │                   │           └ {'update_id': 925008898, 'message': {'message_id': 61618, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000159633AC410>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000015964D52840>
                   │    └ <Dispatcher '0x1596722c590'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000015967895D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000159633AC410>
                 │    └ <function Dispatcher.feed_update at 0x0000015964D527A0>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000159672DFCD0>
                     └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001596741B3D0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000159666C9B90>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000159678FDB00>
          │    │   │      │    └ TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000015967B74E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000015967A9C950>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001596784A250>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x00000159679D7E20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000015967851550>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001596784A350>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008898, message=Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x00000159679D7EC0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1596722c590'>>, Update(update_id=925008898, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000015964D51DA0>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000015967B78220>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000159672C7E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000015964D51E40>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000015964D51DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000015967B78180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001596784A3D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in process_message
    await self._load_context(event, None, DEFAULT_STACK_ID, data)
          │    │             │            │                 └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │             │            └ ''
          │    │             └ Message(message_id=61618, date=datetime.datetime(2024, 2, 19, 16, 19, 58, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_context at 0x000001596522F240>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000159672C68D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 80, in _load_context
    stack = await proxy.load_stack(stack_id)
                  │     │          └ ''
                  │     └ <function StorageProxy.load_stack at 0x000001596522EC00>
                  └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000015967859A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 46, in load_stack
    return Stack(**data)
           │       └ {'_id': '', 'intents': ['MNHEI3', 'MGoKJ2', 'grR4l6'], 'last_message_id': 61614, 'last_reply_keyboard': False, 'last_media_id...
           └ <class 'aiogram_dialog.api.entities.stack.Stack'>

TypeError: Stack.__init__() got an unexpected keyword argument 'access_settings'
2024-02-19T18:20:18.951838+0200 INFO ::1 [19/Feb/2024:18:20:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:20:18.954419+0200 INFO Update id=925008899 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:20:18.955419+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-15' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")>
Traceback (most recent call last):

> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000015967895D10>
                   │    │          │                   │           └ {'update_id': 925008899, 'message': {'message_id': 61619, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000159633AC410>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000015964D52840>
                   │    └ <Dispatcher '0x1596722c590'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000015967895D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000159633AC410>
                 │    └ <function Dispatcher.feed_update at 0x0000015964D527A0>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000159672DFCD0>
                     └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001596741B3D0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000159666C9B90>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000159672C5E40>
          │    │   │      │    └ TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000015967B74D60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000159672EC8D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001596784A250>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x0000015964B404A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000015967851550>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001596784A350>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008899, message=Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x0000015967B7A520>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1596722c590'>>, Update(update_id=925008899, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000015964D51DA0>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000015967B78680>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000159672C7E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000015964D51E40>
                 └ <Dispatcher '0x1596722c590'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000015964D51DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000015967B7A660>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000015964D50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001596784A3D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in process_message
    await self._load_context(event, None, DEFAULT_STACK_ID, data)
          │    │             │            │                 └ {'dp': <Dispatcher '0x1596722c590'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │             │            └ ''
          │    │             └ Message(message_id=61619, date=datetime.datetime(2024, 2, 19, 16, 20, 16, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_context at 0x000001596522F240>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000159672C68D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 80, in _load_context
    stack = await proxy.load_stack(stack_id)
                  │     │          └ ''
                  │     └ <function StorageProxy.load_stack at 0x000001596522EC00>
                  └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000159678B1890>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 46, in load_stack
    return Stack(**data)
           │       └ {'_id': '', 'intents': ['MNHEI3', 'MGoKJ2', 'grR4l6'], 'last_message_id': 61614, 'last_reply_keyboard': False, 'last_media_id...
           └ <class 'aiogram_dialog.api.entities.stack.Stack'>

TypeError: Stack.__init__() got an unexpected keyword argument 'access_settings'
2024-02-19T18:21:59.870128+0200 INFO Bot stopped!
2024-02-19T18:23:10.664848+0200 INFO Bot started!
2024-02-19T18:23:13.516344+0200 INFO ::1 [19/Feb/2024:18:23:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:23:13.521230+0200 INFO Update id=925008900 is not handled. Duration 15 ms by bot id=5646878393
2024-02-19T18:23:13.524232+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")>
Traceback (most recent call last):

> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000226EEF76ED0>
                   │    │          │                   │           └ {'update_id': 925008900, 'message': {'message_id': 61620, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x00000226EE9A6310>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x00000226EC42E840>
                   │    └ <Dispatcher '0x226eef28450'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x00000226EEF76ED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x00000226EE9A6310>
                 │    └ <function Dispatcher.feed_update at 0x00000226EC42E7A0>
                 └ <Dispatcher '0x226eef28450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000226EC42CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000226E8C051D0>
                     └ <Dispatcher '0x226eef28450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000226EEF2AC90>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000226EEF2A910>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000226EE9A49C0>
          │    │   │      │    └ TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000226EF254E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000226EE9B26D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000226EEF2B110>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x00000226EF0BBE20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000226EE9D24D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000226EE9D0050>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008900, message=Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x00000226EF0BBEC0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x226eef28450'>>, Update(update_id=925008900, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000226EC42DDA0>
                 └ <Dispatcher '0x226eef28450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000226EF258220>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000226EC42CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000226EE997510>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000226EC42DE40>
                 └ <Dispatcher '0x226eef28450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000226EC42DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000226EF258180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000226EC42CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000226EEF2B210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in process_message
    await self._load_context(event, None, DEFAULT_STACK_ID, data)
          │    │             │            │                 └ {'dp': <Dispatcher '0x226eef28450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │             │            └ ''
          │    │             └ Message(message_id=61620, date=datetime.datetime(2024, 2, 19, 16, 23, 10, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_context at 0x00000226EC90F240>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000226EEF77810>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 80, in _load_context
    stack = await proxy.load_stack(stack_id)
                  │     │          └ ''
                  │     └ <function StorageProxy.load_stack at 0x00000226EC90EC00>
                  └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000226EEF87A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 46, in load_stack
    return Stack(**data)
           │       └ {'_id': '', 'intents': ['MNHEI3', 'MGoKJ2', 'grR4l6'], 'last_message_id': 61614, 'last_reply_keyboard': False, 'last_media_id...
           └ <class 'aiogram_dialog.api.entities.stack.Stack'>

TypeError: Stack.__init__() got an unexpected keyword argument 'access_settings'
2024-02-19T18:23:39.026363+0200 INFO Bot stopped!
2024-02-19T18:23:42.199588+0200 INFO Bot started!
2024-02-19T18:23:43.182542+0200 INFO ::1 [19/Feb/2024:18:23:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:23:43.187494+0200 INFO Update id=925008901 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:23:43.189495+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")>
Traceback (most recent call last):

> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001DD89D1A210>
                   │    │          │                   │           └ {'update_id': 925008901, 'message': {'message_id': 61621, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x000001DD8991AB90>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x000001DD871D2840>
                   │    └ <Dispatcher '0x1dd8976f190'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x000001DD89D1A210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 │    │               └ <aiogram.client.bot.Bot object at 0x000001DD8991AB90>
                 │    └ <function Dispatcher.feed_update at 0x000001DD871D27A0>
                 └ <Dispatcher '0x1dd8976f190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DD871D0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DD89CC9B10>
                     └ <Dispatcher '0x1dd8976f190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001DD89737650>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001DD89CCA210>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001DD89EDF880>
          │    │   │      │    └ TypeError("Stack.__init__() got an unexpected keyword argument 'access_settings'")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001DD89FF4E50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001DD8975ED10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001DD89CCA5D0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000001DD89E57E20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001DD89CD17D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001DD8975F0D0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008901, message=Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000001DD89E57EC0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1dd8976f190'>>, Update(update_id=925008901, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001DD871D1DA0>
                 └ <Dispatcher '0x1dd8976f190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001DD89FF8220>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DD871D0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DD896AC2D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001DD871D1E40>
                 └ <Dispatcher '0x1dd8976f190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001DD871D1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001DD89FF8180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DD871D0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DD89CCA7D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in process_message
    await self._load_context(event, None, DEFAULT_STACK_ID, data)
          │    │             │            │                 └ {'dp': <Dispatcher '0x1dd8976f190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │             │            └ ''
          │    │             └ Message(message_id=61621, date=datetime.datetime(2024, 2, 19, 16, 23, 40, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_context at 0x000001DD876AF240>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000001DD89D1AE50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 80, in _load_context
    stack = await proxy.load_stack(stack_id)
                  │     │          └ ''
                  │     └ <function StorageProxy.load_stack at 0x000001DD876AEC00>
                  └ <aiogram_dialog.context.storage.StorageProxy object at 0x000001DD89F82C50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 46, in load_stack
    return Stack(**data)
           │       └ {'_id': '', 'intents': ['MNHEI3', 'MGoKJ2', 'grR4l6'], 'last_message_id': 61614, 'last_reply_keyboard': False, 'last_media_id...
           └ <class 'aiogram_dialog.api.entities.stack.Stack'>

TypeError: Stack.__init__() got an unexpected keyword argument 'access_settings'
2024-02-19T18:27:58.860246+0200 INFO Bot stopped!
2024-02-19T18:28:02.610768+0200 INFO Bot started!
2024-02-19T18:28:05.786198+0200 INFO ::1 [19/Feb/2024:18:28:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:28:05.790878+0200 INFO Update id=925008902 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:28:05.793879+0200 ERROR Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownState('Unknown state group TopUpBalance')>
Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 146, in _state
    for real_state in self.state_groups[group].__all_states__:
                      │    │            └ 'TopUpBalance'
                      │    └ {'FirstStartWindow': <class 'bot.dialogs.start_menu.states.FirstStartWindow'>, 'MainMenu': <class 'bot.dialogs.web_master_men...
                      └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019E48388F50>

KeyError: 'TopUpBalance'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
                   │    │          │                   │           │         │    └ {}
                   │    │          │                   │           │         └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019E47B39750>
                   │    │          │                   │           └ {'update_id': 925008902, 'message': {'message_id': 61622, 'from': {'id': 387375605, 'is_bot': False, 'first_name': 'Solarmove...
                   │    │          │                   └ <aiogram.client.bot.Bot object at 0x0000019E47AAC1D0>
                   │    │          └ <function Dispatcher.feed_raw_update at 0x0000019E455C2840>
                   │    └ <Dispatcher '0x19e47b39e90'>
                   └ <aiogram.webhook.aiohttp_server.SimpleRequestHandler object at 0x0000019E47B39750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
                 │    │               │           │                └ {}
                 │    │               │           └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 │    │               └ <aiogram.client.bot.Bot object at 0x0000019E47AAC1D0>
                 │    └ <function Dispatcher.feed_update at 0x0000019E455C27A0>
                 └ <Dispatcher '0x19e47b39e90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019E455C0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019E47B3B010>
                     └ <Dispatcher '0x19e47b39e90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019E47D809D0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019E47D80650>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019E482D11C0>
          │    │   │      │    └ UnknownState('Unknown state group TopUpBalance')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019E483F14E0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019E483884D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019E47B39B50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ <function TelegramEventObserver.trigger at 0x0000019E482FA2A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019E47AA3690>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019E47CA5050>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008902, message=Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UT...
                 └ <function CallableObject.call at 0x0000019E482FA520>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19e47b39e90'>>, Update(update_id=925008902, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000019E455C1DA0>
                 └ <Dispatcher '0x19e47b39e90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019E482FA660>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019E455C0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019E47D760D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019E455C1E40>
                 └ <Dispatcher '0x19e47b39e90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000019E455C1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019E482FA5C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019E455C0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019E47D80FD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x19e47b39e90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=61622, date=datetime.datetime(2024, 2, 19, 16, 28, 3, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x0000019E45AB5260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019E47DD1510>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x0000019E45AB5120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019E47DD1510>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x0000019E458968E0>
                    │     │            └ Stack(_id='', intents=['MNHEI3', 'MGoKJ2', 'grR4l6'], last_message_id=61614, last_reply_keyboard=False, last_media_id=None, l...
                    │     └ <function StorageProxy.load_context at 0x0000019E45AB4720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019E48388F50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
    │               │    └ <function StorageProxy._state at 0x0000019E45AB4D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019E48388F50>
    └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 150, in _state
    raise UnknownState(f"Unknown state group {group}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state group TopUpBalance
2024-02-19T18:28:12.339858+0200 INFO ::1 [19/Feb/2024:18:28:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:28:28.715960+0200 INFO ::1 [19/Feb/2024:18:28:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
2024-02-19T18:28:55.320901+0200 INFO Update id=925008904 is not handled. Duration 26610 ms by bot id=5646878393
2024-02-19T18:28:55.321902+0200 INFO Update id=925008903 is not handled. Duration 42985 ms by bot id=5646878393
2024-02-19T18:28:55.322901+0200 INFO Bot stopped!
2024-02-19T18:28:58.378730+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (19068), thread 'MainThread' (21140):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 115, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002335B8E7100>
    │       └ <function run at 0x00000233533DC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002335B8C1740>
           │      └ <function Runner.run at 0x000002335346C900>
           └ <asyncio.runners.Runner object at 0x0000023359580190>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1262...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002335346A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000023359580190>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000023353536340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002335346C180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000233533ADA80>
    └ <Handle <TaskStepMethWrapper object at 0x000002335BA21AB0>()>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle <TaskStepMethWrapper object at 0x000002335BA21AB0>()>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle <TaskStepMethWrapper object at 0x000002335BA21AB0>()>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle <TaskStepMethWrapper object at 0x000002335BA21AB0>()>

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 108, in main
    await dp.stop_polling()
          │  └ <function Dispatcher.stop_polling at 0x00000233592A2D40>
          └ <Dispatcher '0x2335b824650'>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 445, in stop_polling
    raise RuntimeError("Polling is not started")

RuntimeError: Polling is not started
2024-02-19T18:29:49.499988+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (17860), thread 'MainThread' (10992):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 115, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001D1AE15B100>
    │       └ <function run at 0x000001D1A5BFC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001D1AE135740>
           │      └ <function Runner.run at 0x000001D1A5C8C900>
           └ <asyncio.runners.Runner object at 0x000001D1A70B0690>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1262...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001D1A5C8A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001D1A70B0690>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001D1A5D66340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001D1A5C8C180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001D1A5BCDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 108, in main
    await dp.start_polling(bot)
          │  │             └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>
          │  └ <function Dispatcher.start_polling at 0x000001D1ABB12E80>
          └ <Dispatcher '0x1d1ae0d8b10'>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 526, in start_polling
    await self.emit_startup(bot=bots[-1], **workflow_data)
          │    │                │           └ {'dispatcher': <Dispatcher '0x1d1ae0d8b10'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>,), 'dp': <Dispatc...
          │    │                └ (<aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>,)
          │    └ <function Router.emit_startup at 0x000001D1ABB122A0>
          └ <Dispatcher '0x1d1ae0d8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 242, in emit_startup
    await self.startup.trigger(*args, **kwargs)
          │    │       │        │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>, 'dispatcher': <Dispatcher '0x1d1ae0d8b10'>, 'bots': (<aiogram....
          │    │       │        └ ()
          │    │       └ <function EventObserver.trigger at 0x000001D1ABB11BC0>
          │    └ <aiogram.dispatcher.event.event.EventObserver object at 0x000001D1AE2D0B90>
          └ <Dispatcher '0x1d1ae0d8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\event.py", line 42, in trigger
    await handler.call(*args, **kwargs)
          │       │     │       └ {'bot': <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>, 'dispatcher': <Dispatcher '0x1d1ae0d8b10'>, 'bots': (<aiogram....
          │       │     └ ()
          │       └ <function CallableObject.call at 0x000001D1ABAF7EC0>
          └ HandlerObject(callback=<function on_startup at 0x000001D1A4009300>, awaitable=True, params={'bot', 'dispatcher'}, varkw=False...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function on_startup at 0x000001D1A4009300>, bot=<aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>, dis...

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 32, in on_startup
    await bot.set_webhook(
          │   └ <function Bot.set_webhook at 0x000001D1ABA93420>
          └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 3635, in set_webhook
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ SetWebhook(url='https://62a5-31-42-178-43.ngrok-free.app/webhook', certificate=None, ip_address=None, max_connections=None, a...
                 └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ SetWebhook(url='https://62a5-31-42-178-43.ngrok-free.app/webhook', certificate=None, ip_address=None, max_connections=None, a...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001D1ADFEFF90>
                 └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ SetWebhook(url='https://62a5-31-42-178-43.ngrok-free.app/webhook', certificate=None, ip_address=None, max_connections=None, a...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001D1AE0D80D0>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001D1A5C604A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000001D1ABA75F80>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001D1ADFEFF90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 110, in check_response
    raise TelegramRetryAfter(
          └ <class 'aiogram.exceptions.TelegramRetryAfter'>

aiogram.exceptions.TelegramRetryAfter: Telegram server says - Flood control exceeded on method 'SetWebhook'. Retry in 1 seconds.
Original description: Too Many Requests: retry after 1
(background on this error at: https://core.telegram.org/bots/faq#my-bot-is-hitting-limits-how-do-i-avoid-this)
2024-02-19T18:30:04.203275+0200 INFO Start polling
2024-02-19T18:30:04.247275+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:30:04.302276+0200 ERROR Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first
2024-02-19T18:30:04.302276+0200 WARNING Sleep for 1.000000 seconds and try again... (tryings = 0, bot id = 5646878393)
2024-02-19T18:30:08.353929+0200 ERROR Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first
2024-02-19T18:30:08.354935+0200 WARNING Sleep for 1.287921 seconds and try again... (tryings = 1, bot id = 5646878393)
2024-02-19T18:30:09.694709+0200 ERROR Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first
2024-02-19T18:30:09.694709+0200 WARNING Sleep for 1.719931 seconds and try again... (tryings = 2, bot id = 5646878393)
2024-02-19T18:30:14.468652+0200 ERROR Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first
2024-02-19T18:30:14.469656+0200 WARNING Sleep for 2.214446 seconds and try again... (tryings = 3, bot id = 5646878393)
2024-02-19T18:30:16.734358+0200 ERROR Failed to fetch updates - TelegramConflictError: Telegram server says - Conflict: can't use getUpdates method while webhook is active; use deleteWebhook to delete the webhook first
2024-02-19T18:30:16.734358+0200 WARNING Sleep for 2.948709 seconds and try again... (tryings = 4, bot id = 5646878393)
2024-02-19T18:30:21.042891+0200 INFO Polling stopped
2024-02-19T18:30:21.303193+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:30:21.304193+0200 INFO Bot stopped!
2024-02-19T18:30:28.645890+0200 INFO Start polling
2024-02-19T18:30:28.715887+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:30:31.040348+0200 INFO Update id=925008905 is not handled. Duration 15 ms by bot id=5646878393
2024-02-19T18:30:31.043351+0200 ERROR Cause exception while process update id=925008905 by bot id=5646878393
UnknownState: Unknown state group TopUpBalance
Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 146, in _state
    for real_state in self.state_groups[group].__all_states__:
                      │    │            └ 'TopUpBalance'
                      │    └ {'FirstStartWindow': <class 'bot.dialogs.start_menu.states.FirstStartWindow'>, 'MainMenu': <class 'bot.dialogs.web_master_men...
                      └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002210D325390>

KeyError: 'TopUpBalance'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002210D3EB100>
    │       └ <function run at 0x0000022104E8C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002210D3C5740>
           │      └ <function Runner.run at 0x0000022104F30900>
           └ <asyncio.runners.Runner object at 0x000002210328C710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000022104F1A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002210328C710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022104FF6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022104F30180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000022104E5DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2210d33c990'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002210D334950>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002210D334950>
                     │    └ <function Dispatcher.feed_update at 0x000002210AD9E7A0>
                     └ <Dispatcher '0x2210d33c990'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002210AD9CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002210D31B010>
                     └ <Dispatcher '0x2210d33c990'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002210D351910>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002210D561C90>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002210D5FE0C0>
          │    │   │      │    └ UnknownState('Unknown state group TopUpBalance')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002210DBD0B80>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002210D319D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002210D352C50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x000002210D596C00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002210D56D250>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002210D286C50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008905, message=Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x000002210DADAC00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2210d33c990'>>, Update(update_id=925008905, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000002210AD9DDA0>
                 └ <Dispatcher '0x2210d33c990'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002210DADACA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002210AD9CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002210D33E0D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002210AD9DE40>
                 └ <Dispatcher '0x2210d33c990'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000002210AD9DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002210DADAF20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002210AD9CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002210D562290>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x2210d33c990'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=61625, date=datetime.datetime(2024, 2, 19, 16, 30, 28, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x000002210B295260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000002210D5B2690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x000002210B295120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x000002210D5B2690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x000002210B0768E0>
                    │     │            └ Stack(_id='', intents=['MNHEI3', 'MGoKJ2', 'grR4l6'], last_message_id=61614, last_reply_keyboard=False, last_media_id=None, l...
                    │     └ <function StorageProxy.load_context at 0x000002210B294720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002210D325390>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
    │               │    └ <function StorageProxy._state at 0x000002210B294D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002210D325390>
    └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 150, in _state
    raise UnknownState(f"Unknown state group {group}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state group TopUpBalance
2024-02-19T18:32:33.810335+0200 INFO Polling stopped
2024-02-19T18:32:34.062889+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:32:34.065892+0200 INFO Update id=925008906 is not handled. Duration 112437 ms by bot id=5646878393
2024-02-19T18:32:34.066892+0200 INFO Bot stopped!
2024-02-19T18:33:52.712139+0200 INFO Start polling
2024-02-19T18:33:52.756139+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:33:55.140680+0200 INFO Update id=925008907 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:33:55.143680+0200 ERROR Cause exception while process update id=925008907 by bot id=5646878393
UnknownState: Unknown state group TopUpBalance
Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 146, in _state
    for real_state in self.state_groups[group].__all_states__:
                      │    │            └ 'TopUpBalance'
                      │    └ {'FirstStartWindow': <class 'bot.dialogs.start_menu.states.FirstStartWindow'>, 'MainMenu': <class 'bot.dialogs.web_master_men...
                      └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000140D4D14910>

KeyError: 'TopUpBalance'


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000140D463B100>
    │       └ <function run at 0x00000140CC14C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000140D4615740>
           │      └ <function Runner.run at 0x00000140CC1E0900>
           └ <asyncio.runners.Runner object at 0x00000140D3F42C50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000140CC1DA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000140D3F42C50>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000140CC2A6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000140CC1E0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000140CC11DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x140d44d2cd0'>, 'bots': (<aiogram.client.bot.Bot object at 0x00000140CE75C210>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                     │    │           └ <aiogram.client.bot.Bot object at 0x00000140CE75C210>
                     │    └ <function Dispatcher.feed_update at 0x00000140D1FF27A0>
                     └ <Dispatcher '0x140d44d2cd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000140D1FF0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000140D47996D0>
                     └ <Dispatcher '0x140d44d2cd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000140D45A3050>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000140D47B1450>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000140D4803CC0>
          │    │   │      │    └ UnknownState('Unknown state group TopUpBalance')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000140D4E20B80>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000140D47F0C50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000140D47B1850>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ <function TelegramEventObserver.trigger at 0x00000140D47E2C00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000140D47BCB10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000140D47B1AD0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008907, message=Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(U...
                 └ <function CallableObject.call at 0x00000140D4D2AC00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x140d44d2cd0'>>, Update(update_id=925008907, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000140D1FF1DA0>
                 └ <Dispatcher '0x140d44d2cd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000140D4D2ACA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000140D1FF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000140D458C290>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000140D1FF1E40>
                 └ <Dispatcher '0x140d44d2cd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000140D1FF1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000140D4D2AF20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000140D1FF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000140D47B1B10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x140d44d2cd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=61627, date=datetime.datetime(2024, 2, 19, 16, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x00000140D24E5260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000140D4802110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x00000140D24E5120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000140D4802110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x00000140D22C68E0>
                    │     │            └ Stack(_id='', intents=['MNHEI3', 'MGoKJ2', 'grR4l6'], last_message_id=61614, last_reply_keyboard=False, last_media_id=None, l...
                    │     └ <function StorageProxy.load_context at 0x00000140D24E4720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000140D4D14910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
    │               │    └ <function StorageProxy._state at 0x00000140D24E4D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000140D4D14910>
    └ {'_intent_id': 'grR4l6', '_stack_id': '', 'state': 'TopUpBalance:enter_amount', 'start_data': None, 'dialog_data': {}, 'widge...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 150, in _state
    raise UnknownState(f"Unknown state group {group}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state group TopUpBalance
2024-02-19T18:35:00.669217+0200 INFO Polling stopped
2024-02-19T18:35:00.937547+0200 INFO Update id=925008911 is not handled. Duration 25969 ms by bot id=5646878393
2024-02-19T18:35:00.937547+0200 INFO Update id=925008909 is not handled. Duration 30000 ms by bot id=5646878393
2024-02-19T18:35:00.938546+0200 INFO Update id=925008910 is not handled. Duration 28312 ms by bot id=5646878393
2024-02-19T18:35:00.938546+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:35:00.938546+0200 INFO Update id=925008908 is not handled. Duration 30719 ms by bot id=5646878393
2024-02-19T18:35:00.940546+0200 INFO Bot stopped!
2024-02-19T18:35:04.274260+0200 INFO Start polling
2024-02-19T18:35:04.335258+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:35:05.300524+0200 INFO Update id=925008912 is handled. Duration 203 ms by bot id=5646878393
2024-02-19T18:35:10.520685+0200 INFO Update id=925008913 is handled. Duration 390 ms by bot id=5646878393
2024-02-19T18:35:15.049765+0200 INFO Update id=925008914 is handled. Duration 108 ms by bot id=5646878393
2024-02-19T18:35:16.052596+0200 INFO Update id=925008915 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:35:17.033101+0200 ERROR Cannot get window data for state <State 'MainMenu:select_action'>
2024-02-19T18:35:17.036101+0200 INFO Update id=925008916 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:35:17.040099+0200 ERROR Cause exception while process update id=925008916 by bot id=5646878393
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001A4CFD47100>
    │       └ <function run at 0x000001A4C77FC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001A4CFD21740>
           │      └ <function Runner.run at 0x000001A4C7890900>
           └ <asyncio.runners.Runner object at 0x000001A4CF652910>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001A4C788A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001A4CF652910>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001A4C7956340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001A4C7890180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001A4C77CDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1a4cfc9c290'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001A4CFE42D50>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001A4CFE42D50>
                     │    └ <function Dispatcher.feed_update at 0x000001A4CD7027A0>
                     └ <Dispatcher '0x1a4cfc9c290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001A4CD700FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001A4CFC7B010>
                     └ <Dispatcher '0x1a4cfc9c290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001A4CFEC5050>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001A4CFEC4C90>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001A4D079B0C0>
          │    │   │      │    └ TypeError("'NoneType' object is not iterable")
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001A4D05309A0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001A4D072E690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001A4CFEC54D0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001A4D043AF20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001A4CFECC6D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001A4CFEC5650>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008916, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001A4D043ACA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1a4cfc9c290'>>, Update(update_id=925008916, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001A4CD701DA0>
                 └ <Dispatcher '0x1a4cfc9c290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001A4D0352480>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001A4CD700FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001A4CFEAAE90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001A4CD701E40>
                 └ <Dispatcher '0x1a4cfc9c290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001A4CD701DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001A4D0656C00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001A4CD700FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001A4CFEC6590>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001A4CFF11DD0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001A4D0657240>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001A4CD701E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001A4CD701DA0>
                     └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001A4D0657600>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001A4CD700FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001A4CFECD990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001A4CD701E40>
                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001A4CD701120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001A4CFECD990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001A4CFC94850>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001A4CFEC5650>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001A4CFF11BD0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001A4CDBF4180>, <function CallableObject.call at 0x000001A4D0352...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001A4D03523E0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'FirstStartWindow'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
          │      │                │                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │      │                └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000001A4CDC36F20>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
          │    │        │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │    │        │                └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000001A4CDA27EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001A4CFCB7510>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                 │    │                       └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000001A4CDBB7380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001A4CFCB7510>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
             │ │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
             │ │                └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000001A4CDA27EC0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001A4CFC86B50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001A4CDA44B80>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001A4CFC86B50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001A4CFC86B50>
          │    │        │             └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001A4CDA26020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001A4CFBE3D50>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001A4CFC86B50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001A4CFC86B50>
          │    │        └ CallbackQuery(id='1663765558446531360', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_select_webmaster at 0x000001A4CFBDDDA0>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001A4CFBE3D50>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\start_menu\selected.py", line 16, in on_select_webmaster
    await dialog_manager.start(MainMenu.select_action, data=start_data)
          │              │     │        │                   └ None
          │              │     │        └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.web_master_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000001A4CDC23F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001A4CDC34180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001A4CDC34540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
                        │    └ <function ManagerImpl.dialog at 0x000001A4CDC23880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
                        │      │      └ <Dialog(<StatesGroup 'MainMenu'>)>
                        │      └ <function Window.render at 0x000001A4CDC36FC0>
                        └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
                         │    │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                         │    └ <function Window.load_data at 0x000001A4CDC36DE0>
                         └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001A4CDC295D0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001A4D078B7D0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001A4CFED5350>
    │    │            └ <Window(<State 'MainMenu:select_action'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1a4cfc9c290'>, 'session_pool': async_session...

TypeError: 'NoneType' object is not iterable
2024-02-19T18:37:05.176898+0200 INFO Polling stopped
2024-02-19T18:37:05.427899+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:37:05.428897+0200 INFO Bot stopped!
2024-02-19T18:37:08.493378+0200 INFO Start polling
2024-02-19T18:37:08.594963+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:37:09.675148+0200 INFO Update id=925008917 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:37:12.059892+0200 INFO Update id=925008918 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:37:13.037105+0200 INFO Update id=925008919 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:37:15.070827+0200 INFO Update id=925008920 is handled. Duration 172 ms by bot id=5646878393
2024-02-19T18:37:17.135298+0200 INFO Update id=925008921 is handled. Duration 140 ms by bot id=5646878393
2024-02-19T18:37:19.739414+0200 INFO Update id=925008922 is handled. Duration 375 ms by bot id=5646878393
2024-02-19T18:37:20.112584+0200 INFO Update id=925008923 is handled. Duration 187 ms by bot id=5646878393
2024-02-19T18:37:21.524453+0200 INFO Update id=925008924 is handled. Duration 359 ms by bot id=5646878393
2024-02-19T18:37:24.079125+0200 INFO Update id=925008925 is handled. Duration 453 ms by bot id=5646878393
2024-02-19T18:37:30.524800+0200 INFO Update id=925008926 is handled. Duration 327 ms by bot id=5646878393
2024-02-19T18:37:31.833284+0200 INFO Update id=925008927 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:37:33.185908+0200 INFO Update id=925008928 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:37:34.411624+0200 INFO Update id=925008929 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:37:36.717771+0200 INFO Update id=925008930 is handled. Duration 342 ms by bot id=5646878393
2024-02-19T18:37:37.634628+0200 INFO Update id=925008931 is handled. Duration 406 ms by bot id=5646878393
2024-02-19T18:37:38.170032+0200 ERROR Cannot get window data for state <State 'SelectOffer:select_offer'>
2024-02-19T18:37:38.173032+0200 INFO Update id=925008932 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:37:38.176033+0200 ERROR Cause exception while process update id=925008932 by bot id=5646878393
TypeError: list indices must be integers or slices, not str
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000023BABD531A0>
    │       └ <function run at 0x0000023BA37FC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000023BABD31840>
           │      └ <function Runner.run at 0x0000023BA38A0900>
           └ <asyncio.runners.Runner object at 0x0000023BAB662D90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000023BA388A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000023BAB662D90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000023BA3966340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000023BA38A0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000023BA37CDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x23babcac810'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000023BABDDEE90>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000023BABDDEE90>
                     │    └ <function Dispatcher.feed_update at 0x0000023BA97127A0>
                     └ <Dispatcher '0x23babcac810'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023BA9710FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023BABCAFC90>
                     └ <Dispatcher '0x23babcac810'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000023BABED4D50>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000023BABED4990>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000023BAC5E7B00>
          │    │   │      │    └ TypeError('list indices must be integers or slices, not str')
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000023BAC540C70>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000023BAC6F3610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000023BABED5190>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x0000023BABF02DE0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000023BABEDC310>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000023BABED5390>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008932, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x0000023BAC66BEC0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x23babcac810'>>, Update(update_id=925008932, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000023BA9711DA0>
                 └ <Dispatcher '0x23babcac810'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023BAC669D00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023BA9710FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023BABEB6B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023BA9711E40>
                 └ <Dispatcher '0x23babcac810'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000023BA9711DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023BAC66A200>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023BA9710FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023BABED6210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000023BABF21AD0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000023BAC66BD80>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023BA9711E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000023BA9711DA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000023BAC66B060>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000023BA9710FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023BABF0CED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000023BA9711E40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000023BA9711120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000023BABF0CED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000023BABC89A10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000023BABED5390>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000023BABF21890>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000023BA9C04180>, <function CallableObject.call at 0x0000023BAC66B...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x23babcac810'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558869196759', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000023BAC66B2E0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000023BA9C44540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
                        │    └ <function ManagerImpl.dialog at 0x0000023BA9C37880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
                        │      │      └ <Dialog(<StatesGroup 'SelectOffer'>)>
                        │      └ <function Window.render at 0x0000023BA9C46FC0>
                        └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
                         │    │         └ <Dialog(<StatesGroup 'SelectOffer'>)>
                         │    └ <function Window.load_data at 0x0000023BA9C46DE0>
                         └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x0000023BA9C396C0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000023BAC7694D0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000023BABEF7810>
    │    │            └ <Window(<State 'SelectOffer:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_category': 'tg_channel_requests', 'selected_traffic_source': 'tik_tok'}, 'start_data': None, 'midd...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_offers at 0x0000023BABC86020>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000023BABEF7810>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 43, in get_offers
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 44, in <listcomp>
    (offers[selected_category]['offer_id'], f"{offer[selected_category]['offer_name']}-{offer[selected_category]['target_amount']}")
     │      └ 'tg_channel_requests'
     └ [{'tg_channel_requests': {'offer_name': 'TEST OFFER 1', 'offer_id': '1', 'offer_conditions': 'test', 'price': 2.0, 'target_am...

TypeError: list indices must be integers or slices, not str
2024-02-19T18:37:55.384013+0200 INFO Polling stopped
2024-02-19T18:37:55.637365+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:37:55.638364+0200 INFO Bot stopped!
2024-02-19T18:37:58.891839+0200 INFO Start polling
2024-02-19T18:37:58.948842+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:38:00.195568+0200 INFO Update id=925008933 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:38:11.075256+0200 INFO Update id=925008934 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:38:12.379294+0200 INFO Update id=925008935 is handled. Duration 437 ms by bot id=5646878393
2024-02-19T18:38:14.662557+0200 INFO Update id=925008936 is handled. Duration 171 ms by bot id=5646878393
2024-02-19T18:38:16.471268+0200 INFO Update id=925008937 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:38:17.545878+0200 ERROR Cannot get window data for state <State 'SelectOffer:select_offer'>
2024-02-19T18:38:17.546879+0200 INFO Update id=925008938 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:38:17.550877+0200 ERROR Cause exception while process update id=925008938 by bot id=5646878393
KeyError: 'tg_channel_requests'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000213F9E33100>
    │       └ <function run at 0x00000213F18DC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000213F9E11840>
           │      └ <function Runner.run at 0x00000213F1980900>
           └ <asyncio.runners.Runner object at 0x00000213EFCD9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000213F196A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000213EFCD9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000213F1A46340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000213F1980180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000213F18ADA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x213f9da51d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x00000213F9CD2610>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x00000213F9CD2610>
                     │    └ <function Dispatcher.feed_update at 0x00000213F77EA7A0>
                     └ <Dispatcher '0x213f9da51d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000213F77E8FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000213F7D63010>
                     └ <Dispatcher '0x213f9da51d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000213F9D866D0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000213F9FB48D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000213FA809500>
          │    │   │      │    └ KeyError('tg_channel_requests')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000213FA620C70>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000213FA6920D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000213F9FB4D10>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x00000213FA52B100>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000213F9FBC050>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000213F9FB4FD0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008938, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x00000213FA52B240>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x213f9da51d0'>>, Update(update_id=925008938, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x00000213F77E9DA0>
                 └ <Dispatcher '0x213f9da51d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000213FA52AF20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000213F77E8FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000213F9FA6810>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000213F77E9E40>
                 └ <Dispatcher '0x213f9da51d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000213F77E9DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000213FA52AD40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000213F77E8FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000213F9FB5E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000213FA001650>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x00000213FA529440>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000213F77E9E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x00000213F77E9DA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000213FA52AE80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000213F77E8FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000213F9FECB90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000213F77E9E40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x00000213F77E9120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000213F9FECB90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000213F7D61DD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000213F9FB4FD0>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000213FA001490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000213F7CE4180>, <function CallableObject.call at 0x00000213FA7A1...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x213f9da51d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556337814173', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x00000213FA7A1DA0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000213F7D24540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
                        │    └ <function ManagerImpl.dialog at 0x00000213F7D13880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
                        │      │      └ <Dialog(<StatesGroup 'SelectOffer'>)>
                        │      └ <function Window.render at 0x00000213F7D26FC0>
                        └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
                         │    │         └ <Dialog(<StatesGroup 'SelectOffer'>)>
                         │    └ <function Window.load_data at 0x00000213F7D26DE0>
                         └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000213F7D194E0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x00000213FA647310>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000213F9FDB510>
    │    │            └ <Window(<State 'SelectOffer:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_category': 'tg_channel_requests', 'selected_traffic_source': 'tik_tok'}, 'start_data': None, 'midd...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_offers at 0x00000213F9D65F80>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x00000213F9FDB510>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 43, in get_offers
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 44, in <listcomp>
    (offer[selected_category]['offer_id'], f"{offer[selected_category]['offer_name']}-{offer[selected_category]['target_amount']}")
     │     └ 'tg_channel_requests'
     └ {'gambling': {'offer_id': 4, 'casino_name': 'TEST CASINO 1', 'link': 'https://t.me/TEST_CHANNEL'}}

KeyError: 'tg_channel_requests'
2024-02-19T18:45:28.528874+0200 INFO Polling stopped
2024-02-19T18:45:28.782092+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:45:28.783092+0200 INFO Bot stopped!
2024-02-19T18:45:32.031122+0200 INFO Start polling
2024-02-19T18:45:32.078676+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:45:33.449339+0200 INFO Update id=925008939 is handled. Duration 422 ms by bot id=5646878393
2024-02-19T18:45:34.451078+0200 INFO Update id=925008940 is handled. Duration 187 ms by bot id=5646878393
2024-02-19T18:45:35.326102+0200 INFO Update id=925008941 is handled. Duration 172 ms by bot id=5646878393
2024-02-19T18:45:39.318024+0200 INFO Update id=925008942 is not handled. Duration 47 ms by bot id=5646878393
2024-02-19T18:45:39.322546+0200 ERROR Cause exception while process update id=925008942 by bot id=5646878393
TelegramBadRequest: Telegram server says - Bad Request: message text is empty
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002DB708C7100>
    │       └ <function run at 0x000002DB6836C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002DB708A1A40>
           │      └ <function Runner.run at 0x000002DB68410900>
           └ <asyncio.runners.Runner object at 0x000002DB70848550>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002DB683FA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002DB70848550>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000002DB684D6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002DB68410180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002DB6833DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2db6a9ac290'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002DB70963150>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
                     │    └ <function Dispatcher.feed_update at 0x000002DB6E2827A0>
                     └ <Dispatcher '0x2db6a9ac290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002DB6E280FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002DB708C05D0>
                     └ <Dispatcher '0x2db6a9ac290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002DB708154D0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002DB70936E90>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002DB71289800>
          │    │   │      │    └ TelegramBadRequest('Telegram server says - Bad Request: message text is empty')
          │    │   │      └ <class 'aiogram.exceptions.TelegramBadRequest'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002DB70A17E20>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002DB71114F50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002DB6E7F2410>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000002DB70FB9760>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002DB70A4CE10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002DB70806F10>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008942, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000002DB70FBAD40>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2db6a9ac290'>>, Update(update_id=925008942, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002DB6E281DA0>
                 └ <Dispatcher '0x2db6a9ac290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002DB71231C60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002DB6E280FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002DB70A2F650>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002DB6E281E40>
                 └ <Dispatcher '0x2db6a9ac290'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002DB6E281DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002DB71231E40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002DB6E280FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002DB70A46C90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002DB70A92490>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002DB71231DA0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002DB6E281E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002DB6E281DA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002DB71230F40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002DB6E280FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002DB70A75950>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002DB6E281E40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002DB6E281120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002DB70A75950>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002DB70A4CE50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002DB70806F10>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002DB7081D190>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002DB6E774180>, <function CallableObject.call at 0x000002DB71231...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2db6a9ac290'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556995246051', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002DB71231EE0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x000002DB6E7B4540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002DB710D8990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002DB710D8990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │                 │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
          │    └ <function MessageManager.edit_message_safe at 0x000002DB6E7B5D00>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000002DB70A920D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │            │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
                 │    └ <function MessageManager.edit_message at 0x000002DB6E7B5DA0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000002DB70A920D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │         │    └ NewMessage(chat=Chat(id=387375605, type='private', title=None, username='s0larm0v3', first_name='Solarmove', last_name=None, ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
                 │    └ <function MessageManager.edit_text at 0x000002DB6E7B5EE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000002DB70A920D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x000002DB6E201120>
                 └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='', chat_id=387375605, message_id=61633, inline_message_id=None, parse_mode=<Default('parse_mode')>, ent...
                 └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='', chat_id=387375605, message_id=61633, inline_message_id=None, parse_mode=<Default('parse_mode')>, ent...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000002DB7075F490>
                 └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='', chat_id=387375605, message_id=61633, inline_message_id=None, parse_mode=<Default('parse_mode')>, ent...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000002DB70963150>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000002DB683D04A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               │    └ <function BaseSession.check_response at 0x000002DB6E1E5F80>
               └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000002DB7075F490>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
          │                         │               └ 'Bad Request: message text is empty'
          │                         └ EditMessageText(text='', chat_id=387375605, message_id=61633, inline_message_id=None, parse_mode=<Default('parse_mode')>, ent...
          └ <class 'aiogram.exceptions.TelegramBadRequest'>

aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
2024-02-19T18:47:36.243247+0200 INFO Polling stopped
2024-02-19T18:47:36.503217+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:47:36.504217+0200 INFO Bot stopped!
2024-02-19T18:47:39.598099+0200 INFO Start polling
2024-02-19T18:47:39.648099+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:47:40.775956+0200 INFO Update id=925008943 is handled. Duration 280 ms by bot id=5646878393
2024-02-19T18:47:53.304788+0200 INFO Update id=925008944 is handled. Duration 187 ms by bot id=5646878393
2024-02-19T18:47:54.160316+0200 INFO Update id=925008945 is handled. Duration 280 ms by bot id=5646878393
2024-02-19T18:47:54.978256+0200 INFO Update id=925008946 is handled. Duration 171 ms by bot id=5646878393
2024-02-19T18:47:56.257439+0200 INFO Update id=925008947 is handled. Duration 140 ms by bot id=5646878393
2024-02-19T18:47:57.042217+0200 INFO Update id=925008948 is handled. Duration 171 ms by bot id=5646878393
2024-02-19T18:48:00.584492+0200 INFO Update id=925008949 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:48:03.456779+0200 INFO Update id=925008950 is handled. Duration 360 ms by bot id=5646878393
2024-02-19T18:48:05.557594+0200 INFO Update id=925008951 is handled. Duration 562 ms by bot id=5646878393
2024-02-19T18:48:07.574171+0200 INFO Update id=925008952 is handled. Duration 547 ms by bot id=5646878393
2024-02-19T18:48:09.445302+0200 INFO Update id=925008953 is handled. Duration 687 ms by bot id=5646878393
2024-02-19T18:48:10.770116+0200 INFO Update id=925008954 is handled. Duration 234 ms by bot id=5646878393
2024-02-19T18:48:11.567592+0200 INFO Update id=925008955 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:48:12.828257+0200 INFO Update id=925008956 is handled. Duration 157 ms by bot id=5646878393
2024-02-19T18:48:14.012923+0200 INFO Update id=925008957 is handled. Duration 187 ms by bot id=5646878393
2024-02-19T18:48:15.011318+0200 ERROR Cannot get window data for state <State 'SelectOffer:select_offer'>
2024-02-19T18:48:15.013318+0200 INFO Update id=925008958 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:48:15.017318+0200 ERROR Cause exception while process update id=925008958 by bot id=5646878393
TypeError: cannot unpack non-iterable int object
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001B4FD633100>
    │       └ <function run at 0x000001B4F50DC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001B4FD611A40>
           │      └ <function Runner.run at 0x000001B4F5180900>
           └ <asyncio.runners.Runner object at 0x000001B4F348BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001B4F516A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001B4F348BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001B4F5246340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001B4F5180180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001B4F50ADA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1b4fd5a1190'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001B4FD584450>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001B4FD584450>
                     │    └ <function Dispatcher.feed_update at 0x000001B4FAFF27A0>
                     └ <Dispatcher '0x1b4fd5a1190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001B4FAFF0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001B4FD58CCD0>
                     └ <Dispatcher '0x1b4fd5a1190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001B4FD7B5790>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001B4FD7B5410>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001B4FDE46C80>
          │    │   │      │    └ TypeError('cannot unpack non-iterable int object')
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001B4FD787E20>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001B4FE02D650>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001B4FD7B5B90>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001B4FDFA1E40>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001B4FD7BCD10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001B4FD6D1410>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008958, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001B4FDC42520>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1b4fd5a1190'>>, Update(update_id=925008958, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001B4FAFF1DA0>
                 └ <Dispatcher '0x1b4fd5a1190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001B4FDFA2200>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001B4FAFF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001B4FD79F690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001B4FAFF1E40>
                 └ <Dispatcher '0x1b4fd5a1190'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001B4FAFF1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001B4FDFA1B20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001B4FAFF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001B4FD7B6C10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001B4FD802410>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001B4FDFA1A80>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001B4FAFF1E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001B4FAFF1DA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001B4FDFA1F80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001B4FAFF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001B4FD7E5910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001B4FAFF1E40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001B4FAFF1120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001B4FD7E5910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001B4FD7BCD50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001B4FD6D1410>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001B4FD8021D0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001B4FB4E4180>, <function CallableObject.call at 0x000001B4FDFA1...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1b4fd5a1190'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765554950424690', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001B4FDFA1EE0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x000001B4FB524540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
                        │    └ <function ManagerImpl.dialog at 0x000001B4FB513880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
                        │      │      └ <Dialog(<StatesGroup 'SelectOffer'>)>
                        │      └ <function Window.render at 0x000001B4FB526FC0>
                        └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
                         │    │         └ <Dialog(<StatesGroup 'SelectOffer'>)>
                         │    └ <function Window.load_data at 0x000001B4FB526DE0>
                         └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001B4FB51D760>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001B4FE02F3D0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001B4FD7E42D0>
    │    │            └ <Window(<State 'SelectOffer:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_category': 'gambling', 'selected_traffic_source': 'tik_tok'}, 'start_data': None, 'middleware_data...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_offers at 0x000001B4FD565F80>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001B4FD7E42D0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 48, in get_offers
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 50, in <listcomp>
    for offer_key, offer_value in offers if offer_value['offer_type'] == selected_category
                                  │                                      └ 'gambling'
                                  └ {2: {'offer_name': 'TEST OFFER 1', 'offer_type': 'tg_channel_requests', 'offer_id': '1', 'offer_conditions': 'test', 'price':...

TypeError: cannot unpack non-iterable int object
2024-02-19T18:48:31.489796+0200 INFO Polling stopped
2024-02-19T18:48:31.748839+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:48:31.749839+0200 INFO Bot stopped!
2024-02-19T18:48:34.925800+0200 INFO Start polling
2024-02-19T18:48:34.970799+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:48:36.795416+0200 ERROR Cannot get window data for state <State 'SelectOffer:select_offer'>
2024-02-19T18:48:36.796413+0200 INFO Update id=925008959 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:48:36.800417+0200 ERROR Cause exception while process update id=925008959 by bot id=5646878393
KeyError: 'offer_name'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001796B413100>
    │       └ <function run at 0x0000017962ECC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001796B3F1940>
           │      └ <function Runner.run at 0x0000017962F60900>
           └ <asyncio.runners.Runner object at 0x00000179612C9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000017962F5A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000179612C9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000017963026340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017962F60180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017962E9DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1796b366fd0'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001796B355050>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001796B355050>
                     │    └ <function Dispatcher.feed_update at 0x0000017968DCE7A0>
                     └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B34B010>
                     └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001796B348F50>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001796B5911D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001796BC7F7C0>
          │    │   │      │    └ KeyError('offer_name')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001796BC00B80>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001796B5E3B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001796B591650>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001796B5C2C00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001796B59C990>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001796B5917D0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008959, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001796BB0ACA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1796b366fd0'>>, Update(update_id=925008959, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000017968DCDDA0>
                 └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BB0AD40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B57EFD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000017968DCDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BB0ADE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5927D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001796B5E2150>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BB0AFC0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000017968DCDDA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BB0B240>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5C5610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000017968DCD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5C5610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001796B364AD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001796B5917D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001796B36D050>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000179692C4180>, <function CallableObject.call at 0x000001796BB0B...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556671969514', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001796BB0B100>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000017969304540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
                        │    └ <function ManagerImpl.dialog at 0x00000179692F7880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
                        │      │      └ <Dialog(<StatesGroup 'SelectOffer'>)>
                        │      └ <function Window.render at 0x0000017969306FC0>
                        └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
                         │    │         └ <Dialog(<StatesGroup 'SelectOffer'>)>
                         │    └ <function Window.load_data at 0x0000017969306DE0>
                         └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000179692F95D0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BA43B90>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001796B5B3F50>
    │    │            └ <Window(<State 'SelectOffer:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_category': 'gambling', 'selected_traffic_source': 'reals'}, 'start_data': None, 'middleware_data':...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_offers at 0x000001796B345F80>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001796B5B3F50>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 48, in get_offers
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 49, in <listcomp>
    (offer_key, f"{offer_value['offer_name']}")
     └ 4

KeyError: 'offer_name'
2024-02-19T18:48:38.342516+0200 INFO Update id=925008960 is handled. Duration 217 ms by bot id=5646878393
2024-02-19T18:48:39.937564+0200 INFO Update id=925008961 is handled. Duration 219 ms by bot id=5646878393
2024-02-19T18:48:41.062626+0200 ERROR Cannot get window data for state <State 'SelectOffer:select_offer'>
2024-02-19T18:48:41.063621+0200 INFO Update id=925008962 is not handled. Duration 0 ms by bot id=5646878393
2024-02-19T18:48:41.065620+0200 ERROR Cause exception while process update id=925008962 by bot id=5646878393
KeyError: 'offer_name'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001796B413100>
    │       └ <function run at 0x0000017962ECC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001796B3F1940>
           │      └ <function Runner.run at 0x0000017962F60900>
           └ <asyncio.runners.Runner object at 0x00000179612C9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000017962F5A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000179612C9990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000017963026340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000017962F60180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000017962E9DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1796b366fd0'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001796B355050>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001796B355050>
                     │    └ <function Dispatcher.feed_update at 0x0000017968DCE7A0>
                     └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B34B010>
                     └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001796B348F50>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001796B5911D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001796BDF5A40>
          │    │   │      │    └ KeyError('offer_name')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001796BC009A0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001796BB639D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001796B591650>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function TelegramEventObserver.trigger at 0x000001796BC84EA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001796B59C990>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001796B5917D0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=925008962, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=...
                 └ <function CallableObject.call at 0x000001796BB0AE80>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1796b366fd0'>>, Update(update_id=925008962, messa...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000017968DCDDA0>
                 └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BC851C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B57EFD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Dispatcher '0x1796b366fd0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000017968DCDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BC85120>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5927D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001796B5E2150>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BC85800>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000017968DCDDA0>
                     └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001796BC86CA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000017968DCCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5C5610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000017968DCDE40>
                 └ <Dialog(<StatesGroup 'SelectOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000017968DCD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001796B5C5610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001796B364AD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001796B5917D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001796B36D050>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000179692C4180>, <function CallableObject.call at 0x000001796BC84...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1796b366fd0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558003524290', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001796BC84FE0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'SelectOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x0000017969304540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
                        │    └ <function ManagerImpl.dialog at 0x00000179692F7880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
                        │      │      └ <Dialog(<StatesGroup 'SelectOffer'>)>
                        │      └ <function Window.render at 0x0000017969306FC0>
                        └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
                         │    │         └ <Dialog(<StatesGroup 'SelectOffer'>)>
                         │    └ <function Window.load_data at 0x0000017969306DE0>
                         └ <Window(<State 'SelectOffer:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000179692F95D0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001796BC52410>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001796B5B3F50>
    │    │            └ <Window(<State 'SelectOffer:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_category': 'gambling', 'selected_traffic_source': 'reals'}, 'start_data': None, 'middleware_data':...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_offers at 0x000001796B345F80>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001796B5B3F50>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 48, in get_offers
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 49, in <listcomp>
    (offer_key, f"{offer_value['offer_name']}")
     └ 4

KeyError: 'offer_name'
2024-02-19T18:49:03.025255+0200 INFO Polling stopped
2024-02-19T18:49:03.277077+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:49:03.278038+0200 INFO Bot stopped!
2024-02-19T18:49:06.245329+0200 INFO Start polling
2024-02-19T18:49:06.294331+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:49:09.296917+0200 INFO Update id=925008963 is handled. Duration 437 ms by bot id=5646878393
2024-02-19T18:49:10.418935+0200 INFO Update id=925008964 is handled. Duration 437 ms by bot id=5646878393
2024-02-19T18:49:16.512600+0200 INFO Update id=925008965 is handled. Duration 281 ms by bot id=5646878393
2024-02-19T18:49:17.159372+0200 INFO Update id=925008966 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:49:17.879003+0200 INFO Update id=925008967 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:49:18.472353+0200 INFO Update id=925008968 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:49:19.965016+0200 INFO Update id=925008969 is handled. Duration 139 ms by bot id=5646878393
2024-02-19T18:49:21.478825+0200 INFO Update id=925008970 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:49:22.709594+0200 INFO Update id=925008971 is handled. Duration 171 ms by bot id=5646878393
2024-02-19T18:49:24.093161+0200 INFO Update id=925008972 is handled. Duration 139 ms by bot id=5646878393
2024-02-19T18:49:26.136010+0200 INFO Update id=925008973 is handled. Duration 140 ms by bot id=5646878393
2024-02-19T18:49:27.154057+0200 INFO Update id=925008974 is handled. Duration 140 ms by bot id=5646878393
2024-02-19T18:50:13.759064+0200 INFO Polling stopped
2024-02-19T18:50:14.017796+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:50:14.018796+0200 INFO Bot stopped!
2024-02-19T18:50:17.033669+0200 INFO Start polling
2024-02-19T18:50:17.082670+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:50:18.240785+0200 INFO Update id=925008975 is handled. Duration 328 ms by bot id=5646878393
2024-02-19T18:50:20.100903+0200 INFO Update id=925008976 is handled. Duration 391 ms by bot id=5646878393
2024-02-19T18:50:20.835920+0200 INFO Update id=925008977 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:50:22.252873+0200 INFO Update id=925008978 is handled. Duration 500 ms by bot id=5646878393
2024-02-19T18:50:23.497299+0200 INFO Update id=925008979 is handled. Duration 203 ms by bot id=5646878393
2024-02-19T18:50:24.352530+0200 INFO Update id=925008980 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:50:25.218156+0200 INFO Update id=925008981 is handled. Duration 139 ms by bot id=5646878393
2024-02-19T18:50:26.466681+0200 INFO Update id=925008982 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:50:27.486405+0200 INFO Update id=925008983 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:50:28.815982+0200 INFO Update id=925008984 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:50:30.031759+0200 INFO Update id=925008985 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:50:30.760436+0200 INFO Update id=925008986 is handled. Duration 297 ms by bot id=5646878393
2024-02-19T18:50:31.953631+0200 INFO Update id=925008987 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:50:33.131736+0200 INFO Update id=925008988 is handled. Duration 437 ms by bot id=5646878393
2024-02-19T18:50:36.684434+0200 INFO Update id=925008989 is handled. Duration 156 ms by bot id=5646878393
2024-02-19T18:50:37.687109+0200 INFO Update id=925008990 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:50:38.556716+0200 INFO Update id=925008991 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:50:39.831891+0200 INFO Update id=925008992 is handled. Duration 266 ms by bot id=5646878393
2024-02-19T18:51:16.461906+0200 INFO Polling stopped
2024-02-19T18:51:16.720872+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:51:16.722873+0200 INFO Bot stopped!
2024-02-19T18:51:20.112169+0200 INFO Start polling
2024-02-19T18:51:20.158167+0200 INFO Run polling for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:51:24.209472+0200 INFO Update id=925008993 is handled. Duration 639 ms by bot id=5646878393
2024-02-19T18:51:27.412464+0200 INFO Update id=925008994 is handled. Duration 312 ms by bot id=5646878393
2024-02-19T18:51:29.906327+0200 INFO Update id=925008995 is handled. Duration 155 ms by bot id=5646878393
2024-02-19T18:51:30.910531+0200 INFO Update id=925008996 is handled. Duration 218 ms by bot id=5646878393
2024-02-19T18:51:31.616160+0200 INFO Update id=925008997 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:51:32.331345+0200 INFO Update id=925008998 is handled. Duration 187 ms by bot id=5646878393
2024-02-19T18:51:47.971452+0200 INFO Update id=925008999 is handled. Duration 233 ms by bot id=5646878393
2024-02-19T18:53:05.168920+0200 INFO Update id=925009000 is handled. Duration 296 ms by bot id=5646878393
2024-02-19T18:53:08.311644+0200 INFO Update id=925009001 is handled. Duration 250 ms by bot id=5646878393
2024-02-19T18:53:11.052218+0200 INFO Update id=925009002 is handled. Duration 390 ms by bot id=5646878393
2024-02-19T18:53:12.573019+0200 INFO Update id=925009003 is handled. Duration 141 ms by bot id=5646878393
2024-02-19T18:53:15.541881+0200 INFO Update id=925009004 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:16.709791+0200 INFO Update id=925009005 is handled. Duration 171 ms by bot id=5646878393
2024-02-19T18:53:17.675474+0200 INFO Update id=925009006 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:18.321985+0200 INFO Update id=925009007 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:19.137499+0200 INFO Update id=925009008 is handled. Duration 140 ms by bot id=5646878393
2024-02-19T18:53:21.119415+0200 INFO Update id=925009009 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:22.593205+0200 INFO Update id=925009010 is handled. Duration 233 ms by bot id=5646878393
2024-02-19T18:53:24.800259+0200 INFO Update id=925009011 is handled. Duration 342 ms by bot id=5646878393
2024-02-19T18:53:28.387794+0200 INFO Update id=925009012 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:29.790038+0200 INFO Update id=925009013 is handled. Duration 125 ms by bot id=5646878393
2024-02-19T18:53:30.806104+0200 INFO Update id=925009014 is handled. Duration 156 ms by bot id=5646878393
2024-02-19T18:53:32.456283+0200 INFO Update id=925009015 is handled. Duration 157 ms by bot id=5646878393
2024-02-19T18:53:34.334716+0200 INFO Update id=925009016 is handled. Duration 139 ms by bot id=5646878393
2024-02-19T18:53:35.087314+0200 INFO Update id=925009017 is handled. Duration 233 ms by bot id=5646878393
2024-02-19T18:53:36.003291+0200 INFO Update id=925009018 is handled. Duration 296 ms by bot id=5646878393
2024-02-19T18:54:02.538943+0200 INFO Polling stopped
2024-02-19T18:54:02.791728+0200 INFO Polling stopped for bot @test_touch_bot id=5646878393 - 'Test Touch'
2024-02-19T18:54:02.792727+0200 INFO Bot stopped!
2024-02-19T18:54:23.052622+0200 INFO Start polling
2024-02-19T18:54:23.100372+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T18:54:38.200031+0200 INFO Update id=59134365 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T18:54:45.154635+0200 INFO Update id=59134366 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T18:54:46.461794+0200 INFO Update id=59134367 is handled. Duration 264 ms by bot id=6902908236
2024-02-19T18:54:48.945269+0200 INFO Update id=59134368 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T18:54:51.537523+0200 INFO Update id=59134369 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T18:54:52.667895+0200 INFO Update id=59134370 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T18:54:53.365413+0200 INFO Update id=59134371 is handled. Duration 500 ms by bot id=6902908236
2024-02-19T18:55:24.098318+0200 INFO Update id=59134372 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T18:55:25.470774+0200 INFO Update id=59134373 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T18:55:26.711954+0200 INFO Update id=59134374 is handled. Duration 327 ms by bot id=6902908236
2024-02-19T18:55:33.818810+0200 INFO Update id=59134375 is handled. Duration 219 ms by bot id=6902908236
2024-02-19T18:56:01.774671+0200 INFO Update id=59134376 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T18:56:06.144262+0200 INFO Update id=59134377 is handled. Duration 328 ms by bot id=6902908236
2024-02-19T18:56:34.945372+0200 INFO Update id=59134378 is handled. Duration 516 ms by bot id=6902908236
2024-02-19T18:56:45.511300+0200 INFO Update id=59134379 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T18:56:46.481447+0200 INFO Update id=59134380 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:56:47.988871+0200 INFO Update id=59134381 is handled. Duration 108 ms by bot id=6902908236
2024-02-19T18:56:49.185269+0200 INFO Update id=59134382 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T18:56:50.671425+0200 INFO Update id=59134383 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T18:56:51.999272+0200 INFO Update id=59134384 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T18:56:52.818236+0200 INFO Update id=59134385 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T18:56:55.297935+0200 INFO Update id=59134386 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T18:56:56.113942+0200 INFO Update id=59134387 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:56:56.901513+0200 INFO Update id=59134388 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T18:57:03.666124+0200 INFO Update id=59134389 is handled. Duration 342 ms by bot id=6902908236
2024-02-19T18:57:04.463936+0200 INFO Update id=59134390 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T18:57:05.511239+0200 INFO Update id=59134391 is handled. Duration 297 ms by bot id=6902908236
2024-02-19T18:57:07.005506+0200 INFO Update id=59134392 is handled. Duration 172 ms by bot id=6902908236
2024-02-19T18:57:08.432617+0200 INFO Update id=59134393 is handled. Duration 328 ms by bot id=6902908236
2024-02-19T18:57:09.859235+0200 INFO Update id=59134394 is handled. Duration 578 ms by bot id=6902908236
2024-02-19T18:57:11.655309+0200 INFO Update id=59134395 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:57:12.174201+0200 INFO Update id=59134396 is handled. Duration 233 ms by bot id=6902908236
2024-02-19T18:57:12.521348+0200 INFO Update id=59134397 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:57:13.232435+0200 INFO Update id=59134398 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:57:15.438098+0200 INFO Update id=59134399 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T18:57:17.496859+0200 INFO Update id=59134400 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T18:57:18.650402+0200 INFO Update id=59134401 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:57:20.861430+0200 INFO Update id=59134402 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:57:22.044909+0200 INFO Update id=59134403 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T18:57:23.606886+0200 INFO Update id=59134404 is handled. Duration 421 ms by bot id=6902908236
2024-02-19T18:57:24.798553+0200 INFO Update id=59134405 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T18:57:25.642601+0200 INFO Update id=59134406 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T18:57:26.751674+0200 INFO Update id=59134407 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T18:57:27.215221+0200 INFO Update id=59134408 is handled. Duration 139 ms by bot id=6902908236
2024-02-19T18:57:27.967299+0200 INFO Update id=59134409 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T18:57:29.081843+0200 INFO Update id=59134410 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T18:57:30.170296+0200 INFO Update id=59134411 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T18:57:32.556159+0200 INFO Update id=59134412 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T18:57:33.569252+0200 INFO Update id=59134413 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T18:57:36.499298+0200 INFO Update id=59134414 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T18:57:37.575781+0200 INFO Update id=59134415 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T18:57:38.708857+0200 INFO Update id=59134416 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T18:57:39.786677+0200 INFO Update id=59134417 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T18:57:40.718104+0200 INFO Update id=59134418 is handled. Duration 327 ms by bot id=6902908236
2024-02-19T18:57:41.503371+0200 INFO Update id=59134419 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T18:57:44.891979+0200 INFO Update id=59134420 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T18:57:45.587096+0200 INFO Update id=59134421 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T18:57:55.888928+0200 INFO Update id=59134422 is handled. Duration 359 ms by bot id=6902908236
2024-02-19T18:57:58.140496+0200 INFO Update id=59134423 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T18:58:00.155069+0200 INFO Update id=59134424 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T18:58:01.271340+0200 INFO Update id=59134425 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T18:58:02.341455+0200 INFO Update id=59134426 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T19:00:26.505933+0200 INFO Update id=59134427 is handled. Duration 328 ms by bot id=6902908236
2024-02-19T19:00:28.312192+0200 INFO Update id=59134428 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T19:00:30.070270+0200 INFO Update id=59134429 is handled. Duration 453 ms by bot id=6902908236
2024-02-19T19:00:31.228243+0200 INFO Update id=59134430 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T19:00:32.988448+0200 INFO Update id=59134431 is handled. Duration 296 ms by bot id=6902908236
2024-02-19T19:00:37.025720+0200 INFO Update id=59134432 is handled. Duration 359 ms by bot id=6902908236
2024-02-19T19:00:38.172386+0200 INFO Update id=59134433 is handled. Duration 358 ms by bot id=6902908236
2024-02-19T19:00:42.244376+0200 INFO Update id=59134434 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T19:00:44.026922+0200 INFO Update id=59134435 is handled. Duration 421 ms by bot id=6902908236
2024-02-19T19:00:45.102638+0200 INFO Update id=59134436 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T19:00:46.379320+0200 INFO Update id=59134437 is handled. Duration 312 ms by bot id=6902908236
2024-02-19T19:00:47.826230+0200 INFO Update id=59134438 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T19:00:48.731854+0200 INFO Update id=59134439 is handled. Duration 328 ms by bot id=6902908236
2024-02-19T19:00:49.717467+0200 INFO Update id=59134440 is handled. Duration 202 ms by bot id=6902908236
2024-02-19T19:00:51.509276+0200 INFO Update id=59134441 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T19:00:54.634978+0200 INFO Update id=59134442 is handled. Duration 453 ms by bot id=6902908236
2024-02-19T19:00:55.853258+0200 INFO Update id=59134443 is handled. Duration 500 ms by bot id=6902908236
2024-02-19T19:00:56.842311+0200 INFO Update id=59134444 is handled. Duration 483 ms by bot id=6902908236
2024-02-19T19:00:57.758805+0200 INFO Update id=59134445 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T19:00:58.534933+0200 INFO Update id=59134446 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T19:01:00.262339+0200 INFO Update id=59134447 is handled. Duration 172 ms by bot id=6902908236
2024-02-19T19:01:03.069968+0200 INFO Update id=59134448 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T19:01:04.062775+0200 INFO Update id=59134449 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T19:01:05.077324+0200 INFO Update id=59134450 is handled. Duration 235 ms by bot id=6902908236
2024-02-19T19:01:07.140147+0200 INFO Update id=59134451 is handled. Duration 172 ms by bot id=6902908236
2024-02-19T19:01:09.062040+0200 INFO Update id=59134452 is handled. Duration 437 ms by bot id=6902908236
2024-02-19T19:01:10.147898+0200 INFO Update id=59134453 is handled. Duration 343 ms by bot id=6902908236
2024-02-19T19:09:34.252878+0200 INFO Update id=59134454 is handled. Duration 437 ms by bot id=6902908236
2024-02-19T20:18:54.927674+0200 INFO Polling stopped
2024-02-19T20:18:55.187674+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:18:55.190675+0200 INFO Bot stopped!
2024-02-19T20:18:58.442924+0200 INFO Start polling
2024-02-19T20:18:58.487925+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:19:23.674971+0200 INFO Update id=59134455 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:19:33.281328+0200 INFO Update id=59134456 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:19:36.651760+0200 INFO Update id=59134457 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:20:36.875345+0200 INFO Polling stopped
2024-02-19T20:20:37.130343+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:20:37.131345+0200 INFO Bot stopped!
2024-02-19T20:20:40.148022+0200 INFO Start polling
2024-02-19T20:20:40.194020+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:20:42.524857+0200 INFO Update id=59134458 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T20:20:44.207048+0200 INFO Update id=59134459 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:21:01.982890+0200 INFO Polling stopped
2024-02-19T20:21:02.234706+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:21:02.235705+0200 INFO Bot stopped!
2024-02-19T20:21:05.555184+0200 INFO Start polling
2024-02-19T20:21:05.610746+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:21:07.645573+0200 INFO Update id=59134460 is handled. Duration 359 ms by bot id=6902908236
2024-02-19T20:21:11.402563+0200 INFO Update id=59134461 is handled. Duration 359 ms by bot id=6902908236
2024-02-19T20:21:13.633629+0200 INFO Update id=59134462 is handled. Duration 422 ms by bot id=6902908236
2024-02-19T20:21:14.956508+0200 INFO Update id=59134463 is handled. Duration 312 ms by bot id=6902908236
2024-02-19T20:21:53.230191+0200 INFO Polling stopped
2024-02-19T20:21:53.488977+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:21:53.489979+0200 INFO Bot stopped!
2024-02-19T20:21:57.044064+0200 INFO Start polling
2024-02-19T20:21:57.090065+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:21:58.909271+0200 INFO Update id=59134464 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:22:00.422310+0200 INFO Update id=59134465 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T20:22:01.311350+0200 INFO Update id=59134466 is handled. Duration 281 ms by bot id=6902908236
2024-02-19T20:22:02.839338+0200 INFO Update id=59134467 is handled. Duration 312 ms by bot id=6902908236
2024-02-19T20:22:03.846730+0200 INFO Update id=59134468 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:22:04.586847+0200 INFO Update id=59134469 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:22:06.572406+0200 INFO Update id=59134470 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T20:22:07.806441+0200 INFO Update id=59134471 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:22:09.369969+0200 INFO Update id=59134472 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:22:10.399016+0200 INFO Update id=59134473 is handled. Duration 359 ms by bot id=6902908236
2024-02-19T20:22:11.034714+0200 INFO Update id=59134474 is handled. Duration 296 ms by bot id=6902908236
2024-02-19T20:22:20.399485+0200 INFO Polling stopped
2024-02-19T20:22:20.654937+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:22:20.655936+0200 INFO Bot stopped!
2024-02-19T20:22:23.989717+0200 INFO Start polling
2024-02-19T20:22:24.033718+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:22:29.735539+0200 INFO Update id=59134475 is handled. Duration 16 ms by bot id=6902908236
2024-02-19T20:22:33.424233+0200 INFO Update id=59134476 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:35.267941+0200 INFO Update id=59134477 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:47.063697+0200 INFO Update id=59134478 is handled. Duration 296 ms by bot id=6902908236
2024-02-19T20:22:48.821067+0200 INFO Update id=59134479 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:22:49.829771+0200 INFO Update id=59134480 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:22:50.717042+0200 INFO Update id=59134481 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:22:51.703770+0200 INFO Update id=59134482 is handled. Duration 235 ms by bot id=6902908236
2024-02-19T20:22:52.994613+0200 INFO Update id=59134483 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T20:22:54.890389+0200 INFO Update id=59134484 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:55.628742+0200 INFO Update id=59134485 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:56.251070+0200 INFO Update id=59134486 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:56.779745+0200 INFO Update id=59134487 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:56.981764+0200 INFO Update id=59134488 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:57.132764+0200 INFO Update id=59134489 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:22:57.284765+0200 INFO Update id=59134490 is handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:23:30.633309+0200 INFO Update id=59134491 is handled. Duration 15 ms by bot id=6902908236
2024-02-19T20:23:30.677307+0200 INFO Update id=59134492 is handled. Duration 16 ms by bot id=6902908236
2024-02-19T20:24:08.829795+0200 INFO Polling stopped
2024-02-19T20:24:09.086931+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:24:09.087931+0200 INFO Bot stopped!
2024-02-19T20:24:12.468727+0200 INFO Start polling
2024-02-19T20:24:12.539840+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:24:15.995248+0200 INFO Update id=59134493 is handled. Duration 469 ms by bot id=6902908236
2024-02-19T20:24:20.553209+0200 INFO Update id=59134494 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:26:40.151353+0200 INFO Update id=59134495 is handled. Duration 530 ms by bot id=6902908236
2024-02-19T20:26:42.727126+0200 INFO Update id=59134496 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:26:44.310604+0200 INFO Update id=59134497 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T20:26:45.560643+0200 INFO Update id=59134498 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:26:46.336644+0200 INFO Update id=59134499 is handled. Duration 108 ms by bot id=6902908236
2024-02-19T20:26:47.554679+0200 INFO Update id=59134500 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:26:49.705984+0200 INFO Update id=59134501 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:26:52.627311+0200 INFO Update id=59134502 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:26:54.254991+0200 INFO Update id=59134503 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:26:55.203988+0200 INFO Update id=59134504 is handled. Duration 235 ms by bot id=6902908236
2024-02-19T20:26:56.844988+0200 INFO Update id=59134505 is handled. Duration 139 ms by bot id=6902908236
2024-02-19T20:26:58.344987+0200 INFO Update id=59134506 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:27:01.378714+0200 INFO Update id=59134507 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:27:02.125108+0200 INFO Update id=59134508 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:27:02.962613+0200 INFO Update id=59134509 is handled. Duration 389 ms by bot id=6902908236
2024-02-19T20:27:03.660888+0200 INFO Update id=59134510 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T20:27:06.135176+0200 INFO Update id=59134511 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:27:08.011219+0200 ERROR Cannot render window for state <State 'ChannelPoster:select_channel_topic'>
2024-02-19T20:27:08.012219+0200 INFO Update id=59134512 is not handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:27:08.017219+0200 ERROR Cause exception while process update id=59134512 by bot id=6902908236
KeyError: 'channel_topics'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000161112504A0>
    │       └ <function run at 0x0000016108D4C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016111205E40>
           │      └ <function Runner.run at 0x0000016108DE0900>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016108DDA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016108EA6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016108DE0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016108D1DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x161111943d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000016111174190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000016111174190>
                     │    └ <function Dispatcher.feed_update at 0x000001610EBDE7A0>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001611139B050>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016111195CD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001611139B810>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000016111BDCD00>
          │    │   │      │    └ KeyError('channel_topics')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000016111803C40>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000016111B271D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001611139BCD0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000001611141D260>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134512, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x00000161118BB6A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x161111943d0'>>, Update(update_id=59134512, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001610EBDDDA0>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABA840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113995D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABAC00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113A8E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000161114274D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABBD80>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABAD40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113F1110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000001610EBDD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113F1110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000161114272D0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000001610F0D4180>, <function CallableObject.call at 0x0000016111ABA...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x0000016111ABACA0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'PersonalCabinet'>)>>, CallbackQuery(id='789...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
          │      │                │                 └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
          │      │                └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000001610F116F20>
          └ <Window(<State 'PersonalCabinet:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
          │    │        │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
          │    │        │                └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000001610EF07EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113F0110>
          └ <Window(<State 'PersonalCabinet:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                 │    │                       │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                 │    │                       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113F0110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
             │ │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
             │ │                └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113EBED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                 │    │                       │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                 │    │                       └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113EBED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
             │ │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
             │ │                └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001610EF24B80>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
          │    │        │             └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001610EF06020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113EBE50>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
          │    │        └ CallbackQuery(id='7898361890015448592', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113EBE50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
          │       │     │    └ <State 'ChannelPoster:select_channel_topic'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113EBD90>
          │       └ <function ManagerImpl.start at 0x000001610F107F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'ChannelPoster:select_channel_topic'>
          │    └ <function ManagerImpl._start_normal at 0x000001610F114180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001610F114540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                        │    └ <function ManagerImpl.dialog at 0x000001610F107880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000001610F116FC0>
                        └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000001610F116D40>
                       └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
                     └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000001610F097240>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function ScrollingGroup._render_keyboard at 0x000001610F0AAA20>
                 └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
                     │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                     │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    └ <function ScrollingGroup._render_contents at 0x000001610F0AA840>
                     └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
                                          │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                                          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BE9910>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000001610F0AB100>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                               │    └ operator.itemgetter('channel_topics')
                               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>

KeyError: 'channel_topics'
2024-02-19T20:27:09.664219+0200 INFO Update id=59134513 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T20:27:10.816821+0200 INFO Update id=59134514 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:27:12.087923+0200 INFO Update id=59134515 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T20:27:12.930032+0200 INFO Update id=59134516 is handled. Duration 312 ms by bot id=6902908236
2024-02-19T20:27:13.764922+0200 INFO Update id=59134517 is handled. Duration 422 ms by bot id=6902908236
2024-02-19T20:27:15.016084+0200 ERROR Cannot render window for state <State 'ChannelPoster:select_channel_topic'>
2024-02-19T20:27:15.017085+0200 INFO Update id=59134518 is not handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:27:15.019085+0200 ERROR Cause exception while process update id=59134518 by bot id=6902908236
KeyError: 'channel_topics'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000161112504A0>
    │       └ <function run at 0x0000016108D4C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016111205E40>
           │      └ <function Runner.run at 0x0000016108DE0900>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016108DDA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016108EA6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016108DE0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016108D1DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x161111943d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000016111174190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000016111174190>
                     │    └ <function Dispatcher.feed_update at 0x000001610EBDE7A0>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001611139B050>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016111195CD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001611139B810>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000016111D00080>
          │    │   │      │    └ KeyError('channel_topics')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000016111800310>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000016111CEE910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001611139BCD0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x00000161118BBBA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134518, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000016111C05620>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x161111943d0'>>, Update(update_id=59134518, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001610EBDDDA0>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C05260>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113995D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C04860>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113A8E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000161114274D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C05440>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C044A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000001610EBDD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000161114272D0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000001610F0D4180>, <function CallableObject.call at 0x0000016111C05...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x0000016111C053A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'MainMenu'>)>>, CallbackQuery(id='7898361887...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
          │      │                │                 └ <Dialog(<StatesGroup 'MainMenu'>)>
          │      │                └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000001610F116F20>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
          │    │        │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
          │    │        │                └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000001610EF07EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001610EF24B80>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        │             └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001610EF06020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        └ CallbackQuery(id='7898361887566476902', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    └ <State 'ChannelPoster:select_channel_topic'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       └ <function ManagerImpl.start at 0x000001610F107F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'ChannelPoster:select_channel_topic'>
          │    └ <function ManagerImpl._start_normal at 0x000001610F114180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001610F114540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                        │    └ <function ManagerImpl.dialog at 0x000001610F107880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000001610F116FC0>
                        └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000001610F116D40>
                       └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
                     └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000001610F097240>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function ScrollingGroup._render_keyboard at 0x000001610F0AAA20>
                 └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
                     │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                     │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    └ <function ScrollingGroup._render_contents at 0x000001610F0AA840>
                     └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
                                          │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                                          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111CFC190>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000001610F0AB100>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                               │    └ operator.itemgetter('channel_topics')
                               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>

KeyError: 'channel_topics'
2024-02-19T20:27:16.451086+0200 INFO Update id=59134519 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:42:41.878482+0200 INFO Update id=59134520 is handled. Duration 296 ms by bot id=6902908236
2024-02-19T20:42:43.821619+0200 INFO Update id=59134521 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:42:46.685977+0200 INFO Update id=59134522 is handled. Duration 452 ms by bot id=6902908236
2024-02-19T20:42:48.862355+0200 INFO Update id=59134523 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:42:50.907159+0200 INFO Update id=59134524 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:42:53.178276+0200 INFO Update id=59134525 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:42:54.047414+0200 INFO Update id=59134526 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:42:56.986354+0200 INFO Update id=59134527 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:42:59.883684+0200 INFO Update id=59134528 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:43:01.497105+0200 INFO Update id=59134529 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T20:43:02.986922+0200 ERROR Cannot render window for state <State 'ChannelPoster:select_channel_topic'>
2024-02-19T20:43:02.987924+0200 INFO Update id=59134530 is not handled. Duration 14 ms by bot id=6902908236
2024-02-19T20:43:02.989924+0200 ERROR Cause exception while process update id=59134530 by bot id=6902908236
KeyError: 'channel_topics'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000161112504A0>
    │       └ <function run at 0x0000016108D4C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016111205E40>
           │      └ <function Runner.run at 0x0000016108DE0900>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016108DDA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016108EA6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016108DE0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016108D1DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x161111943d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000016111174190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000016111174190>
                     │    └ <function Dispatcher.feed_update at 0x000001610EBDE7A0>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001611139B050>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016111195CD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001611139B810>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000016111D12B00>
          │    │   │      │    └ KeyError('channel_topics')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000161118015D0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000016111BDC310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001611139BCD0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000016111ABAC00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134530, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000016111AB94E0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x161111943d0'>>, Update(update_id=59134530, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001610EBDDDA0>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111A627A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113995D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111A60F40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113A8E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000161114274D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C042C0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111A62700>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000001610EBDD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000161114272D0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000001610F0D4180>, <function CallableObject.call at 0x0000016111C05...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x0000016111C05620>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'MainMenu'>)>>, CallbackQuery(id='7898361887...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
          │      │                │                 └ <Dialog(<StatesGroup 'MainMenu'>)>
          │      │                └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000001610F116F20>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
          │    │        │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
          │    │        │                └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000001610EF07EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001610EF24B80>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        │             └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001610EF06020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        └ CallbackQuery(id='7898361887678636338', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    └ <State 'ChannelPoster:select_channel_topic'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       └ <function ManagerImpl.start at 0x000001610F107F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'ChannelPoster:select_channel_topic'>
          │    └ <function ManagerImpl._start_normal at 0x000001610F114180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001610F114540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                        │    └ <function ManagerImpl.dialog at 0x000001610F107880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000001610F116FC0>
                        └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000001610F116D40>
                       └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
                     └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000001610F097240>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function ScrollingGroup._render_keyboard at 0x000001610F0AAA20>
                 └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
                     │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                     │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    └ <function ScrollingGroup._render_contents at 0x000001610F0AA840>
                     └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
                                          │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                                          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111BEBD90>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000001610F0AB100>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                               │    └ operator.itemgetter('channel_topics')
                               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>

KeyError: 'channel_topics'
2024-02-19T20:43:04.188040+0200 INFO Update id=59134531 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:43:05.378544+0200 INFO Update id=59134532 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:43:06.097236+0200 INFO Update id=59134533 is handled. Duration 157 ms by bot id=6902908236
2024-02-19T20:43:07.776263+0200 INFO Update id=59134534 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:43:08.421019+0200 INFO Update id=59134535 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:43:09.405800+0200 INFO Update id=59134536 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T20:43:10.951737+0200 ERROR Cannot render window for state <State 'ChannelPoster:select_channel_topic'>
2024-02-19T20:43:10.952738+0200 INFO Update id=59134537 is not handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:43:10.954738+0200 ERROR Cause exception while process update id=59134537 by bot id=6902908236
KeyError: 'channel_topics'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000161112504A0>
    │       └ <function run at 0x0000016108D4C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016111205E40>
           │      └ <function Runner.run at 0x0000016108DE0900>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016108DDA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016108EA6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016108DE0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016108D1DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x161111943d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000016111174190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000016111174190>
                     │    └ <function Dispatcher.feed_update at 0x000001610EBDE7A0>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001611139B050>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016111195CD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001611139B810>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000161117CF8C0>
          │    │   │      │    └ KeyError('channel_topics')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000016111800310>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000016111D13B50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001611139BCD0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000016111357600>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134537, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000016111A61260>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x161111943d0'>>, Update(update_id=59134537, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001610EBDDDA0>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABBD80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113995D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABAD40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113A8E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000161114274D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111C05080>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000016111ABACA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dialog(<StatesGroup 'MainMenu'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000001610EBDD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113E8AD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x00000161114272D0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000001610F0D4180>, <function CallableObject.call at 0x0000016111C05...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x0000016111C05260>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'MainMenu'>)>>, CallbackQuery(id='7898361887...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
          │      │                │                 └ <Dialog(<StatesGroup 'MainMenu'>)>
          │      │                └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000001610F116F20>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
          │    │        │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
          │    │        │                └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000001610EF07EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
          └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E7A90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                 │    │                       └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001610F097380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x00000161113E78D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
             │ │                │         └ <Dialog(<StatesGroup 'MainMenu'>)>
             │ │                └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001610EF07EC0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001610EF24B80>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        │             └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001610EF06020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │    │        └ CallbackQuery(id='7898361887395870765', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x00000161113E7810>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       │     │    └ <State 'ChannelPoster:select_channel_topic'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x00000161113E7750>
          │       └ <function ManagerImpl.start at 0x000001610F107F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'ChannelPoster:select_channel_topic'>
          │    └ <function ManagerImpl._start_normal at 0x000001610F114180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001610F114540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                        │    └ <function ManagerImpl.dialog at 0x000001610F107880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000001610F116FC0>
                        └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000001610F116D40>
                       └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
                     └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000001610F097240>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000016111415E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function ScrollingGroup._render_keyboard at 0x000001610F0AAA20>
                 └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
                     │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                     │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                     │    └ <function ScrollingGroup._render_contents at 0x000001610F0AA840>
                     └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x0000016111415BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
                                          │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                                          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000001610EF07BA0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000016111D270D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000001610F0AB100>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_session...
                               │    └ operator.itemgetter('channel_topics')
                               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x0000016111415A50>

KeyError: 'channel_topics'
2024-02-19T20:43:11.959158+0200 INFO Update id=59134538 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:43:12.400405+0200 INFO Update id=59134539 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:43:13.298850+0200 INFO Update id=59134540 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T20:43:13.331850+0200 INFO Update id=59134541 is not handled. Duration 233 ms by bot id=6902908236
2024-02-19T20:43:13.332851+0200 ERROR Cause exception while process update id=59134541 by bot id=6902908236
OutdatedIntent: Outdated intent id (XTmjx1) for stack ()
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000161112504A0>
    │       └ <function run at 0x0000016108D4C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000016111205E40>
           │      └ <function Runner.run at 0x0000016108DE0900>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000016108DDA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000016107149990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000016108EA6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000016108DE0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000016108D1DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x161111943d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000016111174190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000016111174190>
                     │    └ <function Dispatcher.feed_update at 0x000001610EBDE7A0>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001611139B050>
                     └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000016111195CD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001611139B810>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000016111D3A580>
          │    │   │      │    └ OutdatedIntent('Outdated intent id (XTmjx1) for stack ()')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.OutdatedIntent'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000161118005E0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000016111D49310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001611139BCD0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x00000161118BBB00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000161113AAF50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001611139BF50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134541, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000016111ABAC00>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x161111943d0'>>, Update(update_id=59134541, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361890092653465', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001610EBDDDA0>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361890092653465', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001611141D260>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113995D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001610EBDDE40>
                 └ <Dispatcher '0x161111943d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361890092653465', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001610EBDDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x161111943d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361890092653465', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000161118BBC40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001610EBDCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000161113A8E50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x000001610F0D51C0>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000016111427310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 129, in _load_context_by_intent
    self._check_outdated(intent_id, stack)
    │    │               │          └ Stack(_id='', intents=['XvHk7', 'XTmjx1', 'hAgZC2'], last_message_id=3783, last_reply_keyboard=False, last_media_id=None, las...
    │    │               └ 'XTmjx1'
    │    └ <function IntentMiddlewareFactory._check_outdated at 0x000001610F0D4FE0>
    └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000016111427310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 62, in _check_outdated
    raise OutdatedIntent(
          └ <class 'aiogram_dialog.api.exceptions.OutdatedIntent'>

aiogram_dialog.api.exceptions.OutdatedIntent: Outdated intent id (XTmjx1) for stack ()
2024-02-19T20:46:46.223169+0200 INFO Polling stopped
2024-02-19T20:46:46.487185+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:46:46.491186+0200 INFO Update id=59134542 is not handled. Duration 210842 ms by bot id=6902908236
2024-02-19T20:46:46.493184+0200 INFO Update id=59134543 is not handled. Duration 209437 ms by bot id=6902908236
2024-02-19T20:46:46.494185+0200 INFO Bot stopped!
2024-02-19T20:46:50.543870+0200 INFO Start polling
2024-02-19T20:46:50.597419+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:47:49.456083+0200 INFO Polling stopped
2024-02-19T20:47:49.713651+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:47:49.714651+0200 INFO Bot stopped!
2024-02-19T20:47:53.120662+0200 INFO Start polling
2024-02-19T20:47:53.169221+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:47:55.700683+0200 INFO Update id=59134544 is handled. Duration 342 ms by bot id=6902908236
2024-02-19T20:47:57.374693+0200 INFO Update id=59134545 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T20:48:00.724547+0200 INFO Update id=59134546 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:48:01.822759+0200 INFO Update id=59134547 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T20:48:02.287768+0200 ERROR Cannot render window for state <State 'ChannelPoster:select_channel_topic'>
2024-02-19T20:48:02.288768+0200 INFO Update id=59134548 is not handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:48:02.292768+0200 ERROR Cause exception while process update id=59134548 by bot id=6902908236
KeyError: 'channel_topics'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002AF094C04A0>
    │       └ <function run at 0x000002AF7FB3C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002AF09475E40>
           │      └ <function Runner.run at 0x000002AF7FBD0900>
           └ <asyncio.runners.Runner object at 0x000002AF7F349950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002AF7FBCA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002AF7F349950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000002AF7FC96340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002AF7FBD0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002AF7FB0DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2af093d80d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002AF095C9D90>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002AF095C9D90>
                     │    └ <function Dispatcher.feed_update at 0x000002AF06E527A0>
                     └ <Dispatcher '0x2af093d80d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002AF06E50FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002AF09406510>
                     └ <Dispatcher '0x2af093d80d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002AF0960BD10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002AF0960BC50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002AF09E32240>
          │    │   │      │    └ KeyError('channel_topics')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002AF09A71120>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002AF09D90350>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002AF09610510>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000002AF095C7600>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002AF09613610>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002AF09407110>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134548, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000002AF09CD25C0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2af093d80d0'>>, Update(update_id=59134548, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002AF06E51DA0>
                 └ <Dispatcher '0x2af093d80d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002AF09CD2700>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002AF06E50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002AF09609ED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002AF06E51E40>
                 └ <Dispatcher '0x2af093d80d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002AF06E51DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002AF09CD1260>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002AF06E50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002AF09611590>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002AF09697D10>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002AF09CD27A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002AF06E51E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002AF06E51DA0>
                     └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002AF0968D080>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002AF06E50FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002AF09661A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002AF06E51E40>
                 └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002AF06E51120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002AF09661A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002AF09613650>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002AF09407110>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002AF09697B50>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002AF07344180>, <function CallableObject.call at 0x000002AF09CD1...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002AF09CD1080>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'PersonalCabinet'>)>>, CallbackQuery(id='166...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
          │      │                │                 └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
          │      │                └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000002AF07386F20>
          └ <Window(<State 'PersonalCabinet:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
          │    │        │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
          │    │        │                └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000002AF07177EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09660A50>
          └ <Window(<State 'PersonalCabinet:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                 │    │                       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002AF07307380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09660A50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
             │ │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
             │ │                └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002AF07177EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09660850>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                 │    │                       │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                 │    │                       └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002AF07307380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09660850>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
             │ │                │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
             │ │                └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002AF07177EC0>
             └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000002AF07194B80>
                 └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
          │    │        │             └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000002AF07176020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002AF096607D0>
          └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
          │    │        │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
          │    │        └ CallbackQuery(id='1663765556654175959', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <bound method Start._on_click of <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002AF096607D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
          │       │     │    │      │    │           │    └ <StartMode.NORMAL: 'NORMAL'>
          │       │     │    │      │    │           └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
          │       │     │    │      │    └ None
          │       │     │    │      └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
          │       │     │    └ <State 'ChannelPoster:select_channel_topic'>
          │       │     └ <aiogram_dialog.widgets.kbd.state.Start object at 0x000002AF09660710>
          │       └ <function ManagerImpl.start at 0x000002AF07377F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'ChannelPoster:select_channel_topic'>
          │    └ <function ManagerImpl._start_normal at 0x000002AF07384180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000002AF07384540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                        │    └ <function ManagerImpl.dialog at 0x000002AF07377880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000002AF07386FC0>
                        └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                       │    │          │             └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                       │    │          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                       │    └ <function Window.render_kbd at 0x000002AF07386D40>
                       └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
                     │    │        │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                     │    │        │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                     │    │        └ <function Keyboard.render_keyboard at 0x000002AF07177BA0>
                     │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09686890>
                     └ <Window(<State 'ChannelPoster:select_channel_topic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                 │    └ <function Group._render_keyboard at 0x000002AF07307240>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002AF09686890>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000002AF07177BA0>
                  └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x000002AF09686610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                 │    └ <function ScrollingGroup._render_keyboard at 0x000002AF0731AA20>
                 └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x000002AF09686610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
                     │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                     │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                     │    └ <function ScrollingGroup._render_contents at 0x000002AF0731A840>
                     └ <aiogram_dialog.widgets.kbd.scrolling_group.ScrollingGroup object at 0x000002AF09686610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
                                          │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                                          └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
                  │ │               │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                  │ │               └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                  │ └ <function Keyboard.render_keyboard at 0x000002AF07177BA0>
                  └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002AF096865D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
                 │    │                │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002AF09E263D0>
                 │    │                └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                 │    └ <function Select._render_keyboard at 0x000002AF0731B100>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002AF096865D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               │    │            └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2af093d80d0'>, 'session_pool': async_session...
                               │    └ operator.itemgetter('channel_topics')
                               └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002AF096865D0>

KeyError: 'channel_topics'
2024-02-19T20:48:54.786045+0200 INFO Polling stopped
2024-02-19T20:48:55.040045+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:48:55.042048+0200 INFO Bot stopped!
2024-02-19T20:48:58.351185+0200 INFO Start polling
2024-02-19T20:48:58.395269+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:49:04.644457+0200 INFO Update id=59134549 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T20:49:06.788819+0200 INFO Update id=59134550 is handled. Duration 172 ms by bot id=6902908236
2024-02-19T20:49:07.657986+0200 INFO Update id=59134551 is handled. Duration 109 ms by bot id=6902908236
2024-02-19T20:49:27.983690+0200 ERROR Cannot get window data for state <State 'ChannelPoster:show_channels'>
2024-02-19T20:49:27.984691+0200 INFO Update id=59134552 is not handled. Duration 0 ms by bot id=6902908236
2024-02-19T20:49:27.988690+0200 ERROR Cause exception while process update id=59134552 by bot id=6902908236
TypeError: cannot unpack non-iterable int object
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002288C6304A0>
    │       └ <function run at 0x00000228840AC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002288C5E9E40>
           │      └ <function Runner.run at 0x0000022884150900>
           └ <asyncio.runners.Runner object at 0x000002288C55DE10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002288413A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002288C55DE10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000022884216340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000022884150180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002288407DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2288c55cf90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002288C4A3F50>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002288C4A3F50>
                     │    └ <function Dispatcher.feed_update at 0x0000022889FC27A0>
                     └ <Dispatcher '0x2288c55cf90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022889FC0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002288C572AD0>
                     └ <Dispatcher '0x2288c55cf90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002288C55DCD0>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002288C77BE10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002288CD760C0>
          │    │   │      │    └ TypeError('cannot unpack non-iterable int object')
          │    │   │      └ <class 'TypeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002288CBE14E0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002288CD3F450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002288C539B50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000002288CC9BC40>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002288C48F350>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002288C7882D0>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134552, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000002288CC9B6A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2288c55cf90'>>, Update(update_id=59134552, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000022889FC1DA0>
                 └ <Dispatcher '0x2288c55cf90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002288CE40180>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022889FC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002288C779C90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022889FC1E40>
                 └ <Dispatcher '0x2288c55cf90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022889FC1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002288CE400E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022889FC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002288C789290>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002288C807910>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002288CE42FC0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022889FC1E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000022889FC1DA0>
                     └ <Dialog(<StatesGroup 'ChannelPoster'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002288CE42840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000022889FC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002288C7F7850>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000022889FC1E40>
                 └ <Dialog(<StatesGroup 'ChannelPoster'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000022889FC1120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002288C7F7850>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002288C571410>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002288C7882D0>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002288C807750>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002288A4B4180>, <function CallableObject.call at 0x000002288CE41...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2288c55cf90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765558936039095', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002288CE411C0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'ChannelPoster'>)>>, CallbackQuery(id='16637...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x000002288A4F4540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
                        │    └ <function ManagerImpl.dialog at 0x000002288A4E3880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
                        │      │      └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                        │      └ <function Window.render at 0x000002288A4F6FC0>
                        └ <Window(<State 'ChannelPoster:show_channels'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
                         │    │         └ <Dialog(<StatesGroup 'ChannelPoster'>)>
                         │    └ <function Window.load_data at 0x000002288A4F6DE0>
                         └ <Window(<State 'ChannelPoster:show_channels'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000002288A4E9670>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002288CD77790>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002288C7F69D0>
    │    │            └ <Window(<State 'ChannelPoster:show_channels'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_channel_topic': 'casino'}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2288c55cf9...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_selected_topic at 0x000002288C537380>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002288C7F69D0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 57, in get_selected_topic
    'channels_list': [(channel_id, f"{channel_data['channel_name']}-{channel_data['amount_subs']}") for channel_id, channel_data in channels]
                                                                                                                                    └ {1: {'channel_name': 'TEST CHANNEL 1', 'channel_topic': 'Новости', 'amount_subs': 1043, 'min_price': 100, 'audience': '20/40'...

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 57, in <listcomp>
    'channels_list': [(channel_id, f"{channel_data['channel_name']}-{channel_data['amount_subs']}") for channel_id, channel_data in channels]
                                                                                                                                    └ {1: {'channel_name': 'TEST CHANNEL 1', 'channel_topic': 'Новости', 'amount_subs': 1043, 'min_price': 100, 'audience': '20/40'...

TypeError: cannot unpack non-iterable int object
2024-02-19T20:49:39.369558+0200 INFO Polling stopped
2024-02-19T20:49:39.628798+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:49:39.630797+0200 INFO Bot stopped!
2024-02-19T20:49:42.769086+0200 INFO Start polling
2024-02-19T20:49:42.819086+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:49:43.919073+0200 INFO Update id=59134553 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T20:50:14.770103+0200 INFO Polling stopped
2024-02-19T20:50:15.027103+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:50:15.028103+0200 INFO Bot stopped!
2024-02-19T20:50:18.315062+0200 INFO Start polling
2024-02-19T20:50:18.358721+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:50:38.136540+0200 INFO Update id=59134554 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T20:50:39.252479+0200 INFO Update id=59134555 is handled. Duration 139 ms by bot id=6902908236
2024-02-19T20:50:40.748573+0200 INFO Update id=59134556 is handled. Duration 280 ms by bot id=6902908236
2024-02-19T20:50:41.837639+0200 INFO Update id=59134557 is handled. Duration 250 ms by bot id=6902908236
2024-02-19T20:51:17.212925+0200 INFO Polling stopped
2024-02-19T20:51:17.469997+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:51:17.470998+0200 INFO Bot stopped!
2024-02-19T20:51:20.531437+0200 INFO Start polling
2024-02-19T20:51:20.578990+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:51:21.025655+0200 INFO Update id=59134558 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T20:51:22.821275+0200 INFO Update id=59134559 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:51:23.652372+0200 INFO Update id=59134560 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:51:25.144654+0200 INFO Update id=59134561 is handled. Duration 407 ms by bot id=6902908236
2024-02-19T20:51:28.802861+0200 INFO Update id=59134562 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:51:29.723476+0200 INFO Update id=59134563 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:51:31.421402+0200 INFO Update id=59134564 is handled. Duration 109 ms by bot id=6902908236
2024-02-19T20:51:33.212480+0200 INFO Update id=59134565 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:51:33.852433+0200 INFO Update id=59134566 is handled. Duration 110 ms by bot id=6902908236
2024-02-19T20:51:35.346333+0200 INFO Update id=59134567 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:51:36.241679+0200 INFO Update id=59134568 is handled. Duration 296 ms by bot id=6902908236
2024-02-19T20:51:36.938192+0200 INFO Update id=59134569 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:51:53.545333+0200 INFO Polling stopped
2024-02-19T20:51:53.797716+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:51:53.799716+0200 INFO Bot stopped!
2024-02-19T20:51:57.085988+0200 INFO Start polling
2024-02-19T20:51:57.131987+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:52:01.043815+0200 INFO Update id=59134570 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:52:04.998935+0200 INFO Update id=59134571 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:52:07.504956+0200 INFO Update id=59134572 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:52:08.393457+0200 INFO Update id=59134573 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:52:08.879762+0200 INFO Update id=59134574 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:52:11.093103+0200 INFO Update id=59134575 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:52:11.828618+0200 INFO Update id=59134576 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:52:12.981744+0200 INFO Update id=59134577 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:52:13.723566+0200 INFO Update id=59134578 is handled. Duration 172 ms by bot id=6902908236
2024-02-19T20:52:14.902420+0200 INFO Update id=59134579 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:52:16.011920+0200 INFO Update id=59134580 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:52:16.908695+0200 INFO Update id=59134581 is handled. Duration 203 ms by bot id=6902908236
2024-02-19T20:52:18.192293+0200 INFO Update id=59134582 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:52:58.516585+0200 INFO Polling stopped
2024-02-19T20:52:58.775002+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:52:58.775991+0200 INFO Bot stopped!
2024-02-19T20:53:02.174699+0200 INFO Start polling
2024-02-19T20:53:02.231699+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T20:53:08.667748+0200 INFO Update id=59134583 is handled. Duration 453 ms by bot id=6902908236
2024-02-19T20:53:10.051167+0200 INFO Update id=59134584 is handled. Duration 593 ms by bot id=6902908236
2024-02-19T20:53:10.994484+0200 INFO Update id=59134585 is handled. Duration 233 ms by bot id=6902908236
2024-02-19T20:53:12.337061+0200 INFO Update id=59134586 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:53:14.430362+0200 INFO Update id=59134587 is handled. Duration 202 ms by bot id=6902908236
2024-02-19T20:53:15.013412+0200 INFO Update id=59134588 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:53:16.161932+0200 INFO Update id=59134589 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T20:53:17.229463+0200 INFO Update id=59134590 is handled. Duration 219 ms by bot id=6902908236
2024-02-19T20:53:17.938507+0200 INFO Update id=59134591 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:53:20.218716+0200 INFO Update id=59134592 is handled. Duration 219 ms by bot id=6902908236
2024-02-19T20:53:21.038342+0200 INFO Update id=59134593 is handled. Duration 312 ms by bot id=6902908236
2024-02-19T20:53:21.809560+0200 INFO Update id=59134594 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:53:23.063566+0200 INFO Update id=59134595 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T20:53:23.994729+0200 INFO Update id=59134596 is handled. Duration 342 ms by bot id=6902908236
2024-02-19T20:53:27.698514+0200 INFO Update id=59134597 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:53:29.614321+0200 INFO Update id=59134598 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T20:53:30.292354+0200 INFO Update id=59134599 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:53:31.773136+0200 INFO Update id=59134600 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:53:32.253137+0200 INFO Update id=59134601 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:53:32.831135+0200 INFO Update id=59134602 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:53:33.295136+0200 INFO Update id=59134603 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:53:33.907650+0200 INFO Update id=59134604 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:54:48.604330+0200 INFO Update id=59134605 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T20:54:50.308598+0200 INFO Update id=59134606 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:54:53.604289+0200 INFO Update id=59134607 is handled. Duration 219 ms by bot id=6902908236
2024-02-19T20:54:55.251045+0200 INFO Update id=59134608 is handled. Duration 217 ms by bot id=6902908236
2024-02-19T20:55:07.587801+0200 INFO Update id=59134609 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:55:08.681649+0200 INFO Update id=59134610 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:55:09.698144+0200 INFO Update id=59134611 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:55:10.634578+0200 INFO Update id=59134612 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:55:13.700099+0200 INFO Update id=59134613 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:55:18.266537+0200 INFO Update id=59134614 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:55:22.919952+0200 INFO Update id=59134615 is handled. Duration 140 ms by bot id=6902908236
2024-02-19T20:55:24.352880+0200 INFO Update id=59134616 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:55:25.140439+0200 INFO Update id=59134617 is handled. Duration 155 ms by bot id=6902908236
2024-02-19T20:55:27.333534+0200 INFO Update id=59134618 is handled. Duration 375 ms by bot id=6902908236
2024-02-19T20:55:28.201906+0200 INFO Update id=59134619 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:55:29.576751+0200 INFO Update id=59134620 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:55:30.220878+0200 INFO Update id=59134621 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T20:55:34.807317+0200 INFO Update id=59134622 is handled. Duration 265 ms by bot id=6902908236
2024-02-19T20:55:37.210164+0200 INFO Update id=59134623 is handled. Duration 406 ms by bot id=6902908236
2024-02-19T20:55:40.706817+0200 INFO Update id=59134624 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:55:42.441032+0200 INFO Update id=59134625 is handled. Duration 187 ms by bot id=6902908236
2024-02-19T20:55:52.729592+0200 INFO Update id=59134626 is handled. Duration 141 ms by bot id=6902908236
2024-02-19T20:55:54.278619+0200 INFO Update id=59134627 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:55:56.665428+0200 INFO Update id=59134628 is handled. Duration 156 ms by bot id=6902908236
2024-02-19T20:55:59.572918+0200 INFO Update id=59134629 is handled. Duration 171 ms by bot id=6902908236
2024-02-19T20:56:01.113761+0200 INFO Update id=59134630 is handled. Duration 139 ms by bot id=6902908236
2024-02-19T20:56:01.870461+0200 INFO Update id=59134631 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T20:56:02.916061+0200 INFO Update id=59134632 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T20:56:03.583600+0200 INFO Update id=59134633 is handled. Duration 266 ms by bot id=6902908236
2024-02-19T20:56:06.436791+0200 INFO Update id=59134634 is handled. Duration 234 ms by bot id=6902908236
2024-02-19T20:56:07.986590+0200 INFO Update id=59134635 is handled. Duration 125 ms by bot id=6902908236
2024-02-19T23:15:24.382766+0200 INFO Polling stopped
2024-02-19T23:15:24.646789+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-19T23:15:24.649788+0200 INFO Bot stopped!
2024-02-20T12:26:25.702746+0200 INFO Start polling
2024-02-20T12:26:25.917745+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:27:24.773374+0200 INFO Update id=59134641 is handled. Duration 891 ms by bot id=6902908236
2024-02-20T12:27:28.603627+0200 INFO Update id=59134642 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T12:27:31.794851+0200 INFO Update id=59134643 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T12:28:11.265817+0200 INFO Polling stopped
2024-02-20T12:28:11.529817+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:28:11.530820+0200 INFO Bot stopped!
2024-02-20T12:28:14.998503+0200 INFO Start polling
2024-02-20T12:28:15.143501+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:28:16.654210+0200 INFO Update id=59134644 is handled. Duration 782 ms by bot id=6902908236
2024-02-20T12:28:19.582000+0200 INFO Update id=59134645 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T12:28:21.221945+0200 INFO Update id=59134646 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T12:28:22.690268+0200 INFO Update id=59134647 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T12:28:33.186101+0200 INFO Update id=59134648 is handled. Duration 359 ms by bot id=6902908236
2024-02-20T12:28:35.146999+0200 INFO Update id=59134649 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T12:28:39.818976+0200 INFO Update id=59134650 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T12:28:40.432682+0200 INFO Update id=59134651 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T12:28:40.882049+0200 INFO Update id=59134652 is handled. Duration 468 ms by bot id=6902908236
2024-02-20T12:28:41.511118+0200 INFO Update id=59134653 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T12:28:47.622761+0200 INFO Update id=59134654 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T12:28:47.643761+0200 ERROR Cause exception while process update id=59134654 by bot id=6902908236
ValueError: Cannot switch to another state group. Current state: <State 'CreateOffer:select_source'>, asked for <State 'CreateOfferFromTGTraffic:select_topic'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002E58D401800>
    │       └ <function run at 0x000002E584E7C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002E58D3C2040>
           │      └ <function Runner.run at 0x000002E584F20900>
           └ <asyncio.runners.Runner object at 0x000002E58D344CD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002E584F0A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002E58D344CD0>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000002E584FE6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002E584F20180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002E584E4DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2e58b301c50'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002E58D44DFD0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002E58D44DFD0>
                     │    └ <function Dispatcher.feed_update at 0x000002E58AD8E7A0>
                     └ <Dispatcher '0x2e58b301c50'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002E58AD8CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002E58D32CF90>
                     └ <Dispatcher '0x2e58b301c50'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002E58D555790>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002E58D555390>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002E58DF94C80>
          │    │   │      │    └ ValueError("Cannot switch to another state group. Current state: <State 'CreateOffer:select_source'>, asked for <State 'Creat...
          │    │   │      └ <class 'ValueError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002E58D9E53F0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002E58DF7F550>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002E58D30A110>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000002E58DB56CA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002E58D55CE50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002E58D32F290>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134654, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000002E58DB56DE0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2e58b301c50'>>, Update(update_id=59134654, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002E58AD8DDA0>
                 └ <Dispatcher '0x2e58b301c50'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002E58DB57F60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002E58AD8CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002E58D5475D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002E58AD8DE40>
                 └ <Dispatcher '0x2e58b301c50'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002E58AD8DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002E58DD865C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002E58AD8CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002E58D556D50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002E58D972390>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002E58DD86DE0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002E58AD8DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002E58AD8DDA0>
                     └ <Dialog(<StatesGroup 'CreateOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002E58DB56980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002E58AD8CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002E58D5F4B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002E58AD8DE40>
                 └ <Dialog(<StatesGroup 'CreateOffer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000002E58AD8D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002E58D5F4B90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002E58D55CE90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002E58D32F290>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002E58D972190>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000002E58B284180>, <function CallableObject.call at 0x000002E58DF1D...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2e58b301c50'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000002E58DF1D800>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'CreateOffer'>)>>, CallbackQuery(id='1663765...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
          │      │                │                 └ <Dialog(<StatesGroup 'CreateOffer'>)>
          │      │                └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x000002E58B2C6F20>
          └ <Window(<State 'CreateOffer:select_source'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
          │    │        │                │         └ <Dialog(<StatesGroup 'CreateOffer'>)>
          │    │        │                └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x000002E58B0B7EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002E58D5EF010>
          └ <Window(<State 'CreateOffer:select_source'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
                 │    │                       │         └ <Dialog(<StatesGroup 'CreateOffer'>)>
                 │    │                       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002E58B247380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002E58D5EF010>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
             │ │                │         └ <Dialog(<StatesGroup 'CreateOffer'>)>
             │ │                └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002E58B0B7EC0>
             └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002E58D5EEDD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
                 │    │                       │         └ <Dialog(<StatesGroup 'CreateOffer'>)>
                 │    │                       └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x000002E58B247380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002E58D5EEDD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
             │ │                │         └ <Dialog(<StatesGroup 'CreateOffer'>)>
             │ │                └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x000002E58B0B7EC0>
             └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002E58D5EED90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
                 │    └ <function Select._process_item_callback at 0x000002E58B25B2E0>
                 └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002E58D5EED90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
          │    │        └ <function SimpleEventProcessor.process_event at 0x000002E58B0B6020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002E58D5EEE50>
          └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002E58D5EED90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ('tg_channel',)
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>
          │    │        │      └ <aiogram_dialog.widgets.kbd.select.Select object at 0x000002E58D5EED90>
          │    │        └ CallbackQuery(id='1663765557476730447', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_select_traffic_source at 0x000002E58D307F60>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002E58D5EEE50>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 29, in on_select_traffic_source
    return await dialog_manager.switch_to(states.CreateOfferFromTGTraffic.select_topic)
                 │              │         │      │                        └ <State 'CreateOfferFromTGTraffic:select_topic'>
                 │              │         │      └ <class 'bot.dialogs.channel_admin_menu.states.CreateOfferFromTGTraffic'>
                 │              │         └ <module 'bot.dialogs.channel_admin_menu.states' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\channel_admin_menu\\states....
                 │              └ <function ManagerImpl.switch_to at 0x000002E58B2C4400>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002E58DF7DE50>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 299, in switch_to
    raise ValueError(

ValueError: Cannot switch to another state group. Current state: <State 'CreateOffer:select_source'>, asked for <State 'CreateOfferFromTGTraffic:select_topic'>
2024-02-20T12:28:56.996657+0200 INFO Polling stopped
2024-02-20T12:28:57.254973+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:28:57.255978+0200 INFO Bot stopped!
2024-02-20T12:29:00.757969+0200 INFO Start polling
2024-02-20T12:29:00.878020+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:29:16.856072+0200 INFO Update id=59134656 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T12:29:20.068039+0200 INFO Update id=59134657 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T12:29:21.309198+0200 INFO Update id=59134658 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T12:29:31.274580+0200 INFO Update id=59134659 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T12:29:34.341470+0200 ERROR Cannot get window data for state <State 'CreateOfferFromTGTraffic:select_channel'>
2024-02-20T12:29:34.342471+0200 INFO Update id=59134660 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T12:29:34.347471+0200 ERROR Cause exception while process update id=59134660 by bot id=6902908236
KeyError: 'selected_channel_topic'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001DAC5201760>
    │       └ <function run at 0x000001DABCCAC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001DAC51C1F40>
           │      └ <function Runner.run at 0x000001DABCD40900>
           └ <asyncio.runners.Runner object at 0x000001DABB0A9950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001DABCD3A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001DABB0A9950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001DABCE06340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001DABCD40180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001DABCC7DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1dac5124450'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001DAC510B190>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001DAC510B190>
                     │    └ <function Dispatcher.feed_update at 0x000001DAC2B927A0>
                     └ <Dispatcher '0x1dac5124450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DAC2B90FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DAC5358F50>
                     └ <Dispatcher '0x1dac5124450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001DAC5359310>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001DAC5359250>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001DAC5CAFA80>
          │    │   │      │    └ KeyError('selected_channel_topic')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001DAC57E56C0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001DAC5C3EE50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001DAC507C610>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000001DAC53F3060>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001DAC5360DD0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001DAC5109710>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134660, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000001DAC59576A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1dac5124450'>>, Update(update_id=59134660, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001DAC2B91DA0>
                 └ <Dispatcher '0x1dac5124450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001DAC59572E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DAC2B90FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DAC534F450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001DAC2B91E40>
                 └ <Dispatcher '0x1dac5124450'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001DAC2B91DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001DAC5957560>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DAC2B90FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DAC535AB50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001DAC5771ED0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001DAC5956980>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001DAC2B91E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001DAC2B91DA0>
                     └ <Dialog(<StatesGroup 'CreateOfferFromTGTraffic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001DAC5954F40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001DAC2B90FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DAC53FDC90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001DAC2B91E40>
                 └ <Dialog(<StatesGroup 'CreateOfferFromTGTraffic'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x000001DAC2B91120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001DAC53FDC90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001DAC5360C90>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001DAC5109710>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001DAC537F890>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x000001DAC3084180>, <function CallableObject.call at 0x000001DAC5CA5...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1dac5124450'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765554889478834', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x000001DAC5CA5940>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'CreateOfferFromTGTraffic'>)>>, CallbackQuer...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x000001DAC30C4540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
                        │    └ <function ManagerImpl.dialog at 0x000001DAC30B7880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
                        │      │      └ <Dialog(<StatesGroup 'CreateOfferFromTGTraffic'>)>
                        │      └ <function Window.render at 0x000001DAC30C6FC0>
                        └ <Window(<State 'CreateOfferFromTGTraffic:select_channel'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
                         │    │         └ <Dialog(<StatesGroup 'CreateOfferFromTGTraffic'>)>
                         │    └ <function Window.load_data at 0x000001DAC30C6DE0>
                         └ <Window(<State 'CreateOfferFromTGTraffic:select_channel'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000001DAC30B96C0>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001DAC53FCA10>
    │    │            └ <Window(<State 'CreateOfferFromTGTraffic:select_channel'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {'selected_topic': 'news'}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x1dac5124450'>, 'sess...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_selected_topic at 0x000001DAC5107380>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000001DAC53FCA10>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 52, in get_selected_topic
    if topic[0] == dialog_manager.dialog_data['selected_channel_topic']:
       │           │              └ <property object at 0x000001DAC30BA890>
       │           └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001DAC5CAE750>
       └ ('news', 'Новости')

KeyError: 'selected_channel_topic'
2024-02-20T12:30:05.389172+0200 INFO Polling stopped
2024-02-20T12:30:05.643524+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:30:05.644528+0200 INFO Bot stopped!
2024-02-20T12:30:09.698478+0200 INFO Start polling
2024-02-20T12:30:09.962664+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:30:13.090617+0200 INFO Update id=59134661 is handled. Duration 1625 ms by bot id=6902908236
2024-02-20T12:30:14.709087+0200 INFO Update id=59134662 is handled. Duration 1000 ms by bot id=6902908236
2024-02-20T12:30:15.967175+0200 INFO Update id=59134663 is handled. Duration 1000 ms by bot id=6902908236
2024-02-20T12:30:17.803612+0200 INFO Update id=59134664 is handled. Duration 1187 ms by bot id=6902908236
2024-02-20T12:30:20.599294+0200 INFO Update id=59134665 is handled. Duration 1297 ms by bot id=6902908236
2024-02-20T12:30:22.061885+0200 INFO Update id=59134666 is handled. Duration 1234 ms by bot id=6902908236
2024-02-20T12:30:23.350927+0200 INFO Update id=59134667 is handled. Duration 1422 ms by bot id=6902908236
2024-02-20T12:30:24.546770+0200 INFO Update id=59134668 is handled. Duration 875 ms by bot id=6902908236
2024-02-20T12:30:27.396004+0200 INFO Update id=59134669 is handled. Duration 1250 ms by bot id=6902908236
2024-02-20T12:30:29.186383+0200 INFO Update id=59134670 is handled. Duration 1202 ms by bot id=6902908236
2024-02-20T12:30:31.313621+0200 INFO Update id=59134671 is handled. Duration 1218 ms by bot id=6902908236
2024-02-20T12:30:37.944936+0200 INFO Update id=59134672 is handled. Duration 1312 ms by bot id=6902908236
2024-02-20T12:30:41.269893+0200 INFO Update id=59134673 is handled. Duration 1187 ms by bot id=6902908236
2024-02-20T12:30:46.344516+0200 INFO Update id=59134674 is handled. Duration 1187 ms by bot id=6902908236
2024-02-20T12:30:48.153818+0200 INFO Update id=59134675 is handled. Duration 1157 ms by bot id=6902908236
2024-02-20T12:30:54.360815+0200 INFO Update id=59134676 is handled. Duration 1203 ms by bot id=6902908236
2024-02-20T12:30:57.231457+0200 INFO Update id=59134677 is handled. Duration 1203 ms by bot id=6902908236
2024-02-20T12:49:17.011634+0200 INFO Polling stopped
2024-02-20T12:49:17.265777+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:49:17.266778+0200 INFO Bot stopped!
2024-02-20T12:49:20.534333+0200 INFO Start polling
2024-02-20T12:49:20.644371+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:49:26.496918+0200 INFO Update id=59134678 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T12:49:27.572738+0200 INFO Update id=59134679 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:49:28.851957+0200 INFO Update id=59134680 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T12:49:29.496045+0200 INFO Update id=59134681 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T12:49:30.498424+0200 INFO Update id=59134682 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T12:49:33.336896+0200 INFO Update id=59134683 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T12:49:45.209307+0200 INFO Polling stopped
2024-02-20T12:49:45.485367+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:49:45.487368+0200 INFO Bot stopped!
2024-02-20T12:49:48.571440+0200 INFO Start polling
2024-02-20T12:49:48.617967+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:49:53.623904+0200 INFO Update id=59134684 is handled. Duration 1608 ms by bot id=6902908236
2024-02-20T12:49:55.201503+0200 INFO Update id=59134685 is handled. Duration 890 ms by bot id=6902908236
2024-02-20T12:49:55.991050+0200 INFO Update id=59134686 is handled. Duration 905 ms by bot id=6902908236
2024-02-20T12:49:57.891250+0200 ERROR Cannot get window data for state <State 'PersonalCabinet:select_offer'>
2024-02-20T12:49:57.892251+0200 INFO Update id=59134687 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T12:49:57.896249+0200 ERROR Cause exception while process update id=59134687 by bot id=6902908236
KeyError: 'target_amount'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000021404321940>
    │       └ <function run at 0x000002147BDCC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000214042E5F40>
           │      └ <function Runner.run at 0x000002147BE60900>
           └ <asyncio.runners.Runner object at 0x000002147A1C9950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002147BE5A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002147A1C9950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000002147BF26340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002147BE60180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002147BD9DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2140446b310'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000021404193110>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000021404193110>
                     │    └ <function Dispatcher.feed_update at 0x0000021401CF27A0>
                     └ <Dispatcher '0x2140446b310'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021401CF0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021404479550>
                     └ <Dispatcher '0x2140446b310'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000021404479950>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000021404479890>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000021404DD2740>
          │    │   │      │    └ KeyError('target_amount')
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000021404909F30>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000021404CB7F50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002140447A150>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000021404A5AA20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000021404481390>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021404261090>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134687, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000021404438AE0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2140446b310'>>, Update(update_id=59134687, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000021401CF1DA0>
                 └ <Dispatcher '0x2140446b310'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021404DC9C60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021401CF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002140446BB10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021401CF1E40>
                 └ <Dispatcher '0x2140446b310'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021401CF1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021404DC99E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021401CF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002140447B210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x00000214048925D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000021404DC9DA0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021401CF1E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000021401CF1DA0>
                     └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000021404A5A840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000021401CF0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021404502DD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000021401CF1E40>
                 └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000021401CF1120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000021404502DD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000214044813D0>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000021404261090>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000021404892390>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x00000214021B4180>, <function CallableObject.call at 0x0000021404A5A...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765555204873359', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000021404A5A8E0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'PersonalCabinet'>)>>, CallbackQuery(id='166...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
          │              └ <function ManagerImpl.show at 0x00000214021F4540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
                        │    └ <function ManagerImpl.dialog at 0x00000214021E3880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
                        │      │      └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                        │      └ <function Window.render at 0x00000214021F6FC0>
                        └ <Window(<State 'PersonalCabinet:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
                         │    │         └ <Dialog(<StatesGroup 'PersonalCabinet'>)>
                         │    └ <function Window.load_data at 0x00000214021F6DE0>
                         └ <Window(<State 'PersonalCabinet:select_offer'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x00000214021E9580>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000021404DC2BD0>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021404501A10>
    │    │            └ <Window(<State 'PersonalCabinet:select_offer'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2140446b310'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_active_orders at 0x00000214042279C0>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x0000021404501A10>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 8, in get_active_orders
    offers_list = [

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 9, in <listcomp>
    (offer_key, f"{offer_value['offer_name'] if offer_value['offer_type'] == 'tg_channel_requests' else offer_value['casino_name']}-{offer_value['target_amount']}")
     └ 4

KeyError: 'target_amount'
2024-02-20T12:50:20.960054+0200 INFO Polling stopped
2024-02-20T12:50:21.220055+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:50:21.221058+0200 INFO Bot stopped!
2024-02-20T12:50:25.147687+0200 INFO Start polling
2024-02-20T12:50:25.447703+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T12:50:27.801634+0200 INFO Update id=59134688 is handled. Duration 1359 ms by bot id=6902908236
2024-02-20T12:50:29.467195+0200 INFO Update id=59134689 is handled. Duration 766 ms by bot id=6902908236
2024-02-20T12:50:32.230593+0200 INFO Update id=59134690 is handled. Duration 687 ms by bot id=6902908236
2024-02-20T12:50:33.267483+0200 INFO Update id=59134691 is handled. Duration 718 ms by bot id=6902908236
2024-02-20T12:50:34.694404+0200 INFO Update id=59134692 is handled. Duration 1092 ms by bot id=6902908236
2024-02-20T12:50:36.058928+0200 INFO Update id=59134693 is handled. Duration 1093 ms by bot id=6902908236
2024-02-20T12:50:37.444694+0200 INFO Update id=59134694 is handled. Duration 765 ms by bot id=6902908236
2024-02-20T12:50:40.786690+0200 INFO Update id=59134695 is handled. Duration 594 ms by bot id=6902908236
2024-02-20T12:50:42.326857+0200 INFO Update id=59134696 is handled. Duration 546 ms by bot id=6902908236
2024-02-20T12:50:43.661881+0200 INFO Update id=59134697 is handled. Duration 625 ms by bot id=6902908236
2024-02-20T12:50:46.337293+0200 INFO Update id=59134698 is handled. Duration 906 ms by bot id=6902908236
2024-02-20T12:50:47.372633+0200 INFO Update id=59134699 is handled. Duration 577 ms by bot id=6902908236
2024-02-20T12:52:23.332556+0200 INFO Update id=59134700 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T12:52:25.349054+0200 INFO Update id=59134701 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T12:52:26.558728+0200 INFO Update id=59134702 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:27.492393+0200 INFO Update id=59134703 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T12:52:37.592563+0200 INFO Update id=59134704 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T12:52:38.502746+0200 INFO Update id=59134705 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:39.656801+0200 INFO Update id=59134706 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T12:52:40.971667+0200 INFO Update id=59134707 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:42.151696+0200 INFO Update id=59134708 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:43.168797+0200 INFO Update id=59134709 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:44.312161+0200 INFO Update id=59134710 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:46.153959+0200 INFO Update id=59134711 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T12:52:46.966396+0200 INFO Update id=59134712 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T12:52:49.944461+0200 INFO Update id=59134713 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:04:28.637084+0200 INFO Update id=59134714 is handled. Duration 1391 ms by bot id=6902908236
2024-02-20T13:04:30.981124+0200 INFO Update id=59134715 is handled. Duration 516 ms by bot id=6902908236
2024-02-20T13:05:51.068493+0200 INFO Update id=59134716 is handled. Duration 796 ms by bot id=6902908236
2024-02-20T13:06:01.944756+0200 INFO Update id=59134717 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T13:06:08.688486+0200 INFO Update id=59134718 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:06:09.778529+0200 INFO Update id=59134719 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T13:06:10.499527+0200 INFO Update id=59134720 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:06:12.068605+0200 INFO Update id=59134721 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:06:15.045790+0200 INFO Update id=59134722 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T13:06:16.217826+0200 INFO Update id=59134723 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:06:17.074827+0200 INFO Update id=59134724 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T13:06:19.481866+0200 INFO Update id=59134725 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:06:20.556865+0200 INFO Update id=59134726 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:06:22.031867+0200 INFO Update id=59134727 is handled. Duration 562 ms by bot id=6902908236
2024-02-20T13:06:22.804866+0200 INFO Update id=59134728 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T13:06:23.466866+0200 INFO Update id=59134729 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T13:06:24.580866+0200 INFO Update id=59134730 is handled. Duration 530 ms by bot id=6902908236
2024-02-20T13:06:28.449908+0200 INFO Update id=59134731 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:06:39.413429+0200 INFO Update id=59134732 is not handled. Duration 15 ms by bot id=6902908236
2024-02-20T13:06:39.417429+0200 ERROR Cause exception while process update id=59134732 by bot id=6902908236
KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC49C11940>
    │       └ <function run at 0x000001CC4168C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC49BD5F40>
           │      └ <function Runner.run at 0x000001CC41730900>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC4171A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC417F6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC41730180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC4165DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1cc49b29d90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>
                     │    └ <function Dispatcher.feed_update at 0x000001CC4759E7A0>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D65350>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001CC49C5F090>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001CC49D65B10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001CC4A7FE2C0>
          │    │   │      │    └ KeyError(<RoleTypes.CHANNEL_ADMIN: 'channel_admin'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001CC4A1F56C0>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001CC4A812210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001CC49D65F50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x000001CC49E03240>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC479DD450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134732, message=Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x000001CC4A6B6160>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1cc49b29d90'>>, Update(update_id=59134732, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001CC4759DDA0>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A6B4A40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D5F210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A6B4860>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D66110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001CC4A182550>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A6B4540>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A6B6340>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │        └ <function TelegramEventObserver.trigger at 0x000001CC4759D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC49B53F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001CC49C5E490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<function context_saver_middleware at 0x000001CC47A94180>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001CC49C06D90>, <function CallableObject.ca...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6, 38, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ <function CallableObject.call at 0x000001CC4A6B4400>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001CC49C10400>, Message(message_id=3798, date=datetime.datetime(2024, 2, 20, 11, 6,...

  File "E:\PythonProjects\Arbitrix\bot\handlers\start.py", line 28, in start
    return await dialog_manager.start(menu_mapping[user_model.role], mode=StartMode.RESET_STACK)
                 │              │     │            │          │           │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │            │          │           └ <enum 'StartMode'>
                 │              │     │            │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001CC49A7D940>
                 │              │     │            └ <bot.db.models.models.Users object at 0x000001CC4A4788D0>
                 │              │     └ {<RoleTypes.WEB_MASTER: 'web_master'>: <State 'MainMenu:select_action'>, <RoleTypes.CHANNEL_OWNER: 'channel_owner'>: <State '...
                 │              └ <function ManagerImpl.start at 0x000001CC47AC3F60>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001CC4A810D10>

KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
2024-02-20T13:06:47.276055+0200 INFO Update id=59134733 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T13:06:47.278054+0200 ERROR Cause exception while process update id=59134733 by bot id=6902908236
KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC49C11940>
    │       └ <function run at 0x000001CC4168C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC49BD5F40>
           │      └ <function Runner.run at 0x000001CC41730900>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC4171A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC417F6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC41730180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC4165DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1cc49b29d90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>
                     │    └ <function Dispatcher.feed_update at 0x000001CC4759E7A0>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D65350>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001CC49C5F090>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001CC49D65B10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001CC49D873C0>
          │    │   │      │    └ KeyError(<RoleTypes.CHANNEL_ADMIN: 'channel_admin'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001CC4A1F7970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001CC4A7FEED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001CC49D65F50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x000001CC4A72C860>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC479DD450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134733, message=Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x000001CC4A34A8E0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1cc49b29d90'>>, Update(update_id=59134733, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001CC4759DDA0>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DB20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D5F210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DC60>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D66110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001CC4A182550>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DDA0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DD00>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                     │        └ <function TelegramEventObserver.trigger at 0x000001CC4759D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC49B53F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001CC49C5E490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ functools.partial(<function context_saver_middleware at 0x000001CC47A94180>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001CC49C06D90>, <function CallableObject.ca...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6, 46, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='p...
                 └ <function CallableObject.call at 0x000001CC4A72DBC0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001CC49C10400>, Message(message_id=3799, date=datetime.datetime(2024, 2, 20, 11, 6,...

  File "E:\PythonProjects\Arbitrix\bot\handlers\start.py", line 28, in start
    return await dialog_manager.start(menu_mapping[user_model.role], mode=StartMode.RESET_STACK)
                 │              │     │            │          │           │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │            │          │           └ <enum 'StartMode'>
                 │              │     │            │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001CC49A7D940>
                 │              │     │            └ <bot.db.models.models.Users object at 0x000001CC4A810E50>
                 │              │     └ {<RoleTypes.WEB_MASTER: 'web_master'>: <State 'MainMenu:select_action'>, <RoleTypes.CHANNEL_OWNER: 'channel_owner'>: <State '...
                 │              └ <function ManagerImpl.start at 0x000001CC47AC3F60>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001CC4A82C2D0>

KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
2024-02-20T13:07:05.687265+0200 INFO Update id=59134734 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T13:07:05.689263+0200 ERROR Cause exception while process update id=59134734 by bot id=6902908236
KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC49C11940>
    │       └ <function run at 0x000001CC4168C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC49BD5F40>
           │      └ <function Runner.run at 0x000001CC41730900>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC4171A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC417F6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC41730180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC4165DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1cc49b29d90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>
                     │    └ <function Dispatcher.feed_update at 0x000001CC4759E7A0>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D65350>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001CC49C5F090>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001CC49D65B10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001CC4A6CAF80>
          │    │   │      │    └ KeyError(<RoleTypes.CHANNEL_ADMIN: 'channel_admin'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001CC4A731C60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001CC4A481990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001CC49D65F50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ <function TelegramEventObserver.trigger at 0x000001CC49E02A20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC479DD450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134734, message=Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC))...
                 └ <function CallableObject.call at 0x000001CC4A6B59E0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1cc49b29d90'>>, Update(update_id=59134734, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001CC4759DDA0>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72E160>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D5F210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DE40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D66110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001CC4A182550>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72D9E0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72D800>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x000001CC4759D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC49B53F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001CC49C5E490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<function context_saver_middleware at 0x000001CC47A94180>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001CC49C06D90>, <function CallableObject.ca...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7, 4, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ <function CallableObject.call at 0x000001CC4A72DEE0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001CC49C10400>, Message(message_id=3800, date=datetime.datetime(2024, 2, 20, 11, 7,...

  File "E:\PythonProjects\Arbitrix\bot\handlers\start.py", line 28, in start
    return await dialog_manager.start(menu_mapping[user_model.role], mode=StartMode.RESET_STACK)
                 │              │     │            │          │           │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │            │          │           └ <enum 'StartMode'>
                 │              │     │            │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001CC49A7D940>
                 │              │     │            └ <bot.db.models.models.Users object at 0x000001CC4A82ED50>
                 │              │     └ {<RoleTypes.WEB_MASTER: 'web_master'>: <State 'MainMenu:select_action'>, <RoleTypes.CHANNEL_OWNER: 'channel_owner'>: <State '...
                 │              └ <function ManagerImpl.start at 0x000001CC47AC3F60>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001CC4A830150>

KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
2024-02-20T13:07:07.164304+0200 INFO Update id=59134735 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:07:09.079305+0200 INFO Update id=59134736 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:07:10.294304+0200 INFO Update id=59134737 is not handled. Duration 15 ms by bot id=6902908236
2024-02-20T13:07:10.296304+0200 ERROR Cause exception while process update id=59134737 by bot id=6902908236
KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC49C11940>
    │       └ <function run at 0x000001CC4168C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC49BD5F40>
           │      └ <function Runner.run at 0x000001CC41730900>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC4171A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC417F6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC41730180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC4165DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1cc49b29d90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>
                     │    └ <function Dispatcher.feed_update at 0x000001CC4759E7A0>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D65350>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001CC49C5F090>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001CC49D65B10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001CC4A19E940>
          │    │   │      │    └ KeyError(<RoleTypes.CHANNEL_ADMIN: 'channel_admin'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001CC4A1F7970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001CC4A7E4490>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001CC49D65F50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ <function TelegramEventObserver.trigger at 0x000001CC4A72E7A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC479DD450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134737, message=Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC))...
                 └ <function CallableObject.call at 0x000001CC4A6B59E0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1cc49b29d90'>>, Update(update_id=59134737, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001CC4759DDA0>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72E020>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D5F210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72CA40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D66110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001CC4A182550>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DE40>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72D9E0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x000001CC4759D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC49B53F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001CC49C5E490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ functools.partial(<function context_saver_middleware at 0x000001CC47A94180>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001CC49C06D90>, <function CallableObject.ca...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7, 9, tzinfo=TzInfo(UTC)), chat=Chat(id=6133947978, type='pr...
                 └ <function CallableObject.call at 0x000001CC4A72E160>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001CC49C10400>, Message(message_id=3801, date=datetime.datetime(2024, 2, 20, 11, 7,...

  File "E:\PythonProjects\Arbitrix\bot\handlers\start.py", line 28, in start
    return await dialog_manager.start(menu_mapping[user_model.role], mode=StartMode.RESET_STACK)
                 │              │     │            │          │           │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │            │          │           └ <enum 'StartMode'>
                 │              │     │            │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001CC49A7D940>
                 │              │     │            └ <bot.db.models.models.Users object at 0x000001CC4A830E10>
                 │              │     └ {<RoleTypes.WEB_MASTER: 'web_master'>: <State 'MainMenu:select_action'>, <RoleTypes.CHANNEL_OWNER: 'channel_owner'>: <State '...
                 │              └ <function ManagerImpl.start at 0x000001CC47AC3F60>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001CC4A830B10>

KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
2024-02-20T13:07:11.824348+0200 INFO Update id=59134738 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:07:12.608347+0200 INFO Update id=59134739 is handled. Duration 172 ms by bot id=6902908236
2024-02-20T13:07:13.962348+0200 INFO Update id=59134740 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:07:15.328348+0200 INFO Update id=59134741 is handled. Duration 467 ms by bot id=6902908236
2024-02-20T13:07:16.482348+0200 INFO Update id=59134742 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:07:46.747508+0200 INFO Update id=59134743 is handled. Duration 639 ms by bot id=6902908236
2024-02-20T13:07:48.372539+0200 INFO Update id=59134744 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T13:07:49.254539+0200 INFO Update id=59134745 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:07:50.941579+0200 INFO Update id=59134746 is handled. Duration 500 ms by bot id=6902908236
2024-02-20T13:07:54.791656+0200 INFO Update id=59134747 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T13:07:56.874657+0200 INFO Update id=59134748 is handled. Duration 405 ms by bot id=6902908236
2024-02-20T13:07:58.365471+0200 INFO Update id=59134749 is handled. Duration 405 ms by bot id=6902908236
2024-02-20T13:07:58.387473+0200 INFO Update id=59134750 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T13:07:58.389472+0200 ERROR Cause exception while process update id=59134750 by bot id=6902908236
KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001CC49C11940>
    │       └ <function run at 0x000001CC4168C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001CC49BD5F40>
           │      └ <function Runner.run at 0x000001CC41730900>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001CC4171A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001CC3FA29990>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001CC417F6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001CC41730180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001CC4165DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1cc49b29d90'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001CC48E4F8D0>
                     │    └ <function Dispatcher.feed_update at 0x000001CC4759E7A0>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D65350>
                     └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001CC49C5F090>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001CC49D65B10>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001CC4A863F80>
          │    │   │      │    └ KeyError(<RoleTypes.CHANNEL_ADMIN: 'channel_admin'>)
          │    │   │      └ <class 'KeyError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001CC4A1F7970>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001CC4A784E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001CC49D65F50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ <function TelegramEventObserver.trigger at 0x000001CC49D2A5C0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC479DD450>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134750, message=Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)...
                 └ <function CallableObject.call at 0x000001CC49D2B600>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1cc49b29d90'>>, Update(update_id=59134750, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x000001CC4759DDA0>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DEE0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D5F210>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Dispatcher '0x1cc49b29d90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72ED40>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC49D66110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 196, in process_message
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001CC4A182550>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DC60>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x000001CC4759DDA0>
                     └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001CC4A72DBC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001CC4759CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001CC4759DE40>
                 └ <Router '0x1cc49c040d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                     │        └ <function TelegramEventObserver.trigger at 0x000001CC4759D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001CC48DF2D90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001CC49B53F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001CC49D66190>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001CC49C5E490>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ functools.partial(<function context_saver_middleware at 0x000001CC47A94180>, functools.partial(<bot.middlewares.throttling.Th...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                   └ functools.partial(<bot.middlewares.throttling.ThrottlingMiddleware object at 0x000001CC49C06D90>, <function CallableObject.ca...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\throttling.py", line 65, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1cc49b29d90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='pr...
                 └ <function CallableObject.call at 0x000001CC4A72DE40>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<function start at 0x000001CC49C10400>, Message(message_id=3802, date=datetime.datetime(2024, 2, 20, 11, 7,...

  File "E:\PythonProjects\Arbitrix\bot\handlers\start.py", line 28, in start
    return await dialog_manager.start(menu_mapping[user_model.role], mode=StartMode.RESET_STACK)
                 │              │     │            │          │           │         └ <StartMode.RESET_STACK: 'RESET_STACK'>
                 │              │     │            │          │           └ <enum 'StartMode'>
                 │              │     │            │          └ <sqlalchemy.orm.attributes.InstrumentedAttribute object at 0x000001CC49A7D940>
                 │              │     │            └ <bot.db.models.models.Users object at 0x000001CC4A860390>
                 │              │     └ {<RoleTypes.WEB_MASTER: 'web_master'>: <State 'MainMenu:select_action'>, <RoleTypes.CHANNEL_OWNER: 'channel_owner'>: <State '...
                 │              └ <function ManagerImpl.start at 0x000001CC47AC3F60>
                 └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001CC4A8627D0>

KeyError: <RoleTypes.CHANNEL_ADMIN: 'channel_admin'>
2024-02-20T13:07:59.109567+0200 INFO Update id=59134751 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T13:08:01.322443+0200 INFO Update id=59134752 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T13:08:02.533309+0200 INFO Update id=59134753 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T13:08:04.429130+0200 INFO Update id=59134754 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:08:08.450085+0200 INFO Update id=59134755 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T13:08:09.579889+0200 INFO Update id=59134756 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:08:11.605455+0200 INFO Update id=59134757 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:08:12.887764+0200 INFO Update id=59134758 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:08:16.619588+0200 INFO Polling stopped
2024-02-20T13:08:16.890532+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:08:16.891533+0200 INFO Bot stopped!
2024-02-20T13:08:20.024917+0200 INFO Start polling
2024-02-20T13:08:20.118916+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:08:21.708149+0200 INFO Update id=59134760 is handled. Duration 671 ms by bot id=6902908236
2024-02-20T13:08:23.340550+0200 INFO Update id=59134761 is handled. Duration 516 ms by bot id=6902908236
2024-02-20T13:08:24.616447+0200 INFO Update id=59134762 is handled. Duration 500 ms by bot id=6902908236
2024-02-20T13:08:25.054013+0200 INFO Polling stopped
2024-02-20T13:08:25.314011+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:08:25.315011+0200 INFO Bot stopped!
2024-02-20T13:08:59.124968+0200 INFO Start polling
2024-02-20T13:08:59.170966+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:09:01.855376+0200 INFO Update id=59134768 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T13:09:04.019406+0200 INFO Update id=59134769 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:09:06.231926+0200 INFO Update id=59134770 is handled. Duration 172 ms by bot id=6902908236
2024-02-20T13:09:14.362197+0200 INFO Update id=59134771 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:10:11.381720+0200 INFO Update id=59134772 is handled. Duration 468 ms by bot id=6902908236
2024-02-20T13:10:33.537800+0200 INFO Polling stopped
2024-02-20T13:10:33.794358+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:10:33.795357+0200 INFO Bot stopped!
2024-02-20T13:10:37.059896+0200 INFO Start polling
2024-02-20T13:10:37.136960+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:10:38.354890+0200 INFO Update id=59134773 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T13:10:39.383417+0200 INFO Update id=59134774 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:10:40.201113+0200 INFO Update id=59134775 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:10:42.274518+0200 INFO Polling stopped
2024-02-20T13:10:42.336539+0200 INFO Update id=59134776 is not handled. Duration 94 ms by bot id=6902908236
2024-02-20T13:10:42.348557+0200 ERROR Cause exception while process update id=59134776 by bot id=6902908236
TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2672)
Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 170, in make_request
    async with session.post(
               │       └ <function ClientSession.post at 0x000001E53CC99B20>
               └ <aiohttp.client.ClientSession object at 0x000001E53F2F2250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client.py", line 1194, in __aenter__
    self._resp = await self._coro
    │    │             │    └ <member '_coro' of '_BaseRequestContextManager' objects>
    │    │             └ <aiohttp.client._RequestContextManager object at 0x000001E53F4C2A10>
    │    └ <member '_resp' of '_BaseRequestContextManager' objects>
    └ <aiohttp.client._RequestContextManager object at 0x000001E53F4C2A10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client.py", line 605, in _request
    await resp.start(conn)
          │    │     └ Connection<ConnectionKey(host='api.telegram.org', port=443, is_ssl=True, ssl=True, proxy=None, proxy_auth=None, proxy_headers...
          │    └ <function ClientResponse.start at 0x000001E53CBC9940>
          └ <ClientResponse(https://api.telegram.org/bot6902908236:AAEJYRp3cq0dNr6scM6OPmu8-hm_srV2Loo/editMessageText) [None None]>
            None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 966, in start
    message, payload = await protocol.read()  # type: ignore[union-attr]
                             │        └ <function DataQueue.read at 0x000001E53CB33F60>
                             └ <aiohttp.client_proto.ResponseHandler object at 0x000001E53FC01860>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\streams.py", line 622, in read
    await self._waiter
          │    └ None
          └ <aiohttp.client_proto.ResponseHandler object at 0x000001E53FC01860>

aiohttp.client_exceptions.ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2672)


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001E53F3B1940>
    │       └ <function run at 0x000001E536E2C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001E53F375E40>
           │      └ <function Runner.run at 0x000001E536ED0900>
           └ <asyncio.runners.Runner object at 0x000001E535219950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task cancelling name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001E536EBA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001E535219950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001E536F96340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001E536ED0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001E536DFDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x1e53f2c8b10'>, 'bots': (<aiogram.client.bot.Bot object at 0x000001E53D17E250>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
                     │    └ <function Dispatcher.feed_update at 0x000001E53CD3E7A0>
                     └ <Dispatcher '0x1e53f2c8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E53CD3CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E53F431410>
                     └ <Dispatcher '0x1e53f2c8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000001E53F509B10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000001E53F509A50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000001E53FA30200>
          │    │   │      │    └ TelegramNetworkError('HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data...
          │    │   │      └ <class 'aiogram.exceptions.TelegramNetworkError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000001E53F92DD50>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000001E53FAF3E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000001E53F50A310>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000001E53FAEA840>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E53F511510>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E53F50A350>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134776, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000001E53FAEAA20>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x1e53f2c8b10'>>, Update(update_id=59134776, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000001E53CD3DDA0>
                 └ <Dispatcher '0x1e53f2c8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E53FE68B80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E53CD3CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E53F4F7C90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E53CD3DE40>
                 └ <Dispatcher '0x1e53f2c8b10'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E53CD3DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E53FE689A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E53CD3CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E53F50B3D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000001E53F9228D0>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000001E53FE68CC0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E53CD3DE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000001E53CD3DDA0>
                     └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000001E53F5A31A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000001E53CD3CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E53F512690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000001E53CD3DE40>
                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000001E53CD3D120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000001E53F512690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000001E53F2DE410>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000001E53F50A350>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000001E53F922710>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000001E53D234180>, <function CallableObject.call at 0x000001E53FE68...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x1e53f2c8b10'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x000001E53FE68D60>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'FirstStartWindow'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
          │      │                │                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │      │                └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000001E53D276F20>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
          │    │        │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │    │        │                └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000001E53D067EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001E53F2CA7D0>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
                 │    │                       │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                 │    │                       └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000001E53D1F7380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000001E53F2CA7D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
             │ │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
             │ │                └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000001E53D067EC0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001E53F30AA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000001E53D084B80>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001E53F30AA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001E53F30AA50>
          │    │        │             └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000001E53D066020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001E53F30A9D0>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001E53F30AA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000001E53F30AA50>
          │    │        └ CallbackQuery(id='7898361891309784193', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <function on_select_webmaster at 0x000001E53F2B54E0>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000001E53F30A9D0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\start_menu\selected.py", line 18, in on_select_webmaster
    await dialog_manager.start(WebMasterMenu.select_action, data=start_data)
          │              │     │             │                   └ None
          │              │     │             └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.web_master_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000001E53D267F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000001E53D274180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000001E53D274540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                         └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000001E53F915F10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
          │    │                 │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
          │    │                 └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
          │    └ <function MessageManager.edit_message_safe at 0x000001E53D275D00>
          └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001E53F2F3D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
                 │    │            │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │            └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
                 │    └ <function MessageManager.edit_message at 0x000001E53D275DA0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001E53F2F3D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
                 │    │         │    │            └ OldMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         │    └ NewMessage(chat=Chat(id=6133947978, type='private', title=None, username='EasyLife_Manager', first_name='Easy Life Manager', ...
                 │    │         └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
                 │    └ <function MessageManager.edit_text at 0x000001E53D275EE0>
                 └ <aiogram_dialog.manager.message_manager.MessageManager object at 0x000001E53F2F3D10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
                 │   └ <function Bot.edit_message_text at 0x000001E53CCC1120>
                 └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
                 │    │                     └ None
                 │    └ EditMessageText(text='Traffic Place - це партнерська програма заробітку на арбітражі, тобто. купівлі/продажу трафіку.\nОзнайо...
                 └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
                 │    │       │     │               └ None
                 │    │       │     └ EditMessageText(text='Traffic Place - це партнерська програма заробітку на арбітражі, тобто. купівлі/продажу трафіку.\nОзнайо...
                 │    │       └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
                 │    └ <aiogram.client.session.aiohttp.AiohttpSession object at 0x000001E53F432F90>
                 └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
           │    │                   │          │    └ EditMessageText(text='Traffic Place - це партнерська програма заробітку на арбітражі, тобто. купівлі/продажу трафіку.\nОзнайо...
           │    │                   │          └ <aiogram.client.bot.Bot object at 0x000001E53D17E250>
           │    │                   └ functools.partial(<bound method AiohttpSession.make_request of <aiogram.client.session.aiohttp.AiohttpSession object at 0x000...
           │    └ ~TelegramType
           └ <function cast at 0x000001E536E904A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 177, in make_request
    raise TelegramNetworkError(method=method, message=f"{type(e).__name__}: {e}")
          │                           └ EditMessageText(text='Traffic Place - це партнерська програма заробітку на арбітражі, тобто. купівлі/продажу трафіку.\nОзнайо...
          └ <class 'aiogram.exceptions.TelegramNetworkError'>

aiogram.exceptions.TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2672)
2024-02-20T13:10:42.532558+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:10:42.533557+0200 INFO Bot stopped!
2024-02-20T13:10:58.495583+0200 INFO Start polling
2024-02-20T13:10:58.549581+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:11:00.309498+0200 INFO Update id=59134780 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T13:11:01.212814+0200 INFO Update id=59134781 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:11:02.000677+0200 INFO Update id=59134782 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:11:03.148085+0200 INFO Update id=59134783 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:11:04.478329+0200 INFO Update id=59134784 is handled. Duration 235 ms by bot id=6902908236
2024-02-20T13:11:05.566588+0200 INFO Update id=59134785 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T13:12:33.405939+0200 INFO Polling stopped
2024-02-20T13:12:33.663250+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:12:33.664250+0200 INFO Bot stopped!
2024-02-20T13:12:36.670421+0200 INFO Start polling
2024-02-20T13:12:36.731439+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:12:39.531298+0200 INFO Update id=59134786 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T13:12:42.160758+0200 INFO Update id=59134787 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:12:43.782011+0200 INFO Update id=59134788 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:12:45.163542+0200 INFO Update id=59134789 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:12:46.620170+0200 INFO Update id=59134790 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:12:49.980923+0200 INFO Update id=59134791 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T13:12:51.039112+0200 INFO Update id=59134792 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:15:02.344621+0200 INFO Polling stopped
2024-02-20T13:15:02.607907+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:15:02.608908+0200 INFO Bot stopped!
2024-02-20T13:15:05.570959+0200 INFO Start polling
2024-02-20T13:15:05.615959+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:15:07.286837+0200 INFO Update id=59134794 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T13:15:08.795178+0200 INFO Update id=59134795 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:15:09.913839+0200 INFO Update id=59134796 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:15:10.603649+0200 INFO Update id=59134797 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:15:12.183702+0200 INFO Update id=59134798 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:17:35.793541+0200 INFO Update id=59134799 is handled. Duration 765 ms by bot id=6902908236
2024-02-20T13:17:46.309060+0200 INFO Polling stopped
2024-02-20T13:17:46.565106+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:17:46.567108+0200 INFO Bot stopped!
2024-02-20T13:17:49.844015+0200 INFO Start polling
2024-02-20T13:17:49.933057+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:17:51.025896+0200 INFO Update id=59134800 is handled. Duration 407 ms by bot id=6902908236
2024-02-20T13:17:52.692240+0200 INFO Update id=59134801 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:18:13.487436+0200 INFO Polling stopped
2024-02-20T13:18:13.752262+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:18:13.753266+0200 INFO Bot stopped!
2024-02-20T13:18:17.149184+0200 INFO Start polling
2024-02-20T13:18:17.286276+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:18:19.909583+0200 INFO Update id=59134803 is handled. Duration 734 ms by bot id=6902908236
2024-02-20T13:18:22.176289+0200 INFO Update id=59134804 is handled. Duration 343 ms by bot id=6902908236
2024-02-20T13:18:24.936993+0200 INFO Update id=59134805 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T13:18:54.208202+0200 INFO Polling stopped
2024-02-20T13:18:54.465202+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:18:54.466207+0200 INFO Bot stopped!
2024-02-20T13:18:57.430676+0200 INFO Start polling
2024-02-20T13:18:57.483706+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:19:00.221392+0200 INFO Update id=59134806 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:19:02.503364+0200 INFO Update id=59134807 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:19:03.879721+0200 INFO Update id=59134808 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:19:05.644656+0200 INFO Update id=59134809 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:19:07.355101+0200 INFO Update id=59134810 is handled. Duration 235 ms by bot id=6902908236
2024-02-20T13:20:06.041915+0200 INFO Update id=59134811 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T13:20:08.238184+0200 INFO Update id=59134812 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:20:16.721832+0200 INFO Update id=59134813 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:20:17.597867+0200 INFO Update id=59134814 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:20:18.584593+0200 INFO Update id=59134815 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T13:20:20.914643+0200 INFO Update id=59134816 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T13:21:27.766392+0200 INFO Polling stopped
2024-02-20T13:21:28.022375+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:21:28.023380+0200 INFO Bot stopped!
2024-02-20T13:21:37.431029+0200 INFO Start polling
2024-02-20T13:21:37.480030+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:21:39.678242+0200 INFO Update id=59134818 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T13:21:41.377063+0200 INFO Update id=59134819 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:22:13.142644+0200 INFO Polling stopped
2024-02-20T13:22:13.405674+0200 INFO Bot stopped!
2024-02-20T13:22:26.265287+0200 INFO Start polling
2024-02-20T13:22:26.315287+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:22:28.512344+0200 INFO Update id=59134821 is handled. Duration 468 ms by bot id=6902908236
2024-02-20T13:22:31.103112+0200 INFO Update id=59134822 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T13:23:10.267853+0200 INFO Update id=59134823 is handled. Duration 530 ms by bot id=6902908236
2024-02-20T13:23:12.180312+0200 INFO Update id=59134824 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:23:13.101436+0200 INFO Update id=59134825 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T13:23:15.303725+0200 INFO Update id=59134826 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T13:23:16.278699+0200 INFO Update id=59134827 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:23:17.066989+0200 INFO Update id=59134828 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:23:17.956033+0200 INFO Update id=59134829 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:23:18.667059+0200 INFO Update id=59134830 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:23:22.846539+0200 INFO Update id=59134831 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:23:26.050301+0200 INFO Update id=59134832 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:23:39.572821+0200 INFO Polling stopped
2024-02-20T13:23:39.835920+0200 INFO Bot stopped!
2024-02-20T13:23:53.193120+0200 INFO Start polling
2024-02-20T13:23:53.315661+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:23:55.998309+0200 INFO Update id=59134833 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T13:23:58.098914+0200 INFO Update id=59134834 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:24:00.074419+0200 INFO Update id=59134835 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:24:01.103527+0200 INFO Update id=59134836 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:24:37.953244+0200 INFO Polling stopped
2024-02-20T13:24:38.211911+0200 INFO Bot stopped!
2024-02-20T13:25:31.993442+0200 INFO Start polling
2024-02-20T13:25:32.048442+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:25:37.360209+0200 INFO Update id=59134837 is handled. Duration 532 ms by bot id=6902908236
2024-02-20T13:25:38.887202+0200 INFO Update id=59134838 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:26:18.415411+0200 INFO Polling stopped
2024-02-20T13:26:18.679293+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:26:18.681295+0200 INFO Bot stopped!
2024-02-20T13:26:21.641727+0200 INFO Start polling
2024-02-20T13:26:21.709747+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:26:22.782660+0200 INFO Update id=59134839 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T13:26:26.129629+0200 INFO Update id=59134840 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:26:27.421132+0200 INFO Update id=59134841 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:26:28.576172+0200 INFO Update id=59134842 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:28:45.144475+0200 INFO Polling stopped
2024-02-20T13:28:45.399519+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:28:45.400521+0200 INFO Bot stopped!
2024-02-20T13:28:48.202296+0200 INFO Start polling
2024-02-20T13:28:48.248531+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:28:51.356221+0200 INFO Update id=59134843 is handled. Duration 516 ms by bot id=6902908236
2024-02-20T13:28:53.094272+0200 INFO Update id=59134844 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:28:54.681559+0200 INFO Update id=59134845 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T13:28:55.521825+0200 INFO Update id=59134846 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:28:56.930347+0200 INFO Update id=59134847 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T13:29:03.837932+0200 INFO Update id=59134848 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:29:06.682584+0200 INFO Update id=59134849 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:29:08.001437+0200 INFO Update id=59134850 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:29:09.518690+0200 INFO Update id=59134851 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:29:11.423834+0200 INFO Update id=59134852 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:29:17.772484+0200 INFO Polling stopped
2024-02-20T13:29:18.027536+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:29:18.028536+0200 INFO Bot stopped!
2024-02-20T13:29:21.038431+0200 INFO Start polling
2024-02-20T13:29:21.084451+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:29:23.471760+0200 INFO Update id=59134853 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:29:25.367458+0200 INFO Update id=59134854 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:29:26.378959+0200 INFO Update id=59134855 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:29:27.086122+0200 INFO Update id=59134856 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:29:28.226781+0200 INFO Update id=59134857 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:29:32.380462+0200 INFO Polling stopped
2024-02-20T13:29:32.652512+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:29:32.653510+0200 INFO Bot stopped!
2024-02-20T13:29:35.504869+0200 INFO Start polling
2024-02-20T13:29:35.554870+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:29:36.805133+0200 INFO Update id=59134858 is handled. Duration 359 ms by bot id=6902908236
2024-02-20T13:29:37.847924+0200 INFO Update id=59134859 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:29:38.879009+0200 INFO Update id=59134860 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:29:39.983294+0200 INFO Update id=59134861 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:29:41.191100+0200 INFO Update id=59134862 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:30:50.604086+0200 INFO Polling stopped
2024-02-20T13:30:50.864499+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:30:50.866499+0200 INFO Bot stopped!
2024-02-20T13:30:53.959237+0200 INFO Start polling
2024-02-20T13:30:54.019237+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:30:56.135395+0200 INFO Update id=59134864 is handled. Duration 343 ms by bot id=6902908236
2024-02-20T13:30:57.062468+0200 INFO Update id=59134865 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:30:57.848424+0200 INFO Update id=59134866 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:30:58.369020+0200 INFO Update id=59134867 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:30:59.936000+0200 INFO Update id=59134868 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:31:01.006529+0200 INFO Update id=59134869 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:31:04.214315+0200 INFO Polling stopped
2024-02-20T13:31:04.469376+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:31:04.470376+0200 INFO Bot stopped!
2024-02-20T13:31:07.611108+0200 INFO Start polling
2024-02-20T13:31:07.660108+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:31:08.875196+0200 INFO Update id=59134871 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:31:10.083358+0200 INFO Update id=59134872 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:31:11.161467+0200 INFO Update id=59134873 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:31:11.923403+0200 INFO Update id=59134874 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T13:31:13.097920+0200 INFO Update id=59134875 is handled. Duration 235 ms by bot id=6902908236
2024-02-20T13:31:49.190253+0200 INFO Polling stopped
2024-02-20T13:31:49.450268+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:31:49.451269+0200 INFO Bot stopped!
2024-02-20T13:31:52.356401+0200 INFO Start polling
2024-02-20T13:31:52.415466+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:31:53.444319+0200 INFO Update id=59134876 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T13:31:54.785608+0200 INFO Update id=59134877 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:31:55.740307+0200 INFO Update id=59134878 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:31:56.401951+0200 INFO Update id=59134879 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:31:58.790067+0200 INFO Update id=59134880 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:32:09.902077+0200 INFO Update id=59134881 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:32:10.832397+0200 INFO Update id=59134882 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:32:11.903335+0200 INFO Update id=59134883 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:32:12.975009+0200 INFO Update id=59134884 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:32:14.385429+0200 INFO Update id=59134885 is handled. Duration 343 ms by bot id=6902908236
2024-02-20T13:32:17.948932+0200 INFO Update id=59134886 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T13:32:18.732961+0200 INFO Update id=59134887 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:32:19.588374+0200 INFO Update id=59134888 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:32:21.474988+0200 INFO Update id=59134889 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:32:23.257342+0200 INFO Update id=59134890 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T13:32:24.864600+0200 INFO Update id=59134891 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:32:25.802863+0200 INFO Update id=59134892 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:32:26.480765+0200 INFO Update id=59134893 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:32:27.037154+0200 INFO Update id=59134894 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:32:30.677770+0200 INFO Update id=59134895 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:32:31.373068+0200 INFO Update id=59134896 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:32:32.702604+0200 INFO Update id=59134897 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T13:32:33.456882+0200 INFO Update id=59134898 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T13:32:34.812066+0200 INFO Update id=59134899 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:32:36.525965+0200 INFO Update id=59134900 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:32:44.910818+0200 INFO Polling stopped
2024-02-20T13:32:45.186913+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:32:45.188913+0200 INFO Bot stopped!
2024-02-20T13:32:48.575831+0200 INFO Start polling
2024-02-20T13:32:48.625831+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:32:52.370779+0200 INFO Update id=59134901 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T13:32:52.373779+0200 ERROR Cause exception while process update id=59134901 by bot id=6902908236
UnknownState: Unknown state PersonalCabinet:show_personal_info
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000244870918A0>
    │       └ <function run at 0x00000244FEBBC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000024487055F40>
           │      └ <function Runner.run at 0x00000244FEC50900>
           └ <asyncio.runners.Runner object at 0x0000024486990710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000244FEC4A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000024486990710>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000244FED16340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000244FEC50180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000244FEB8DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x244871d7250'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000024486FB7810>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000024486FB7810>
                     │    └ <function Dispatcher.feed_update at 0x0000024484A927A0>
                     └ <Dispatcher '0x244871d7250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000024484A90FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000244871E55D0>
                     └ <Dispatcher '0x244871d7250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000244871E5D90>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000244871E5A50>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000244877AF980>
          │    │   │      │    └ UnknownState('Unknown state PersonalCabinet:show_personal_info')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000024487679990>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000024487653A10>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000244871E6290>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x0000024487282980>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000024484FD1F10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000244871E6390>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134901, message=Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x00000244877CA7A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x244871d7250'>>, Update(update_id=59134901, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000024484A91DA0>
                 └ <Dispatcher '0x244871d7250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000244877CA840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000024484A90FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000244871D72D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000024484A91E40>
                 └ <Dispatcher '0x244871d7250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000024484A91DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000244877CAAC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000024484A90FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000244871E6550>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x244871d7250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=3857, date=datetime.datetime(2024, 2, 20, 11, 32, 51, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x0000024484F55260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000024487602910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x0000024484F55120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000024487602910>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x0000024484D468E0>
                    │     │            └ Stack(_id='', intents=['OsEiE7', '7Ez5l6', 'sjEmo3'], last_message_id=3856, last_reply_keyboard=False, last_media_id=None, la...
                    │     └ <function StorageProxy.load_context at 0x0000024484F54720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002448778AFD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'sjEmo3', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
    │               │    └ <function StorageProxy._state at 0x0000024484F54D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x000002448778AFD0>
    └ {'_intent_id': 'sjEmo3', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 151, in _state
    raise UnknownState(f"Unknown state {state}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state PersonalCabinet:show_personal_info
2024-02-20T13:33:09.564918+0200 INFO Polling stopped
2024-02-20T13:33:09.811916+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:33:09.812917+0200 INFO Update id=59134904 is not handled. Duration 2202 ms by bot id=6902908236
2024-02-20T13:33:09.812917+0200 INFO Update id=59134903 is not handled. Duration 10171 ms by bot id=6902908236
2024-02-20T13:33:09.815916+0200 INFO Update id=59134902 is not handled. Duration 11843 ms by bot id=6902908236
2024-02-20T13:33:09.816917+0200 INFO Bot stopped!
2024-02-20T13:33:12.818638+0200 INFO Start polling
2024-02-20T13:33:12.866691+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:33:44.665817+0200 INFO Polling stopped
2024-02-20T13:33:44.930147+0200 INFO Update id=59134910 is not handled. Duration 13625 ms by bot id=6902908236
2024-02-20T13:33:44.931146+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:33:44.931146+0200 INFO Update id=59134909 is not handled. Duration 15296 ms by bot id=6902908236
2024-02-20T13:33:44.931146+0200 INFO Update id=59134907 is not handled. Duration 30218 ms by bot id=6902908236
2024-02-20T13:33:44.931146+0200 INFO Update id=59134908 is not handled. Duration 28390 ms by bot id=6902908236
2024-02-20T13:33:44.931146+0200 INFO Update id=59134911 is not handled. Duration 3702 ms by bot id=6902908236
2024-02-20T13:33:44.931146+0200 INFO Update id=59134912 is not handled. Duration 3468 ms by bot id=6902908236
2024-02-20T13:33:44.932147+0200 INFO Update id=59134906 is not handled. Duration 31077 ms by bot id=6902908236
2024-02-20T13:33:44.933146+0200 INFO Bot stopped!
2024-02-20T13:33:48.032789+0200 INFO Start polling
2024-02-20T13:33:48.095847+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:33:58.001432+0200 INFO Update id=59134913 is not handled. Duration 4437 ms by bot id=6902908236
2024-02-20T13:33:58.004426+0200 ERROR Cause exception while process update id=59134913 by bot id=6902908236
UnknownState: Unknown state PersonalCabinet:show_personal_info
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x00000233E65C18A0>
    │       └ <function run at 0x00000233DE03C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x00000233E6585F40>
           │      └ <function Runner.run at 0x00000233DE0E0900>
           └ <asyncio.runners.Runner object at 0x00000233DC43BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x00000233DE0CA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x00000233DC43BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x00000233DE1A6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x00000233DE0E0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x00000233DE00DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x233e670f090'>, 'bots': (<aiogram.client.bot.Bot object at 0x00000233E64E7350>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x00000233E64E7350>
                     │    └ <function Dispatcher.feed_update at 0x00000233E3F4E7A0>
                     └ <Dispatcher '0x233e670f090'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000233E3F4CFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000233E438DCD0>
                     └ <Dispatcher '0x233e670f090'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x00000233E660EE90>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x00000233E67159D0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x00000233E659EF40>
          │    │   │      │    └ UnknownState('Unknown state PersonalCabinet:show_personal_info')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x00000233E6BA9990>
          └ <contextlib._AsyncGeneratorContextManager object at 0x00000233E6B33B50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x00000233E6715E50>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x00000233E67B2980>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x00000233E6433D10>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x00000233E64D4D50>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134913, message=Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x00000233E6CFA980>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x233e670f090'>>, Update(update_id=59134913, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x00000233E3F4DDA0>
                 └ <Dispatcher '0x233e670f090'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000233E6CFA7A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000233E3F4CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000233E670F050>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x00000233E3F4DE40>
                 └ <Dispatcher '0x233e670f090'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x00000233E3F4DDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x00000233E6CFAAC0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x00000233E3F4CFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x00000233E6716110>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x233e670f090'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=3867, date=datetime.datetime(2024, 2, 20, 11, 33, 52, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x00000233E4445260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000233E6B32410>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x00000233E4445120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x00000233E6B32410>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x00000233E42268E0>
                    │     │            └ Stack(_id='', intents=['OsEiE7', '7Ez5l6', 'sjEmo3'], last_message_id=3856, last_reply_keyboard=False, last_media_id=None, la...
                    │     └ <function StorageProxy.load_context at 0x00000233E4444720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000233E6B26250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'sjEmo3', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
    │               │    └ <function StorageProxy._state at 0x00000233E4444D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x00000233E6B26250>
    └ {'_intent_id': 'sjEmo3', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 151, in _state
    raise UnknownState(f"Unknown state {state}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state PersonalCabinet:show_personal_info
2024-02-20T13:34:51.310017+0200 INFO Polling stopped
2024-02-20T13:34:51.565443+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:34:51.568444+0200 INFO Update id=59134914 is not handled. Duration 15500 ms by bot id=6902908236
2024-02-20T13:34:51.569443+0200 INFO Bot stopped!
2024-02-20T13:34:54.499462+0200 INFO Start polling
2024-02-20T13:34:54.558462+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:34:59.029395+0200 INFO Polling stopped
2024-02-20T13:34:59.287426+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:34:59.288427+0200 INFO Bot stopped!
2024-02-20T13:35:02.291462+0200 INFO Start polling
2024-02-20T13:35:02.341461+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:35:36.682148+0200 INFO Update id=59134915 is handled. Duration 32812 ms by bot id=6902908236
2024-02-20T13:35:46.687759+0200 INFO Update id=59134916 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T13:35:50.425450+0200 INFO Polling stopped
2024-02-20T13:35:50.700103+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:35:50.701106+0200 INFO Bot stopped!
2024-02-20T13:35:53.825494+0200 INFO Start polling
2024-02-20T13:35:53.873496+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:35:56.614267+0200 INFO Update id=59134917 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:35:58.469967+0200 INFO Update id=59134918 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:35:59.762680+0200 INFO Update id=59134919 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T13:36:00.599533+0200 INFO Update id=59134920 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T13:36:07.546495+0200 INFO Polling stopped
2024-02-20T13:36:07.794875+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:36:07.795875+0200 INFO Bot stopped!
2024-02-20T13:36:10.691698+0200 INFO Start polling
2024-02-20T13:36:10.737699+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:36:12.417790+0200 INFO Update id=59134921 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T13:36:13.216193+0200 INFO Update id=59134922 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:36:13.763326+0200 INFO Update id=59134923 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:36:15.043076+0200 INFO Update id=59134924 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T13:36:41.886369+0200 INFO Polling stopped
2024-02-20T13:36:42.147699+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:36:42.148697+0200 INFO Bot stopped!
2024-02-20T13:37:43.429625+0200 INFO Start polling
2024-02-20T13:37:43.508626+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:37:45.709700+0200 INFO Update id=59134925 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T13:37:46.701408+0200 INFO Update id=59134926 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:37:47.645508+0200 INFO Update id=59134927 is not handled. Duration 16 ms by bot id=6902908236
2024-02-20T13:37:47.648512+0200 ERROR Cause exception while process update id=59134927 by bot id=6902908236
UnknownState: Unknown state PersonalCabinet:show_personal_info
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000019FE45358A0>
    │       └ <function run at 0x0000019FDC05C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000019FE44EE340>
           │      └ <function Runner.run at 0x0000019FDC0F0900>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019FDC0EA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000019FDC1B6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000019FDC0F0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000019FDC02DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x19fe4633250'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000019FE4457990>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000019FE4457990>
                     │    └ <function Dispatcher.feed_update at 0x0000019FE1EC27A0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE46891D0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019FE445DE10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019FE4689950>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019FE46A6040>
          │    │   │      │    └ UnknownState('Unknown state PersonalCabinet:show_personal_info')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019FE4AA9990>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019FE4FE8690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019FE445F350>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000019FE4EBA700>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019FE4690F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019FE4438550>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134927, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000019FE47228E0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19fe4633250'>>, Update(update_id=59134927, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558840203806', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558840203806', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4C6A840>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE45B9790>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019FE1EC1E40>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558840203806', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558840203806', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4C6A7A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE468AE50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x0000019FE23B51C0>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019FE4AA6450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'c9aVb2'
                    │     └ <function StorageProxy.load_context at 0x0000019FE23B4720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4F22310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
    │               │    └ <function StorageProxy._state at 0x0000019FE23B4D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4F22310>
    └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 151, in _state
    raise UnknownState(f"Unknown state {state}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state PersonalCabinet:show_personal_info
2024-02-20T13:37:57.839225+0200 INFO Update id=59134928 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T13:37:57.840225+0200 ERROR Cause exception while process update id=59134928 by bot id=6902908236
UnknownState: Unknown state PersonalCabinet:show_personal_info
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000019FE45358A0>
    │       └ <function run at 0x0000019FDC05C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000019FE44EE340>
           │      └ <function Runner.run at 0x0000019FDC0F0900>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019FDC0EA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000019FDC1B6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000019FDC0F0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000019FDC02DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x19fe4633250'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000019FE4457990>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000019FE4457990>
                     │    └ <function Dispatcher.feed_update at 0x0000019FE1EC27A0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE46891D0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019FE445DE10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019FE4689950>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019FE4F7AD40>
          │    │   │      │    └ UnknownState('Unknown state PersonalCabinet:show_personal_info')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019FE4AAA110>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019FE4CBEDD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019FE445F350>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ <function TelegramEventObserver.trigger at 0x0000019FE4EB8180>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019FE4690F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019FE4438550>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134928, message=Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC...
                 └ <function CallableObject.call at 0x0000019FE4EBA7A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19fe4633250'>>, Update(update_id=59134928, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │    │                           └ 'message'
                 │    └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4C6A980>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE467EF90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019FE1EC1E40>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                     │      │                           └ 'message'
                     │      └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4FEC7C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE4689E90>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 195, in process_message
    await self._load_default_context(event, data)
          │    │                     │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
          │    │                     └ Message(message_id=3875, date=datetime.datetime(2024, 2, 20, 11, 37, 57, tzinfo=TzInfo(UTC)), chat=Chat(id=387375605, type='p...
          │    └ <function IntentMiddlewareFactory._load_default_context at 0x0000019FE23B5260>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019FE4AA6450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 138, in _load_default_context
    return await self._load_context_by_stack(
                 │    └ <function IntentMiddlewareFactory._load_context_by_stack at 0x0000019FE23B5120>
                 └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019FE4AA6450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 107, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
                    │     │            │     └ <function Stack.last_intent_id at 0x0000019FE21968E0>
                    │     │            └ Stack(_id='', intents=['XN8KQ8', 'c9aVb2'], last_message_id=3874, last_reply_keyboard=False, last_media_id=None, last_media_u...
                    │     └ <function StorageProxy.load_context at 0x0000019FE23B4720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4ED51D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
    │               │    └ <function StorageProxy._state at 0x0000019FE23B4D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4ED51D0>
    └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 151, in _state
    raise UnknownState(f"Unknown state {state}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state PersonalCabinet:show_personal_info
2024-02-20T13:38:59.933772+0200 INFO Update id=59134930 is not handled. Duration 57655 ms by bot id=6902908236
2024-02-20T13:38:59.935773+0200 ERROR Cause exception while process update id=59134930 by bot id=6902908236
UnknownState: Unknown state PersonalCabinet:show_personal_info
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000019FE45358A0>
    │       └ <function run at 0x0000019FDC05C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000019FE44EE340>
           │      └ <function Runner.run at 0x0000019FDC0F0900>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000019FDC0EA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000019FE4439B90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000019FDC1B6340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000019FDC0F0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000019FDC02DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x19fe4633250'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000019FE4457990>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000019FE4457990>
                     │    └ <function Dispatcher.feed_update at 0x0000019FE1EC27A0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE46891D0>
                     └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000019FE445DE10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000019FE4689950>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000019FE4ECFA40>
          │    │   │      │    └ UnknownState('Unknown state PersonalCabinet:show_personal_info')
          │    │   │      └ <class 'aiogram_dialog.api.exceptions.UnknownState'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000019FE4EBDC60>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000019FE4ED5FD0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000019FE445F350>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000019FE47231A0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000019FE4690F50>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000019FE4438550>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59134930, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000019FE4C6ACA0>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x19fe4633250'>>, Update(update_id=59134930, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765558388698178', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558388698178', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4C6AA20>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE45B9790>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000019FE1EC1E40>
                 └ <Dispatcher '0x19fe4633250'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765558388698178', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000019FE1EC1DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x19fe4633250'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765558388698178', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000019FE4EB8360>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000019FE1EC0FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000019FE468AE50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
          │    └ <function IntentMiddlewareFactory._load_context_by_intent at 0x0000019FE23B51C0>
          └ <aiogram_dialog.context.intent_middleware.IntentMiddlewareFactory object at 0x0000019FE4AA6450>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
                    │     │            └ 'c9aVb2'
                    │     └ <function StorageProxy.load_context at 0x0000019FE23B4720>
                    └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4ABE5D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 54, in load_context
    data["state"] = self._state(data["state"])
    │               │    │      └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
    │               │    └ <function StorageProxy._state at 0x0000019FE23B4D60>
    │               └ <aiogram_dialog.context.storage.StorageProxy object at 0x0000019FE4ABE5D0>
    └ {'_intent_id': 'c9aVb2', '_stack_id': '', 'state': 'PersonalCabinet:show_personal_info', 'start_data': None, 'dialog_data': {...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 151, in _state
    raise UnknownState(f"Unknown state {state}")
          └ <class 'aiogram_dialog.api.exceptions.UnknownState'>

aiogram_dialog.api.exceptions.UnknownState: Unknown state PersonalCabinet:show_personal_info
2024-02-20T13:40:07.121734+0200 INFO Polling stopped
2024-02-20T13:40:07.375733+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:40:07.378736+0200 INFO Update id=59134929 is not handled. Duration 127467 ms by bot id=6902908236
2024-02-20T13:40:07.379737+0200 INFO Bot stopped!
2024-02-20T13:40:10.415061+0200 INFO Start polling
2024-02-20T13:40:10.469061+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:40:19.621765+0200 INFO Update id=59134931 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T13:40:22.537449+0200 INFO Update id=59134932 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:40:25.259839+0200 INFO Update id=59134933 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:40:26.068632+0200 INFO Update id=59134934 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:40:27.477385+0200 INFO Update id=59134935 is handled. Duration 360 ms by bot id=6902908236
2024-02-20T13:40:28.268977+0200 INFO Update id=59134936 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:40:29.397038+0200 INFO Update id=59134937 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:40:33.536239+0200 INFO Update id=59134938 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:40:34.736319+0200 INFO Update id=59134939 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:42:26.463560+0200 INFO Polling stopped
2024-02-20T13:42:26.729557+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:42:26.730562+0200 INFO Bot stopped!
2024-02-20T13:42:29.458558+0200 ERROR An error has been caught in function '_run', process 'MainProcess' (14108), thread 'MainThread' (7208):
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000001FEF0671800>
    │       └ <function run at 0x000001FEE80FC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000001FEF062E140>
           │      └ <function Runner.run at 0x000001FEE8190900>
           └ <asyncio.runners.Runner object at 0x000001FEEFF52C10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1262...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000001FEE818A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000001FEEFF52C10>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000001FEE8256340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000001FEE8190180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000001FEE80CDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 76, in main
    dialogs_includer(router)
    │                └ <Router '__main__'>
    └ <function dialogs_includer at 0x000001FEEFF9B6A0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\__init__.py", line 11, in dialogs_includer
    *channel_owner_menu.channel_owner_menu_dialogs(),
     │                  └ <function channel_owner_menu_dialogs at 0x000001FEF0575440>
     └ <module 'bot.dialogs.channel_owner_menu' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\channel_owner_menu\\__init__.py'>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\__init__.py", line 26, in channel_owner_menu_dialogs
    windows.channel_poster_window(),
    │       └ <function channel_poster_window at 0x000001FEF05ECA40>
    └ <module 'bot.dialogs.channel_owner_menu.windows' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\channel_owner_menu\\window...

  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\windows.py", line 84, in channel_poster_window
    state=states.ChannelPoster.select_channel_topic,
          └ <module 'bot.dialogs.channel_owner_menu.states' from 'E:\\PythonProjects\\Arbitrix\\bot\\dialogs\\channel_owner_menu\\states....

AttributeError: module 'bot.dialogs.channel_owner_menu.states' has no attribute 'ChannelPoster'
2024-02-20T13:42:54.412806+0200 INFO Start polling
2024-02-20T13:42:54.465113+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:42:56.929382+0200 INFO Update id=59134940 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T13:42:58.984490+0200 INFO Update id=59134941 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T13:44:17.467752+0200 INFO Update id=59134942 is handled. Duration 546 ms by bot id=6902908236
2024-02-20T13:44:19.320748+0200 INFO Update id=59134943 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T13:44:21.503791+0200 INFO Update id=59134944 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:44:22.286788+0200 INFO Update id=59134945 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:44:24.128868+0200 INFO Update id=59134946 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:44:25.117866+0200 INFO Update id=59134947 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:45:13.740058+0200 INFO Update id=59134948 is handled. Duration 389 ms by bot id=6902908236
2024-02-20T13:45:14.924108+0200 INFO Update id=59134949 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:45:16.341545+0200 INFO Update id=59134950 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T13:45:17.441974+0200 INFO Update id=59134951 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:45:18.083402+0200 INFO Update id=59134952 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:45:19.026364+0200 INFO Update id=59134953 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:48:20.679015+0200 INFO Update id=59134954 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:48:21.387903+0200 INFO Update id=59134955 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:48:22.684849+0200 INFO Update id=59134956 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:48:23.502241+0200 INFO Update id=59134957 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:25.329689+0200 INFO Update id=59134958 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:26.288689+0200 INFO Update id=59134959 is handled. Duration 172 ms by bot id=6902908236
2024-02-20T13:48:27.144580+0200 INFO Update id=59134960 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:48:28.052910+0200 INFO Update id=59134961 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T13:48:28.430909+0200 INFO Update id=59134962 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:48:29.270949+0200 INFO Update id=59134963 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:48:34.425076+0200 INFO Update id=59134964 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:48:35.889486+0200 INFO Update id=59134965 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:36.472756+0200 INFO Update id=59134966 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:37.501870+0200 INFO Update id=59134967 is handled. Duration 108 ms by bot id=6902908236
2024-02-20T13:48:38.439269+0200 INFO Update id=59134968 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:42.319340+0200 INFO Update id=59134969 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:48:44.201577+0200 INFO Update id=59134970 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:45.152487+0200 INFO Update id=59134971 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:48.440319+0200 INFO Update id=59134972 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:48:49.546995+0200 INFO Update id=59134973 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T13:48:51.288656+0200 INFO Update id=59134974 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T13:48:51.849695+0200 INFO Update id=59134975 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:54.354113+0200 INFO Update id=59134976 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T13:48:55.748759+0200 INFO Update id=59134977 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:48:56.528831+0200 INFO Update id=59134978 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:48:57.564501+0200 INFO Update id=59134979 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T13:48:58.556833+0200 INFO Update id=59134980 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:49:00.246356+0200 INFO Update id=59134981 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:49:01.614558+0200 INFO Update id=59134982 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T13:49:02.425816+0200 INFO Update id=59134983 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:05.304072+0200 INFO Update id=59134984 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T13:49:17.952854+0200 INFO Update id=59134985 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:49:19.248611+0200 INFO Update id=59134986 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:49:20.758097+0200 INFO Update id=59134987 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:49:21.434098+0200 INFO Update id=59134988 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:24.628485+0200 INFO Update id=59134989 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:49:29.146389+0200 INFO Update id=59134990 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:49:29.919328+0200 INFO Update id=59134991 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:31.450439+0200 INFO Update id=59134992 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:32.513798+0200 INFO Update id=59134993 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:49:37.279397+0200 INFO Update id=59134994 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T13:49:38.454128+0200 INFO Update id=59134995 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:49:40.668409+0200 INFO Update id=59134996 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:49:41.892077+0200 INFO Update id=59134997 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:49:43.722832+0200 INFO Update id=59134998 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:49:49.220844+0200 INFO Update id=59134999 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T13:49:50.692933+0200 INFO Update id=59135000 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:52.007353+0200 INFO Update id=59135001 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:49:52.883280+0200 INFO Update id=59135002 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:49:56.220109+0200 INFO Update id=59135003 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:49:58.345934+0200 INFO Update id=59135004 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T13:49:59.282678+0200 INFO Update id=59135005 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T13:50:00.198291+0200 INFO Update id=59135006 is handled. Duration 342 ms by bot id=6902908236
2024-02-20T13:50:01.304154+0200 INFO Update id=59135007 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:50:04.065851+0200 INFO Update id=59135008 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T13:50:04.954036+0200 INFO Update id=59135009 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T13:50:06.506160+0200 INFO Update id=59135010 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:50:07.493162+0200 INFO Update id=59135011 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T13:50:08.446389+0200 INFO Update id=59135012 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:50:09.185511+0200 INFO Update id=59135013 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T13:50:10.355538+0200 INFO Update id=59135014 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:50:11.356923+0200 INFO Update id=59135015 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:55:23.994930+0200 INFO Polling stopped
2024-02-20T13:55:24.254273+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:55:24.256274+0200 INFO Bot stopped!
2024-02-20T13:55:27.273314+0200 INFO Start polling
2024-02-20T13:55:27.322313+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T13:56:03.378293+0200 INFO Update id=59135016 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T13:56:04.587063+0200 INFO Update id=59135017 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:56:06.159824+0200 INFO Update id=59135018 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:56:07.289022+0200 INFO Update id=59135019 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:56:08.198538+0200 INFO Update id=59135020 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:56:09.114324+0200 INFO Update id=59135021 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:56:09.858521+0200 INFO Update id=59135022 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:56:11.287176+0200 INFO Update id=59135023 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:56:12.529852+0200 INFO Update id=59135024 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:56:13.989919+0200 INFO Update id=59135025 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T13:56:15.710208+0200 INFO Update id=59135026 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:56:17.131101+0200 INFO Update id=59135027 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T13:56:18.408578+0200 INFO Update id=59135028 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T13:56:19.532952+0200 INFO Update id=59135029 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:56:20.243885+0200 INFO Update id=59135030 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:56:20.890242+0200 INFO Update id=59135031 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T13:56:21.426467+0200 INFO Update id=59135032 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T13:56:22.917869+0200 INFO Update id=59135033 is handled. Duration 359 ms by bot id=6902908236
2024-02-20T13:56:25.078375+0200 INFO Update id=59135034 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T13:56:25.924632+0200 INFO Update id=59135035 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:56:27.029081+0200 INFO Update id=59135036 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T13:56:28.353648+0200 INFO Update id=59135037 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T13:56:28.989097+0200 INFO Update id=59135038 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T13:56:30.040474+0200 INFO Update id=59135039 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T13:56:34.214132+0200 INFO Update id=59135040 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T13:56:35.836574+0200 INFO Update id=59135041 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T13:56:37.191190+0200 INFO Update id=59135042 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T13:56:37.666460+0200 INFO Update id=59135043 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T13:56:39.798192+0200 INFO Update id=59135044 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T13:57:22.185434+0200 INFO Update id=59135045 is handled. Duration 530 ms by bot id=6902908236
2024-02-20T14:15:56.428081+0200 INFO Polling stopped
2024-02-20T14:15:56.692154+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:15:56.693154+0200 INFO Bot stopped!
2024-02-20T14:15:59.699155+0200 INFO Start polling
2024-02-20T14:15:59.744155+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:16:01.610975+0200 INFO Update id=59135046 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T14:16:02.941960+0200 INFO Update id=59135047 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T14:16:04.644525+0200 INFO Update id=59135048 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T14:16:49.981034+0200 INFO Polling stopped
2024-02-20T14:16:50.235048+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:16:50.236046+0200 INFO Bot stopped!
2024-02-20T14:16:53.160461+0200 INFO Start polling
2024-02-20T14:16:53.208992+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:16:54.513566+0200 INFO Update id=59135049 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T14:16:55.995448+0200 INFO Update id=59135050 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:16:57.132584+0200 INFO Update id=59135051 is not handled. Duration 108 ms by bot id=6902908236
2024-02-20T14:16:57.142584+0200 ERROR Cause exception while process update id=59135051 by bot id=6902908236
DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку roletypes: "NEWBIE"
[SQL: UPDATE users SET "Роль пользователя"=$1::roletypes WHERE users.user_id = $2::BIGINT]
[parameters: ('NEWBIE', 387375605)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
    │    │             │             │      └ ('NEWBIE', 387375605)
    │    │             │             └ <function PreparedStatement.fetch at 0x0000011E64F063E0>
    │    │             └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000011E656AD8F0>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('NEWBIE', 387375605)
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000011E656AD8F0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0x0000011E656AD8F0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0x0000011E64DD7A10>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0x0000011E65895BC0>
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute

asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку roletypes: "NEWBIE"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000011E6473CC20>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000011E64E923D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('NEWBIE', 387375605)
    │      │       └ 'UPDATE users SET "Роль пользователя"=$1::roletypes WHERE users.user_id = $2::BIGINT'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000011E64C60720>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000011E64F71C60>
           └ <_AsyncIoGreenlet object at 0x0000011E65401200 (otid=0x0000011E6410A0D0) dead>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000011E64F71C60>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000011E64C60540>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку roletypes: "NEWBIE"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку roletypes: "NEWBIE"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку roletypes: "N...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку roletypes: "NEWBIE"


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x0000011E64E41EE0>
    │       └ <function run at 0x0000011E5C8BC540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x0000011E64DFA440>
           │      └ <function Runner.run at 0x0000011E5C960900>
           └ <asyncio.runners.Runner object at 0x0000011E5AC9BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x0000011E5C94A3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x0000011E5AC9BB90>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x0000011E5CA26340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x0000011E5C960180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x0000011E5C88DA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x11e64ed7b90'>, 'bots': (<aiogram.client.bot.Bot object at 0x0000011E64D4AE10>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x0000011E64D4AE10>
                     │    └ <function Dispatcher.feed_update at 0x0000011E627CE7A0>
                     └ <Dispatcher '0x11e64ed7b90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011E627CCFE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011E64D4B6D0>
                     └ <Dispatcher '0x11e64ed7b90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x0000011E64F9A210>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x0000011E64F99ED0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x0000011E659B6CC0>
          │    │   │      │    └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
          │    │   │      └ <class 'sqlalchemy.exc.DBAPIError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x0000011E653B9A80>
          └ <contextlib._AsyncGeneratorContextManager object at 0x0000011E64D86250>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x0000011E64D4A0D0>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x0000011E657CF880>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011E64FA1750>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011E64CB3710>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135051, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x0000011E6553F560>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x11e64ed7b90'>>, Update(update_id=59135051, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x0000011E627CDDA0>
                 └ <Dispatcher '0x11e64ed7b90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011E6553F060>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011E627CCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011E64F980D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011E627CDE40>
                 └ <Dispatcher '0x11e64ed7b90'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011E627CDDA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011E6553F420>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011E627CCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011E64F9B690>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x0000011E653B7010>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x0000011E6553F7E0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011E627CDE40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x0000011E627CDDA0>
                     └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x0000011E650371A0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x0000011E627CCFE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011E64FA2990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x0000011E627CDE40>
                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                     │        └ <function TelegramEventObserver.trigger at 0x0000011E627CD120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x0000011E64FA2990>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x0000011E64CBC590>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x0000011E64CB3710>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x0000011E653B6DD0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 └ functools.partial(<function context_saver_middleware at 0x0000011E62CC4180>, <function CallableObject.call at 0x0000011E65037...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x11e64ed7b90'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                   └ <function CallableObject.call at 0x0000011E65037240>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'FirstStartWindow'>)>>, CallbackQuery(id='16...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
          │      │                │                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │      │                └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │      └ <function Window.process_callback at 0x0000011E62D06F20>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
          │    │        │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │    │        │                └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function Keyboard.process_callback at 0x0000011E62AF7EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000011E64D4B550>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
                 │    │                       │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                 │    │                       └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
                 │    └ <function Group._process_other_callback at 0x0000011E62C87380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x0000011E64D4B550>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
             │ │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
             │ │                └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
             │ └ <function Keyboard.process_callback at 0x0000011E62AF7EC0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000011E64DAC090>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x0000011E62B14B80>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000011E64DAC090>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000011E64DAC090>
          │    │        │             └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │        └ <function SimpleEventProcessor.process_event at 0x0000011E62AF6020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000011E64DAF9D0>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000011E64DAC090>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x0000011E64CB2810>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x0000011E64DAC090>
          │    │        └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    └ <function on_select_newbie at 0x0000011E64D45300>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x0000011E64DAF9D0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\start_menu\selected.py", line 23, in on_select_newbie
    await repo.user_repo.update_user_role(call.from_user.id, RoleTypes.NEWBIE)
          │    │         │                │    │         │   │         └ <RoleTypes.NEWBIE: 'newbie'>
          │    │         │                │    │         │   └ <enum 'RoleTypes'>
          │    │         │                │    │         └ 387375605
          │    │         │                │    └ User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, username='s0larm0v3', language_code='uk', is_premium...
          │    │         │                └ CallbackQuery(id='1663765557773639537', from_user=User(id=387375605, is_bot=False, first_name='Solarmove', last_name=None, us...
          │    │         └ <function UserRequestsRepo.update_user_role at 0x0000011E64CAC2C0>
          │    └ <bot.db.requests.user_requests.UserRequestsRepo object at 0x0000011E656BB290>
          └ <bot.db.Repo object at 0x0000011E656BA710>

  File "E:\PythonProjects\Arbitrix\bot\db\requests\user_requests.py", line 27, in update_user_role
    await self.session.execute(query)
          │    │       │       └ <sqlalchemy.sql.dml.Update object at 0x0000011E64D49F50>
          │    │       └ <function AsyncSession.execute at 0x0000011E64B2F600>
          │    └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x0000011E6575BC50>
          └ <bot.db.requests.user_requests.UserRequestsRepo object at 0x0000011E656BB290>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x0000011E641553A0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x0000011E65401200 (otid=0x0000011E6410A0D0) dead>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x0000011E64A53420>
           └ <sqlalchemy.orm.session.Session object at 0x0000011E65758610>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMUpdate.orm_execute_statement at 0x0000011E64A1F4C0>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1617, in orm_execute_statement
    return super().orm_execute_statement(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x0000011E6467CE00>
             └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.annotation.AnnotatedUpdate object at 0x0000011E64FD5E90>>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x0000011E6467D120>
           └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x0000011E6467D300>
          └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x0000011E6467D3A0>
           └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x0000011E6467D620>
    └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку roletypes: "N...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error'>, Error('<class \'asyncpg.exceptions.InvalidT...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ DBAPIError('(sqlalchemy.dialects.postgresql.asyncpg.Error) <class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неп...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x0000011E6473CC20>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x0000011E64E923D0>
    └ <sqlalchemy.engine.base.Connection object at 0x0000011E6595BA50>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('NEWBIE', 387375605)
    │      │       └ 'UPDATE users SET "Роль пользователя"=$1::roletypes WHERE users.user_id = $2::BIGINT'
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x0000011E64C60720>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           │                     └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000011E64F71C60>
           └ <_AsyncIoGreenlet object at 0x0000011E65401200 (otid=0x0000011E6410A0D0) dead>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x0000011E64F71C60>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x0000011E64C60540>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку roletypes: "NEWBIE"')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x0000011E6560FA00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
          │                     └ InvalidTextRepresentationError('неприпустиме вхідне значення для переліку roletypes: "NEWBIE"')
          └ Error('<class \'asyncpg.exceptions.InvalidTextRepresentationError\'>: неприпустиме вхідне значення для переліку roletypes: "N...

sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку roletypes: "NEWBIE"
[SQL: UPDATE users SET "Роль пользователя"=$1::roletypes WHERE users.user_id = $2::BIGINT]
[parameters: ('NEWBIE', 387375605)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2024-02-20T14:17:55.366366+0200 INFO Polling stopped
2024-02-20T14:17:55.625384+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:17:55.626385+0200 INFO Bot stopped!
2024-02-20T14:18:03.571188+0200 INFO Start polling
2024-02-20T14:18:03.620189+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:18:09.478510+0200 INFO Update id=59135052 is handled. Duration 407 ms by bot id=6902908236
2024-02-20T14:18:11.427281+0200 INFO Update id=59135053 is handled. Duration 359 ms by bot id=6902908236
2024-02-20T14:18:12.864723+0200 INFO Update id=59135054 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:18:13.753537+0200 INFO Update id=59135055 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:18:16.927350+0200 INFO Update id=59135056 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T14:18:25.578061+0200 INFO Update id=59135057 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:18:32.100533+0200 INFO Update id=59135058 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T14:18:36.209031+0200 INFO Update id=59135059 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:18:40.089763+0200 INFO Update id=59135060 is handled. Duration 406 ms by bot id=6902908236
2024-02-20T14:18:46.637706+0200 INFO Update id=59135061 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:18:48.060139+0200 INFO Update id=59135062 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T14:19:39.846965+0200 INFO Update id=59135063 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T14:19:41.027025+0200 ERROR Cannot get window data for state <State 'MainMenu:select_action'>
2024-02-20T14:19:41.029024+0200 INFO Update id=59135064 is not handled. Duration 0 ms by bot id=6902908236
2024-02-20T14:19:41.034024+0200 ERROR Cause exception while process update id=59135064 by bot id=6902908236
AttributeError: 'NoneType' object has no attribute 'role'
Traceback (most recent call last):

  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code

  File "E:\PythonProjects\Arbitrix\bot\__main__.py", line 116, in <module>
    asyncio.run(main())
    │       │   └ <function main at 0x000002A9509A1E40>
    │       └ <function run at 0x000002A94841C540>
    └ <module 'asyncio' from 'C:\\Users\\Solarmove\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\asyncio\\__init__.py'>

  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           │      │   └ <coroutine object main at 0x000002A95095E340>
           │      └ <function Runner.run at 0x000002A9484C0900>
           └ <asyncio.runners.Runner object at 0x000002A9508CE950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<main() running at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\loguru\_logger.py:1263...
           │    │     └ <function BaseEventLoop.run_until_complete at 0x000002A9484AA3E0>
           │    └ <ProactorEventLoop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x000002A9508CE950>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 637, in run_until_complete
    self.run_forever()
    │    └ <function ProactorEventLoop.run_forever at 0x000002A948586340>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\windows_events.py", line 321, in run_forever
    super().run_forever()
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 604, in run_forever
    self._run_once()
    │    └ <function BaseEventLoop._run_once at 0x000002A9484C0180>
    └ <ProactorEventLoop running=True closed=False debug=False>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\base_events.py", line 1909, in _run_once
    handle._run()
    │      └ <function Handle._run at 0x000002A9483EDA80>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\asyncio\events.py", line 80, in _run
    self._context.run(self._callback, *self._args)
    │    │            │    │           │    └ <member '_args' of 'Handle' objects>
    │    │            │    │           └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    │            │    └ <member '_callback' of 'Handle' objects>
    │    │            └ <Handle Task.task_wakeup(<Future finished result=None>)>
    │    └ <member '_context' of 'Handle' objects>
    └ <Handle Task.task_wakeup(<Future finished result=None>)>
> File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
                     │    │           │    │         └ {'dispatcher': <Dispatcher '0x2a950a025d0'>, 'bots': (<aiogram.client.bot.Bot object at 0x000002A950A25E10>,), 'dp': <Dispatc...
                     │    │           │    └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                     │    │           └ <aiogram.client.bot.Bot object at 0x000002A950A25E10>
                     │    └ <function Dispatcher.feed_update at 0x000002A94E3327A0>
                     └ <Dispatcher '0x2a950a025d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
                     │    │      └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002A94E330FE0>
                     │    └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002A950AF94D0>
                     └ <Dispatcher '0x2a950a025d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.dispatcher.middlewares.user_context.UserContextMiddleware object at 0x000002A950AF9B10>, functools...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<aiogram.fsm.middleware.FSMContextMiddleware object at 0x000002A950AF9AD0>, functools.partial(<bot.middlewa...
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
          │    │   │      │    │      └ <traceback object at 0x000002A95144DC00>
          │    │   │      │    └ AttributeError("'NoneType' object has no attribute 'role'")
          │    │   │      └ <class 'AttributeError'>
          │    │   └ <method 'athrow' of 'async_generator' objects>
          │    └ <async_generator object RedisEventIsolation.lock at 0x000002A950B71990>
          └ <contextlib._AsyncGeneratorContextManager object at 0x000002A95133EED0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.RedisI18nMiddleware object at 0x000002A950AF9F90>, <function TelegramEventObse...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function TelegramEventObserver.trigger at 0x000002A950B93D80>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002A950B01650>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002A9508E0890>, <function CallableObject.c...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ Update(update_id=59135064, message=None, edited_message=None, channel_post=None, edited_channel_post=None, message_reaction=N...
                 └ <function CallableObject.call at 0x000002A95109B740>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dispatcher._listen_update of <Dispatcher '0x2a950a025d0'>>, Update(update_id=59135064, messag...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
                 │    │                           │                  │        └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │    │                           │                  └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    │                           └ 'callback_query'
                 │    └ <function Router.propagate_event at 0x000002A94E331DA0>
                 └ <Dispatcher '0x2a950a025d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002A95109B9C0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002A94E330FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002A950AEB9D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002A94E331E40>
                 └ <Dispatcher '0x2a950a025d0'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002A94E331DA0>
                     └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002A95109BD80>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002A94E330FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002A950AFB350>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.BgFactoryMiddleware object at 0x000002A950F1F010>, <function Rou...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ <function Router.propagate_event.<locals>._wrapped at 0x000002A95109BB00>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002A94E331E40>
                 └ <Router '__main__'>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
                     │      │                           │                  │        └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │      │                           │                  └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │      │                           └ 'callback_query'
                     │      └ <function Router.propagate_event at 0x000002A94E331DA0>
                     └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
                 │        │                     │               │           └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │        │                     │               └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │        │                     └ <function Router.propagate_event.<locals>._wrapped at 0x000002A9513ACEA0>
                 │        └ <function TelegramEventObserver.wrap_outer_middleware at 0x000002A94E330FE0>
                 └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002A950B028D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
                 │    └ <function Router._propagate_event at 0x000002A94E331E40>
                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
                     │        │       │        └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                     │        │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                     │        └ <function TelegramEventObserver.trigger at 0x000002A94E331120>
                     └ <aiogram.dispatcher.event.telegram.TelegramEventObserver object at 0x000002A950B028D0>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
                 │             │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │             └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.db.DbSessionMiddleware object at 0x000002A950B01690>, functools.partial(<bot.middlewares.i...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<bot.middlewares.i18n_dialog.I18nDialogMiddleware object at 0x000002A9508E0890>, functools.partial(<aiogram...

  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<aiogram_dialog.manager.manager_middleware.ManagerMiddleware object at 0x000002A950F1EDD0>, functools.parti...

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
                 │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                 │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 └ functools.partial(<function context_saver_middleware at 0x000002A94E824180>, <function CallableObject.call at 0x000002A9513AE...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
                   │       │      └ {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_sessionmaker(class_='AsyncSession', bind=<sqlalchemy.ext.asyncio.e...
                   │       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                   └ <function CallableObject.call at 0x000002A9513AE020>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
                 └ functools.partial(<bound method Dialog._callback_handler of <Dialog(<StatesGroup 'FirstStartWindow'>)>>, CallbackQuery(id='78...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
          │      │                │                 │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
          │      │                │                 └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │      │                └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │      └ <function Window.process_callback at 0x000002A94E866F20>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
          │    │        │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
          │    │        │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
          │    │        │                └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function Keyboard.process_callback at 0x000002A94E657EC0>
          │    └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002A95081D310>
          └ <Window(<State 'FirstStartWindow:select_your_role'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
                 │    │                       │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
                 │    │                       │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
                 │    │                       └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
                 │    └ <function Group._process_other_callback at 0x000002A94E7E7380>
                 └ <aiogram_dialog.widgets.kbd.group.Group object at 0x000002A95081D310>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
             │ │                │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
             │ │                │         └ <Dialog(<StatesGroup 'FirstStartWindow'>)>
             │ │                └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
             │ └ <function Keyboard.process_callback at 0x000002A94E657EC0>
             └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000002A9508AB390>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
                 │    └ <function Button._process_own_callback at 0x000002A94E674B80>
                 └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000002A9508AB390>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
          │    │        │             │         │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
          │    │        │             │         └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000002A9508AB390>
          │    │        │             └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    │        └ <function SimpleEventProcessor.process_event at 0x000002A94E656020>
          │    └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002A950910390>
          └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000002A9508AB390>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          │    │        │      │       │         │       └ {}
          │    │        │      │       │         └ ()
          │    │        │      │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
          │    │        │      └ <aiogram_dialog.widgets.kbd.button.Button object at 0x000002A9508AB390>
          │    │        └ CallbackQuery(id='7898361888001133216', from_user=User(id=6133947978, is_bot=False, first_name='Easy Life Manager', last_name...
          │    └ <function on_select_newbie at 0x000002A9508A53A0>
          └ <aiogram_dialog.widgets.widget_event.SimpleEventProcessor object at 0x000002A950910390>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\start_menu\selected.py", line 24, in on_select_newbie
    await dialog_manager.start(WebMasterMenu.select_action, data=start_data)
          │              │     │             │                   └ None
          │              │     │             └ <State 'MainMenu:select_action'>
          │              │     └ <class 'bot.dialogs.web_master_menu.states.MainMenu'>
          │              └ <function ManagerImpl.start at 0x000002A94E853F60>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>

  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
          │    │             │      │     └ None
          │    │             │      └ None
          │    │             └ <State 'MainMenu:select_action'>
          │    └ <function ManagerImpl._start_normal at 0x000002A94E864180>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
          │    └ <function ManagerImpl.show at 0x000002A94E864540>
          └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                        │    │               └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
                        │    └ <function ManagerImpl.dialog at 0x000002A94E853880>
                        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                        │      │      │     └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
                        │      │      └ <Dialog(<StatesGroup 'MainMenu'>)>
                        │      └ <function Window.render at 0x000002A94E866FC0>
                        └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                         │    │         │       └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
                         │    │         └ <Dialog(<StatesGroup 'MainMenu'>)>
                         │    └ <function Window.load_data at 0x000002A94E866DE0>
                         └ <Window(<State 'MainMenu:select_action'>)>
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
    │    │            │    │        │       └ <property object at 0x000002A94E859710>
    │    │            │    │        └ <aiogram_dialog.manager.manager.ManagerImpl object at 0x000002A951517190>
    │    │            │    └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002A950B0A1D0>
    │    │            └ <Window(<State 'MainMenu:select_action'>)>
    │    └ <method 'update' of 'dict' objects>
    └ {'dialog_data': {}, 'start_data': None, 'middleware_data': {'dp': <Dispatcher '0x2a950a025d0'>, 'session_pool': async_session...
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
                 │    └ <function get_main_menu_data at 0x000002A9508A5260>
                 └ <aiogram_dialog.widgets.data.data_context.PreviewAwareGetter object at 0x000002A950B0A1D0>

  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 14, in get_main_menu_data
    data['user_role'] = user_model.role
    │                   └ None
    └ {}

AttributeError: 'NoneType' object has no attribute 'role'
2024-02-20T14:19:43.713045+0200 INFO Update id=59135065 is handled. Duration 406 ms by bot id=6902908236
2024-02-20T14:19:44.873045+0200 INFO Update id=59135066 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T14:19:46.245086+0200 INFO Update id=59135067 is handled. Duration 264 ms by bot id=6902908236
2024-02-20T14:19:48.247126+0200 INFO Update id=59135068 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T14:19:54.986126+0200 INFO Update id=59135069 is handled. Duration 172 ms by bot id=6902908236
2024-02-20T14:19:59.478123+0200 INFO Update id=59135070 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:20:05.299238+0200 INFO Update id=59135071 is handled. Duration 469 ms by bot id=6902908236
2024-02-20T14:20:19.041186+0200 INFO Update id=59135072 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T14:20:20.183558+0200 INFO Update id=59135073 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T14:20:21.272829+0200 INFO Update id=59135074 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T14:20:22.325737+0200 INFO Update id=59135075 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T14:20:23.387995+0200 INFO Update id=59135076 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T14:20:24.600348+0200 INFO Update id=59135077 is handled. Duration 235 ms by bot id=6902908236
2024-02-20T14:20:26.337397+0200 INFO Update id=59135078 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:20:27.285452+0200 INFO Update id=59135079 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T14:20:28.307300+0200 INFO Update id=59135080 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:20:28.930813+0200 INFO Update id=59135081 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:20:30.960489+0200 INFO Update id=59135082 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T14:30:48.859916+0200 INFO Polling stopped
2024-02-20T14:30:49.123776+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:30:49.124779+0200 INFO Bot stopped!
2024-02-20T14:30:52.574015+0200 INFO Start polling
2024-02-20T14:30:52.620017+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:31:09.856985+0200 INFO Update id=59135083 is handled. Duration 422 ms by bot id=6902908236
2024-02-20T14:31:11.807984+0200 INFO Update id=59135084 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:31:13.218007+0200 INFO Update id=59135085 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:31:15.233400+0200 INFO Update id=59135086 is handled. Duration 469 ms by bot id=6902908236
2024-02-20T14:31:16.297682+0200 INFO Update id=59135087 is handled. Duration 515 ms by bot id=6902908236
2024-02-20T14:31:16.998066+0200 INFO Update id=59135088 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:31:20.566260+0200 INFO Update id=59135089 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T14:31:21.564260+0200 INFO Update id=59135090 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:31:24.197260+0200 INFO Update id=59135091 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:31:26.866339+0200 INFO Update id=59135092 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:31:28.246339+0200 INFO Update id=59135093 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:31:30.751342+0200 INFO Update id=59135094 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:31:31.854340+0200 INFO Update id=59135095 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T14:31:34.663433+0200 INFO Update id=59135096 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T14:31:35.790435+0200 INFO Update id=59135097 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T14:31:38.645979+0200 INFO Update id=59135098 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:31:39.704979+0200 INFO Update id=59135099 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:31:40.589979+0200 INFO Update id=59135100 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:31:41.825979+0200 INFO Update id=59135101 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T14:31:49.623295+0200 INFO Update id=59135102 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:31:51.620721+0200 INFO Update id=59135103 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T14:31:56.661779+0200 INFO Update id=59135104 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:32:10.615827+0200 INFO Update id=59135105 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T14:32:11.532826+0200 INFO Update id=59135106 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T14:32:14.630867+0200 INFO Update id=59135107 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T14:32:20.300044+0200 INFO Update id=59135108 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T14:32:21.152044+0200 INFO Update id=59135109 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:32:21.886044+0200 INFO Update id=59135110 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T14:32:22.684046+0200 INFO Update id=59135111 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:44:54.466353+0200 INFO Update id=59135112 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T14:45:11.750609+0200 INFO Update id=59135113 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:45:18.479515+0200 INFO Update id=59135114 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T14:45:32.669604+0200 INFO Update id=59135115 is handled. Duration 703 ms by bot id=6902908236
2024-02-20T14:45:59.964266+0200 INFO Update id=59135116 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T14:46:03.144335+0200 INFO Update id=59135117 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T14:46:24.506531+0200 INFO Polling stopped
2024-02-20T14:46:24.780808+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:46:24.782808+0200 INFO Bot stopped!
2024-02-20T14:46:27.746855+0200 INFO Start polling
2024-02-20T14:46:27.796855+0200 INFO Run polling for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T14:46:38.058709+0200 INFO Update id=59135118 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T14:46:38.923709+0200 INFO Update id=59135119 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T14:46:40.668709+0200 INFO Update id=59135120 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:46:40.909709+0200 INFO Update id=59135121 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:46:42.827792+0200 INFO Update id=59135122 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T14:46:44.468852+0200 INFO Update id=59135123 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:46:46.439923+0200 INFO Update id=59135124 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:46:50.542211+0200 INFO Update id=59135125 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T14:46:52.303816+0200 INFO Update id=59135126 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T14:46:58.683882+0200 INFO Update id=59135127 is handled. Duration 405 ms by bot id=6902908236
2024-02-20T14:47:51.721146+0200 INFO Update id=59135128 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:47:58.950878+0200 INFO Update id=59135129 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:48:00.461410+0200 INFO Update id=59135130 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T14:48:07.255549+0200 INFO Update id=59135131 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:48:12.777839+0200 INFO Update id=59135132 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T14:48:14.485722+0200 INFO Update id=59135133 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:48:22.120634+0200 INFO Update id=59135134 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T14:48:29.068348+0200 INFO Update id=59135135 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:48:31.076347+0200 INFO Update id=59135136 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T14:50:43.907135+0200 INFO Update id=59135137 is handled. Duration 282 ms by bot id=6902908236
2024-02-20T14:50:46.539352+0200 INFO Update id=59135138 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T14:50:53.278396+0200 INFO Update id=59135139 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T14:50:56.199089+0200 INFO Update id=59135140 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T14:50:58.575243+0200 INFO Update id=59135141 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T14:51:02.734382+0200 INFO Update id=59135142 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:51:05.671846+0200 INFO Update id=59135143 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:51:07.800264+0200 INFO Update id=59135144 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:51:09.031868+0200 INFO Update id=59135145 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:51:15.402549+0200 INFO Update id=59135146 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T14:51:18.148128+0200 INFO Update id=59135147 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:51:24.189745+0200 INFO Update id=59135148 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T14:51:27.075800+0200 INFO Update id=59135149 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:51:28.470902+0200 INFO Update id=59135150 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T14:51:35.494469+0200 INFO Update id=59135151 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:53:06.659683+0200 INFO Update id=59135152 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T14:53:08.804959+0200 INFO Update id=59135153 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T14:53:12.449890+0200 INFO Update id=59135154 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T14:53:54.113906+0200 INFO Update id=59135155 is handled. Duration 452 ms by bot id=6902908236
2024-02-20T14:55:17.059266+0200 INFO Update id=59135156 is handled. Duration 343 ms by bot id=6902908236
2024-02-20T14:55:22.225465+0200 INFO Update id=59135157 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T14:55:26.003071+0200 INFO Update id=59135158 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T14:55:29.505234+0200 INFO Update id=59135159 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:55:31.333232+0200 INFO Update id=59135160 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T14:56:39.082313+0200 INFO Update id=59135161 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T14:56:42.475581+0200 INFO Update id=59135162 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T14:57:16.531352+0200 INFO Update id=59135163 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T14:57:19.113399+0200 INFO Update id=59135164 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T14:57:21.671114+0200 INFO Update id=59135165 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T14:57:24.187536+0200 INFO Update id=59135166 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T14:57:34.603549+0200 INFO Update id=59135167 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T14:57:37.951083+0200 INFO Update id=59135168 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:57:39.992538+0200 INFO Update id=59135169 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T14:58:27.989953+0200 INFO Update id=59135170 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T14:58:30.213116+0200 INFO Update id=59135171 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T14:59:02.686051+0200 INFO Update id=59135172 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T14:59:04.178136+0200 INFO Update id=59135173 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:59:31.216957+0200 INFO Update id=59135174 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T14:59:33.116547+0200 INFO Update id=59135175 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T14:59:35.127898+0200 INFO Update id=59135176 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T14:59:39.506102+0200 INFO Update id=59135177 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T14:59:42.672984+0200 INFO Update id=59135178 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T14:59:45.129832+0200 INFO Update id=59135179 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T14:59:47.167828+0200 INFO Update id=59135180 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T14:59:49.150918+0200 INFO Update id=59135181 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T14:59:52.912213+0200 INFO Update id=59135182 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T14:59:54.321095+0200 INFO Update id=59135183 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T14:59:56.889180+0200 INFO Update id=59135184 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:00:04.701179+0200 INFO Update id=59135185 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T15:00:45.558696+0200 INFO Update id=59135186 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:00:51.590531+0200 INFO Update id=59135187 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:00:56.573541+0200 INFO Update id=59135188 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T15:02:54.823439+0200 INFO Update id=59135189 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T15:03:00.046660+0200 INFO Update id=59135190 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:03:11.104264+0200 INFO Update id=59135191 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:03:13.157920+0200 INFO Update id=59135192 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T15:03:14.263922+0200 INFO Update id=59135193 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:03:15.915000+0200 INFO Update id=59135194 is handled. Duration 515 ms by bot id=6902908236
2024-02-20T15:03:18.287537+0200 INFO Update id=59135195 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T15:03:19.687892+0200 INFO Update id=59135196 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:03:21.513863+0200 INFO Update id=59135197 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T15:03:23.544883+0200 INFO Update id=59135198 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:03:33.820249+0200 INFO Update id=59135199 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:03:39.383085+0200 INFO Update id=59135200 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:03:42.243588+0200 INFO Update id=59135201 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:03:45.172935+0200 INFO Update id=59135202 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:03:47.406465+0200 INFO Update id=59135203 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:03:50.163519+0200 INFO Update id=59135204 is handled. Duration 578 ms by bot id=6902908236
2024-02-20T15:04:07.386060+0200 INFO Update id=59135205 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T15:04:12.949180+0200 INFO Update id=59135206 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:04:20.435458+0200 INFO Update id=59135207 is handled. Duration 687 ms by bot id=6902908236
2024-02-20T15:05:44.616048+0200 INFO Update id=59135208 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T15:05:50.826886+0200 INFO Update id=59135209 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T15:05:53.857355+0200 INFO Update id=59135210 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T15:05:58.143300+0200 INFO Update id=59135211 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:06:03.920626+0200 INFO Update id=59135212 is handled. Duration 578 ms by bot id=6902908236
2024-02-20T15:06:14.203419+0200 INFO Update id=59135213 is handled. Duration 358 ms by bot id=6902908236
2024-02-20T15:06:18.177672+0200 INFO Update id=59135214 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:06:20.982734+0200 INFO Update id=59135215 is handled. Duration 407 ms by bot id=6902908236
2024-02-20T15:06:24.806210+0200 INFO Update id=59135216 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:06:30.209827+0200 INFO Update id=59135217 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:06:32.256877+0200 INFO Update id=59135218 is handled. Duration 468 ms by bot id=6902908236
2024-02-20T15:07:29.343957+0200 INFO Update id=59135219 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:07:34.432488+0200 INFO Update id=59135220 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:07:56.088954+0200 INFO Update id=59135221 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T15:08:15.381730+0200 INFO Update id=59135222 is handled. Duration 468 ms by bot id=6902908236
2024-02-20T15:09:11.311678+0200 INFO Update id=59135223 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:09:14.125815+0200 INFO Update id=59135224 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T15:09:33.440917+0200 INFO Update id=59135225 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T15:09:38.553557+0200 INFO Update id=59135226 is handled. Duration 202 ms by bot id=6902908236
2024-02-20T15:10:43.273474+0200 INFO Update id=59135227 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:10:46.220280+0200 INFO Update id=59135228 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:11:00.501021+0200 INFO Update id=59135229 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:12:41.358873+0200 INFO Update id=59135230 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T15:12:47.143524+0200 INFO Update id=59135231 is handled. Duration 516 ms by bot id=6902908236
2024-02-20T15:12:52.658255+0200 INFO Update id=59135232 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:12:55.183490+0200 INFO Update id=59135233 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:12:56.935085+0200 INFO Update id=59135234 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:13:02.704941+0200 INFO Update id=59135235 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T15:13:04.014253+0200 INFO Update id=59135236 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:13:07.100836+0200 INFO Update id=59135237 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:13:11.777221+0200 INFO Update id=59135238 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T15:13:15.940793+0200 INFO Update id=59135239 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:13:28.205372+0200 INFO Update id=59135240 is handled. Duration 108 ms by bot id=6902908236
2024-02-20T15:13:29.579748+0200 INFO Update id=59135241 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:13:31.436749+0200 INFO Update id=59135242 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:13:34.076304+0200 INFO Update id=59135243 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T15:13:44.006641+0200 INFO Update id=59135244 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:13:54.325022+0200 INFO Update id=59135245 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:13:57.456441+0200 INFO Update id=59135246 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:14:05.162975+0200 INFO Update id=59135247 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T15:14:07.978012+0200 INFO Update id=59135248 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T15:14:10.675763+0200 INFO Update id=59135249 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:14:15.737538+0200 INFO Update id=59135250 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:14:22.466516+0200 INFO Update id=59135251 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:14:25.387041+0200 INFO Update id=59135252 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:14:29.028609+0200 INFO Update id=59135253 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:14:30.452948+0200 INFO Update id=59135254 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:14:33.622509+0200 INFO Update id=59135255 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:14:35.183570+0200 INFO Update id=59135256 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:14:36.732600+0200 INFO Update id=59135257 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T15:14:38.677997+0200 INFO Update id=59135258 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:14:39.957343+0200 INFO Update id=59135259 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:14:42.010951+0200 INFO Update id=59135260 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:14:43.586361+0200 INFO Update id=59135261 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T15:15:10.429365+0200 INFO Update id=59135262 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T15:15:11.557202+0200 INFO Update id=59135263 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T15:15:13.664407+0200 INFO Update id=59135264 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:15:15.714715+0200 INFO Update id=59135265 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:15:27.407835+0200 INFO Update id=59135266 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:15:57.071195+0200 INFO Update id=59135267 is handled. Duration 467 ms by bot id=6902908236
2024-02-20T15:15:59.339406+0200 INFO Update id=59135268 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:16:01.830565+0200 INFO Update id=59135269 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:16:05.459426+0200 INFO Update id=59135270 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T15:16:07.291430+0200 INFO Update id=59135271 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:16:10.012469+0200 INFO Update id=59135272 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:16:16.540511+0200 INFO Update id=59135273 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:16:20.702234+0200 INFO Update id=59135274 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T15:16:37.894001+0200 INFO Update id=59135275 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:16:42.319840+0200 INFO Update id=59135276 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:16:43.317344+0200 INFO Update id=59135277 is handled. Duration 375 ms by bot id=6902908236
2024-02-20T15:16:47.130046+0200 INFO Update id=59135278 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:16:51.160485+0200 INFO Update id=59135279 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T15:17:00.867623+0200 INFO Update id=59135280 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:17:02.930840+0200 INFO Update id=59135281 is handled. Duration 452 ms by bot id=6902908236
2024-02-20T15:17:04.355312+0200 INFO Update id=59135282 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T15:17:08.059772+0200 INFO Update id=59135283 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:17:12.447088+0200 INFO Update id=59135284 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T15:17:25.840450+0200 INFO Update id=59135285 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T15:17:28.112218+0200 INFO Update id=59135286 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:17:30.977768+0200 INFO Update id=59135287 is handled. Duration 407 ms by bot id=6902908236
2024-02-20T15:17:32.251861+0200 INFO Update id=59135288 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T15:17:35.164391+0200 INFO Update id=59135289 is handled. Duration 390 ms by bot id=6902908236
2024-02-20T15:17:41.164412+0200 INFO Update id=59135290 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:17:45.275765+0200 INFO Update id=59135291 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:17:48.560957+0200 INFO Update id=59135292 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:17:51.071424+0200 INFO Update id=59135293 is handled. Duration 217 ms by bot id=6902908236
2024-02-20T15:17:53.687638+0200 INFO Update id=59135294 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:17:57.301058+0200 INFO Update id=59135295 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:18:03.958469+0200 INFO Update id=59135296 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:18:10.401923+0200 INFO Update id=59135297 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:18:12.935742+0200 INFO Update id=59135298 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:18:14.585129+0200 INFO Update id=59135299 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:18:16.560546+0200 INFO Update id=59135300 is handled. Duration 437 ms by bot id=6902908236
2024-02-20T15:18:18.587595+0200 INFO Update id=59135301 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:19:20.149931+0200 INFO Update id=59135302 is handled. Duration 469 ms by bot id=6902908236
2024-02-20T15:19:21.966191+0200 INFO Update id=59135303 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:19:25.106453+0200 INFO Update id=59135304 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T15:19:27.171442+0200 INFO Update id=59135305 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:19:29.260840+0200 INFO Update id=59135306 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:21:20.072852+0200 INFO Update id=59135307 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:21:22.028596+0200 INFO Update id=59135308 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T15:21:23.285314+0200 INFO Update id=59135309 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T15:21:33.426927+0200 INFO Update id=59135310 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:21:34.999010+0200 INFO Update id=59135311 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:21:37.547536+0200 INFO Update id=59135312 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T15:21:39.218562+0200 INFO Update id=59135313 is handled. Duration 562 ms by bot id=6902908236
2024-02-20T15:21:42.958419+0200 INFO Update id=59135314 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:21:44.533831+0200 INFO Update id=59135315 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:21:46.107849+0200 INFO Update id=59135316 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:21:49.312223+0200 INFO Update id=59135317 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:21:51.408697+0200 INFO Update id=59135318 is handled. Duration 250 ms by bot id=6902908236
2024-02-20T15:21:52.917445+0200 INFO Update id=59135319 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T15:21:54.308857+0200 INFO Update id=59135320 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:21:57.259662+0200 INFO Update id=59135321 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:22:02.266279+0200 INFO Update id=59135322 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:22:05.467337+0200 INFO Update id=59135323 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:22:07.724389+0200 INFO Update id=59135324 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:22:09.865431+0200 INFO Update id=59135325 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T15:22:12.740803+0200 INFO Update id=59135326 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T15:22:14.150212+0200 INFO Update id=59135327 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T15:22:15.809010+0200 INFO Update id=59135328 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:22:17.366202+0200 INFO Update id=59135329 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T15:22:19.552555+0200 INFO Update id=59135330 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:22:21.014643+0200 INFO Update id=59135331 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:22:23.150893+0200 INFO Update id=59135332 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:22:54.920303+0200 INFO Update id=59135333 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:23:00.432264+0200 INFO Update id=59135334 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:23:01.275261+0200 INFO Update id=59135335 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:23:02.267311+0200 INFO Update id=59135336 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:23:03.227454+0200 INFO Update id=59135337 is handled. Duration 235 ms by bot id=6902908236
2024-02-20T15:23:07.230671+0200 INFO Update id=59135338 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T15:24:00.594433+0200 INFO Update id=59135339 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T15:24:02.848185+0200 INFO Update id=59135340 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:24:07.435206+0200 INFO Update id=59135341 is handled. Duration 343 ms by bot id=6902908236
2024-02-20T15:24:10.177495+0200 INFO Update id=59135342 is handled. Duration 265 ms by bot id=6902908236
2024-02-20T15:36:14.215694+0200 INFO Update id=59135343 is handled. Duration 516 ms by bot id=6902908236
2024-02-20T15:36:15.840723+0200 INFO Update id=59135344 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T15:45:43.785579+0200 INFO Update id=59135345 is handled. Duration 281 ms by bot id=6902908236
2024-02-20T15:46:13.733792+0200 INFO Update id=59135346 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T15:46:24.067908+0200 INFO Update id=59135347 is handled. Duration 280 ms by bot id=6902908236
2024-02-20T15:46:26.315396+0200 INFO Update id=59135348 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T15:46:30.191380+0200 INFO Update id=59135349 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:46:32.659219+0200 INFO Update id=59135350 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T15:46:34.125668+0200 INFO Update id=59135351 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T15:46:38.819934+0200 INFO Update id=59135352 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:46:40.973910+0200 INFO Update id=59135353 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:46:43.362058+0200 INFO Update id=59135354 is handled. Duration 391 ms by bot id=6902908236
2024-02-20T15:46:46.043299+0200 INFO Update id=59135355 is handled. Duration 109 ms by bot id=6902908236
2024-02-20T15:46:47.777661+0200 INFO Update id=59135356 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:46:49.659987+0200 INFO Update id=59135357 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:46:50.755657+0200 INFO Update id=59135358 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:46:51.962845+0200 INFO Update id=59135359 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:46:53.473762+0200 INFO Update id=59135360 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T15:46:55.039753+0200 INFO Update id=59135361 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T15:46:58.119695+0200 INFO Update id=59135362 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T15:46:59.925675+0200 INFO Update id=59135363 is handled. Duration 609 ms by bot id=6902908236
2024-02-20T15:47:41.045240+0200 INFO Update id=59135364 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T15:47:45.704941+0200 INFO Update id=59135365 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T15:47:59.560859+0200 INFO Update id=59135366 is handled. Duration 234 ms by bot id=6902908236
2024-02-20T15:48:03.989459+0200 INFO Update id=59135367 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:48:05.018031+0200 INFO Update id=59135368 is handled. Duration 108 ms by bot id=6902908236
2024-02-20T15:48:06.156340+0200 INFO Update id=59135369 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T15:48:07.127037+0200 INFO Update id=59135370 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:48:08.518166+0200 INFO Update id=59135371 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:48:14.042530+0200 INFO Update id=59135372 is handled. Duration 172 ms by bot id=6902908236
2024-02-20T15:48:16.184869+0200 INFO Update id=59135373 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:48:19.466236+0200 INFO Update id=59135374 is handled. Duration 266 ms by bot id=6902908236
2024-02-20T15:48:20.823034+0200 INFO Update id=59135375 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T15:48:22.968664+0200 INFO Update id=59135376 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:48:24.127560+0200 INFO Update id=59135377 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:48:29.040758+0200 INFO Update id=59135378 is handled. Duration 422 ms by bot id=6902908236
2024-02-20T15:48:31.866440+0200 INFO Update id=59135379 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T15:48:33.321408+0200 INFO Update id=59135380 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T15:48:36.016040+0200 INFO Update id=59135381 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T15:48:39.936323+0200 INFO Update id=59135382 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T15:48:45.943567+0200 INFO Update id=59135383 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T15:48:47.281888+0200 INFO Update id=59135384 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T15:51:24.446118+0200 INFO Update id=59135385 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T15:51:25.983768+0200 INFO Update id=59135386 is handled. Duration 297 ms by bot id=6902908236
2024-02-20T15:51:28.020076+0200 INFO Update id=59135387 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T16:01:16.865740+0200 INFO Update id=59135388 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T16:01:21.707435+0200 INFO Update id=59135389 is handled. Duration 203 ms by bot id=6902908236
2024-02-20T16:01:24.306745+0200 INFO Update id=59135390 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T16:01:25.740765+0200 INFO Update id=59135391 is handled. Duration 139 ms by bot id=6902908236
2024-02-20T16:01:27.430135+0200 INFO Update id=59135392 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T16:01:30.205601+0200 INFO Update id=59135393 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T16:01:38.116506+0200 INFO Update id=59135394 is handled. Duration 264 ms by bot id=6902908236
2024-02-20T16:01:39.906812+0200 INFO Update id=59135395 is handled. Duration 407 ms by bot id=6902908236
2024-02-20T16:01:41.329659+0200 INFO Update id=59135396 is handled. Duration 453 ms by bot id=6902908236
2024-02-20T16:01:42.284093+0200 INFO Update id=59135397 is handled. Duration 469 ms by bot id=6902908236
2024-02-20T16:01:44.380263+0200 INFO Update id=59135398 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T16:01:45.583174+0200 INFO Update id=59135399 is handled. Duration 156 ms by bot id=6902908236
2024-02-20T16:01:47.342338+0200 INFO Update id=59135400 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T16:01:49.488610+0200 INFO Update id=59135401 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T16:01:54.933266+0200 INFO Update id=59135402 is handled. Duration 484 ms by bot id=6902908236
2024-02-20T16:01:58.522734+0200 INFO Update id=59135403 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T16:02:00.545197+0200 INFO Update id=59135404 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T16:02:06.684056+0200 INFO Update id=59135405 is handled. Duration 140 ms by bot id=6902908236
2024-02-20T16:02:07.861564+0200 INFO Update id=59135406 is handled. Duration 157 ms by bot id=6902908236
2024-02-20T17:29:54.178956+0200 INFO Update id=59135407 is handled. Duration 296 ms by bot id=6902908236
2024-02-20T17:29:55.534956+0200 INFO Update id=59135408 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T17:29:56.535955+0200 INFO Update id=59135409 is handled. Duration 187 ms by bot id=6902908236
2024-02-20T17:29:57.773007+0200 INFO Update id=59135410 is handled. Duration 328 ms by bot id=6902908236
2024-02-20T17:29:59.372107+0200 INFO Update id=59135411 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T17:30:00.668995+0200 INFO Update id=59135412 is handled. Duration 125 ms by bot id=6902908236
2024-02-20T17:30:05.466828+0200 INFO Update id=59135413 is handled. Duration 406 ms by bot id=6902908236
2024-02-20T17:30:08.369408+0200 INFO Update id=59135414 is handled. Duration 421 ms by bot id=6902908236
2024-02-20T17:30:11.735940+0200 INFO Update id=59135415 is handled. Duration 141 ms by bot id=6902908236
2024-02-20T17:30:54.598728+0200 INFO Update id=59135416 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T17:30:56.537417+0200 INFO Update id=59135417 is handled. Duration 359 ms by bot id=6902908236
2024-02-20T17:30:58.551922+0200 INFO Update id=59135418 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T17:31:01.505357+0200 INFO Update id=59135419 is handled. Duration 312 ms by bot id=6902908236
2024-02-20T17:31:02.944935+0200 INFO Update id=59135420 is handled. Duration 483 ms by bot id=6902908236
2024-02-20T17:31:03.815584+0200 INFO Update id=59135421 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T17:31:04.286872+0200 INFO Update id=59135422 is handled. Duration 344 ms by bot id=6902908236
2024-02-20T17:31:05.678156+0200 INFO Update id=59135423 is handled. Duration 218 ms by bot id=6902908236
2024-02-20T17:31:06.630416+0200 INFO Update id=59135424 is handled. Duration 171 ms by bot id=6902908236
2024-02-20T17:31:15.491921+0200 INFO Update id=59135425 is handled. Duration 155 ms by bot id=6902908236
2024-02-20T17:31:16.515920+0200 INFO Update id=59135426 is handled. Duration 233 ms by bot id=6902908236
2024-02-20T17:31:18.533795+0200 INFO Update id=59135427 is handled. Duration 219 ms by bot id=6902908236
2024-02-20T17:31:20.350835+0200 INFO Update id=59135428 is handled. Duration 469 ms by bot id=6902908236
2024-02-20T17:31:22.189834+0200 INFO Update id=59135429 is handled. Duration 327 ms by bot id=6902908236
2024-02-20T17:36:47.208452+0200 INFO Polling stopped
2024-02-20T17:36:47.464456+0200 INFO Polling stopped for bot @EasyLife_test3_bot id=6902908236 - 'EasyLife_test'
2024-02-20T17:36:47.466452+0200 INFO Bot stopped!
