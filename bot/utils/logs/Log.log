web_log.py [LINE:211] #INFO     [03.01.2024 00:40:07]  ::1 [01/Mar/2024:00:40:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:07]  Update id=925011838 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:07]  ::1 [01/Mar/2024:00:40:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:07]  Update id=925011839 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011840 is handled. Duration 264 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011843 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011845 is handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011842 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:40:08]  ::1 [01/Mar/2024:00:40:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011841 is handled. Duration 328 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011844 is handled. Duration 202 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011847 is handled. Duration 108 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:40:08]  Update id=925011846 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:41:06]  ::1 [01/Mar/2024:00:41:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:41:07]  Update id=925011848 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:41:09]  ::1 [01/Mar/2024:00:41:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:41:09]  Update id=925011849 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:41:10]  ::1 [01/Mar/2024:00:41:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:41:10]  Update id=925011850 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:42:07]  ::1 [01/Mar/2024:00:42:07 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (iPhone; CPU iPhone OS 16_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"
other_handlers.py [LINE:62] #INFO     [03.01.2024 00:42:07]  <MultiDictProxy()>
web_protocol.py [LINE:421] #ERROR    [03.01.2024 00:42:07]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 64, in handle_add_channel
    data = safe_parse_webapp_init_data(token=bot.token, init_data=data["_auth"])
                                                                  ~~~~^^^^^^^^^
KeyError: '_auth'
web_log.py [LINE:211] #INFO     [03.01.2024 00:42:07]  ::1 [01/Mar/2024:00:42:07 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (iPhone; CPU iPhone OS 16_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:09]  ::1 [01/Mar/2024:00:58:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:58:09]  Update id=925011851 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 00:58:09]  Task exception was never retrieved
future: <Task finished name='Task-83' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnknownIntent('Context not found for intent id: wC6tf5')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 250, in process_callback_query
    await self._load_context_by_intent(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 125, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 51, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: wC6tf5
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:11]  ::1 [01/Mar/2024:00:58:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:58:12]  Update id=925011852 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:13]  ::1 [01/Mar/2024:00:58:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:58:13]  Update id=925011853 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:16]  ::1 [01/Mar/2024:00:58:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 00:58:16]  Update id=925011854 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:33]  ::1 [01/Mar/2024:00:58:33 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
other_handlers.py [LINE:62] #INFO     [03.01.2024 00:58:33]  <MultiDictProxy()>
web_protocol.py [LINE:421] #ERROR    [03.01.2024 00:58:33]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 64, in handle_add_channel
KeyError: '_auth'
web_log.py [LINE:211] #INFO     [03.01.2024 00:58:33]  ::1 [01/Mar/2024:00:58:33 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 00:58:45]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 00:59:01]  ::1 [01/Mar/2024:00:59:01 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 00:59:01]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 66, in handle_add_channel
    data = safe_parse_webapp_init_data(token=bot.token, init_data=data["_auth"])
                                                                  ~~~~^^^^^^^^^
KeyError: '_auth'
web_log.py [LINE:211] #INFO     [03.01.2024 00:59:01]  ::1 [01/Mar/2024:00:59:01 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:00:41]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:00:41]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001B542530ED0>
web_log.py [LINE:211] #INFO     [03.01.2024 01:00:56]  ::1 [01/Mar/2024:01:00:56 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:00:56]  ::1 [01/Mar/2024:01:00:56 +0200] "POST /add-channel HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:01:07]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:01:07]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000277B18EE0D0>
web_log.py [LINE:211] #INFO     [03.01.2024 01:01:17]  ::1 [01/Mar/2024:01:01:17 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:01:17]  ::1 [01/Mar/2024:01:01:17 +0200] "POST /add-channel HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:05:24]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:05:24]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000135EA720CD0>
web_log.py [LINE:211] #INFO     [03.01.2024 01:05:40]  ::1 [01/Mar/2024:01:05:40 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:05:40]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 66, in handle_add_channel
    data = check_webapp_signature(token=bot.token, init_data=data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\utils\web_app.py", line 78, in check_webapp_signature
    parsed_data = dict(parse_qsl(init_data, strict_parsing=True))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 733, in parse_qsl
    qs, _coerce_result = _coerce_args(qs)
                         ^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 124, in _coerce_args
    return _decode_args(args) + (_encode_result,)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 108, in _decode_args
    return tuple(x.decode(encoding, errors) if x else '' for x in args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 108, in <genexpr>
    return tuple(x.decode(encoding, errors) if x else '' for x in args)
                 ^^^^^^^^
AttributeError: 'dict' object has no attribute 'decode'
web_log.py [LINE:211] #INFO     [03.01.2024 01:05:40]  ::1 [01/Mar/2024:01:05:40 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:21:07]  ::1 [01/Mar/2024:01:21:07 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:21:07]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 66, in handle_add_channel
    async with db_factory() as session:
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\utils\web_app.py", line 78, in check_webapp_signature
    parsed_data = dict(parse_qsl(init_data, strict_parsing=True))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 733, in parse_qsl
    qs, _coerce_result = _coerce_args(qs)
                         ^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 124, in _coerce_args
    return _decode_args(args) + (_encode_result,)
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 108, in _decode_args
    return tuple(x.decode(encoding, errors) if x else '' for x in args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\urllib\parse.py", line 108, in <genexpr>
    return tuple(x.decode(encoding, errors) if x else '' for x in args)
                 ^^^^^^^^
AttributeError: 'dict' object has no attribute 'decode'
web_log.py [LINE:211] #INFO     [03.01.2024 01:21:07]  ::1 [01/Mar/2024:01:21:07 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:24:04]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:24:04]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000019575A00910>
web_log.py [LINE:211] #INFO     [03.01.2024 01:28:23]  ::1 [01/Mar/2024:01:28:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:28:24]  Update id=925011855 is handled. Duration 234 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:28:28]  ::1 [01/Mar/2024:01:28:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:28:28]  Update id=925011856 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:28:52]  ::1 [01/Mar/2024:01:28:52 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:28:52]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(*data_for_db)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 13, in add_channel
    query = insert(Channels).values(
            ^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 280, in _generative
    x = fn(self, *args, **kw)
        ^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 313, in check
    return fn(self, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1117, in values
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Only a single dictionary/tuple or list of dictionaries/tuples is accepted positionally.
web_log.py [LINE:211] #INFO     [03.01.2024 01:28:52]  ::1 [01/Mar/2024:01:28:52 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:29:21]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:29:39]  ::1 [01/Mar/2024:01:29:39 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:29:39]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 78, in handle_add_channel
    for key, value in DEFAULT_CHANNEL_TOPPICS:
        ^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
web_log.py [LINE:211] #INFO     [03.01.2024 01:29:39]  ::1 [01/Mar/2024:01:29:39 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:29:56]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:29:56]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001E20B198510>
web_log.py [LINE:211] #INFO     [03.01.2024 01:30:12]  ::1 [01/Mar/2024:01:30:12 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:30:12]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(**data_for_db)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ChannelRequestsRepo.add_channel() got an unexpected keyword argument 'channel_title'
web_log.py [LINE:211] #INFO     [03.01.2024 01:30:12]  ::1 [01/Mar/2024:01:30:12 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:30:48]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:30:48]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001AFC2F2A790>
web_log.py [LINE:211] #INFO     [03.01.2024 01:31:05]  ::1 [01/Mar/2024:01:31:05 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:31:05]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.NotNullViolationError: null значення в стовпці "Тематика канала" відношення "channels" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, zxcxz, 387375605, null, null, zxz, 2342, 23432, 345345, 345, 34, 345, 53345, 35, WAIT_FOR_PAYMENT).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "Тематика канала" відношення "channels" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, zxcxz, 387375605, null, null, zxz, 2342, 23432, 345345, 345, 34, 345, 53345, 35, WAIT_FOR_PAYMENT).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(**data_for_db)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 16, in add_channel
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "Тематика канала" відношення "channels" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, zxcxz, 387375605, null, null, zxz, 2342, 23432, 345345, 345, 34, 345, 53345, 35, WAIT_FOR_PAYMENT).
[SQL: INSERT INTO channels ("Название канала", "ID владельца канала", "Тематика канала", "Кастомна Тематика канала", "Ссылка на канал", "Количество подписчиков", "Процент мужчин", "Процент женщин", "Средний охват одной публикации", "Средний охват одной рекламной публикации", "Минимальная цена рекламы", "Комментарий", "Контакт", status) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BIGINT, $7::FLOAT, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::channelstatus) ON CONFLICT DO NOTHING RETURNING channels.id]
[parameters: ('zxcxz', 387375605, None, None, 'zxz', 2342, 23432, 345345, 345, 34, 345, '53345', '35', 'WAIT_FOR_PAYMENT')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
web_log.py [LINE:211] #INFO     [03.01.2024 01:31:05]  ::1 [01/Mar/2024:01:31:05 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:31:47]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:31:47]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001F2A9EDEED0>
web_log.py [LINE:211] #INFO     [03.01.2024 01:31:58]  ::1 [01/Mar/2024:01:31:58 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:31:58]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 103, in handle_add_channel
    await bot.send_message(user_id, "<b>✅Канал успішно додано.</b>\n\nОчікуйте підтвердження адміністратора бота.")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Bot.send_message() missing 1 required positional argument: 'text'
web_log.py [LINE:211] #INFO     [03.01.2024 01:31:58]  ::1 [01/Mar/2024:01:31:58 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:32:30]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:32:30]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001D3787A6690>
web_log.py [LINE:211] #INFO     [03.01.2024 01:35:19]  ::1 [01/Mar/2024:01:35:19 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:35:19]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 103, in handle_add_channel
    await bot.send_message(chat_id=user_id, text="<b>✅Канал успішно додано.</b>\n\nОчікуйте підтвердження адміністратора бота.")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: Bot.send_message() missing 1 required positional argument: 'self'
web_log.py [LINE:211] #INFO     [03.01.2024 01:35:19]  ::1 [01/Mar/2024:01:35:19 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:35:49]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:35:49]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000019F6DC02350>
web_log.py [LINE:211] #INFO     [03.01.2024 01:36:03]  ::1 [01/Mar/2024:01:36:03 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:36:03]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(**data_for_db)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 16, in add_channel
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"
[SQL: INSERT INTO channels ("Название канала", "ID владельца канала", "Тематика канала", "Кастомна Тематика канала", "Ссылка на канал", "Количество подписчиков", "Процент мужчин", "Процент женщин", "Средний охват одной публикации", "Средний охват одной рекламной публикации", "Минимальная цена рекламы", "Комментарий", "Контакт", status) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BIGINT, $7::FLOAT, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::channelstatus) ON CONFLICT DO NOTHING RETURNING channels.id]
[parameters: ('2', 387375605, 'news', None, 'D', 2, 2, 234, 1, 2, 3, '4', '5', 'WAIT_ADMIN_CONFIRM')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
web_log.py [LINE:211] #INFO     [03.01.2024 01:36:03]  ::1 [01/Mar/2024:01:36:03 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 01:36:11]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:36:11]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000264CAF9CDD0>
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:36:11]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000264CABAB3F0>, 303737.0)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000264CA8B6A50>
web_log.py [LINE:211] #INFO     [03.01.2024 01:37:30]  ::1 [01/Mar/2024:01:37:30 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:37:30]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.InvalidTextRepresentationError: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(**data_for_db)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 16, in add_channel
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.InvalidTextRepresentationError'>: неприпустиме вхідне значення для переліку channelstatus: "WAIT_ADMIN_CONFIRM"
[SQL: INSERT INTO channels ("Название канала", "ID владельца канала", "Тематика канала", "Кастомна Тематика канала", "Ссылка на канал", "Количество подписчиков", "Процент мужчин", "Процент женщин", "Средний охват одной публикации", "Средний охват одной рекламной публикации", "Минимальная цена рекламы", "Комментарий", "Контакт", status) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BIGINT, $7::FLOAT, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::channelstatus) ON CONFLICT DO NOTHING RETURNING channels.id]
[parameters: ('3', 387375605, 'news', None, '4', 5, 5, 7, 6, 8, 9, '0-', '9', 'WAIT_ADMIN_CONFIRM')]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
web_log.py [LINE:211] #INFO     [03.01.2024 01:37:30]  ::1 [01/Mar/2024:01:37:30 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:37:30]  ::1 [01/Mar/2024:01:37:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:37:30]  Update id=925011857 is handled. Duration 280 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:38:39]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:39:48]  ::1 [01/Mar/2024:01:39:48 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 01:39:48]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.ForeignKeyViolationError: insert або update в таблиці "channels" порушує обмеження зовнішнього ключа "channels_ID владельца канала_fkey"
DETAIL:  Ключ (ID владельца канала)=(387375605) не присутній в таблиці "users".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert або update в таблиці "channels" порушує обмеження зовнішнього ключа "channels_ID владельца канала_fkey"
DETAIL:  Ключ (ID владельца канала)=(387375605) не присутній в таблиці "users".

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 101, in handle_add_channel
    await repo.channel_repo.add_channel(**data_for_db)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 16, in add_channel
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.ForeignKeyViolationError'>: insert або update в таблиці "channels" порушує обмеження зовнішнього ключа "channels_ID владельца канала_fkey"
DETAIL:  Ключ (ID владельца канала)=(387375605) не присутній в таблиці "users".
[SQL: INSERT INTO channels ("Название канала", "ID владельца канала", "Тематика канала", "Кастомна Тематика канала", "Ссылка на канал", "Количество подписчиков", "Процент мужчин", "Процент женщин", "Средний охват одной публикации", "Средний охват одной рекламной публикации", "Минимальная цена рекламы", "Комментарий", "Контакт", status) VALUES ($1::VARCHAR, $2::BIGINT, $3::VARCHAR, $4::VARCHAR, $5::VARCHAR, $6::BIGINT, $7::FLOAT, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::channelstatus) ON CONFLICT DO NOTHING RETURNING channels.id]
[parameters: ('2123', 387375605, 'news', None, '2', 3, 4, 5, 6, 7, 8, '89', '23', 'WAIT_ADMIN_CONFIRM')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
web_log.py [LINE:211] #INFO     [03.01.2024 01:39:48]  ::1 [01/Mar/2024:01:39:48 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:40:17]  ::1 [01/Mar/2024:01:40:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:40:17]  Update id=925011858 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:40:28]  ::1 [01/Mar/2024:01:40:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:40:28]  Update id=925011859 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:40:29]  ::1 [01/Mar/2024:01:40:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:40:29]  Cannot get window data for state <State 'ChannelPosterOwnerMenu:select_channel_topic'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:40:29]  Update id=925011860 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:40:29]  Task exception was never retrieved
future: <Task finished name='Task-30' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ValueError('too many values to unpack (expected 2)')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 57, in get_channel_themes
    'channel_topics': [(topic_key, topic_value) for topic_key, topic_value in DEFAULT_CHANNEL_TOPPICS]
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 57, in <listcomp>
    'channel_topics': [(topic_key, topic_value) for topic_key, topic_value in DEFAULT_CHANNEL_TOPPICS]
                                                    ^^^^^^^^^^^^^^^^^^^^^^
ValueError: too many values to unpack (expected 2)
__main__.py [LINE:134] #INFO     [03.01.2024 01:40:54]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:00]  ::1 [01/Mar/2024:01:41:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:00]  Update id=925011861 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:02]  ::1 [01/Mar/2024:01:41:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:02]  Update id=925011862 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:05]  ::1 [01/Mar/2024:01:41:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:05]  Update id=925011863 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:07]  ::1 [01/Mar/2024:01:41:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:07]  Update id=925011864 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:07]  ::1 [01/Mar/2024:01:41:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:08]  Update id=925011865 is handled. Duration 217 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:09]  ::1 [01/Mar/2024:01:41:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:41:09]  Cannot get window data for state <State 'ChannelPosterOwnerMenu:show_channels'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:09]  Update id=925011866 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:41:09]  Task exception was never retrieved
future: <Task finished name='Task-42' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('selected_topic')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_owner_menu\getters.py", line 62, in get_channels_in_theme
    selected_topic = dialog_manager.dialog_data['selected_topic']
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
KeyError: 'selected_topic'
__main__.py [LINE:134] #INFO     [03.01.2024 01:41:49]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:53]  ::1 [01/Mar/2024:01:41:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:53]  Update id=925011867 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:54]  ::1 [01/Mar/2024:01:41:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:54]  Update id=925011868 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:57]  ::1 [01/Mar/2024:01:41:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:57]  Update id=925011869 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:41:58]  ::1 [01/Mar/2024:01:41:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:41:58]  Update id=925011870 is handled. Duration 125 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:42:26]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:31]  ::1 [01/Mar/2024:01:42:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:31]  Update id=925011871 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:32]  ::1 [01/Mar/2024:01:42:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:32]  Update id=925011872 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:33]  ::1 [01/Mar/2024:01:42:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:33]  Update id=925011873 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:34]  ::1 [01/Mar/2024:01:42:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:34]  Update id=925011874 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:35]  ::1 [01/Mar/2024:01:42:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:35]  Update id=925011875 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:36]  ::1 [01/Mar/2024:01:42:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:37]  Update id=925011876 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:37]  ::1 [01/Mar/2024:01:42:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:37]  Update id=925011877 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:38]  ::1 [01/Mar/2024:01:42:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:38]  Update id=925011878 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:39]  ::1 [01/Mar/2024:01:42:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:39]  Update id=925011879 is handled. Duration 139 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:40]  ::1 [01/Mar/2024:01:42:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:41]  Update id=925011880 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:42]  ::1 [01/Mar/2024:01:42:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:42]  Update id=925011881 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:42:46]  ::1 [01/Mar/2024:01:42:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:42:46]  Cannot get window data for state <State 'ChannelPosterAdminMenu:select_channel'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:42:46]  Update id=925011882 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:42:46]  Task exception was never retrieved
future: <Task finished name='Task-80' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'NoneType' object is not iterable")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 125, in get_offers_with_theme
    'channels_list': [
                     ^
TypeError: 'NoneType' object is not iterable
__main__.py [LINE:134] #INFO     [03.01.2024 01:43:18]  Bot stopped!
__main__.py [LINE:134] #INFO     [03.01.2024 01:43:34]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:43:34]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000261FD7C9610>
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:43:34]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000261FD39B540>, 304185.359)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000261FD7A6AD0>
web_log.py [LINE:211] #INFO     [03.01.2024 01:43:37]  ::1 [01/Mar/2024:01:43:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:43:37]  Update id=925011883 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:43:41]  ::1 [01/Mar/2024:01:43:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:43:41]  Update id=925011884 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:43:42]  ::1 [01/Mar/2024:01:43:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:124] #ERROR    [03.01.2024 01:43:42]  Cannot render window for state <State 'ChannelPosterAdminMenu:select_channel'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:43:42]  Update id=925011885 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:43:42]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('offers')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 87, in _render_keyboard
    for pos, item in enumerate(self.items_getter(data))
                               ^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'offers'
__main__.py [LINE:134] #INFO     [03.01.2024 01:43:57]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:01]  ::1 [01/Mar/2024:01:44:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:02]  Update id=925011886 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:02]  ::1 [01/Mar/2024:01:44:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:02]  Update id=925011887 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:03]  ::1 [01/Mar/2024:01:44:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:03]  Update id=925011888 is handled. Duration 125 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:44:47]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:51]  ::1 [01/Mar/2024:01:44:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:51]  Update id=925011889 is handled. Duration 139 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:52]  ::1 [01/Mar/2024:01:44:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:52]  Update id=925011890 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:53]  ::1 [01/Mar/2024:01:44:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:53]  Update id=925011891 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:53]  ::1 [01/Mar/2024:01:44:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:54]  Update id=925011892 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:54]  ::1 [01/Mar/2024:01:44:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:54]  Update id=925011893 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:58]  ::1 [01/Mar/2024:01:44:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:58]  Update id=925011894 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:44:59]  ::1 [01/Mar/2024:01:44:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:44:59]  Update id=925011895 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:45:00]  ::1 [01/Mar/2024:01:45:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:45:00]  Update id=925011896 is handled. Duration 218 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:46:03]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:46:07]  ::1 [01/Mar/2024:01:46:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:46:07]  Update id=925011897 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:46:08]  ::1 [01/Mar/2024:01:46:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:46:08]  Update id=925011898 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:46:10]  ::1 [01/Mar/2024:01:46:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:46:10]  Update id=925011899 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:46:11]  ::1 [01/Mar/2024:01:46:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:46:11]  Update id=925011900 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:46:12]  ::1 [01/Mar/2024:01:46:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:46:12]  Cannot get window data for state <State 'ChannelAdminPersonalCabinet:select_offer_status'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:46:12]  Update id=925011901 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:46:12]  Task exception was never retrieved
future: <Task finished name='Task-36' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'list' object has no attribute 'money_reserved'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 114, in get_personal_cabinet_data
    all_reserved_money = [order.money_reserved for order in user_offers]
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 114, in <listcomp>
    all_reserved_money = [order.money_reserved for order in user_offers]
                          ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'money_reserved'
__main__.py [LINE:134] #INFO     [03.01.2024 01:48:05]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:48:09]  ::1 [01/Mar/2024:01:48:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:48:09]  Cannot get window data for state <State 'ChannelAdminPersonalCabinet:select_offer_status'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:48:09]  Update id=925011902 is not handled. Duration 30 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:48:09]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'list' object has no attribute 'money_reserved'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\state.py", line 165, in _on_click
    await manager.start(self.state, self.start_data, self.mode)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 115, in get_personal_cabinet_data
    all_reserved_money = [order.money_reserved for order in user_offers]
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 115, in <listcomp>
    all_reserved_money = [order.money_reserved for order in user_offers]
                          ^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'money_reserved'
__main__.py [LINE:134] #INFO     [03.01.2024 01:48:23]  Bot stopped!
__main__.py [LINE:134] #INFO     [03.01.2024 01:48:36]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:48:36]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000029512BB3150>
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:48:36]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x0000029512D7B540>, 304490.765)]']
connector: <aiohttp.connector.TCPConnector object at 0x0000029512AC2E10>
web_log.py [LINE:211] #INFO     [03.01.2024 01:48:42]  ::1 [01/Mar/2024:01:48:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:48:42]  Update id=925011903 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:48:44]  ::1 [01/Mar/2024:01:48:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:48:44]  Update id=925011904 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:48:45]  ::1 [01/Mar/2024:01:48:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:48:45]  Update id=925011905 is handled. Duration 186 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:49:14]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:18]  ::1 [01/Mar/2024:01:49:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:18]  Update id=925011906 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:19]  ::1 [01/Mar/2024:01:49:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:19]  Update id=925011907 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:27]  ::1 [01/Mar/2024:01:49:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:49:27]  Cannot get window data for state <State 'AdminOffers:select_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:27]  Update id=925011908 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:49:27]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'list' object has no attribute 'id'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 81, in on_select_offer_status
    await dialog_manager.start(states.AdminOffers.select_offer, data=dialog_manager.dialog_data)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 13, in get_admin_offers
    "offers_list": [
                   ^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 14, in <listcomp>
    (offer.id, f"{offer.channel_name}", offer.target_request_amount) for offer in admin_offers
     ^^^^^^^^
AttributeError: 'list' object has no attribute 'id'
__main__.py [LINE:134] #INFO     [03.01.2024 01:49:37]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:41]  ::1 [01/Mar/2024:01:49:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:41]  Update id=925011909 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:42]  ::1 [01/Mar/2024:01:49:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:43]  Update id=925011910 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:43]  ::1 [01/Mar/2024:01:49:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:43]  Update id=925011911 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:44]  ::1 [01/Mar/2024:01:49:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:44]  Update id=925011912 is handled. Duration 170 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:44]  ::1 [01/Mar/2024:01:49:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:45]  Update id=925011913 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:48]  ::1 [01/Mar/2024:01:49:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:49]  Update id=925011914 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:52]  ::1 [01/Mar/2024:01:49:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:52]  Update id=925011915 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:53]  ::1 [01/Mar/2024:01:49:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:53]  Update id=925011916 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:49:53]  ::1 [01/Mar/2024:01:49:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:49:53]  Update id=925011917 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:44]  ::1 [01/Mar/2024:01:50:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:45]  Update id=925011918 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:46]  ::1 [01/Mar/2024:01:50:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:47]  Update id=925011919 is handled. Duration 93 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:47]  ::1 [01/Mar/2024:01:50:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:47]  Update id=925011920 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:48]  ::1 [01/Mar/2024:01:50:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:48]  Update id=925011921 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:49]  ::1 [01/Mar/2024:01:50:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:49]  Update id=925011922 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:52]  ::1 [01/Mar/2024:01:50:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:52]  Update id=925011923 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:54]  ::1 [01/Mar/2024:01:50:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:54]  Update id=925011924 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:55]  ::1 [01/Mar/2024:01:50:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:55]  Update id=925011925 is handled. Duration 93 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:55]  ::1 [01/Mar/2024:01:50:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:55]  Update id=925011926 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:57]  ::1 [01/Mar/2024:01:50:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:57]  Update id=925011927 is handled. Duration 94 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:57]  ::1 [01/Mar/2024:01:50:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:57]  Update id=925011928 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:50:59]  ::1 [01/Mar/2024:01:50:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:50:59]  Update id=925011929 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:00]  ::1 [01/Mar/2024:01:51:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:00]  Update id=925011930 is handled. Duration 93 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:00]  ::1 [01/Mar/2024:01:51:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:00]  Update id=925011931 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:03]  ::1 [01/Mar/2024:01:51:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:03]  Update id=925011932 is handled. Duration 108 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:51:17]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:22]  ::1 [01/Mar/2024:01:51:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:22]  Update id=925011933 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:23]  ::1 [01/Mar/2024:01:51:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:23]  Update id=925011934 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:24]  ::1 [01/Mar/2024:01:51:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:24]  Update id=925011935 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:26]  ::1 [01/Mar/2024:01:51:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:26]  Update id=925011936 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:28]  ::1 [01/Mar/2024:01:51:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:28]  Update id=925011937 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:29]  ::1 [01/Mar/2024:01:51:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:29]  Update id=925011938 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 01:51:30]  ::1 [01/Mar/2024:01:51:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 01:51:30]  Cannot get window data for state <State 'CreateOffer:enter_offer_data'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:51:30]  Update id=925011939 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 01:51:30]  Task exception was never retrieved
future: <Task finished name='Task-52' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('channel_title')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 67, in get_entered_offer_data
    text = (f"Назва каналу: {dialog_data['channel_title']}\n"
                             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'channel_title'
__main__.py [LINE:134] #INFO     [03.01.2024 01:52:17]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:52:22]  ::1 [01/Mar/2024:01:52:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 01:52:22]  Update id=925011940 is handled. Duration 141 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 01:53:38]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 01:54:12]  ::1 [01/Mar/2024:01:54:12 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 01:54:12]  ::1 [01/Mar/2024:01:54:12 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:21]  ::1 [01/Mar/2024:10:16:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:21]  ::1 [01/Mar/2024:10:16:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:22]  Update id=925011941 is handled. Duration 530 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:22]  Update id=925011942 is handled. Duration 547 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:47]  ::1 [01/Mar/2024:10:16:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:47]  ::1 [01/Mar/2024:10:16:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:47]  ::1 [01/Mar/2024:10:16:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 10:16:48]  ::1 [01/Mar/2024:10:16:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:48]  Update id=925011943 is handled. Duration 219 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:48]  Update id=925011944 is handled. Duration 202 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:48]  Update id=925011945 is handled. Duration 218 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:16:48]  Update id=925011946 is handled. Duration 516 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:20]  ::1 [01/Mar/2024:10:17:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:21]  Update id=925011947 is handled. Duration 608 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:26]  ::1 [01/Mar/2024:10:17:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:27]  Update id=925011948 is handled. Duration 546 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:31]  ::1 [01/Mar/2024:10:17:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:31]  Update id=925011949 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:32]  ::1 [01/Mar/2024:10:17:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:32]  Update id=925011950 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:38]  ::1 [01/Mar/2024:10:17:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:38]  Update id=925011951 is handled. Duration 187 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:17:47]  ::1 [01/Mar/2024:10:17:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:17:48]  Update id=925011952 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:00]  ::1 [01/Mar/2024:10:18:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:01]  Update id=925011953 is handled. Duration 468 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:06]  ::1 [01/Mar/2024:10:18:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:07]  Update id=925011954 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:09]  ::1 [01/Mar/2024:10:18:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:09]  Update id=925011955 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:11]  ::1 [01/Mar/2024:10:18:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:11]  Update id=925011956 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:17]  ::1 [01/Mar/2024:10:18:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:17]  Update id=925011957 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 10:18:17]  Task exception was never retrieved
future: <Task finished name='Task-111' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredWindowError("No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'CreateOfferFromTGTraffic:select_topic'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 38, in on_select_traffic_source
    return await dialog_manager.start(states.CreateOfferFromTGTraffic.select_topic)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:25]  ::1 [01/Mar/2024:10:18:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:25]  Update id=925011958 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 10:18:25]  Task exception was never retrieved
future: <Task finished name='Task-115' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredWindowError("No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'CreateOfferFromTGTraffic:select_topic'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 38, in on_select_traffic_source
    return await dialog_manager.start(states.CreateOfferFromTGTraffic.select_topic)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:27]  ::1 [01/Mar/2024:10:18:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:28]  Update id=925011959 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:29]  ::1 [01/Mar/2024:10:18:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:29]  Update id=925011960 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:31]  ::1 [01/Mar/2024:10:18:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:32]  Update id=925011961 is handled. Duration 264 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:32]  ::1 [01/Mar/2024:10:18:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:32]  Update id=925011962 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 10:18:32]  Task exception was never retrieved
future: <Task finished name='Task-139' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredWindowError("No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'CreateOfferFromTGTraffic:select_topic'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 38, in on_select_traffic_source
    return await dialog_manager.start(states.CreateOfferFromTGTraffic.select_topic)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:35]  ::1 [01/Mar/2024:10:18:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:35]  Update id=925011963 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:36]  ::1 [01/Mar/2024:10:18:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:36]  Update id=925011964 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:37]  ::1 [01/Mar/2024:10:18:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:38]  Update id=925011965 is handled. Duration 202 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:41]  ::1 [01/Mar/2024:10:18:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:41]  Update id=925011966 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:48]  ::1 [01/Mar/2024:10:18:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:48]  Update id=925011967 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:51]  ::1 [01/Mar/2024:10:18:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:51]  Update id=925011968 is not handled. Duration 171 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 10:18:51]  Task exception was never retrieved
future: <Task finished name='Task-173' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 10:18:58]  ::1 [01/Mar/2024:10:18:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 10:18:58]  Update id=925011969 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:08:48]  ::1 [01/Mar/2024:11:08:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:08:48]  Update id=925011970 is handled. Duration 297 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:01]  ::1 [01/Mar/2024:11:09:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:01]  Update id=925011971 is handled. Duration 407 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:06]  ::1 [01/Mar/2024:11:09:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:06]  Update id=925011972 is handled. Duration 265 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:08]  ::1 [01/Mar/2024:11:09:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:08]  Update id=925011973 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:11]  ::1 [01/Mar/2024:11:09:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:11]  Update id=925011974 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:13]  ::1 [01/Mar/2024:11:09:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:13]  Update id=925011975 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:15]  ::1 [01/Mar/2024:11:09:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:15]  Update id=925011976 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:17]  ::1 [01/Mar/2024:11:09:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:17]  Update id=925011977 is handled. Duration 264 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:21]  ::1 [01/Mar/2024:11:09:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:22]  Update id=925011978 is handled. Duration 297 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:23]  ::1 [01/Mar/2024:11:09:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:23]  Update id=925011979 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:24]  ::1 [01/Mar/2024:11:09:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:25]  Update id=925011980 is handled. Duration 422 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:09:26]  ::1 [01/Mar/2024:11:09:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:09:26]  Update id=925011981 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:10:00]  ::1 [01/Mar/2024:11:10:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:10:00]  Update id=925011982 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:10:11]  ::1 [01/Mar/2024:11:10:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:10:11]  Update id=925011983 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:10:13]  ::1 [01/Mar/2024:11:10:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:10:13]  Update id=925011984 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:10:14]  ::1 [01/Mar/2024:11:10:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:10:14]  Update id=925011985 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:32]  ::1 [01/Mar/2024:11:58:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:32]  Update id=925011986 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:36]  ::1 [01/Mar/2024:11:58:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:36]  Update id=925011987 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:37]  ::1 [01/Mar/2024:11:58:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:37]  Update id=925011988 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:38]  ::1 [01/Mar/2024:11:58:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:39]  Update id=925011989 is handled. Duration 312 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:40]  ::1 [01/Mar/2024:11:58:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:40]  Update id=925011990 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 11:58:41]  ::1 [01/Mar/2024:11:58:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 11:58:41]  Update id=925011991 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 11:58:41]  Task exception was never retrieved
future: <Task finished name='Task-317' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=UnregisteredWindowError("No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'CreateOfferFromTGTraffic:select_topic'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 38, in on_select_traffic_source
    return await dialog_manager.start(states.CreateOfferFromTGTraffic.select_topic)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'CreateOfferFromTGTraffic:select_topic'>` Current state group is `CreateOfferFromTGTraffic`
__main__.py [LINE:134] #INFO     [03.01.2024 12:00:23]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:00:28]  ::1 [01/Mar/2024:12:00:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:00:29]  Update id=925011992 is handled. Duration 577 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:00:30]  ::1 [01/Mar/2024:12:00:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:00:30]  Update id=925011993 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:00:31]  ::1 [01/Mar/2024:12:00:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:00:31]  Update id=925011994 is handled. Duration 171 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 12:02:30]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:02:36]  ::1 [01/Mar/2024:12:02:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:02:36]  Update id=925011995 is handled. Duration 358 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:02:37]  ::1 [01/Mar/2024:12:02:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:02:37]  Update id=925011996 is handled. Duration 170 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 12:03:21]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:03:25]  ::1 [01/Mar/2024:12:03:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:03:26]  Update id=925011997 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:03:26]  ::1 [01/Mar/2024:12:03:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:03:26]  Update id=925011998 is handled. Duration 202 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:03:27]  ::1 [01/Mar/2024:12:03:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:03:27]  Update id=925011999 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:03:27]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('sort_criteria')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 58, in on_change_sort_criteria
    current_sort_criteria = dialog_manager.dialog_data['sort_criteria']
                            ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'sort_criteria'
__main__.py [LINE:134] #INFO     [03.01.2024 12:03:46]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:03:51]  ::1 [01/Mar/2024:12:03:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 12:03:51]  Cannot get window data for state <State 'CreateOfferFromTGTraffic:select_channel'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:03:51]  Update id=925012000 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:03:51]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("type object 'Channels' has no attribute 'channel_id'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 103, in get_channels_with_criteria
    channels_model = await repo.channel_repo.get_channels(sort_type=sort_criteria)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 41, in get_channels
    query = select(Channels).order_by(Channels.subs_amount.asc() if sort_type == "asc" else Channels.channel_id.desc())
                                                                                            ^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'Channels' has no attribute 'channel_id'
__main__.py [LINE:134] #INFO     [03.01.2024 12:04:20]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:04:25]  ::1 [01/Mar/2024:12:04:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:04:25]  Update id=925012001 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:04:26]  ::1 [01/Mar/2024:12:04:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:04:26]  Update id=925012002 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:04:29]  ::1 [01/Mar/2024:12:04:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:04:29]  Update id=925012003 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:04:30]  ::1 [01/Mar/2024:12:04:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:04:30]  Update id=925012004 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:50]  ::1 [01/Mar/2024:12:05:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:50]  Update id=925012005 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:50]  ::1 [01/Mar/2024:12:05:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:51]  Update id=925012006 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:52]  ::1 [01/Mar/2024:12:05:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:52]  Update id=925012007 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:53]  ::1 [01/Mar/2024:12:05:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:53]  Update id=925012008 is handled. Duration 296 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:54]  ::1 [01/Mar/2024:12:05:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:55]  Update id=925012009 is handled. Duration 468 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:56]  ::1 [01/Mar/2024:12:05:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:57]  Update id=925012010 is handled. Duration 202 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:05:59]  ::1 [01/Mar/2024:12:05:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:05:59]  Update id=925012011 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:06:00]  ::1 [01/Mar/2024:12:06:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:06:01]  Update id=925012012 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:06:02]  ::1 [01/Mar/2024:12:06:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:06:02]  Update id=925012013 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:06:03]  ::1 [01/Mar/2024:12:06:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:06:03]  Update id=925012014 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:06:43]  ::1 [01/Mar/2024:12:06:43 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:06:44]  ::1 [01/Mar/2024:12:06:44 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:25:56]  ::1 [01/Mar/2024:12:25:56 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"
web_log.py [LINE:211] #INFO     [03.01.2024 12:25:56]  ::1 [01/Mar/2024:12:25:56 +0200] "POST /withdraw-request HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36"
web_log.py [LINE:211] #INFO     [03.01.2024 12:27:11]  ::1 [01/Mar/2024:12:27:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:27:11]  Update id=925012015 is handled. Duration 219 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:27:14]  ::1 [01/Mar/2024:12:27:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:27:15]  Update id=925012016 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:28:28]  ::1 [01/Mar/2024:12:28:28 +0200] "OPTIONS /add-channel HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (iPhone; CPU iPhone OS 16_7_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 12:28:29]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 96, in handle_add_channel
    channel_theme = 'news'
                          
ValueError: invalid literal for int() with base 10: 'Xbdj'
web_log.py [LINE:211] #INFO     [03.01.2024 12:28:29]  ::1 [01/Mar/2024:12:28:29 +0200] "POST /add-channel HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (iPhone; CPU iPhone OS 16_7_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148"
__main__.py [LINE:134] #INFO     [03.01.2024 12:31:10]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:31:56]  ::1 [01/Mar/2024:12:31:56 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:31:56]  ::1 [01/Mar/2024:12:31:56 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
window.py [LINE:111] #ERROR    [03.01.2024 12:31:56]  Cannot get window data for state <State 'CreateOffer:confirm_offer_data'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:31:56]  Task exception was never retrieved
future: <Task finished name='Task-14' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('channel_title')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 29, in handle_update
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 67, in get_entered_offer_data
    text = (f"Назва каналу: {dialog_data['channel_title']}\n"
                             ~~~~~~~~~~~^^^^^^^^^^^^^^^^^
KeyError: 'channel_title'
__main__.py [LINE:134] #INFO     [03.01.2024 12:32:32]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:32:32]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000018793FDE710>
web_log.py [LINE:211] #INFO     [03.01.2024 12:32:47]  ::1 [01/Mar/2024:12:32:47 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:32:48]  ::1 [01/Mar/2024:12:32:47 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
window.py [LINE:111] #ERROR    [03.01.2024 12:32:48]  Cannot get window data for state <State 'CreateOffer:confirm_offer_data'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:32:48]  Task exception was never retrieved
future: <Task finished name='Task-14' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("'NoneType' object is not iterable")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 29, in handle_update
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
__main__.py [LINE:134] #INFO     [03.01.2024 12:33:34]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:33:34]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000246F33C0610>
web_log.py [LINE:211] #INFO     [03.01.2024 12:33:46]  ::1 [01/Mar/2024:12:33:46 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:33:46]  ::1 [01/Mar/2024:12:33:46 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
window.py [LINE:111] #ERROR    [03.01.2024 12:33:46]  Cannot get window data for state <State 'CreateOffer:confirm_offer_data'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:33:46]  Task exception was never retrieved
future: <Task finished name='Task-14' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('contacts')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 29, in handle_update
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 75, in get_entered_offer_data
    f"Контакти для звязку: {dialog_data['contacts']}\n"
                            ~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'contacts'
__main__.py [LINE:134] #INFO     [03.01.2024 12:33:57]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:33:57]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001C43F674710>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:33:57]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001C43F7D73F0>, 343210.718)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001C43FBABBD0>
web_log.py [LINE:211] #INFO     [03.01.2024 12:34:13]  ::1 [01/Mar/2024:12:34:13 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:34:14]  ::1 [01/Mar/2024:12:34:14 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
window.py [LINE:111] #ERROR    [03.01.2024 12:34:14]  Cannot get window data for state <State 'CreateOffer:confirm_offer_data'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:34:14]  Task exception was never retrieved
future: <Task finished name='Task-14' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('contacts')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 29, in handle_update
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 75, in get_entered_offer_data
    f"Контакти для звязку: {dialog_data['contacts']}\n"
                            ~~~~~~~~~~~^^^^^^^^^^^^
KeyError: 'contacts'
__main__.py [LINE:134] #INFO     [03.01.2024 12:34:48]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:34:48]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000022D02694510>
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:00]  ::1 [01/Mar/2024:12:35:00 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:00]  ::1 [01/Mar/2024:12:35:00 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:21]  ::1 [01/Mar/2024:12:35:21 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:21]  ::1 [01/Mar/2024:12:35:21 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:134] #INFO     [03.01.2024 12:35:31]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:35:32]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000014D60B12AD0>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:35:32]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x0000014D6153F460>, 343305.437)]']
connector: <aiohttp.connector.TCPConnector object at 0x0000014D611F52D0>
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:48]  ::1 [01/Mar/2024:12:35:48 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:49]  ::1 [01/Mar/2024:12:35:49 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:54]  ::1 [01/Mar/2024:12:35:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:35:54]  Update id=925012017 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:35:59]  ::1 [01/Mar/2024:12:35:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:35:59]  Update id=925012018 is not handled. Duration 94 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:35:59]  Task exception was never retrieved
future: <Task finished name='Task-29' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'BgManager' object has no attribute 'dialog_data'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 40, in add_bot_handler
    dialog_data = bg.dialog_data
                  ^^^^^^^^^^^^^^
AttributeError: 'BgManager' object has no attribute 'dialog_data'
__main__.py [LINE:134] #INFO     [03.01.2024 12:44:59]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:45:12]  ::1 [01/Mar/2024:12:45:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:45:12]  Update id=925012019 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:45:12]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'BgManager' object has no attribute 'load_data'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 40, in add_bot_handler
    dialog_data = bg.load_data()
                  ^^^^^^^^^^^^
AttributeError: 'BgManager' object has no attribute 'load_data'
__main__.py [LINE:134] #INFO     [03.01.2024 12:49:24]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:50:04]  ::1 [01/Mar/2024:12:50:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:50:04]  Update id=925012020 is handled. Duration 172 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:50:04]  Task exception was never retrieved
future: <Task finished name='Task-13' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'dialog_manager'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'dialog_manager'
__main__.py [LINE:134] #INFO     [03.01.2024 12:50:20]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:50:38]  ::1 [01/Mar/2024:12:50:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:50:38]  Update id=925012021 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:50:46]  ::1 [01/Mar/2024:12:50:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:50:46]  Update id=925012022 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:51:05]  ::1 [01/Mar/2024:12:51:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:51:05]  Update id=925012023 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:51:43]  ::1 [01/Mar/2024:12:51:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:51:43]  Update id=925012024 is not handled. Duration 0 ms by bot id=5646878393
__main__.py [LINE:134] #INFO     [03.01.2024 12:51:48]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:51:56]  ::1 [01/Mar/2024:12:51:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:51:56]  Update id=925012025 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:52:02]  ::1 [01/Mar/2024:12:52:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:52:02]  Update id=925012026 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:52:03]  ::1 [01/Mar/2024:12:52:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:52:03]  Update id=925012027 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:52:09]  ::1 [01/Mar/2024:12:52:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:52:09]  Update id=925012028 is handled. Duration 188 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:52:09]  Task exception was never retrieved
future: <Task finished name='Task-30' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'result'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'result'
__main__.py [LINE:134] #INFO     [03.01.2024 12:53:25]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:53:33]  ::1 [01/Mar/2024:12:53:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:53:33]  Update id=925012029 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:53:34]  ::1 [01/Mar/2024:12:53:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:53:34]  Update id=925012030 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:53:43]  ::1 [01/Mar/2024:12:53:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:53:44]  Update id=925012031 is handled. Duration 172 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:53:44]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'data'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'data'
__main__.py [LINE:134] #INFO     [03.01.2024 12:53:57]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:54:03]  ::1 [01/Mar/2024:12:54:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:54:03]  Update id=925012032 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:54:03]  ::1 [01/Mar/2024:12:54:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:54:04]  Update id=925012033 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:54:07]  ::1 [01/Mar/2024:12:54:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:54:07]  Update id=925012034 is handled. Duration 172 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:54:07]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'dialog_manager'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'dialog_manager'
__main__.py [LINE:134] #INFO     [03.01.2024 12:56:46]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:56:50]  ::1 [01/Mar/2024:12:56:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:56:50]  Update id=925012035 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:56:52]  ::1 [01/Mar/2024:12:56:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:56:52]  Update id=925012036 is handled. Duration 187 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:56:55]  ::1 [01/Mar/2024:12:56:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:56:56]  Update id=925012037 is handled. Duration 171 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:56:56]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'data'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'data'
__main__.py [LINE:134] #INFO     [03.01.2024 12:57:08]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 12:57:46]  ::1 [01/Mar/2024:12:57:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:57:47]  Update id=925012038 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:57:47]  ::1 [01/Mar/2024:12:57:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:57:47]  Update id=925012039 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:57:57]  ::1 [01/Mar/2024:12:57:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:57:57]  Update id=925012040 is handled. Duration 171 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:57:57]  Task exception was never retrieved
future: <Task finished name='Task-27' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("on_start_purchase() missing 1 required positional argument: 'data'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 261, in _start_normal
    await self.dialog().process_start(self, data, state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 94, in process_start
    await self._process_callback(self.on_start, start_data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 100, in _process_callback
    await callback(*args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: on_start_purchase() missing 1 required positional argument: 'data'
__main__.py [LINE:134] #INFO     [03.01.2024 12:59:36]  Bot stopped!
__main__.py [LINE:134] #INFO     [03.01.2024 12:59:42]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:59:42]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000222D585B450>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:59:42]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000222D59E7380>, 344763.75)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000222D5DBB3D0>
web_log.py [LINE:211] #INFO     [03.01.2024 12:59:47]  ::1 [01/Mar/2024:12:59:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:59:47]  Update id=925012041 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:59:48]  ::1 [01/Mar/2024:12:59:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:59:48]  Update id=925012042 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 12:59:50]  ::1 [01/Mar/2024:12:59:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 12:59:51]  Update id=925012043 is handled. Duration 171 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 12:59:51]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 12:59:51]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('crypto_bot_client')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 17, in get_price
    crypto_bot_client: AioCryptoPay = dialog_manager.middleware_data['crypto_bot_client']
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto_bot_client'
__main__.py [LINE:134] #INFO     [03.01.2024 13:40:46]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:41:02]  ::1 [01/Mar/2024:13:41:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:41:02]  Update id=925012044 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:41:03]  ::1 [01/Mar/2024:13:41:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:41:03]  Update id=925012045 is handled. Duration 265 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:41:07]  ::1 [01/Mar/2024:13:41:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:41:07]  Update id=925012046 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:41:07]  Task exception was never retrieved
future: <Task finished name='Task-25' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ArgumentError('Only a single dictionary/tuple or list of dictionaries/tuples is accepted positionally.')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 48, in add_bot_handler
    await repo.channel_repo.add_channe_for_traffic(*channel_data)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 46, in add_channe_for_traffic
    query = insert(ChannelsForTraffic).values(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 280, in _generative
    x = fn(self, *args, **kw)
        ^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 313, in check
    return fn(self, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1117, in values
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Only a single dictionary/tuple or list of dictionaries/tuples is accepted positionally.
__main__.py [LINE:134] #INFO     [03.01.2024 13:43:37]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:45:35]  ::1 [01/Mar/2024:13:45:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:45:35]  Update id=925012047 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:45:36]  ::1 [01/Mar/2024:13:45:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:45:36]  Update id=925012048 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:45:40]  ::1 [01/Mar/2024:13:45:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:45:40]  Update id=925012049 is not handled. Duration 31 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:45:40]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ArgumentError('Only a single dictionary/tuple or list of dictionaries/tuples is accepted positionally.')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 48, in add_bot_handler
    await repo.channel_repo.add_channe_for_traffic(*channel_data)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\channel_requests.py", line 46, in add_channe_for_traffic
    query = insert(ChannelsForTraffic).values(
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 280, in _generative
    x = fn(self, *args, **kw)
        ^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in values
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 313, in check
    return fn(self, *args, **kw)
           ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\dml.py", line 1117, in values
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Only a single dictionary/tuple or list of dictionaries/tuples is accepted positionally.
__main__.py [LINE:134] #INFO     [03.01.2024 13:46:04]  Bot stopped!
__main__.py [LINE:134] #INFO     [03.01.2024 13:46:17]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:46:17]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000221F2EB2DD0>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:46:17]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x00000221F2AC72A0>, 347551.468)]']
connector: <aiohttp.connector.TCPConnector object at 0x00000221F297D3D0>
web_log.py [LINE:211] #INFO     [03.01.2024 13:46:21]  ::1 [01/Mar/2024:13:46:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:46:21]  Update id=925012050 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:46:23]  ::1 [01/Mar/2024:13:46:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:46:23]  Update id=925012051 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:46:26]  ::1 [01/Mar/2024:13:46:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:46:26]  Update id=925012052 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:46:31]  ::1 [01/Mar/2024:13:46:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:46:32]  Update id=925012053 is not handled. Duration 311 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:46:32]  Task exception was never retrieved
future: <Task finished name='Task-29' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError('__init__() takes 1 positional argument but 2 were given')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 68, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(**offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 13, in add_offer
    query = Offers(
            ^^^^^^^
TypeError: __init__() takes 1 positional argument but 2 were given
__main__.py [LINE:134] #INFO     [03.01.2024 13:46:48]  Bot stopped!
__main__.py [LINE:134] #INFO     [03.01.2024 13:47:20]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:47:20]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000020915248290>
web_log.py [LINE:211] #INFO     [03.01.2024 13:47:24]  ::1 [01/Mar/2024:13:47:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:47:24]  Update id=925012054 is handled. Duration 311 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:47:25]  ::1 [01/Mar/2024:13:47:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:47:25]  Update id=925012055 is handled. Duration 327 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:47:29]  ::1 [01/Mar/2024:13:47:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:47:29]  Update id=925012056 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:47:29]  Task exception was never retrieved
future: <Task finished name='Task-25' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError('__init__() takes 1 positional argument but 2 were given')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 68, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(**offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 13, in add_offer
    query = Offers(
            ^^^^^^^
TypeError: __init__() takes 1 positional argument but 2 were given
__main__.py [LINE:134] #INFO     [03.01.2024 13:49:21]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:49:27]  ::1 [01/Mar/2024:13:49:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:49:27]  Update id=925012057 is handled. Duration 358 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:49:28]  ::1 [01/Mar/2024:13:49:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:49:28]  Update id=925012058 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:49:36]  ::1 [01/Mar/2024:13:49:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:49:36]  Update id=925012059 is not handled. Duration 14 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:49:36]  Task exception was never retrieved
future: <Task finished name='Task-25' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyNotFoundError('channel_already_added')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 35, in add_bot_handler
    return await bot.send_message(inviter_id, i18n.get("channel_already_added"))
                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_i18n\context.py", line 39, in get
    return self.core.get(key, self.locale, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_i18n\cores\fluent_runtime_core.py", line 49, in get
    raise KeyNotFoundError(message_id) from None
aiogram_i18n.exceptions.KeyNotFoundError: Key 'channel_already_added' not found.
__main__.py [LINE:134] #INFO     [03.01.2024 13:50:03]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:50:09]  ::1 [01/Mar/2024:13:50:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:50:09]  Update id=925012060 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:50:09]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError('OfferRequestsRepo.add_offer() takes 1 positional argument but 16 were given')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 66, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(*offer_data)
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: OfferRequestsRepo.add_offer() takes 1 positional argument but 16 were given
__main__.py [LINE:134] #INFO     [03.01.2024 13:51:15]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:51:22]  ::1 [01/Mar/2024:13:51:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:51:23]  Update id=925012061 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:51:24]  ::1 [01/Mar/2024:13:51:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:51:24]  Update id=925012062 is handled. Duration 516 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:51:27]  ::1 [01/Mar/2024:13:51:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:51:27]  Update id=925012063 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:51:35]  ::1 [01/Mar/2024:13:51:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:51:35]  Update id=925012064 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:51:42]  ::1 [01/Mar/2024:13:51:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:51:42]  Update id=925012065 is not handled. Duration 188 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:51:42]  Task exception was never retrieved
future: <Task finished name='Task-33' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'price_per_request' is an invalid keyword argument for Offers")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 66, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 13, in add_offer
    query = Offers(
            ^^^^^^^
  File "<string>", line 4, in __init__
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    with util.safe_reraise():
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'price_per_request' is an invalid keyword argument for Offers
__main__.py [LINE:134] #INFO     [03.01.2024 13:52:01]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:52:09]  ::1 [01/Mar/2024:13:52:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:52:09]  Update id=925012066 is not handled. Duration 46 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:52:09]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TypeError("'offer_deadlin' is an invalid keyword argument for Offers")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 66, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 13, in add_offer
    query = Offers(
            ^^^^^^^
  File "<string>", line 4, in __init__
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 564, in _initialize_instance
    with util.safe_reraise():
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state.py", line 562, in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\decl_base.py", line 2139, in _declarative_constructor
    raise TypeError(
TypeError: 'offer_deadlin' is an invalid keyword argument for Offers
__main__.py [LINE:134] #INFO     [03.01.2024 13:52:16]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:52:37]  ::1 [01/Mar/2024:13:52:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:52:38]  Update id=925012067 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:52:38]  ::1 [01/Mar/2024:13:52:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:52:39]  Update id=925012068 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:52:42]  ::1 [01/Mar/2024:13:52:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:52:42]  Update id=925012069 is not handled. Duration 172 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:52:42]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=ProgrammingError('(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class \'asyncpg.exceptions.UndefinedColumnError\'>: стовпець "Контакты" зв\'язку "offers" не існує')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 765, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: стовпець "Контакты" зв'язку "offers" не існує

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець "Контакты" зв'язку "offers" не існує

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 66, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 17, in add_offer
    await self.session.commit()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4431, in _flush
    with util.safe_reraise():
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець "Контакты" зв'язку "offers" не існує
[SQL: INSERT INTO offers ("ID пользователя", "Источник трафика", "Тип трафика", "ID канала", "Название канала", "Тематика канала", "Кастомна Тематика канала", "Сумма запроса", "Цена за запрос от админа канала", "Цена за запрос от админа бота", "Зарезервированная сумма", "Дедлайн оффера", "Правила трафика", "Комментарий", "Контакты", status) VALUES ($1::BIGINT, $2::VARCHAR, $3::trafficsource, $4::BIGINT, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::offerstatus) RETURNING offers.id]
[parameters: (387375605, 'Телеграм канал', 'TIK_TOK', -1001960731769, 'Test #2', 'news', None, 3452, 52, None, 0, None, 'aboa', 'test', '23243', 'WAIT_FOR_PAYMENT')]
(Background on this error at: https://sqlalche.me/e/20/f405)
__main__.py [LINE:134] #INFO     [03.01.2024 13:53:10]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:53:52]  ::1 [01/Mar/2024:13:53:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:53:52]  Update id=925012070 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:53:52]  ::1 [01/Mar/2024:13:53:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:53:53]  Update id=925012071 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:53:57]  ::1 [01/Mar/2024:13:53:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:53:57]  Update id=925012072 is not handled. Duration 141 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:53:57]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>: null значення в стовпці "Дедлайн оффера" відношення "offers" порушує not-null обмеження\nDETAIL:  Помилковий рядок містить (1, 387375605, Телеграм канал, TIK_TOK, -1001812565202, Test #1, news, null, 3452, 52, null, 0, null, aboa, test, WAIT_FOR_PAYMENT, 23243).')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.NotNullViolationError: null значення в стовпці "Дедлайн оффера" відношення "offers" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, Телеграм канал, TIK_TOK, -1001812565202, Test #1, news, null, 3452, 52, null, 0, null, aboa, test, WAIT_FOR_PAYMENT, 23243).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "Дедлайн оффера" відношення "offers" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, Телеграм канал, TIK_TOK, -1001812565202, Test #1, news, null, 3452, 52, null, 0, null, aboa, test, WAIT_FOR_PAYMENT, 23243).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 205, in process_my_chat_member
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\user_handlers.py", line 66, in add_bot_handler
    offer_model = await repo.offer_repo.add_offer(offer_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\db\requests\offer_requests.py", line 17, in add_offer
    await self.session.commit()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 199, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1972, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1257, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 1232, in _prepare_impl
    self.session.flush()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4296, in flush
    self._flush(objects)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4431, in _flush
    with util.safe_reraise():
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 4392, in _flush
    flush_context.execute()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 466, in execute
    rec.execute(self)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "Дедлайн оффера" відношення "offers" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, Телеграм канал, TIK_TOK, -1001812565202, Test #1, news, null, 3452, 52, null, 0, null, aboa, test, WAIT_FOR_PAYMENT, 23243).
[SQL: INSERT INTO offers ("ID пользователя", "Источник трафика", "Тип трафика", "ID канала", "Название канала", "Тематика канала", "Кастомна Тематика канала", "Сумма запроса", "Цена за запрос от админа канала", "Цена за запрос от админа бота", "Зарезервированная сумма", "Дедлайн оффера", "Правила трафика", "Комментарий", contacts, status) VALUES ($1::BIGINT, $2::VARCHAR, $3::trafficsource, $4::BIGINT, $5::VARCHAR, $6::VARCHAR, $7::VARCHAR, $8::FLOAT, $9::FLOAT, $10::FLOAT, $11::FLOAT, $12::VARCHAR, $13::VARCHAR, $14::VARCHAR, $15::VARCHAR, $16::offerstatus) RETURNING offers.id]
[parameters: (387375605, 'Телеграм канал', 'TIK_TOK', -1001812565202, 'Test #1', 'news', None, 3452, 52, None, 0, None, 'aboa', 'test', '23243', 'WAIT_FOR_PAYMENT')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
__main__.py [LINE:134] #INFO     [03.01.2024 13:54:19]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:54:35]  ::1 [01/Mar/2024:13:54:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:54:35]  Update id=925012073 is handled. Duration 391 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:54:35]  ::1 [01/Mar/2024:13:54:35 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:54:36]  Update id=925012074 is handled. Duration 358 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:54:40]  ::1 [01/Mar/2024:13:54:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:54:40]  Update id=925012075 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:54:45]  ::1 [01/Mar/2024:13:54:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:54:45]  Update id=925012076 is handled. Duration 452 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 13:54:45]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:54:45]  Task exception was never retrieved
future: <Task finished name='Task-30' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('crypto_bot_client')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 17, in get_price
    crypto_bot_client: AioCryptoPay = dialog_manager.middleware_data['crypto_bot_client']
                                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto_bot_client'
web_log.py [LINE:211] #INFO     [03.01.2024 13:55:24]  ::1 [01/Mar/2024:13:55:23 +0200] "GET /crypto_bot_webhook HTTP/1.1" 405 212 "-" "TelegramBot (like TwitterBot)"
__main__.py [LINE:134] #INFO     [03.01.2024 13:56:09]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:57:05]  ::1 [01/Mar/2024:13:57:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:57:05]  Update id=925012077 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:57:08]  ::1 [01/Mar/2024:13:57:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:57:08]  Update id=925012078 is handled. Duration 358 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:57:12]  ::1 [01/Mar/2024:13:57:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:57:12]  Update id=925012079 is handled. Duration 234 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 13:57:12]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:57:12]  Task exception was never retrieved
future: <Task finished name='Task-27' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('price_per_request')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 27, in get_price
    price = int(start_data['price_per_request']) * int(start_data['amount_requests'])
                ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
KeyError: 'price_per_request'
__main__.py [LINE:135] #INFO     [03.01.2024 13:58:02]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:58:07]  ::1 [01/Mar/2024:13:58:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:58:07]  Update id=925012080 is handled. Duration 483 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:58:08]  ::1 [01/Mar/2024:13:58:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:58:08]  Update id=925012081 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:58:14]  ::1 [01/Mar/2024:13:58:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:58:14]  Update id=925012082 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:58:20]  ::1 [01/Mar/2024:13:58:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:58:20]  Update id=925012083 is handled. Duration 202 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 13:58:20]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:58:20]  Task exception was never retrieved
future: <Task finished name='Task-30' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('price_per_request')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 27, in get_price
    price = int(start_data['price_per_request']) * int(start_data['amount_requests'])
                ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
KeyError: 'price_per_request'
__main__.py [LINE:135] #INFO     [03.01.2024 13:58:36]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:58:59]  ::1 [01/Mar/2024:13:58:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:58:59]  Update id=925012084 is not handled. Duration 0 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:02]  ::1 [01/Mar/2024:13:59:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:02]  Update id=925012085 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:03]  ::1 [01/Mar/2024:13:59:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:03]  Update id=925012086 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:06]  ::1 [01/Mar/2024:13:59:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:06]  Update id=925012087 is handled. Duration 219 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 13:59:06]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:59:06]  Task exception was never retrieved
future: <Task finished name='Task-31' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=KeyError('amount_requests')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 27, in get_price
    price = int(start_data['first_price_per_request']) * int(start_data['amount_requests'])
                                                             ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
KeyError: 'amount_requests'
__main__.py [LINE:135] #INFO     [03.01.2024 13:59:30]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:36]  ::1 [01/Mar/2024:13:59:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:36]  Update id=925012088 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:38]  ::1 [01/Mar/2024:13:59:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:38]  Update id=925012089 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 13:59:41]  ::1 [01/Mar/2024:13:59:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 13:59:41]  Update id=925012090 is handled. Duration 188 ms by bot id=5646878393
window.py [LINE:111] #ERROR    [03.01.2024 13:59:41]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 13:59:41]  Task exception was never retrieved
future: <Task finished name='Task-26' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=TypeError("Invalid variable type: value should be str, int or float, got {'user_id': 387375605} of type <class 'dict'>")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 38, in get_price
    crypto_invoice = await create_invoice(crypto_bot_client, price, description_for_invoice, payload_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 10, in create_invoice
    invoice: Invoice = await client.create_invoice(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 184, in create_invoice
    response = await self._make_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\base.py", line 46, in _make_request
    async with session.request(method, url, **kwargs) as response:
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client.py", line 1194, in __aenter__
    self._resp = await self._coro
                 ^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client.py", line 545, in _request
    req = self._request_class(
          ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\client_reqrep.py", line 303, in __init__
    url2 = url.with_query(params)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\yarl\_url.py", line 1010, in with_query
    new_query = self._get_str_query(*args, **kwargs) or ""
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\yarl\_url.py", line 971, in _get_str_query
    query = "&".join(self._query_seq_pairs(quoter, query.items()))
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\yarl\_url.py", line 934, in _query_seq_pairs
    yield quoter(key) + "=" + quoter(cls._query_var(val))
                                     ^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\yarl\_url.py", line 949, in _query_var
    raise TypeError(
TypeError: Invalid variable type: value should be str, int or float, got {'user_id': 387375605} of type <class 'dict'>
__main__.py [LINE:135] #INFO     [03.01.2024 14:02:22]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:02:22]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000024E93CAD550>
web_log.py [LINE:211] #INFO     [03.01.2024 14:02:26]  ::1 [01/Mar/2024:14:02:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:02:26]  Update id=925012091 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:02:27]  ::1 [01/Mar/2024:14:02:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:02:27]  Update id=925012092 is handled. Duration 407 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:02:31]  ::1 [01/Mar/2024:14:02:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:02:31]  Update id=925012093 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:02:37]  ::1 [01/Mar/2024:14:02:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:02:38]  Update id=925012094 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:02:42]  ::1 [01/Mar/2024:14:02:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:02:42]  Update id=925012095 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:03:32]  ::1 [01/Mar/2024:14:03:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:03:32]  Update id=925012096 is handled. Duration 422 ms by bot id=5646878393
__main__.py [LINE:135] #INFO     [03.01.2024 14:03:52]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:03:52]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000020C44BDD750>
web_log.py [LINE:211] #INFO     [03.01.2024 14:04:47]  ::1 [01/Mar/2024:14:04:47 +0200] "OPTIONS /payment-confirm HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 14:04:47]  ::1 [01/Mar/2024:14:04:47 +0200] "POST /payment-confirm HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 14:25:54]  ::1 [01/Mar/2024:14:25:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:25:54]  Update id=925012097 is handled. Duration 280 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:25:56]  ::1 [01/Mar/2024:14:25:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:25:56]  Update id=925012098 is handled. Duration 500 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:26:07]  ::1 [01/Mar/2024:14:26:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:26:08]  Update id=925012099 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:26:13]  ::1 [01/Mar/2024:14:26:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:26:14]  Update id=925012100 is handled. Duration 563 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:26:17]  ::1 [01/Mar/2024:14:26:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:26:17]  Update id=925012101 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:26:20]  ::1 [01/Mar/2024:14:26:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:26:21]  Update id=925012102 is handled. Duration 563 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:21]  ::1 [01/Mar/2024:14:38:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:21]  Update id=925012103 is handled. Duration 342 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:23]  ::1 [01/Mar/2024:14:38:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:24]  Update id=925012104 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:25]  ::1 [01/Mar/2024:14:38:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:25]  Update id=925012105 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:26]  ::1 [01/Mar/2024:14:38:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:27]  Update id=925012106 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:28]  ::1 [01/Mar/2024:14:38:28 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:28]  Update id=925012107 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:29]  ::1 [01/Mar/2024:14:38:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:29]  Update id=925012108 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:30]  ::1 [01/Mar/2024:14:38:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:30]  Update id=925012109 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:38:30]  Task exception was never retrieved
future: <Task finished name='Task-92' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:30]  ::1 [01/Mar/2024:14:38:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:30]  Update id=925012110 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:33]  ::1 [01/Mar/2024:14:38:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:33]  Update id=925012111 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:34]  ::1 [01/Mar/2024:14:38:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:34]  Update id=925012112 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:34]  ::1 [01/Mar/2024:14:38:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:34]  Update id=925012113 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:38:34]  Task exception was never retrieved
future: <Task finished name='Task-115' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:36]  ::1 [01/Mar/2024:14:38:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:36]  ::1 [01/Mar/2024:14:38:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:36]  Update id=925012114 is handled. Duration 438 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:37]  Update id=925012115 is handled. Duration 452 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:37]  ::1 [01/Mar/2024:14:38:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:37]  Update id=925012116 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:38]  ::1 [01/Mar/2024:14:38:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:38]  Update id=925012117 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:38]  ::1 [01/Mar/2024:14:38:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:39]  ::1 [01/Mar/2024:14:38:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:39]  Update id=925012118 is handled. Duration 358 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:39]  Update id=925012119 is not handled. Duration 125 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:38:39]  Task exception was never retrieved
future: <Task finished name='Task-149' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:39]  ::1 [01/Mar/2024:14:38:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:40]  Update id=925012120 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:40]  ::1 [01/Mar/2024:14:38:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:40]  Update id=925012121 is handled. Duration 295 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:43]  ::1 [01/Mar/2024:14:38:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:43]  Update id=925012122 is handled. Duration 264 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:44]  ::1 [01/Mar/2024:14:38:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:44]  Update id=925012123 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:46]  ::1 [01/Mar/2024:14:38:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:46]  Update id=925012124 is handled. Duration 296 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:48]  ::1 [01/Mar/2024:14:38:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:48]  Update id=925012125 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:49]  ::1 [01/Mar/2024:14:38:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:49]  Update id=925012126 is not handled. Duration 61 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:38:49]  Task exception was never retrieved
future: <Task finished name='Task-192' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:51]  ::1 [01/Mar/2024:14:38:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:51]  Update id=925012127 is handled. Duration 530 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:38:52]  ::1 [01/Mar/2024:14:38:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:38:52]  Update id=925012128 is not handled. Duration 46 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:38:52]  Task exception was never retrieved
future: <Task finished name='Task-203' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:02]  ::1 [01/Mar/2024:14:39:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:03]  Update id=925012129 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:04]  ::1 [01/Mar/2024:14:39:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:04]  Update id=925012130 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:07]  ::1 [01/Mar/2024:14:39:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:07]  ::1 [01/Mar/2024:14:39:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:07]  Update id=925012131 is handled. Duration 250 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:07]  Update id=925012132 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:08]  ::1 [01/Mar/2024:14:39:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:08]  Update id=925012133 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:11]  ::1 [01/Mar/2024:14:39:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:11]  Update id=925012134 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:13]  ::1 [01/Mar/2024:14:39:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:13]  Update id=925012135 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:13]  ::1 [01/Mar/2024:14:39:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:13]  Update id=925012136 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:18]  ::1 [01/Mar/2024:14:39:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:20]  Update id=925012137 is handled. Duration 1375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:26]  ::1 [01/Mar/2024:14:39:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:26]  Update id=925012138 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:27]  ::1 [01/Mar/2024:14:39:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:27]  Update id=925012139 is not handled. Duration 61 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:39:27]  Task exception was never retrieved
future: <Task finished name='Task-269' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_log.py [LINE:211] #INFO     [03.01.2024 14:39:27]  ::1 [01/Mar/2024:14:39:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:39:28]  Update id=925012140 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:18]  ::1 [01/Mar/2024:14:41:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:18]  Update id=925012141 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:19]  ::1 [01/Mar/2024:14:41:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:19]  Update id=925012142 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:21]  ::1 [01/Mar/2024:14:41:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:21]  Update id=925012143 is handled. Duration 437 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:23]  ::1 [01/Mar/2024:14:41:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:23]  Update id=925012144 is handled. Duration 343 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:24]  ::1 [01/Mar/2024:14:41:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:24]  Update id=925012145 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:25]  ::1 [01/Mar/2024:14:41:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:25]  Update id=925012146 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:37]  ::1 [01/Mar/2024:14:41:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:37]  Update id=925012147 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:38]  ::1 [01/Mar/2024:14:41:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:38]  Update id=925012148 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:39]  ::1 [01/Mar/2024:14:41:39 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:39]  Update id=925012149 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:46]  ::1 [01/Mar/2024:14:41:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:46]  Update id=925012150 is handled. Duration 139 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:47]  ::1 [01/Mar/2024:14:41:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:47]  Update id=925012151 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:50]  ::1 [01/Mar/2024:14:41:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:51]  Update id=925012152 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:52]  ::1 [01/Mar/2024:14:41:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:52]  Update id=925012153 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:54]  ::1 [01/Mar/2024:14:41:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:54]  Update id=925012154 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:41:55]  ::1 [01/Mar/2024:14:41:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:41:56]  Update id=925012155 is handled. Duration 327 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:12]  ::1 [01/Mar/2024:14:42:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:13]  Update id=925012156 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:15]  ::1 [01/Mar/2024:14:42:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:15]  Update id=925012157 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:15]  ::1 [01/Mar/2024:14:42:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:15]  Update id=925012158 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:16]  ::1 [01/Mar/2024:14:42:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:16]  Update id=925012159 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:17]  ::1 [01/Mar/2024:14:42:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:17]  Update id=925012160 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:18]  ::1 [01/Mar/2024:14:42:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:18]  Update id=925012161 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:18]  ::1 [01/Mar/2024:14:42:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:18]  Update id=925012162 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:19]  ::1 [01/Mar/2024:14:42:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:19]  Update id=925012163 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:20]  ::1 [01/Mar/2024:14:42:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:20]  Update id=925012164 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:42:20]  ::1 [01/Mar/2024:14:42:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:42:20]  Update id=925012165 is handled. Duration 329 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:53:30]  ::1 [01/Mar/2024:14:53:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:53:31]  Update id=925012166 is handled. Duration 327 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:53:31]  ::1 [01/Mar/2024:14:53:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:53:31]  Update id=925012167 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:53:33]  ::1 [01/Mar/2024:14:53:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:53:33]  Update id=925012168 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:53:34]  ::1 [01/Mar/2024:14:53:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:53:34]  Update id=925012169 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:54:03]  ::1 [01/Mar/2024:14:54:03 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 14:54:03]  ::1 [01/Mar/2024:14:54:03 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 14:54:08]  ::1 [01/Mar/2024:14:54:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:54:08]  Update id=925012170 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:54:14]  ::1 [01/Mar/2024:14:54:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:54:14]  Update id=925012171 is handled. Duration 125 ms by bot id=5646878393
__main__.py [LINE:135] #INFO     [03.01.2024 14:54:44]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 14:54:45]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000188B1627150>
web_log.py [LINE:211] #INFO     [03.01.2024 14:58:38]  ::1 [01/Mar/2024:14:58:38 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 14:58:38]  Update id=925012172 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 14:58:46]  ::1 [01/Mar/2024:14:58:46 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:09:55]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:16]  ::1 [01/Mar/2024:15:10:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:17]  Update id=925012173 is handled. Duration 561 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:18]  ::1 [01/Mar/2024:15:10:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:18]  Update id=925012174 is handled. Duration 407 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:22]  ::1 [01/Mar/2024:15:10:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:22]  Update id=925012175 is handled. Duration 233 ms by bot id=5646878393
getters.py [LINE:24] #ERROR    [03.01.2024 15:10:22]  Payment type is empty user-id:387375605
window.py [LINE:111] #ERROR    [03.01.2024 15:10:22]  Cannot get window data for state <State 'TopUpOperations:select_pament_method'>
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:10:22]  Task exception was never retrieved
future: <Task finished name='Task-27' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=ValueError('Payment type is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 20, in handle_update
    await dialog_manager.start(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\purchase_menu\getters.py", line 25, in get_price
    raise ValueError('Payment type is empty')
ValueError: Payment type is empty
__main__.py [LINE:136] #INFO     [03.01.2024 15:10:42]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:53]  ::1 [01/Mar/2024:15:10:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:53]  Update id=925012176 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:53]  ::1 [01/Mar/2024:15:10:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:54]  Update id=925012177 is handled. Duration 187 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:10:56]  ::1 [01/Mar/2024:15:10:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:10:56]  Update id=925012178 is handled. Duration 218 ms by bot id=5646878393
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:11:05]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['Api']):
                                                    ~~~~~~^^^^^^^
KeyError: 'Api'
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:05]  ::1 [01/Mar/2024:15:11:05 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:11:08]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['Api']):
                                                    ~~~~~~^^^^^^^
KeyError: 'Api'
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:08]  ::1 [01/Mar/2024:15:11:08 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:11:13]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['Api']):
                                                    ~~~~~~^^^^^^^
KeyError: 'Api'
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:13]  ::1 [01/Mar/2024:15:11:13 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:11:22]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['Api']):
                                                    ~~~~~~^^^^^^^
KeyError: 'Api'
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:22]  ::1 [01/Mar/2024:15:11:22 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:11:39]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['Api']):
                                                    ~~~~~~^^^^^^^
KeyError: 'Api'
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:39]  ::1 [01/Mar/2024:15:11:39 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:11:43]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:11:43]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001BB9DA69ED0>
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:50]  ::1 [01/Mar/2024:15:11:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:11:51]  Update id=925012179 is handled. Duration 420 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:52]  ::1 [01/Mar/2024:15:11:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:11:53]  Update id=925012180 is handled. Duration 264 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:53]  ::1 [01/Mar/2024:15:11:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:11:54]  Update id=925012181 is handled. Duration 530 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:11:57]  ::1 [01/Mar/2024:15:11:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:11:57]  Update id=925012182 is handled. Duration 233 ms by bot id=5646878393
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:12:03]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['crypto-pay-api-signature    ']):
                                                    ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto-pay-api-signature    '
web_log.py [LINE:211] #INFO     [03.01.2024 15:12:03]  ::1 [01/Mar/2024:15:12:03 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:12:06]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['crypto-pay-api-signature    ']):
                                                    ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto-pay-api-signature    '
web_log.py [LINE:211] #INFO     [03.01.2024 15:12:06]  ::1 [01/Mar/2024:15:12:06 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:12:11]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['crypto-pay-api-signature    ']):
                                                    ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto-pay-api-signature    '
web_log.py [LINE:211] #INFO     [03.01.2024 15:12:11]  ::1 [01/Mar/2024:15:12:11 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:12:12]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not check_signature(crypto_bot_client, data, header['crypto-pay-api-signature    ']):
                                                    ~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'crypto-pay-api-signature    '
web_log.py [LINE:211] #INFO     [03.01.2024 15:12:12]  ::1 [01/Mar/2024:15:12:12 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:12:13]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:12:13]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001A8114D9DD0>
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:12:20]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 76, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, data['name'], int(data['lastDigits']),
                                                       ~~~~^^^^^^^^
KeyError: 'name'
web_log.py [LINE:211] #INFO     [03.01.2024 15:12:20]  ::1 [01/Mar/2024:15:12:20 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:12:27]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:12:27]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000016F5F668990>
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:12:27]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x0000016F5F5EB380>, 352720.812)]']
connector: <aiohttp.connector.TCPConnector object at 0x0000016F5F3F1250>
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:22]  ::1 [01/Mar/2024:15:14:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:14:23]  Update id=925012183 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:23]  ::1 [01/Mar/2024:15:14:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:14:24]  Update id=925012184 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:24]  ::1 [01/Mar/2024:15:14:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:14:24]  Update id=925012185 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:34]  ::1 [01/Mar/2024:15:14:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:14:34]  Update id=925012186 is handled. Duration 217 ms by bot id=5646878393
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:14:41]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 78, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, amount=228, payment_type=PaymentMethods.CRYPTOPAY)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 45, in add_topup_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 186, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1622, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 714, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 314, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1424, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 865, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 910, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5696, in visit_insert
    crud_params_struct = crud._get_crud_params(
                         ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\crud.py", line 335, in _get_crud_params
    raise exc.CompileError(
sqlalchemy.exc.CompileError: Unconsumed column names: payment_type
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:41]  ::1 [01/Mar/2024:15:14:41 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:14:44]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 78, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, amount=228, payment_type=PaymentMethods.CRYPTOPAY)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 45, in add_topup_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 186, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1622, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 714, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 314, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1424, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 865, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 910, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5696, in visit_insert
    crud_params_struct = crud._get_crud_params(
                         ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\crud.py", line 335, in _get_crud_params
    raise exc.CompileError(
sqlalchemy.exc.CompileError: Unconsumed column names: payment_type
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:44]  ::1 [01/Mar/2024:15:14:44 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:14:49]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 78, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, amount=228, payment_type=PaymentMethods.CRYPTOPAY)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 45, in add_topup_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 186, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1622, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 714, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 314, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1424, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 865, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 910, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5696, in visit_insert
    crud_params_struct = crud._get_crud_params(
                         ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\crud.py", line 335, in _get_crud_params
    raise exc.CompileError(
sqlalchemy.exc.CompileError: Unconsumed column names: payment_type
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:49]  ::1 [01/Mar/2024:15:14:49 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:14:58]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 78, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, amount=228, payment_type=PaymentMethods.CRYPTOPAY)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 45, in add_topup_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 186, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1622, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 714, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 314, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1424, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 865, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 910, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5696, in visit_insert
    crud_params_struct = crud._get_crud_params(
                         ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\crud.py", line 335, in _get_crud_params
    raise exc.CompileError(
sqlalchemy.exc.CompileError: Unconsumed column names: payment_type
web_log.py [LINE:211] #INFO     [03.01.2024 15:14:58]  ::1 [01/Mar/2024:15:14:58 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:15:08]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:15:08]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x0000027BC42C54D0>
web_log.py [LINE:211] #INFO     [03.01.2024 15:16:32]  ::1 [01/Mar/2024:15:16:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:16:32]  Update id=925012187 is handled. Duration 313 ms by bot id=5646878393
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:16:53]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 538, in _prepare_and_execute
    self._rows = await prepared_stmt.fetch(*parameters)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 241, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\prepared_stmt.py", line 230, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 207, in bind_execute
asyncpg.exceptions.NotNullViolationError: null значення в стовпці "ФИО" відношення "top_up_requests" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, cryptopay, null, null, 1, completed_by_cryptobot).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "ФИО" відношення "top_up_requests" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, cryptopay, null, null, 1, completed_by_cryptobot).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 76, in handle_cryptopay_updates
    await repo.payment_repo.add_topup_request(user_id, amount=int(data['payload']['amount']), payment_method=PaymentMethods.CRYPTOPAY)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 45, in add_topup_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null значення в стовпці "ФИО" відношення "top_up_requests" порушує not-null обмеження
DETAIL:  Помилковий рядок містить (1, 387375605, cryptopay, null, null, 1, completed_by_cryptobot).
[SQL: INSERT INTO top_up_requests ("ID пользователя", "Тип пополнения", "ФИО", "Последние 4 цифры карты", "Сумма пополнения", "Статус запроса") VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::FLOAT, $6::VARCHAR) ON CONFLICT DO NOTHING RETURNING top_up_requests.id]
[parameters: (387375605, <PaymentMethods.CRYPTOPAY: 'cryptopay'>, None, None, 1, <TopUpStatus.COMPLETED_BY_CRYPTOBOT: 'completed_by_cryptobot'>)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
web_log.py [LINE:211] #INFO     [03.01.2024 15:16:53]  ::1 [01/Mar/2024:15:16:53 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:16:58]  Bot stopped!
__main__.py [LINE:136] #INFO     [03.01.2024 15:22:59]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:22:59]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000179B0AF7E10>
web_log.py [LINE:211] #INFO     [03.01.2024 15:23:36]  ::1 [01/Mar/2024:15:23:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:23:36]  Update id=925012188 is handled. Duration 157 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:23:37]  ::1 [01/Mar/2024:15:23:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:23:37]  Update id=925012189 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:23:41]  ::1 [01/Mar/2024:15:23:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:23:41]  Update id=925012190 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:23:48]  ::1 [01/Mar/2024:15:23:48 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:23:48]  Update id=925012191 is handled. Duration 77 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:10]  ::1 [01/Mar/2024:15:24:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:24:11]  Update id=925012192 is handled. Duration 202 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:17]  ::1 [01/Mar/2024:15:24:17 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:24:31]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:36]  ::1 [01/Mar/2024:15:24:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:24:37]  Update id=925012193 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:37]  ::1 [01/Mar/2024:15:24:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:24:37]  Update id=925012194 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:24:37]  Task exception was never retrieved
future: <Task finished name='Task-18' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:24:44]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:44]  ::1 [01/Mar/2024:15:24:44 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_log.py [LINE:211] #INFO     [03.01.2024 15:24:45]  ::1 [01/Mar/2024:15:24:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:24:45]  Update id=925012195 is handled. Duration 311 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:24:58]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:05]  ::1 [01/Mar/2024:15:25:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:06]  Update id=925012196 is handled. Duration 358 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:07]  ::1 [01/Mar/2024:15:25:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:07]  Update id=925012197 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:08]  ::1 [01/Mar/2024:15:25:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:08]  Update id=925012198 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:10]  ::1 [01/Mar/2024:15:25:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:10]  Update id=925012199 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:10]  ::1 [01/Mar/2024:15:25:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:11]  Update id=925012200 is handled. Duration 170 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:11]  ::1 [01/Mar/2024:15:25:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:11]  Update id=925012201 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:21]  ::1 [01/Mar/2024:15:25:21 +0200] "OPTIONS /traffic-requirements HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:22]  ::1 [01/Mar/2024:15:25:21 +0200] "POST /traffic-requirements HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:23]  ::1 [01/Mar/2024:15:25:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:23]  Update id=925012202 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:26]  ::1 [01/Mar/2024:15:25:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:25:26]  Update id=925012203 is handled. Duration 94 ms by bot id=5646878393
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:25:32]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:32]  ::1 [01/Mar/2024:15:25:32 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:25:35]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:35]  ::1 [01/Mar/2024:15:25:35 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:25:40]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:40]  ::1 [01/Mar/2024:15:25:40 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:25:42]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:42]  ::1 [01/Mar/2024:15:25:42 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 15:25:49]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 67, in handle_cryptopay_updates
    if not await check_signature(crypto_bot_client, data, header['Crypto-Pay-Api-Signature']):
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\services\cryptopay\requests.py", line 22, in check_signature
    return client.check_signature(body_text=body_text, crypto_pay_signature=crypto_pay_signature)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiocryptopay\api.py", line 464, in check_signature
    key=token, msg=body_text.encode("UTF-8"), digestmod=sha256
                   ^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'encode'
web_log.py [LINE:211] #INFO     [03.01.2024 15:25:49]  ::1 [01/Mar/2024:15:25:49 +0200] "POST /crypto_bot_webhook HTTP/1.1" 500 245 "-" "axios/0.21.4"
__main__.py [LINE:136] #INFO     [03.01.2024 15:25:51]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:25:51]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000205F5665550>
web_log.py [LINE:211] #INFO     [03.01.2024 15:26:54]  ::1 [01/Mar/2024:15:26:54 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:26:54]  Update id=925012204 is handled. Duration 311 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:27:00]  ::1 [01/Mar/2024:15:27:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:27:00]  Update id=925012205 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:27:07]  ::1 [01/Mar/2024:15:27:07 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
web_log.py [LINE:211] #INFO     [03.01.2024 15:27:18]  ::1 [01/Mar/2024:15:27:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:27:18]  Update id=925012206 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:27:44]  ::1 [01/Mar/2024:15:27:44 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:27:44]  Task exception was never retrieved
future: <Task finished name='Task-49' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=ValueError("Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 28, in handle_update
    await dialog_manager.switch_to(state=event.new_state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 299, in switch_to
    raise ValueError(
ValueError: Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>
web_log.py [LINE:211] #INFO     [03.01.2024 15:28:20]  ::1 [01/Mar/2024:15:28:20 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:28:20]  Task exception was never retrieved
future: <Task finished name='Task-59' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=ValueError("Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 28, in handle_update
    await dialog_manager.switch_to(state=event.new_state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 299, in switch_to
    raise ValueError(
ValueError: Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>
web_log.py [LINE:211] #INFO     [03.01.2024 15:29:45]  ::1 [01/Mar/2024:15:29:45 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:29:45]  Task exception was never retrieved
future: <Task finished name='Task-69' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=ValueError("Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 28, in handle_update
    await dialog_manager.switch_to(state=event.new_state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 299, in switch_to
    raise ValueError(
ValueError: Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>
web_log.py [LINE:211] #INFO     [03.01.2024 15:30:43]  ::1 [01/Mar/2024:15:30:43 +0200] "POST /crypto_bot_webhook HTTP/1.1" 200 170 "-" "axios/0.21.4"
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:30:43]  Task exception was never retrieved
future: <Task finished name='Task-79' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=ValueError("Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 28, in handle_update
    await dialog_manager.switch_to(state=event.new_state)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 299, in switch_to
    raise ValueError(
ValueError: Cannot switch to another state group. Current state: <State 'MainMenu:select_action'>, asked for <State 'TopUpOperations:data_saved'>
__main__.py [LINE:136] #INFO     [03.01.2024 15:34:47]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:34:48]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000223E8D54350>
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:53]  ::1 [01/Mar/2024:15:34:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:53]  ::1 [01/Mar/2024:15:34:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:53]  Update id=925012207 is handled. Duration 469 ms by bot id=5646878393
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:53]  Update id=925012208 is handled. Duration 342 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:55]  ::1 [01/Mar/2024:15:34:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:55]  Update id=925012209 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:56]  ::1 [01/Mar/2024:15:34:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:57]  Update id=925012210 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:57]  ::1 [01/Mar/2024:15:34:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:57]  Update id=925012211 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:34:58]  ::1 [01/Mar/2024:15:34:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:34:58]  Cannot get window data for state <State 'ChannelPosterAdminMenu:select_channel'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:34:58]  Update id=925012212 is not handled. Duration 14 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:34:58]  Task exception was never retrieved
future: <Task finished name='Task-40' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'Offers' object has no attribute 'channel_title'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 129, in get_offers_with_theme
    'offers': [
              ^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 130, in <listcomp>
    (channel.channel_id, f"{channel.channel_title} - {channel.target_request_amount}") for channel in channels_model
                            ^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'Offers' object has no attribute 'channel_title'
__main__.py [LINE:136] #INFO     [03.01.2024 15:35:15]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:35:20]  ::1 [01/Mar/2024:15:35:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:35:21]  Update id=925012213 is handled. Duration 593 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:35:22]  ::1 [01/Mar/2024:15:35:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:35:22]  Update id=925012214 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:35:22]  ::1 [01/Mar/2024:15:35:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:35:23]  Update id=925012215 is handled. Duration 139 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:35:32]  ::1 [01/Mar/2024:15:35:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:35:32]  Cannot get window data for state <State 'AdminOffers:show_offer_info'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:35:32]  Update id=925012216 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:35:32]  Task exception was never retrieved
future: <Task finished name='Task-30' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'id'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 18, in on_select_offer
    await manager.start(states.AdminOffers.show_offer_info, data=manager.dialog_data)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 24, in get_offer_info
    'offer_id': offer_info.id,
                ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
__main__.py [LINE:136] #INFO     [03.01.2024 15:37:22]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:37:27]  ::1 [01/Mar/2024:15:37:27 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:37:27]  Update id=925012217 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:37:29]  ::1 [01/Mar/2024:15:37:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:37:29]  Update id=925012218 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:37:30]  ::1 [01/Mar/2024:15:37:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:37:30]  Cannot get window data for state <State 'AdminOffers:show_offer_info'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:37:30]  Update id=925012219 is not handled. Duration 15 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:37:30]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'NoneType' object has no attribute 'id'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 73, in process_callback
    return await self._process_item_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 119, in _process_item_callback
    await self.on_click.process_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\selected.py", line 18, in on_select_offer
    await manager.start(states.AdminOffers.show_offer_info, data=manager.dialog_data)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 24, in get_offer_info
    'offer_id': offer_info.id,
                ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'id'
web_log.py [LINE:211] #INFO     [03.01.2024 15:38:02]  ::1 [01/Mar/2024:15:38:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:38:03]  Update id=925012220 is handled. Duration 282 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:38:04]  ::1 [01/Mar/2024:15:38:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:38:04]  Update id=925012221 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:38:05]  ::1 [01/Mar/2024:15:38:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:38:05]  Update id=925012222 is handled. Duration 188 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:38:37]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:38:41]  ::1 [01/Mar/2024:15:38:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:38:41]  Update id=925012223 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:38:42]  ::1 [01/Mar/2024:15:38:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:38:43]  Update id=925012224 is handled. Duration 186 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:39:24]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:29]  ::1 [01/Mar/2024:15:39:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:39:29]  Cannot get window data for state <State 'AdminOffers:select_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:29]  Update id=925012225 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:39:29]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('selected_offer_status')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 11, in get_admin_offers
    admin_offers = await repo.offer_repo.get_offers(status=dialog_manager.start_data['selected_offer_status'])
                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'selected_offer_status'
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:40]  ::1 [01/Mar/2024:15:39:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:41]  Update id=925012226 is handled. Duration 313 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:41]  ::1 [01/Mar/2024:15:39:41 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:42]  Update id=925012227 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:42]  ::1 [01/Mar/2024:15:39:42 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:43]  Update id=925012228 is handled. Duration 217 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:43]  ::1 [01/Mar/2024:15:39:43 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:44]  Update id=925012229 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:44]  ::1 [01/Mar/2024:15:39:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:45]  Update id=925012230 is handled. Duration 311 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:45]  ::1 [01/Mar/2024:15:39:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:46]  Update id=925012231 is handled. Duration 297 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:39:46]  ::1 [01/Mar/2024:15:39:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:39:46]  Cannot get window data for state <State 'AdminOffers:select_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:39:46]  Update id=925012232 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:39:46]  Task exception was never retrieved
future: <Task finished name='Task-52' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('selected_offer_status')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 11, in get_admin_offers
    admin_offers = await repo.offer_repo.get_offers(status=dialog_manager.start_data['selected_offer_status'])
                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'selected_offer_status'
web_log.py [LINE:211] #INFO     [03.01.2024 15:40:23]  ::1 [01/Mar/2024:15:40:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:40:23]  Cannot get window data for state <State 'AdminOffers:select_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:40:23]  Update id=925012233 is not handled. Duration 0 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:40:23]  Task exception was never retrieved
future: <Task finished name='Task-56' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('selected_offer_status')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\channel_admin_menu\getters.py", line 11, in get_admin_offers
    admin_offers = await repo.offer_repo.get_offers(status=dialog_manager.start_data['selected_offer_status'])
                                                           ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'selected_offer_status'
web_log.py [LINE:211] #INFO     [03.01.2024 15:40:24]  ::1 [01/Mar/2024:15:40:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:40:24]  Update id=925012234 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:40:25]  ::1 [01/Mar/2024:15:40:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:40:25]  Update id=925012235 is handled. Duration 203 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:40:26]  ::1 [01/Mar/2024:15:40:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:40:26]  Update id=925012236 is handled. Duration 280 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:40:44]  ::1 [01/Mar/2024:15:40:44 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:40:45]  Update id=925012237 is handled. Duration 531 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:41:01]  ::1 [01/Mar/2024:15:41:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:41:01]  Update id=925012238 is handled. Duration 202 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:42:47]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:42:51]  ::1 [01/Mar/2024:15:42:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:42:52]  Update id=925012239 is handled. Duration 250 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:43:47]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:43:51]  ::1 [01/Mar/2024:15:43:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:43:51]  Update id=925012240 is handled. Duration 233 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:44:08]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:12]  ::1 [01/Mar/2024:15:44:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:13]  Update id=925012241 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:14]  ::1 [01/Mar/2024:15:44:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:14]  Update id=925012242 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:15]  ::1 [01/Mar/2024:15:44:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:15]  Update id=925012243 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:16]  ::1 [01/Mar/2024:15:44:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:16]  Update id=925012244 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:17]  ::1 [01/Mar/2024:15:44:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:17]  Update id=925012245 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:18]  ::1 [01/Mar/2024:15:44:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:19]  Update id=925012246 is handled. Duration 593 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:20]  ::1 [01/Mar/2024:15:44:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:20]  Update id=925012247 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:21]  ::1 [01/Mar/2024:15:44:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:21]  Update id=925012248 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:21]  ::1 [01/Mar/2024:15:44:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:22]  Update id=925012249 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:23]  ::1 [01/Mar/2024:15:44:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:23]  Update id=925012250 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:26]  ::1 [01/Mar/2024:15:44:26 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:26]  Update id=925012251 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:29]  ::1 [01/Mar/2024:15:44:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:29]  Update id=925012252 is handled. Duration 187 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:30]  ::1 [01/Mar/2024:15:44:30 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:30]  Update id=925012253 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:31]  ::1 [01/Mar/2024:15:44:31 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:31]  Update id=925012254 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:32]  ::1 [01/Mar/2024:15:44:32 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:32]  Update id=925012255 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:33]  ::1 [01/Mar/2024:15:44:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:33]  Update id=925012256 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:33]  ::1 [01/Mar/2024:15:44:33 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:33]  Update id=925012257 is handled. Duration 250 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:36]  ::1 [01/Mar/2024:15:44:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:36]  Update id=925012258 is handled. Duration 217 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:40]  ::1 [01/Mar/2024:15:44:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:41]  Update id=925012259 is handled. Duration 329 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:46]  ::1 [01/Mar/2024:15:44:46 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:46]  Update id=925012260 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:49]  ::1 [01/Mar/2024:15:44:49 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:50]  Update id=925012261 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:51]  ::1 [01/Mar/2024:15:44:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:51]  Update id=925012262 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:52]  ::1 [01/Mar/2024:15:44:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:52]  Update id=925012263 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:53]  ::1 [01/Mar/2024:15:44:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:53]  Update id=925012264 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:55]  ::1 [01/Mar/2024:15:44:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:55]  Update id=925012265 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:55]  ::1 [01/Mar/2024:15:44:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:55]  Update id=925012266 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:56]  ::1 [01/Mar/2024:15:44:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:56]  Update id=925012267 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:44:58]  ::1 [01/Mar/2024:15:44:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:44:58]  Update id=925012268 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:45:08]  ::1 [01/Mar/2024:15:45:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:45:08]  Update id=925012269 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:45:09]  ::1 [01/Mar/2024:15:45:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:45:09]  Update id=925012270 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:45:11]  ::1 [01/Mar/2024:15:45:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:45:11]  Update id=925012271 is handled. Duration 108 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:45:15]  ::1 [01/Mar/2024:15:45:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:45:15]  Update id=925012272 is not handled. Duration 47 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:45:15]  Task exception was never retrieved
future: <Task finished name='Task-198' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
__main__.py [LINE:136] #INFO     [03.01.2024 15:46:35]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:46:40]  ::1 [01/Mar/2024:15:46:40 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:46:40]  Update id=925012273 is not handled. Duration 93 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:46:40]  Task exception was never retrieved
future: <Task finished name='Task-12' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=TelegramBadRequest('Telegram server says - Bad Request: message text is empty')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 145, in _callback_handler
    await window.process_callback(cleaned_callback, self, dialog_manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 100, in process_callback
    await self.keyboard.process_callback(callback, dialog, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 79, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 74, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 66, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 36, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 34, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\selected.py", line 17, in on_start_select_offer
    await dialog_manager.start(states.SelectWebMasterOffer.select_category)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 207, in start
    await self._start_normal(state, data, access_settings)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 264, in _start_normal
    await self.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 333, in show
    sent_message = await self.message_manager.show_message(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 186, in show_message
    await self.edit_message_safe(bot, new_message, old_message),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 274, in edit_message_safe
    return await self.edit_message(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 294, in edit_message
    return await self.edit_text(bot, new_message, old_message)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\message_manager.py", line 312, in edit_text
    return await bot.edit_message_text(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 1543, in edit_message_text
    return await self(call, request_timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\bot.py", line 492, in __call__
    return await self.session(self, method, timeout=request_timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 254, in __call__
    return cast(TelegramType, await middleware(bot, method))
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\aiohttp.py", line 178, in make_request
    response = self.check_response(
               ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\client\session\base.py", line 120, in check_response
    raise TelegramBadRequest(method=method, message=description)
aiogram.exceptions.TelegramBadRequest: Telegram server says - Bad Request: message text is empty
__main__.py [LINE:136] #INFO     [03.01.2024 15:47:39]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:47:47]  ::1 [01/Mar/2024:15:47:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:47:48]  Update id=925012274 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:50:56]  ::1 [01/Mar/2024:15:50:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:50:57]  Update id=925012275 is handled. Duration 500 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:50:57]  ::1 [01/Mar/2024:15:50:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:50:58]  Update id=925012276 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:00]  ::1 [01/Mar/2024:15:51:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:00]  Update id=925012277 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:01]  ::1 [01/Mar/2024:15:51:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:01]  Update id=925012278 is handled. Duration 280 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:02]  ::1 [01/Mar/2024:15:51:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:03]  Update id=925012279 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:03]  ::1 [01/Mar/2024:15:51:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:03]  Update id=925012280 is handled. Duration 312 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:04]  ::1 [01/Mar/2024:15:51:04 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:04]  Update id=925012281 is handled. Duration 344 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:05]  ::1 [01/Mar/2024:15:51:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:05]  Update id=925012282 is handled. Duration 203 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:51:46]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:52]  ::1 [01/Mar/2024:15:51:52 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:52]  Update id=925012283 is handled. Duration 391 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:55]  ::1 [01/Mar/2024:15:51:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:55]  Update id=925012284 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:55]  ::1 [01/Mar/2024:15:51:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:55]  Update id=925012285 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:57]  ::1 [01/Mar/2024:15:51:57 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:57]  Update id=925012286 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:58]  ::1 [01/Mar/2024:15:51:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:58]  Update id=925012287 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:58]  ::1 [01/Mar/2024:15:51:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:59]  Update id=925012288 is handled. Duration 155 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:51:59]  ::1 [01/Mar/2024:15:51:59 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:51:59]  Update id=925012289 is handled. Duration 452 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:00]  ::1 [01/Mar/2024:15:52:00 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:00]  Update id=925012290 is handled. Duration 407 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:01]  ::1 [01/Mar/2024:15:52:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:01]  Update id=925012291 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:05]  ::1 [01/Mar/2024:15:52:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:05]  Update id=925012292 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:07]  ::1 [01/Mar/2024:15:52:07 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:07]  Update id=925012293 is handled. Duration 140 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:52:30]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:34]  ::1 [01/Mar/2024:15:52:34 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:34]  Update id=925012294 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:36]  ::1 [01/Mar/2024:15:52:36 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:36]  Update id=925012295 is handled. Duration 202 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:52:37]  ::1 [01/Mar/2024:15:52:37 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:52:37]  Cannot get window data for state <State 'SelectWebMasterOffer:select_webmaster_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:52:37]  Update id=925012296 is not handled. Duration 360 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:52:37]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'str' object has no attribute 'value'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 94, in get_offers
    'source': selected_target_source.value,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
__main__.py [LINE:136] #INFO     [03.01.2024 15:54:04]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:54:09]  ::1 [01/Mar/2024:15:54:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:54:09]  Update id=925012297 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:54:10]  ::1 [01/Mar/2024:15:54:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:54:10]  Update id=925012298 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:54:14]  ::1 [01/Mar/2024:15:54:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:54:14]  Update id=925012299 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:54:16]  ::1 [01/Mar/2024:15:54:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:54:16]  Update id=925012300 is handled. Duration 125 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 15:55:08]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:55:12]  ::1 [01/Mar/2024:15:55:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:55:13]  Update id=925012301 is handled. Duration 422 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:55:13]  ::1 [01/Mar/2024:15:55:13 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:55:13]  Update id=925012302 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:55:15]  ::1 [01/Mar/2024:15:55:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 15:55:15]  Cannot get window data for state <State 'SelectWebMasterOffer:select_webmaster_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:55:15]  Update id=925012303 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:55:15]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=AttributeError("'str' object has no attribute 'value'")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 94, in get_offers
    'source': selected_target_source.value,
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'str' object has no attribute 'value'
__main__.py [LINE:136] #INFO     [03.01.2024 15:56:41]  Bot stopped!
__main__.py [LINE:136] #INFO     [03.01.2024 15:56:57]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:56:57]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000001D640527010>
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:56:57]  Unclosed connector
connections: ['[(<aiohttp.client_proto.ResponseHandler object at 0x000001D6404675B0>, 355388.968)]']
connector: <aiohttp.connector.TCPConnector object at 0x000001D6403BF590>
web_log.py [LINE:211] #INFO     [03.01.2024 15:57:02]  ::1 [01/Mar/2024:15:57:02 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:57:03]  Update id=925012304 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:57:03]  ::1 [01/Mar/2024:15:57:03 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:57:03]  Update id=925012305 is handled. Duration 109 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:57:05]  ::1 [01/Mar/2024:15:57:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:124] #ERROR    [03.01.2024 15:57:05]  Cannot render window for state <State 'SelectWebMasterOffer:select_webmaster_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:57:05]  Update id=925012306 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:57:05]  Task exception was never retrieved
future: <Task finished name='Task-24' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError(None)>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 85, in _render_keyboard
    [
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 86, in <listcomp>
    await self._render_button(pos, item, item, data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 108, in _render_button
    text=await self.text.render_text(data, manager),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\text\base.py", line 26, in render_text
    return await self._render_text(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\text\multi.py", line 54, in _render_text
    return await self.texts[selection].render_text(data, manager)
                 ~~~~~~~~~~^^^^^^^^^^^
KeyError: None
__main__.py [LINE:136] #INFO     [03.01.2024 15:58:14]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 15:58:19]  ::1 [01/Mar/2024:15:58:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:58:19]  Update id=925012307 is handled. Duration 281 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:58:20]  ::1 [01/Mar/2024:15:58:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:58:20]  Update id=925012308 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:58:21]  ::1 [01/Mar/2024:15:58:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:58:21]  Update id=925012309 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:58:22]  ::1 [01/Mar/2024:15:58:22 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:58:22]  Update id=925012310 is handled. Duration 265 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 15:58:23]  ::1 [01/Mar/2024:15:58:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:124] #ERROR    [03.01.2024 15:58:23]  Cannot render window for state <State 'SelectWebMasterOffer:select_webmaster_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 15:58:23]  Update id=925012311 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 15:58:23]  Task exception was never retrieved
future: <Task finished name='Task-36' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError(None)>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 118, in render
    reply_markup=await self.render_kbd(current_data, manager),
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 75, in render_kbd
    keyboard = await self.keyboard.render_keyboard(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 101, in _render_keyboard
    keyboard = await self._render_contents(data, manager)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\scrolling_group.py", line 43, in _render_contents
    return await super()._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 41, in _render_keyboard
    b_kbd = await b.render_keyboard(data, manager)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 31, in render_keyboard
    return await self._render_keyboard(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 85, in _render_keyboard
    [
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 86, in <listcomp>
    await self._render_button(pos, item, item, data, manager)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\select.py", line 108, in _render_button
    text=await self.text.render_text(data, manager),
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\text\base.py", line 26, in render_text
    return await self._render_text(data, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\text\multi.py", line 54, in _render_text
    return await self.texts[selection].render_text(data, manager)
                 ~~~~~~~~~~^^^^^^^^^^^
KeyError: None
__main__.py [LINE:136] #INFO     [03.01.2024 16:00:10]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:16]  ::1 [01/Mar/2024:16:00:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:16]  Update id=925012312 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:17]  ::1 [01/Mar/2024:16:00:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:17]  Update id=925012313 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:18]  ::1 [01/Mar/2024:16:00:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:18]  Update id=925012314 is handled. Duration 140 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:20]  ::1 [01/Mar/2024:16:00:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:20]  Update id=925012315 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:23]  ::1 [01/Mar/2024:16:00:23 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:23]  Update id=925012316 is handled. Duration 203 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:00:52]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:00:58]  ::1 [01/Mar/2024:16:00:58 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:00:59]  Update id=925012317 is handled. Duration 186 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:01:01]  ::1 [01/Mar/2024:16:01:01 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:01:01]  Update id=925012318 is handled. Duration 358 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:01:14]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:01:18]  ::1 [01/Mar/2024:16:01:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:01:18]  Update id=925012319 is handled. Duration 170 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:01:19]  ::1 [01/Mar/2024:16:01:19 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:01:19]  Update id=925012320 is handled. Duration 157 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:01:44]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:01:51]  ::1 [01/Mar/2024:16:01:51 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:01:52]  Update id=925012321 is handled. Duration 717 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:01:53]  ::1 [01/Mar/2024:16:01:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
window.py [LINE:111] #ERROR    [03.01.2024 16:01:53]  Cannot get window data for state <State 'SelectWebMasterOffer:select_webmaster_offer'>
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:01:53]  Update id=925012322 is not handled. Duration 16 ms by bot id=5646878393
base_events.py [LINE:1757] #ERROR    [03.01.2024 16:01:53]  Task exception was never retrieved
future: <Task finished name='Task-18' coro=<BaseRequestHandler._background_feed_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py:137> exception=KeyError('TargetSource.TG_CHANNEL')>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\webhook\aiohttp_server.py", line 138, in _background_feed_update
    result = await self.dispatcher.feed_raw_update(bot=bot, update=update, **self.data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 189, in feed_raw_update
    return await self.feed_update(bot=bot, update=parsed_update, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 261, in process_callback_query
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 148, in _callback_handler
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    new_message = await window.render(self, manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 109, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\window.py", line 85, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 37, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\dialogs\web_master_menu\getters.py", line 95, in get_offers
    'source': categories_for_zaliv[selected_target_source],
              ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: 'TargetSource.TG_CHANNEL'
__main__.py [LINE:136] #INFO     [03.01.2024 16:02:47]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:02:53]  ::1 [01/Mar/2024:16:02:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:02:53]  Update id=925012323 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:02:55]  ::1 [01/Mar/2024:16:02:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:02:55]  Update id=925012324 is handled. Duration 125 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:02:56]  ::1 [01/Mar/2024:16:02:56 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:02:56]  Update id=925012325 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:05]  ::1 [01/Mar/2024:16:03:05 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:05]  Update id=925012326 is handled. Duration 375 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:06]  ::1 [01/Mar/2024:16:03:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:06]  Update id=925012327 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:08]  ::1 [01/Mar/2024:16:03:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:08]  Update id=925012328 is handled. Duration 469 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:09]  ::1 [01/Mar/2024:16:03:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:09]  Update id=925012329 is handled. Duration 188 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:10]  ::1 [01/Mar/2024:16:03:10 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:10]  Update id=925012330 is handled. Duration 233 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:11]  ::1 [01/Mar/2024:16:03:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:11]  Update id=925012331 is handled. Duration 266 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:12]  ::1 [01/Mar/2024:16:03:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:13]  Update id=925012332 is handled. Duration 468 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:14]  ::1 [01/Mar/2024:16:03:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:14]  Update id=925012333 is handled. Duration 329 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:14]  ::1 [01/Mar/2024:16:03:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:15]  Update id=925012334 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:15]  ::1 [01/Mar/2024:16:03:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:15]  Update id=925012335 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:16]  ::1 [01/Mar/2024:16:03:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:16]  Update id=925012336 is handled. Duration 110 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:21]  ::1 [01/Mar/2024:16:03:21 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:21]  Update id=925012337 is handled. Duration 421 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:50]  ::1 [01/Mar/2024:16:03:50 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:51]  Update id=925012338 is handled. Duration 297 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:53]  ::1 [01/Mar/2024:16:03:53 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:53]  Update id=925012339 is handled. Duration 328 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:03:55]  ::1 [01/Mar/2024:16:03:55 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:03:56]  Update id=925012340 is handled. Duration 172 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:05:00]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:05:06]  ::1 [01/Mar/2024:16:05:06 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:05:06]  Update id=925012341 is handled. Duration 453 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:05:40]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:05:45]  ::1 [01/Mar/2024:16:05:45 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:05:45]  Update id=925012342 is handled. Duration 296 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:05:47]  ::1 [01/Mar/2024:16:05:47 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:05:48]  Update id=925012343 is handled. Duration 156 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:06:02]  Bot stopped!
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:09]  ::1 [01/Mar/2024:16:06:09 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:09]  Update id=925012344 is handled. Duration 296 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:11]  ::1 [01/Mar/2024:16:06:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:11]  Update id=925012345 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:12]  ::1 [01/Mar/2024:16:06:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:12]  Update id=925012346 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:12]  ::1 [01/Mar/2024:16:06:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:13]  Update id=925012347 is handled. Duration 139 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:14]  ::1 [01/Mar/2024:16:06:14 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:14]  Update id=925012348 is handled. Duration 187 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:15]  ::1 [01/Mar/2024:16:06:15 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:15]  Update id=925012349 is handled. Duration 171 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:16]  ::1 [01/Mar/2024:16:06:16 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:16]  Update id=925012350 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:17]  ::1 [01/Mar/2024:16:06:17 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:17]  Update id=925012351 is handled. Duration 156 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:18]  ::1 [01/Mar/2024:16:06:18 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:18]  Update id=925012352 is handled. Duration 280 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:20]  ::1 [01/Mar/2024:16:06:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:20]  Update id=925012353 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:06:24]  ::1 [01/Mar/2024:16:06:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:06:24]  Update id=925012354 is handled. Duration 218 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:08:08]  ::1 [01/Mar/2024:16:08:08 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:08:08]  Update id=925012355 is handled. Duration 234 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:09:58]  ::1 [01/Mar/2024:16:09:58 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:09:58]  ::1 [01/Mar/2024:16:09:58 +0200] "POST /withdraw-request HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:11:43]  ::1 [01/Mar/2024:16:11:43 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:11:43]  ::1 [01/Mar/2024:16:11:43 +0200] "POST /withdraw-request HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:136] #INFO     [03.01.2024 16:17:54]  Bot stopped!
__main__.py [LINE:136] #INFO     [03.01.2024 16:18:17]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 16:18:17]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000244726B01D0>
web_log.py [LINE:211] #INFO     [03.01.2024 16:18:29]  ::1 [01/Mar/2024:16:18:29 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_protocol.py [LINE:421] #ERROR    [03.01.2024 16:18:30]  Error handling request
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 514, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 765, in _prepare
    prepared_stmt = await self._connection.prepare(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 636, in prepare
    return await self._prepare(
           ^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 654, in _prepare
    stmt = await self._get_statement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\asyncpg\connection.py", line 433, in _get_statement
    statement = await self._protocol.prepare(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg\protocol\protocol.pyx", line 166, in prepare
asyncpg.exceptions.UndefinedColumnError: стовпець "Криптовалютный адрес" зв'язку "withdraw_requests" не існує

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець "Криптовалютный адрес" зв'язку "withdraw_requests" не існує

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_protocol.py", line 452, in _handle_request
    resp = await request_handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiohttp\web_app.py", line 543, in _handle
    resp = await handler(request)
           ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\handlers\other_handlers.py", line 111, in handle_withdraw_request
    await repo.payment_repo.add_withdraw_request(user_id, amount, data['paymentType']['name'], bank_name, card_number, crypto_adress)
  File "E:\PythonProjects\Arbitrix\bot\db\requests\payment_requests.py", line 21, in add_withdraw_request
    await self.session.execute(query)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 452, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 197, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2306, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2191, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1276, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1408, in execute
    return meth(
           ^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 513, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1839, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1979, in _exec_single_context
    self._handle_dbapi_exception(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2335, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1960, in _exec_single_context
    self.dialect.do_execute(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 924, in do_execute
    cursor.execute(statement, parameters)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 572, in execute
    self._adapt_connection.await_(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 127, in await_only
    return current.driver.switch(awaitable)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 192, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 550, in _prepare_and_execute
    self._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 501, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 789, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: стовпець "Криптовалютный адрес" зв'язку "withdraw_requests" не існує
[SQL: INSERT INTO withdraw_requests ("ID пользователя", "Тип выплаты", "Название банка", "Криптовалютный адрес", "Сумма выплаты", "Статус запроса") VALUES ($1::BIGINT, $2::VARCHAR, $3::VARCHAR, $4::VARCHAR, $5::FLOAT, $6::withdrawstatus) ON CONFLICT DO NOTHING RETURNING withdraw_requests.id]
[parameters: (387375605, 'Банківська картка', 'test', None, 12322, 'ACTIVE')]
(Background on this error at: https://sqlalche.me/e/20/f405)
web_log.py [LINE:211] #INFO     [03.01.2024 16:18:30]  ::1 [01/Mar/2024:16:18:30 +0200] "POST /withdraw-request HTTP/1.1" 500 418 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
__main__.py [LINE:136] #INFO     [03.01.2024 16:18:44]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 16:18:44]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x00000224B3F74990>
web_log.py [LINE:211] #INFO     [03.01.2024 16:18:54]  ::1 [01/Mar/2024:16:18:54 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:18:55]  ::1 [01/Mar/2024:16:18:54 +0200] "POST /withdraw-request HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
base_events.py [LINE:1757] #ERROR    [03.01.2024 16:18:55]  Task exception was never retrieved
future: <Task finished name='Task-14' coro=<Updater._process_update() done, defined at E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py:25> exception=UnregisteredWindowError("No window found for `<State 'WithdrawFunds:save_withdraw_data'>` Current state group is `WithdrawFunds`")>
Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'WithdrawFunds:save_withdraw_data'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\updater.py", line 27, in _process_update
    await self.dp.propagate_event(
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Solarmove\AppData\Local\Programs\Python\Python311\Lib\contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 231, in lock
    yield None
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 95, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\db.py", line 22, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\bot\middlewares\i18n_dialog.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 129, in propagate_event
    return await _wrapped(event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 156, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 128, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 236, in process_aiogd_update
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 77, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 123, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 148, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 52, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 275, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\update_handler.py", line 29, in handle_update
    await dialog_manager.show()
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 324, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "E:\PythonProjects\Arbitrix\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'WithdrawFunds:save_withdraw_data'>` Current state group is `WithdrawFunds`
__main__.py [LINE:136] #INFO     [03.01.2024 16:19:06]  Bot stopped!
base_events.py [LINE:1757] #ERROR    [03.01.2024 16:19:06]  Unclosed client session
client_session: <aiohttp.client.ClientSession object at 0x000002089AE1BF50>
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:11]  ::1 [01/Mar/2024:16:19:11 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:11]  Update id=925012356 is handled. Duration 452 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:12]  ::1 [01/Mar/2024:16:19:12 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:13]  Update id=925012357 is handled. Duration 172 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:18]  ::1 [01/Mar/2024:16:19:18 +0200] "OPTIONS /withdraw-request HTTP/1.1" 200 360 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:19]  ::1 [01/Mar/2024:16:19:18 +0200] "POST /withdraw-request HTTP/1.1" 200 332 "https://webapp-forms.netlify.app/" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0.0.0 Safari/537.36 Edg/122.0.0.0"
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:20]  ::1 [01/Mar/2024:16:19:20 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:20]  Update id=925012358 is handled. Duration 141 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:24]  ::1 [01/Mar/2024:16:19:24 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:25]  Update id=925012359 is handled. Duration 609 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:25]  ::1 [01/Mar/2024:16:19:25 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:26]  Update id=925012360 is handled. Duration 608 ms by bot id=5646878393
web_log.py [LINE:211] #INFO     [03.01.2024 16:19:29]  ::1 [01/Mar/2024:16:19:29 +0200] "POST /webhook HTTP/1.1" 200 159 "-" "-"
dispatcher.py [LINE:172] #INFO     [03.01.2024 16:19:29]  Update id=925012361 is handled. Duration 125 ms by bot id=5646878393
__main__.py [LINE:136] #INFO     [03.01.2024 16:42:53]  Bot stopped!
